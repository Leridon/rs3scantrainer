/*! For license information please see index.bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.testpackage=t():e.TEST=t()}("undefined"!=typeof self?self:this,(()=>(()=>{var e={4891:function(e){var t,i;"undefined"!=typeof self&&self,e.exports=(t=[e=>{e.exports={chars:[{width:4,bonus:40,chr:"!",pixels:[1,1,238,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,10,238],secondary:!1},{width:5,bonus:30,chr:'"',pixels:[1,0,187,1,1,255,2,0,153,2,1,153,3,0,255,3,1,187],secondary:!0},{width:10,bonus:160,chr:"#",pixels:[1,4,238,1,8,255,2,4,255,2,8,255,2,9,221,2,10,255,3,1,153,3,2,187,3,3,221,3,4,255,3,5,255,3,6,204,3,7,170,3,8,255,4,1,153,4,4,255,4,8,255,5,4,255,5,8,255,5,9,204,5,10,255,6,2,187,6,3,221,6,4,255,6,5,255,6,6,221,6,7,187,6,8,255,7,1,153,7,4,255,7,8,255,8,4,255],secondary:!1},{width:8,bonus:105,chr:"$",pixels:[1,2,221,1,3,255,1,4,255,1,9,238,2,1,221,2,2,153,2,5,255,2,10,238,3,0,255,3,1,255,3,5,187,3,6,170,3,10,255,3,11,255,4,1,238,4,6,255,4,10,221,5,2,153,5,7,255,5,8,255,5,9,238],secondary:!1},{width:10,bonus:125,chr:"%",pixels:[1,2,255,1,3,255,1,10,187,2,1,255,2,4,255,2,9,238,3,2,255,3,3,255,3,7,170,3,8,221,4,6,238,5,4,153,5,5,238,5,8,255,5,9,255,6,3,238,6,4,170,6,7,255,6,10,255,7,2,238,7,7,255,7,10,255,8,1,187,8,8,255,8,9,255],secondary:!1},{width:9,bonus:150,chr:"&",pixels:[1,2,204,1,3,255,1,4,204,1,6,204,1,7,255,1,8,255,1,9,204,2,1,204,2,2,170,2,4,153,2,5,255,2,6,187,2,9,187,2,10,187,3,1,255,3,5,255,3,10,255,4,1,255,4,5,255,4,10,255,5,5,255,5,9,204,5,10,170,6,4,255,6,5,255,6,6,255,6,7,255,6,8,238,6,9,153,7,5,255],secondary:!1},{width:4,bonus:10,chr:"'",pixels:[2,1,221,2,2,187],secondary:!0},{width:4,bonus:55,chr:"(",pixels:[1,3,170,1,4,221,1,5,255,1,6,255,1,7,255,1,8,221,1,9,170,2,1,221,2,2,204,2,10,187,2,11,255],secondary:!1},{width:4,bonus:55,chr:")",pixels:[1,1,221,1,2,204,1,10,187,1,11,255,2,3,170,2,4,221,2,5,255,2,6,255,2,7,255,2,8,221,2,9,170],secondary:!1},{width:7,bonus:60,chr:"*",pixels:[1,3,170,2,3,238,2,4,170,2,5,238,3,1,255,3,2,255,3,3,255,3,4,238,4,3,238,4,4,170,4,5,238,5,3,153],secondary:!1},{width:9,bonus:65,chr:"+",pixels:[1,7,255,2,7,255,3,7,255,4,4,255,4,5,255,4,6,255,4,7,255,4,8,255,4,9,255,4,10,255,5,7,255,6,7,255,7,7,255],secondary:!1},{width:4,bonus:20,chr:",",pixels:[1,10,187,1,11,170,2,9,255,2,10,153],secondary:!0},{width:6,bonus:20,chr:"-",pixels:[1,7,255,2,7,255,3,7,255,4,7,170],secondary:!0},{width:4,bonus:5,chr:".",pixels:[1,10,255],secondary:!0},{width:6,bonus:55,chr:"/",pixels:[1,10,187,1,11,187,2,7,204,2,8,255,2,9,187,3,3,170,3,4,255,3,5,221,3,6,153,4,1,255,4,2,204],secondary:!1},{width:9,bonus:110,chr:"0",pixels:[1,3,187,1,4,238,1,5,255,1,6,255,1,7,238,1,8,187,2,2,255,2,9,255,3,1,238,3,10,238,4,1,255,4,10,255,5,1,238,5,10,238,6,2,255,6,9,255,7,3,187,7,4,238,7,5,255,7,6,255,7,7,238,7,8,187],secondary:!1},{width:7,bonus:80,chr:"1",pixels:[1,3,204,1,10,255,2,2,238,2,10,255,3,1,255,3,2,255,3,3,255,3,4,255,3,5,255,3,6,255,3,7,255,3,8,255,3,9,255,3,10,255,4,10,255,5,10,255],secondary:!1},{width:8,bonus:110,chr:"2",pixels:[2,2,255,2,8,204,2,9,255,2,10,255,3,1,204,3,7,221,3,8,170,3,10,255,4,1,255,4,6,204,4,7,170,4,10,255,5,1,221,5,2,153,5,5,187,5,6,204,5,10,255,6,2,221,6,3,255,6,4,255,6,5,170,6,10,255],secondary:!1},{width:8,bonus:120,chr:"3",pixels:[1,9,170,2,1,255,2,9,187,2,10,170,3,1,255,3,5,255,3,10,255,4,1,255,4,3,170,4,4,221,4,5,238,4,10,255,5,1,255,5,2,238,5,3,187,5,5,170,5,6,187,5,9,187,5,10,170,6,1,255,6,6,187,6,7,255,6,8,255,6,9,187],secondary:!1},{width:9,bonus:115,chr:"4",pixels:[1,6,187,1,7,255,2,5,221,2,6,153,2,7,255,3,4,238,3,7,255,4,3,238,4,7,255,5,1,170,5,2,255,5,7,255,6,1,255,6,2,255,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255,7,7,255],secondary:!1},{width:8,bonus:120,chr:"5",pixels:[1,9,153,2,1,255,2,2,255,2,3,255,2,4,221,2,5,255,2,9,153,2,10,187,3,1,255,3,5,255,3,10,255,4,1,255,4,5,255,4,10,255,5,1,255,5,5,187,5,6,187,5,9,187,5,10,170,6,1,170,6,6,187,6,7,255,6,8,255,6,9,187],secondary:!1},{width:9,bonus:150,chr:"6",pixels:[1,4,187,1,5,238,1,6,255,1,7,255,1,8,187,2,2,153,2,3,255,2,4,170,2,5,204,2,6,204,2,8,170,2,9,255,3,2,238,3,5,238,3,10,221,4,1,238,4,5,255,4,10,255,5,1,255,5,5,255,5,10,255,6,1,255,6,5,170,6,6,204,6,9,221,6,10,153,7,6,170,7,7,255,7,8,255,7,9,153],secondary:!1},{width:9,bonus:95,chr:"7",pixels:[1,1,255,2,1,255,2,8,153,2,9,255,2,10,204,3,1,255,3,6,153,3,7,255,3,8,187,4,1,255,4,4,153,4,5,255,4,6,187,5,1,255,5,2,187,5,3,255,5,4,187,6,1,255,6,2,170],secondary:!1},{width:9,bonus:170,chr:"8",pixels:[1,2,204,1,3,255,1,4,204,1,6,153,1,7,255,1,8,255,1,9,153,2,1,187,2,2,187,2,4,187,2,5,255,2,6,204,2,9,221,2,10,153,3,1,255,3,5,255,3,10,255,4,1,255,4,5,170,4,10,255,5,1,204,5,2,153,5,5,204,5,6,204,5,10,238,6,2,238,6,3,255,6,4,255,6,5,170,6,6,255,6,9,221,7,7,238,7,8,255,7,9,153],secondary:!1},{width:9,bonus:140,chr:"9",pixels:[1,3,238,1,4,255,1,5,238,2,2,238,2,6,238,2,10,255,3,1,255,3,7,238,3,10,255,4,1,255,4,7,255,4,10,238,5,1,204,5,2,153,5,7,204,5,9,204,5,10,153,6,2,238,6,3,187,6,6,238,6,7,187,6,8,221,6,9,204,7,3,153,7,4,221,7,5,255,7,6,255,7,7,221],secondary:!1},{width:3,bonus:10,chr:":",pixels:[1,3,255,1,9,255],secondary:!0},{width:4,bonus:15,chr:";",pixels:[2,3,255,2,9,255,2,10,204],secondary:!0},{width:8,bonus:60,chr:"<",pixels:[1,5,187,1,6,238,2,5,255,2,6,204,3,4,170,3,7,204,4,4,255,4,7,238,5,4,170,5,8,187,6,3,187,6,8,204],secondary:!1},{width:9,bonus:70,chr:"=",pixels:[1,6,221,1,8,221,2,6,255,2,8,255,3,6,255,3,8,255,4,6,255,4,8,255,5,6,255,5,8,255,6,6,255,6,8,255,7,6,255,7,8,255],secondary:!1},{width:8,bonus:75,chr:">",pixels:[1,3,153,2,3,153,2,4,170,2,8,255,3,4,255,3,7,187,3,8,170,4,4,170,4,5,153,4,7,255,5,5,255,5,6,187,5,7,153,6,5,170,6,6,255],secondary:!1},{width:6,bonus:55,chr:"?",pixels:[1,1,204,2,1,255,2,6,187,2,7,255,2,10,255,3,1,238,3,5,238,3,6,153,4,2,238,4,3,255,4,4,255],secondary:!1},{width:10,bonus:165,chr:"@",pixels:[1,5,153,1,6,255,1,7,255,1,8,255,1,9,187,2,4,204,2,5,187,2,9,170,2,10,255,3,4,204,3,11,255,4,3,238,4,6,238,4,7,255,4,8,238,4,12,187,5,3,255,5,5,204,5,9,221,5,12,255,6,3,255,6,5,255,6,9,255,7,3,221,7,5,255,7,9,255,8,4,221,8,5,255,8,6,255,8,7,255,8,8,255,8,9,255,9,9,255],secondary:!1},{width:10,bonus:140,chr:"A",pixels:[1,9,153,1,10,238,2,7,221,2,8,255,2,9,204,3,4,204,3,5,255,3,6,204,3,7,255,4,1,187,4,2,255,4,3,204,4,7,255,5,1,238,5,2,255,5,3,187,5,7,255,6,3,153,6,4,238,6,5,255,6,6,187,6,7,255,7,6,153,7,7,255,7,8,255,7,9,170,8,9,187,8,10,255],secondary:!1},{width:9,bonus:160,chr:"B",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,1,255,2,6,255,2,10,255,3,1,255,3,6,255,3,10,255,4,1,255,4,6,255,4,10,255,5,1,221,5,2,153,5,5,170,5,6,255,5,9,153,5,10,204,6,2,238,6,3,255,6,4,255,6,5,204,6,7,238,6,8,255,6,9,238],secondary:!1},{width:10,bonus:105,chr:"C",pixels:[1,3,153,1,4,255,1,5,255,1,6,255,1,7,238,2,2,204,2,3,204,2,8,204,2,9,204,3,2,187,3,9,204,4,1,221,4,10,221,5,1,255,5,10,255,6,1,238,6,10,238,7,1,187,7,10,187,8,2,221,8,9,255],secondary:!1},{width:10,bonus:160,chr:"D",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,1,255,2,10,255,3,1,255,3,10,255,4,1,255,4,10,255,5,1,238,5,10,238,6,1,153,6,2,204,6,9,204,6,10,153,7,2,221,7,3,204,7,8,204,7,9,221,8,3,170,8,4,255,8,5,255,8,6,255,8,7,255,8,8,170],secondary:!1},{width:8,bonus:105,chr:"E",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,1,255,2,6,255,2,10,255,3,1,255,3,6,255,3,10,255,4,1,255,4,6,255,4,10,255,5,1,255,5,10,255],secondary:!1},{width:7,bonus:85,chr:"F",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,1,255,2,6,255,3,1,255,3,6,255,4,1,255,4,6,255,5,1,255],secondary:!1},{width:10,bonus:145,chr:"G",pixels:[1,3,153,1,4,255,1,5,255,1,6,255,1,7,255,1,8,153,2,2,204,2,3,187,2,8,204,2,9,221,3,1,153,3,2,187,3,9,187,3,10,170,4,1,255,4,10,255,5,1,255,5,10,255,6,1,238,6,6,170,6,10,204,7,2,204,7,6,255,7,9,238,8,6,255,8,7,255,8,8,255,8,9,255,8,10,255],secondary:!1},{width:9,bonus:125,chr:"H",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,6,255,3,6,255,4,6,255,5,6,255,6,6,255,7,1,255,7,2,255,7,3,255,7,4,255,7,5,255,7,6,255,7,7,255,7,8,255,7,9,255,7,10,255],secondary:!1},{width:5,bonus:70,chr:"I",pixels:[1,1,255,1,10,255,2,1,255,2,2,255,2,3,255,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,3,1,255,3,10,255],secondary:!1},{width:8,bonus:100,chr:"J",pixels:[1,8,255,1,9,187,2,9,187,2,10,187,3,1,221,3,10,255,4,1,255,4,10,255,5,1,255,5,9,187,5,10,187,6,1,255,6,2,255,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,187],secondary:!1},{width:9,bonus:120,chr:"K",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,6,255,3,6,255,4,4,187,4,5,255,4,6,170,4,7,255,5,2,187,5,3,255,5,8,221,5,9,204,6,1,255,6,2,153,6,9,153,6,10,255],secondary:!1},{width:8,bonus:75,chr:"L",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,10,255,3,10,255,4,10,255,5,10,255,6,10,170],secondary:!1},{width:11,bonus:180,chr:"M",pixels:[1,3,170,1,4,170,1,5,204,1,6,221,1,7,238,1,8,255,1,9,255,1,10,255,2,1,255,2,2,255,2,3,255,2,4,170,3,3,204,3,4,255,3,5,170,4,5,153,4,6,255,4,7,221,5,7,221,5,8,255,6,5,187,6,6,255,6,7,187,7,3,221,7,4,238,8,1,255,8,2,255,8,3,255,8,4,187,8,5,153,9,5,170,9,6,187,9,7,204,9,8,221,9,9,238,9,10,255],secondary:!1},{width:10,bonus:145,chr:"N",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,2,238,2,3,221,3,3,170,3,4,255,4,5,221,4,6,204,5,7,255,6,8,204,6,9,221,7,1,255,7,2,255,7,3,255,7,4,255,7,5,255,7,6,255,7,7,255,7,8,255,7,9,255,7,10,255],secondary:!1},{width:11,bonus:130,chr:"O",pixels:[1,4,255,1,5,255,1,6,255,1,7,238,2,2,204,2,3,204,2,8,204,2,9,204,3,2,187,3,9,187,4,1,221,4,10,221,5,1,255,5,10,255,6,1,221,6,10,221,7,2,204,7,9,221,8,2,187,8,3,221,8,8,221,8,9,170,9,4,221,9,5,255,9,6,255,9,7,204],secondary:!1},{width:9,bonus:125,chr:"P",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,1,255,2,7,255,3,1,255,3,7,255,4,1,255,4,7,255,5,1,187,5,2,187,5,6,187,5,7,187,6,2,187,6,3,255,6,4,255,6,5,255,6,6,187],secondary:!1},{width:11,bonus:140,chr:"Q",pixels:[1,4,255,1,5,255,1,6,255,1,7,238,2,2,204,2,3,204,2,8,204,2,9,204,3,2,187,3,9,187,4,1,238,4,10,238,5,1,255,5,10,255,6,1,221,6,10,221,7,2,204,7,8,238,7,9,221,8,2,187,8,3,221,8,8,238,8,9,255,9,4,221,9,5,255,9,6,255,9,7,204,9,10,187],secondary:!1},{width:9,bonus:140,chr:"R",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,1,255,2,6,255,3,1,255,3,6,255,4,1,255,4,6,255,5,1,204,5,2,153,5,5,153,5,6,221,5,7,238,5,8,238,6,2,221,6,3,255,6,4,255,6,5,221,6,9,238,6,10,221],secondary:!1},{width:7,bonus:95,chr:"S",pixels:[1,2,221,1,3,255,1,4,255,1,9,238,2,1,204,2,2,153,2,5,255,2,10,238,3,1,255,3,5,187,3,6,153,3,10,255,4,1,238,4,6,255,4,10,221,5,2,170,5,7,255,5,8,255,5,9,238],secondary:!1},{width:10,bonus:80,chr:"T",pixels:[1,1,255,2,1,255,3,1,255,4,1,255,4,2,255,4,3,255,4,4,255,4,5,255,4,6,255,4,7,255,4,8,255,4,9,255,4,10,255,5,1,255,6,1,255,7,1,255],secondary:!1},{width:10,bonus:110,chr:"U",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,238,2,9,238,3,10,204,4,10,255,5,10,255,6,10,204,7,9,238,8,1,255,8,2,255,8,3,255,8,4,255,8,5,255,8,6,255,8,7,255,8,8,221],secondary:!1},{width:10,bonus:110,chr:"V",pixels:[1,1,238,1,2,153,2,2,187,2,3,255,2,4,221,3,5,187,3,6,255,3,7,204,4,8,204,4,9,255,4,10,204,5,8,204,5,9,255,5,10,204,6,5,187,6,6,255,6,7,204,7,2,187,7,3,255,7,4,221,8,1,238,8,2,153],secondary:!1},{width:13,bonus:195,chr:"W",pixels:[1,1,255,1,2,187,2,3,187,2,4,255,2,5,255,2,6,204,3,7,170,3,8,221,3,9,255,3,10,221,4,7,170,4,8,238,4,9,255,4,10,187,5,3,187,5,4,255,5,5,255,5,6,187,6,1,255,6,2,255,6,3,255,7,3,170,7,4,238,7,5,255,7,6,204,8,7,153,8,8,221,8,9,255,8,10,204,9,7,187,9,8,255,9,9,255,9,10,204,10,3,204,10,4,255,10,5,255,10,6,187,11,1,255,11,2,187],secondary:!1},{width:9,bonus:125,chr:"X",pixels:[1,1,221,1,10,255,2,1,153,2,2,255,2,3,187,2,8,238,2,9,221,3,3,170,3,4,255,3,5,153,3,6,204,3,7,238,4,4,187,4,5,255,4,6,255,5,3,238,5,4,221,5,7,255,5,8,170,6,1,221,6,2,238,6,8,187,6,9,255,7,1,153,7,10,221],secondary:!1},{width:9,bonus:80,chr:"Y",pixels:[1,1,238,2,2,238,2,3,204,3,4,255,3,5,187,4,5,255,4,6,255,4,7,255,4,8,255,4,9,255,4,10,255,5,4,238,5,5,204,6,2,221,6,3,238,7,1,255],secondary:!1},{width:9,bonus:115,chr:"Z",pixels:[1,10,170,2,1,255,2,8,153,2,9,255,2,10,255,3,1,255,3,7,238,3,8,221,3,10,255,4,1,255,4,5,187,4,6,255,4,10,255,5,1,255,5,4,255,5,5,187,5,10,255,6,1,255,6,2,204,6,3,221,6,10,255,7,1,255,7,10,255],secondary:!1},{width:4,bonus:65,chr:"[",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,2,1,255,2,11,255],secondary:!1},{width:6,bonus:50,chr:"\\",pixels:[1,1,238,1,2,255,1,3,170,2,4,221,2,5,255,2,6,187,3,7,204,3,8,255,3,9,187,4,10,204],secondary:!1},{width:3,bonus:65,chr:"]",pixels:[0,1,255,0,11,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255],secondary:!1},{width:8,bonus:55,chr:"^",pixels:[1,6,170,2,4,221,2,5,238,3,2,255,3,3,187,4,1,187,4,2,255,4,3,153,5,4,255,5,5,204,6,6,204],secondary:!1},{width:9,bonus:35,chr:"_",pixels:[1,11,255,2,11,255,3,11,255,4,11,255,5,11,255,6,11,255,7,11,255],secondary:!1},{width:8,bonus:110,chr:"a",pixels:[1,8,221,1,9,255,2,4,187,2,7,170,2,8,153,2,10,221,3,4,255,3,7,221,3,10,255,4,4,255,4,7,255,4,10,238,5,4,204,5,5,170,5,7,255,5,9,204,6,5,204,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255],secondary:!1},{width:8,bonus:135,chr:"b",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,4,153,2,5,221,2,9,221,2,10,153,3,4,238,3,10,238,4,4,255,4,10,255,5,4,187,5,5,187,5,9,187,5,10,170,6,5,187,6,6,255,6,7,255,6,8,255,6,9,170],secondary:!1},{width:8,bonus:60,chr:"c",pixels:[1,6,255,1,7,255,1,8,255,2,5,221,2,9,221,3,4,238,3,10,238,4,4,255,4,10,255,5,4,221,5,10,221,6,9,204],secondary:!1},{width:8,bonus:135,chr:"d",pixels:[1,5,170,1,6,255,1,7,255,1,8,255,1,9,187,2,4,170,2,5,187,2,9,187,2,10,170,3,4,255,3,10,255,4,4,238,4,10,238,5,4,153,5,5,221,5,9,221,5,10,153,6,1,255,6,2,255,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255],secondary:!1},{width:8,bonus:100,chr:"e",pixels:[1,6,255,1,7,255,1,8,255,1,9,153,2,5,204,2,7,255,2,9,204,3,4,255,3,7,255,3,10,238,4,4,255,4,7,255,4,10,255,5,4,170,5,5,187,5,7,255,5,10,221,6,5,153,6,6,238,6,7,255],secondary:!1},{width:6,bonus:70,chr:"f",pixels:[1,4,221,2,2,221,2,3,255,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,3,1,221,3,4,255,4,1,255,4,4,221],secondary:!1},{width:8,bonus:135,chr:"g",pixels:[1,5,187,1,6,255,1,7,255,1,8,255,1,9,187,2,4,204,2,5,170,2,9,170,2,10,221,2,13,238,3,4,255,3,10,255,3,13,255,4,4,187,4,5,153,4,10,204,4,12,170,4,13,187,5,4,255,5,5,255,5,6,255,5,7,255,5,8,255,5,9,255,5,10,255,5,11,255,5,12,204],secondary:!1},{width:9,bonus:100,chr:"h",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,5,238,3,4,204,4,4,255,5,4,238,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255],secondary:!1},{width:4,bonus:40,chr:"i",pixels:[1,1,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255],secondary:!1},{width:5,bonus:60,chr:"j",pixels:[0,13,221,1,13,238,2,1,255,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,2,11,255,2,12,255],secondary:!1},{width:7,bonus:100,chr:"k",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,7,255,3,6,187,3,7,255,3,8,170,4,5,255,4,6,170,4,8,187,4,9,221,5,4,255,5,10,255],secondary:!1},{width:5,bonus:50,chr:"l",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,10,255],secondary:!1},{width:12,bonus:130,chr:"m",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,5,238,3,4,204,4,4,255,5,4,221,6,5,238,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255,7,5,204,8,4,255,9,4,255,10,5,255,10,6,255,10,7,255,10,8,255,10,9,255,10,10,255],secondary:!1},{width:8,bonus:85,chr:"n",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,5,238,3,4,204,4,4,255,5,4,238,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255],secondary:!1},{width:9,bonus:80,chr:"o",pixels:[1,6,255,1,7,255,1,8,255,2,5,221,2,9,221,3,4,221,3,10,221,4,4,255,4,10,255,5,4,221,5,10,221,6,5,238,6,9,238,7,6,221,7,7,255,7,8,221],secondary:!1},{width:8,bonus:130,chr:"p",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,153,2,5,204,2,9,221,2,10,153,3,4,238,3,10,238,4,4,255,4,10,255,5,4,187,5,5,187,5,9,187,5,10,170,6,5,187,6,6,255,6,7,255,6,8,255,6,9,170],secondary:!1},{width:8,bonus:130,chr:"q",pixels:[1,5,170,1,6,255,1,7,255,1,8,255,1,9,187,2,4,170,2,5,187,2,9,187,2,10,187,3,4,255,3,10,255,4,4,238,4,10,238,5,4,153,5,5,204,5,9,221,5,10,153,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255,6,11,255,6,12,255],secondary:!1},{width:6,bonus:45,chr:"r",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,2,5,238,3,4,238],secondary:!1},{width:6,bonus:65,chr:"s",pixels:[1,5,255,1,6,255,1,9,153,1,10,170,2,4,255,2,7,221,2,10,255,3,4,255,3,7,238,3,10,255,4,4,153,4,8,255,4,9,255],secondary:!1},{width:5,bonus:65,chr:"t",pixels:[0,4,255,1,2,238,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,221,2,4,255,2,10,221,3,4,221,3,10,255],secondary:!1},{width:9,bonus:85,chr:"u",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,238,2,10,221,3,10,255,4,10,221,5,9,221,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255],secondary:!1},{width:8,bonus:75,chr:"v",pixels:[1,4,238,2,5,187,2,6,255,2,7,204,3,8,221,3,9,255,3,10,170,4,8,153,4,9,255,4,10,238,5,6,221,5,7,255,5,8,170,6,4,255,6,5,204],secondary:!1},{width:12,bonus:135,chr:"w",pixels:[1,4,238,1,5,153,2,5,170,2,6,255,2,7,238,2,8,153,3,8,153,3,9,255,3,10,255,4,8,204,4,9,255,4,10,170,5,5,187,5,6,255,5,7,187,6,5,255,6,6,221,7,7,187,7,8,255,7,9,187,8,9,255,8,10,255,9,6,187,9,7,255,9,8,221,10,4,255,10,5,204],secondary:!1},{width:8,bonus:90,chr:"x",pixels:[1,4,153,1,10,221,2,4,204,2,5,238,2,9,255,2,10,153,3,6,238,3,7,238,3,8,221,4,6,238,4,7,238,4,8,221,5,4,204,5,5,238,5,9,255,5,10,153,6,4,153,6,10,221],secondary:!1},{width:9,bonus:100,chr:"y",pixels:[1,4,238,1,13,204,2,5,221,2,6,255,2,7,170,2,13,255,3,7,153,3,8,238,3,9,238,3,12,238,3,13,153,4,9,255,4,10,255,4,11,187,5,6,170,5,7,255,5,8,221,6,4,238,6,5,255,6,6,170],secondary:!1},{width:8,bonus:95,chr:"z",pixels:[1,4,255,1,10,255,2,4,255,2,8,187,2,9,255,2,10,255,3,4,255,3,7,221,3,8,187,3,10,255,4,4,255,4,6,238,4,7,153,4,10,255,5,4,255,5,5,255,5,10,255,6,4,238,6,10,255],secondary:!1},{width:6,bonus:55,chr:"{",pixels:[1,6,255,2,2,255,2,3,255,2,4,255,2,5,221,2,7,238,2,8,255,2,9,255,2,10,255,3,1,255,3,11,255],secondary:!1},{width:4,bonus:60,chr:"|",pixels:[1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255],secondary:!1},{width:5,bonus:55,chr:"}",pixels:[1,1,255,1,11,255,2,2,221,2,3,255,2,4,255,2,5,238,2,7,255,2,8,255,2,9,255,2,10,221,3,6,255],secondary:!1},{width:8,bonus:30,chr:"~",pixels:[1,6,238,2,5,255,3,5,238,4,6,238,5,6,255,6,5,238],secondary:!1}],width:13,spacewidth:3,shadow:!1,height:14,basey:10}}],i={},function e(n){var o=i[n];if(void 0!==o)return o.exports;var r=i[n]={exports:{}};return t[n](r,r.exports,e),r.exports}(0))},2999:function(e){var t,i;"undefined"!=typeof self&&self,e.exports=(t=[e=>{e.exports={chars:[{width:7,bonus:140,chr:"a",pixels:[0,7,187,255,1,3,221,255,1,6,169,255,1,7,164,132,1,8,255,255,2,3,255,255,2,4,221,0,2,5,196,243,2,7,170,0,2,8,255,255,2,9,255,0,3,3,255,255,3,4,255,0,3,5,255,255,3,6,187,0,3,8,221,255,3,9,255,0,4,4,254,239,4,5,255,255,4,6,254,204,4,7,255,255,4,8,240,253,4,9,221,0,5,5,240,36,5,6,255,34,5,7,211,41,5,8,255,34,5,9,238,0],secondary:!1},{width:7,bonus:175,chr:"b",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,211,41,1,3,248,209,1,4,243,178,1,5,230,75,1,6,230,75,1,7,243,178,1,8,246,194,1,9,204,0,2,3,255,255,2,4,204,0,2,5,170,0,2,8,255,255,2,9,187,0,3,3,255,255,3,4,255,0,3,8,255,255,3,9,255,0,4,3,169,255,4,4,254,171,4,7,169,255,4,9,255,0,5,4,204,128,5,5,232,205,5,6,205,233,5,8,170,0,6,6,187,0,6,7,187,0],secondary:!1},{width:7,bonus:95,chr:"c",pixels:[0,5,169,255,0,6,187,255,1,4,187,255,1,6,193,90,1,7,237,201,1,8,164,185,2,3,255,255,2,5,187,0,2,8,255,255,3,3,255,255,3,4,255,0,3,8,255,255,3,9,255,0,4,3,221,255,4,4,255,34,4,8,221,255,4,9,255,0,5,4,226,39,5,9,221,0],secondary:!1},{width:7,bonus:180,chr:"d",pixels:[0,5,187,255,0,6,187,255,1,4,169,255,1,6,205,85,1,7,232,187,1,8,203,213,2,3,255,255,2,5,170,0,2,8,255,255,2,9,170,0,3,3,255,255,3,4,255,0,3,8,255,255,3,9,255,0,4,3,203,255,4,4,254,171,4,7,169,255,4,8,187,255,4,9,255,0,5,1,203,255,5,2,225,251,5,3,225,251,5,4,248,227,5,5,244,231,5,6,230,245,5,7,230,245,5,8,237,219,5,9,187,0,6,2,204,0,6,3,221,0,6,4,221,0,6,5,221,0,6,6,221,0,6,7,221,0,6,8,221,0,6,9,204,0],secondary:!1},{width:7,bonus:135,chr:"e",pixels:[0,5,187,255,0,6,169,255,1,4,187,255,1,5,255,255,1,6,209,104,1,7,237,219,2,3,255,255,2,5,255,255,2,6,255,0,2,8,255,255,3,3,255,255,3,4,255,0,3,5,255,255,3,6,255,0,3,8,255,255,3,9,255,0,4,3,187,255,4,4,255,119,4,5,255,255,4,6,255,0,4,8,221,255,4,9,255,0,5,4,224,155,5,5,227,229,5,6,255,0,5,9,221,0,6,6,204,0],secondary:!1},{width:4,bonus:90,chr:"f",pixels:[0,3,203,255,1,2,221,255,1,3,255,255,1,4,248,227,1,5,225,251,1,6,225,251,1,7,225,251,1,8,210,247,2,1,255,255,2,3,255,255,2,4,255,0,2,5,221,0,2,6,221,0,2,7,221,0,2,8,221,0,2,9,204,0,3,2,255,0,3,4,255,0],secondary:!1},{width:7,bonus:200,chr:"g",pixels:[0,5,187,255,0,6,187,255,1,3,169,255,1,4,153,255,1,5,155,112,1,6,205,85,1,7,232,187,1,8,184,189,1,11,153,255,2,3,255,255,2,4,170,0,2,5,153,0,2,8,255,255,2,11,245,247,3,3,255,255,3,4,255,0,3,8,255,255,3,9,255,0,3,11,221,255,4,3,221,255,4,4,255,136,4,7,153,255,4,8,221,255,4,9,255,85,4,10,203,255,5,3,203,255,5,4,250,226,5,5,239,236,5,6,230,245,5,7,230,245,5,8,241,234,5,9,243,178,5,11,204,0,6,4,204,0,6,5,221,0,6,6,221,0,6,7,221,0,6,8,221,0,6,9,221,0,6,10,170,0],secondary:!1},{width:7,bonus:165,chr:"h",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,211,41,1,3,243,178,1,4,248,209,1,5,230,75,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,3,255,255,2,4,170,0,2,5,204,0,3,3,255,255,3,4,255,0,4,3,169,255,4,4,255,221,4,5,221,255,4,6,221,255,4,7,221,255,4,8,203,255,5,4,175,25,5,5,226,39,5,6,226,39,5,7,226,39,5,8,226,39,5,9,204,0],secondary:!1},{width:3,bonus:70,chr:"i",pixels:[0,1,237,255,0,3,203,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,238,0,1,4,211,41,1,5,226,39,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0],secondary:!1},{width:4,bonus:90,chr:"j",pixels:[0,11,153,255,1,11,169,255,2,1,203,255,2,3,203,255,2,4,225,251,2,5,225,251,2,6,225,251,2,7,225,251,2,8,225,251,2,9,225,251,3,2,204,0,3,4,204,0,3,5,221,0,3,6,221,0,3,7,221,0,3,8,221,0,3,9,221,0,3,10,221,0],secondary:!1},{width:6,bonus:130,chr:"k",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,255,255,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,4,166,235,2,5,255,255,2,6,255,221,3,3,203,255,3,5,153,0,3,6,255,51,3,7,250,226,3,8,160,217,4,4,204,0,4,8,239,145],secondary:!1},{width:3,bonus:75,chr:"l",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,226,39,1,6,226,39,1,7,226,39,1,8,255,255,2,9,255,0],secondary:!1},{width:10,bonus:210,chr:"m",pixels:[0,3,203,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,4,248,227,1,5,230,75,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,3,237,255,2,5,221,0,3,3,255,255,3,4,238,0,4,3,153,255,4,4,255,255,4,5,221,255,4,6,221,255,4,7,221,255,4,8,203,255,5,4,228,209,5,5,255,68,5,6,226,39,5,7,226,39,5,8,226,39,5,9,204,0,6,3,255,255,6,5,187,0,7,3,237,255,7,4,255,85,8,4,249,174,8,5,232,243,8,6,225,251,8,7,225,251,8,8,210,247,9,5,170,0,9,6,221,0,9,7,221,0,9,8,221,0,9,9,204,0],secondary:!1},{width:7,bonus:140,chr:"n",pixels:[0,3,203,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,4,248,227,1,5,232,93,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,3,237,255,2,5,221,0,3,3,255,255,3,4,238,0,4,3,237,255,4,4,255,85,5,4,249,174,5,5,232,243,5,6,225,251,5,7,225,251,5,8,210,247,6,5,170,0,6,6,221,0,6,7,221,0,6,8,221,0,6,9,204,0],secondary:!1},{width:8,bonus:120,chr:"o",pixels:[0,5,187,255,0,6,169,255,1,4,203,255,1,6,209,104,1,7,244,231,2,3,237,255,2,5,204,0,2,8,252,241,3,3,255,255,3,4,238,0,3,8,255,255,3,9,238,0,4,3,237,255,4,4,255,0,4,8,255,255,4,9,255,0,5,4,251,207,5,7,221,255,5,9,255,0,6,5,237,183,6,6,192,225,6,8,221,0,7,6,170,0,7,7,170,0],secondary:!1},{width:6,bonus:170,chr:"p",pixels:[0,3,237,255,0,4,255,255,0,5,187,255,0,6,203,255,0,7,255,255,0,8,221,255,0,9,221,255,0,10,221,255,1,3,255,255,1,4,240,36,1,5,255,0,1,6,187,0,1,7,211,41,1,8,254,239,1,9,221,0,1,10,221,0,1,11,221,0,2,3,255,255,2,4,255,0,2,8,255,255,2,9,238,0,3,3,237,255,3,4,255,34,3,8,237,255,3,9,255,0,4,4,253,240,4,5,255,255,4,6,255,255,4,7,237,255,4,9,238,0,5,5,239,18,5,6,255,17,5,7,255,0,5,8,238,0],secondary:!1},{width:7,bonus:165,chr:"q",pixels:[0,5,187,255,0,6,187,255,1,3,169,255,1,4,153,255,1,5,155,112,1,6,205,85,1,7,228,171,1,8,209,207,2,3,255,255,2,4,170,0,2,5,153,0,2,8,255,255,2,9,170,0,3,3,237,255,3,4,255,17,3,8,237,255,3,9,255,0,4,3,255,255,4,4,255,255,4,5,191,250,4,6,187,255,4,7,255,255,4,8,239,254,4,9,253,223,4,10,221,255,5,4,255,34,5,5,255,34,5,6,196,45,5,7,196,45,5,8,255,34,5,9,240,36,5,10,226,39,5,11,221,0],secondary:!1},{width:4,bonus:85,chr:"r",pixels:[0,3,203,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,3,187,255,1,4,244,213,1,5,232,93,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,3,255,255,2,4,187,0,2,5,204,0,3,4,255,0],secondary:!1},{width:6,bonus:100,chr:"s",pixels:[0,4,187,255,1,3,255,255,1,5,250,243,1,8,255,255,2,3,255,255,2,4,255,0,2,5,155,196,2,6,246,123,2,8,255,255,2,9,255,0,3,3,255,255,3,4,255,0,3,6,245,247,3,7,164,132,3,8,255,255,3,9,255,0,4,4,255,17,4,7,250,191,4,9,255,0,5,8,187,0],secondary:!1},{width:5,bonus:80,chr:"t",pixels:[1,2,221,255,1,3,255,255,1,4,235,240,1,5,221,255,1,6,221,255,1,7,169,255,2,3,255,255,2,4,255,34,2,5,226,39,2,6,226,39,2,7,232,93,2,8,249,243,3,4,255,0,3,8,187,209,3,9,238,0,4,9,153,0],secondary:!1},{width:6,bonus:135,chr:"u",pixels:[0,3,203,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,169,255,1,4,211,41,1,5,226,39,1,6,226,39,1,7,232,93,1,8,249,243,2,8,255,255,2,9,238,0,3,8,203,255,3,9,255,0,4,3,203,255,4,4,221,255,4,5,221,255,4,6,203,255,4,7,255,255,4,8,228,247,4,9,204,0,5,4,211,41,5,5,226,39,5,6,226,39,5,7,211,41,5,8,255,34,5,9,221,0],secondary:!1},{width:6,bonus:95,chr:"v",pixels:[0,3,237,255,1,4,247,141,1,5,245,247,1,6,203,255,2,6,241,54,2,7,255,255,2,8,255,255,3,5,153,255,3,6,255,255,3,7,173,226,3,8,255,51,3,9,255,0,4,3,237,255,4,4,203,255,4,6,153,0,4,7,255,0,4,8,153,0,5,4,238,0,5,5,204,0],secondary:!1},{width:10,bonus:170,chr:"w",pixels:[1,3,153,255,1,4,243,249,1,5,187,255,2,4,153,0,2,5,243,71,2,6,228,171,2,7,243,249,2,8,187,255,3,6,217,239,3,7,248,244,3,8,248,157,3,9,187,0,4,3,169,255,4,4,255,255,4,7,204,0,4,8,238,0,4,9,153,0,5,4,244,231,5,5,255,221,5,6,191,159,6,5,223,19,6,6,237,128,6,7,255,255,6,8,223,253,7,6,239,254,7,7,227,229,7,8,255,119,7,9,221,0,8,3,237,255,8,4,203,255,8,7,238,0,8,8,204,0,9,4,238,0,9,5,204,0],secondary:!1},{width:6,bonus:95,chr:"x",pixels:[0,8,169,255,1,3,169,255,1,4,224,232,1,7,221,255,1,9,170,0,2,4,193,90,2,5,255,255,2,6,240,253,2,8,221,0,3,4,255,255,3,5,155,196,3,6,255,187,3,7,250,191,4,3,221,255,4,5,255,0,4,7,209,104,4,8,255,255,5,4,221,0,5,9,255,0],secondary:!1},{width:6,bonus:110,chr:"y",pixels:[0,3,255,255,0,4,153,255,0,11,221,255,1,4,255,85,1,5,234,222,1,6,228,247,1,11,196,243,2,6,207,21,2,7,246,194,2,8,255,255,2,9,237,255,3,6,237,255,3,7,191,250,3,8,205,85,3,9,255,0,3,10,238,0,4,3,203,255,4,4,221,255,4,7,238,0,4,8,187,0,5,4,204,0,5,5,221,0],secondary:!1},{width:6,bonus:130,chr:"z",pixels:[0,3,153,255,0,8,203,255,1,3,255,255,1,4,153,0,1,7,221,255,1,8,255,255,1,9,204,0,2,3,255,255,2,4,255,0,2,6,255,255,2,8,255,255,2,9,255,0,3,3,255,255,3,4,254,171,3,5,169,255,3,7,255,0,3,8,255,255,3,9,255,0,4,3,255,255,4,4,255,119,4,5,170,0,4,6,170,0,4,8,255,255,4,9,255,0,5,4,255,0,5,9,255,0],secondary:!1},{width:8,bonus:155,chr:"A",pixels:[0,8,153,255,1,6,221,255,1,7,237,255,1,9,153,0,2,3,169,255,2,4,255,255,2,5,187,255,2,6,255,255,2,7,221,0,2,8,238,0,3,1,255,255,3,2,255,255,3,4,170,0,3,5,255,0,3,6,255,255,3,7,255,0,4,2,255,255,4,3,254,239,4,4,184,189,4,6,255,255,4,7,255,0,5,3,255,34,5,4,247,141,5,5,255,255,5,6,255,255,5,7,255,102,6,6,255,85,6,7,255,187,6,8,255,255,7,8,187,0,7,9,255,0],secondary:!1},{width:7,bonus:225,chr:"B",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,1,255,255,1,2,211,41,1,3,226,39,1,4,255,255,1,5,226,39,1,6,226,39,1,7,226,39,1,8,255,255,1,9,204,0,2,1,255,255,2,2,255,0,2,4,255,255,2,5,255,0,2,8,255,255,2,9,255,0,3,1,255,255,3,2,255,0,3,4,255,255,3,5,255,0,3,8,255,255,3,9,255,0,4,1,221,255,4,2,255,85,4,4,255,255,4,5,254,171,4,8,203,255,4,9,255,0,5,2,243,178,5,3,198,219,5,5,255,102,5,6,232,205,5,7,180,217,5,9,204,0,6,3,170,0,6,4,170,0,6,7,187,0,6,8,153,0],secondary:!1},{width:9,bonus:155,chr:"C",pixels:[0,4,187,255,0,5,187,255,1,2,221,255,1,3,153,255,1,4,155,112,1,5,205,85,1,6,228,171,1,7,224,232,2,1,169,255,2,3,221,0,2,4,153,0,2,7,194,135,2,8,237,183,3,1,255,255,3,2,170,0,3,8,255,255,3,9,170,0,4,1,255,255,4,2,255,0,4,8,255,255,4,9,255,0,5,1,255,255,5,2,255,0,5,8,255,255,5,9,255,0,6,1,169,255,6,2,255,102,6,8,169,255,6,9,255,0,7,2,181,48,7,9,170,0],secondary:!1},{width:8,bonus:200,chr:"D",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,1,255,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,226,39,1,6,226,39,1,7,226,39,1,8,255,255,1,9,204,0,2,1,255,255,2,2,255,0,2,8,255,255,2,9,255,0,3,1,255,255,3,2,255,0,3,8,255,255,3,9,255,0,4,1,203,255,4,2,255,68,4,8,203,255,4,9,255,0,5,2,248,227,5,3,168,207,5,7,221,255,5,9,204,0,6,3,237,128,6,4,223,214,6,5,205,233,6,6,155,196,6,8,221,0,7,5,187,0,7,6,187,0],secondary:!1},{width:6,bonus:180,chr:"E",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,1,255,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,255,255,1,6,226,39,1,7,226,39,1,8,255,255,1,9,204,0,2,1,255,255,2,2,255,0,2,5,255,255,2,6,255,0,2,8,255,255,2,9,255,0,3,1,255,255,3,2,255,0,3,5,255,255,3,6,255,0,3,8,255,255,3,9,255,0,4,1,153,255,4,2,255,0,4,6,255,0,4,8,221,255,4,9,255,0,5,2,153,0,5,9,221,0],secondary:!1},{width:6,bonus:135,chr:"F",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,1,255,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,255,255,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,1,255,255,2,2,255,0,2,5,255,255,2,6,255,0,3,1,255,255,3,2,255,0,3,5,255,255,3,6,255,0,4,2,255,0,4,6,255,0],secondary:!1},{width:9,bonus:200,chr:"G",pixels:[0,4,169,255,0,5,187,255,1,2,203,255,1,3,153,255,1,5,193,90,1,6,224,155,1,7,237,238,2,1,169,255,2,3,204,0,2,4,153,0,2,7,175,124,2,8,246,194,3,1,255,255,3,2,170,0,3,8,255,255,3,9,187,0,4,1,255,255,4,2,255,0,4,8,255,255,4,9,255,0,5,1,255,255,5,2,255,0,5,8,237,255,5,9,255,0,6,1,169,255,6,2,255,85,6,5,255,255,6,7,153,255,6,8,169,255,6,9,238,0,7,2,175,25,7,5,153,255,7,6,255,221,7,7,225,251,7,8,234,222,7,9,170,0,8,6,153,0,8,7,221,0,8,8,221,0,8,9,204,0],secondary:!1},{width:8,bonus:200,chr:"H",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,255,255,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,5,255,255,2,6,255,0,3,5,255,255,3,6,255,0,4,5,255,255,4,6,255,0,5,5,255,255,5,6,255,34,6,1,203,255,6,2,225,251,6,3,225,251,6,4,225,251,6,5,225,251,6,6,255,221,6,7,225,251,6,8,210,247,7,2,204,0,7,3,221,0,7,4,221,0,7,5,221,0,7,6,221,0,7,7,221,0,7,8,221,0,7,9,204,0],secondary:!1},{width:4,bonus:110,chr:"I",pixels:[0,1,191,255,0,8,191,255,1,1,255,255,1,2,255,255,1,3,255,255,1,4,255,255,1,5,255,255,1,6,255,255,1,7,255,255,1,8,255,255,1,9,191,0,2,1,191,255,2,2,255,0,2,3,255,0,2,4,255,0,2,5,255,0,2,6,255,0,2,7,255,0,2,8,255,191,2,9,255,0,3,2,192,0,3,9,191,0],secondary:!1},{width:6,bonus:130,chr:"J",pixels:[0,6,153,255,0,7,153,255,1,7,194,135,1,8,234,222,2,1,221,255,2,8,255,255,2,9,204,0,3,1,255,255,3,2,226,39,3,8,203,255,3,9,255,0,4,1,203,255,4,2,255,221,4,3,225,251,4,4,225,251,4,5,225,251,4,6,225,251,4,7,166,235,4,9,204,0,5,2,204,0,5,3,221,0,5,4,221,0,5,5,221,0,5,6,221,0,5,7,221,0,5,8,153,0],secondary:!1},{width:7,bonus:155,chr:"K",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,211,41,1,3,226,39,1,4,255,255,1,5,226,39,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,4,255,255,2,5,255,102,3,3,221,255,3,5,254,171,3,6,224,232,4,1,203,255,4,2,153,255,4,4,221,0,4,6,193,90,4,7,251,242,4,8,173,226,5,2,204,0,5,3,153,0,5,8,247,141,5,9,153,0],secondary:!1},{width:6,bonus:115,chr:"L",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,226,39,1,6,226,39,1,7,226,39,1,8,255,255,1,9,204,0,2,8,255,255,2,9,255,0,3,8,255,255,3,9,255,0,4,8,255,255,4,9,255,0,5,9,255,0],secondary:!1},{width:9,bonus:240,chr:"M",pixels:[0,1,245,255,0,2,255,255,0,3,255,255,0,4,255,255,0,5,255,255,0,6,255,255,0,7,255,255,0,8,255,255,1,2,251,173,1,3,255,225,1,4,255,85,1,5,255,0,1,6,255,0,1,7,255,0,1,8,255,0,1,9,255,0,2,3,191,83,2,4,249,212,2,5,212,229,3,5,226,119,3,6,249,237,3,7,165,227,4,6,241,245,4,7,245,155,4,8,155,32,5,4,207,255,5,5,191,254,5,7,232,0,6,2,169,255,6,3,223,255,6,5,207,0,6,6,190,0,7,1,245,255,7,2,255,255,7,3,255,255,7,4,255,255,7,5,255,255,7,6,255,255,7,7,255,255,7,8,255,255,8,2,245,0,8,3,255,0,8,4,255,0,8,5,255,0,8,6,255,0,8,7,255,0,8,8,255,0,8,9,255,0],secondary:!1},{width:8,bonus:200,chr:"N",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,2,255,255,1,3,235,111,1,4,226,39,1,5,226,39,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,3,255,221,2,4,163,160,3,4,246,194,3,5,214,223,4,5,214,122,4,6,246,229,5,6,163,160,5,7,255,255,6,1,203,255,6,2,225,251,6,3,225,251,6,4,225,251,6,5,225,251,6,6,225,251,6,7,235,240,6,8,254,204,7,2,204,0,7,3,221,0,7,4,221,0,7,5,221,0,7,6,221,0,7,7,221,0,7,8,221,0,7,9,204,0],secondary:!1},{width:10,bonus:200,chr:"O",pixels:[0,4,187,255,0,5,169,255,1,2,203,255,1,3,153,255,1,5,205,85,1,6,226,192,1,7,224,232,2,1,153,255,2,3,204,0,2,4,153,0,2,7,209,145,2,8,234,167,3,1,255,255,3,2,153,0,3,8,255,255,3,9,153,0,4,1,255,255,4,2,255,0,4,8,255,255,4,9,255,0,5,1,255,255,5,2,255,0,5,8,255,255,5,9,255,0,6,1,153,255,6,2,255,102,6,8,153,255,6,9,255,0,7,2,234,222,7,3,194,201,7,6,169,255,7,7,203,255,7,9,153,0,8,3,225,116,8,4,228,209,8,5,192,225,8,7,170,0,8,8,204,0,9,5,187,0,9,6,170,0],secondary:!1},{width:7,bonus:165,chr:"P",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,1,255,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,255,255,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,1,255,255,2,2,255,0,2,5,255,255,2,6,255,0,3,1,255,255,3,2,255,0,3,5,255,255,3,6,255,0,4,1,187,255,4,2,255,136,4,5,187,255,4,6,255,0,5,2,224,155,5,3,239,236,5,6,187,0,6,4,221,0],secondary:!1},{width:9,bonus:185,chr:"Q",pixels:[0,4,187,255,0,5,187,255,1,2,221,255,1,4,155,112,1,5,205,85,1,6,228,171,1,7,235,240,2,1,187,255,2,3,221,0,2,7,187,116,2,8,243,178,3,1,255,255,3,2,187,0,3,8,255,255,3,9,170,0,4,1,255,255,4,2,255,0,4,8,255,255,4,9,255,0,5,1,237,255,5,2,255,0,5,8,237,255,5,9,255,0,6,2,251,207,6,7,255,255,6,9,238,0,7,3,255,255,7,4,203,255,7,5,221,255,7,6,255,255,7,7,155,196,7,8,254,204,8,4,255,17,8,5,207,21,8,6,221,0,8,7,255,0,8,9,204,0],secondary:!1},{width:7,bonus:180,chr:"R",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,1,255,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,255,255,1,6,226,39,1,7,226,39,1,8,226,39,1,9,204,0,2,1,255,255,2,2,255,0,2,5,255,255,2,6,255,0,3,1,255,255,3,2,255,0,3,5,255,255,3,6,255,187,4,2,254,239,4,3,203,255,4,4,255,255,4,6,255,68,4,7,250,243,4,8,181,239,5,3,239,18,5,4,204,0,5,5,255,0,5,8,245,107,5,9,170,0],secondary:!1},{width:6,bonus:130,chr:"S",pixels:[0,2,153,255,0,3,169,255,1,1,203,255,1,3,187,116,1,4,244,231,1,8,243,249,2,1,255,255,2,2,204,0,2,4,198,219,2,5,232,93,2,8,255,255,2,9,238,0,3,1,255,255,3,2,255,0,3,5,255,255,3,8,255,255,3,9,255,0,4,1,169,255,4,2,255,68,4,5,160,217,4,6,255,221,4,7,237,255,4,9,255,0,5,2,170,0,5,7,223,19,5,8,238,0],secondary:!1},{width:8,bonus:125,chr:"T",pixels:[0,1,255,255,1,1,255,255,1,2,255,0,2,1,255,255,2,2,255,34,3,1,255,255,3,2,255,221,3,3,225,251,3,4,225,251,3,5,225,251,3,6,225,251,3,7,225,251,3,8,210,247,4,1,255,255,4,2,255,0,4,3,221,0,4,4,221,0,4,5,221,0,4,6,221,0,4,7,221,0,4,8,221,0,4,9,204,0,5,1,255,255,5,2,255,0,6,2,255,0],secondary:!1},{width:8,bonus:165,chr:"U",pixels:[0,1,203,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,187,255,1,2,211,41,1,3,226,39,1,4,226,39,1,5,226,39,1,6,230,75,1,7,232,187,1,8,184,189,2,8,255,255,3,8,255,255,3,9,255,0,4,8,221,255,4,9,255,0,5,1,203,255,5,2,221,255,5,3,221,255,5,4,221,255,5,5,221,255,5,6,255,255,5,7,237,255,5,9,221,0,6,2,211,41,6,3,226,39,6,4,226,39,6,5,226,39,6,6,223,19,6,7,255,0,6,8,238,0],secondary:!1},{width:7,bonus:125,chr:"V",pixels:[0,1,255,255,0,2,187,255,1,2,255,68,1,3,228,171,1,4,255,255,1,5,153,255,2,4,153,0,2,5,255,85,2,6,228,209,2,7,242,251,3,6,164,185,3,7,255,255,3,8,251,207,4,4,203,255,4,5,237,255,4,8,255,0,4,9,204,0,5,1,169,255,5,2,255,255,5,3,153,255,5,5,204,0,5,6,238,0,6,2,170,0,6,3,255,0,6,4,153,0],secondary:!1},{width:10,bonus:245,chr:"W",pixels:[0,1,255,255,0,2,221,255,1,2,255,17,1,3,237,128,1,4,223,214,1,5,255,255,1,6,203,255,2,5,191,23,2,6,255,136,2,7,255,255,2,8,255,255,3,3,153,255,3,4,237,255,3,5,221,255,3,7,168,103,3,8,255,0,3,9,255,0,4,1,255,255,4,2,255,255,4,3,187,209,4,4,153,0,4,5,238,0,4,6,221,0,5,2,255,102,5,3,254,171,5,4,248,244,5,5,203,255,6,4,170,0,6,5,241,54,6,6,231,150,6,7,255,255,6,8,255,255,7,4,153,255,7,5,237,255,7,6,241,252,7,7,207,188,7,8,255,85,7,9,255,0,8,1,237,255,8,2,237,255,8,3,153,255,8,4,153,171,8,5,153,0,8,6,238,0,8,7,238,0,8,8,153,0,9,2,238,0,9,3,238,0,9,4,153,0],secondary:!1},{width:7,bonus:130,chr:"X",pixels:[0,8,169,255,1,1,187,255,1,2,220,236,1,7,237,255,1,9,170,0,2,2,205,85,2,3,248,227,2,4,166,235,2,5,255,255,2,6,153,255,2,8,238,0,3,3,155,196,3,4,255,255,3,5,248,244,3,6,255,51,3,7,153,0,4,2,237,255,4,5,255,51,4,6,251,207,4,7,186,233,5,1,203,255,5,3,238,0,5,7,225,116,5,8,255,255,6,2,204,0,6,9,255,0],secondary:!1},{width:7,bonus:90,chr:"Y",pixels:[0,1,169,255,1,2,249,243,2,3,248,157,2,4,255,255,3,4,241,234,3,5,254,204,3,6,232,243,3,7,225,251,3,8,210,247,4,3,255,255,4,5,221,0,4,6,204,0,4,7,221,0,4,8,221,0,4,9,204,0,5,1,237,255,5,4,255,0,6,2,238,0],secondary:!1},{width:7,bonus:140,chr:"Z",pixels:[0,8,187,255,1,1,255,255,1,7,221,255,1,8,255,255,1,9,187,0,2,1,255,255,2,2,255,0,2,5,203,255,2,8,255,255,2,9,255,0,3,1,255,255,3,2,255,0,3,4,203,255,3,6,204,0,3,8,255,255,3,9,255,0,4,1,255,255,4,2,255,221,4,5,204,0,4,8,255,255,4,9,255,0,5,1,187,255,5,2,255,34,5,3,221,0,5,8,153,255,5,9,255,0,6,2,187,0,6,9,153,0],secondary:!1},{width:7,bonus:170,chr:"0",pixels:[0,2,153,255,0,3,221,255,0,4,255,255,0,5,255,255,0,6,237,255,0,7,169,255,1,1,187,255,1,3,153,0,1,4,221,0,1,5,255,0,1,6,255,0,1,7,243,71,1,8,237,219,2,1,187,255,2,2,187,0,2,8,205,233,2,9,211,41,3,1,221,255,3,2,205,85,3,8,203,255,3,9,187,0,4,2,243,178,4,3,255,255,4,4,187,255,4,5,187,255,4,6,237,255,4,7,169,255,4,9,204,0,5,3,170,0,5,4,255,0,5,5,187,0,5,6,187,0,5,7,238,0,5,8,170,0],secondary:!1},{width:7,bonus:100,chr:"1",pixels:[1,8,187,255,2,1,203,255,2,2,224,232,2,3,219,218,2,4,187,255,2,5,187,255,2,6,187,255,2,7,187,255,2,8,237,255,2,9,187,0,3,2,218,80,3,3,218,80,3,4,205,85,3,5,205,85,3,6,205,85,3,7,205,85,3,8,241,215,3,9,238,0,4,8,168,207,4,9,204,0],secondary:!1},{width:7,bonus:105,chr:"2",pixels:[1,8,255,255,2,1,187,255,2,6,153,255,2,8,223,214,2,9,255,0,3,1,203,255,3,2,187,0,3,5,153,255,3,7,153,0,3,8,219,218,3,9,187,0,4,1,187,255,4,2,234,167,4,4,203,255,4,6,153,0,4,8,187,255,4,9,187,0,5,2,214,122,5,3,200,152,5,5,204,0,5,9,187,0],secondary:!1},{width:7,bonus:105,chr:"3",pixels:[0,8,203,255,1,1,187,255,1,8,191,250,1,9,204,0,2,1,187,255,2,2,196,45,2,4,187,255,2,5,174,150,2,8,203,255,2,9,187,0,3,2,246,229,3,3,210,247,3,5,241,215,3,6,173,175,3,7,169,255,3,9,204,0,4,3,227,57,4,4,204,0,4,6,228,133,4,7,174,150,4,8,170,0],secondary:!1},{width:7,bonus:150,chr:"4",pixels:[0,6,237,255,1,4,187,255,1,6,219,218,1,7,238,0,2,3,169,255,2,5,187,0,2,6,219,218,2,7,187,0,3,1,187,255,3,2,153,255,3,3,155,112,3,4,193,90,3,6,203,255,3,7,205,85,4,1,187,255,4,2,237,201,4,3,228,209,4,4,205,233,4,5,205,233,4,6,242,251,4,7,241,198,4,8,205,233,5,2,187,0,5,3,187,0,5,4,187,0,5,5,187,0,5,6,224,155,5,7,238,0,5,8,187,0,5,9,187,0],secondary:!1},{width:7,bonus:130,chr:"5",pixels:[1,1,237,255,1,2,187,255,1,3,187,255,1,4,187,255,1,8,207,251,2,1,187,255,2,2,238,0,2,3,187,0,2,4,237,201,2,5,187,0,2,8,187,255,2,9,204,0,3,1,187,255,3,2,187,0,3,4,203,255,3,5,191,23,3,8,203,255,3,9,187,0,4,2,187,0,4,5,251,242,4,6,191,250,4,7,221,255,4,9,204,0,5,6,243,71,5,7,191,23,5,8,221,0],secondary:!1},{width:7,bonus:150,chr:"6",pixels:[0,3,169,255,0,4,255,255,0,5,255,255,0,6,237,255,0,7,153,255,1,2,187,255,1,4,209,145,1,5,255,68,1,6,255,0,1,7,246,123,1,8,228,209,2,1,203,255,2,3,187,0,2,4,200,238,2,8,219,218,2,9,187,0,3,1,187,255,3,2,204,0,3,4,203,255,3,5,205,85,3,8,187,255,3,9,187,0,4,2,187,0,4,5,248,227,4,6,255,255,4,7,187,255,4,9,187,0,5,6,221,0,5,7,255,0,5,8,187,0],secondary:!1},{width:7,bonus:105,chr:"7",pixels:[0,1,187,255,1,1,187,255,1,2,187,0,1,8,203,255,2,1,187,255,2,2,187,0,2,6,237,255,2,7,153,255,2,9,204,0,3,1,187,255,3,2,205,85,3,3,153,255,3,4,221,255,3,7,238,0,3,8,153,0,4,1,255,255,4,2,237,201,4,4,153,0,4,5,221,0,5,2,255,0,5,3,187,0],secondary:!1},{width:7,bonus:165,chr:"8",pixels:[1,2,237,255,1,3,221,255,1,6,203,255,1,7,228,247,2,1,203,255,2,3,241,54,2,4,248,209,2,5,186,233,2,7,207,21,2,8,250,226,3,1,187,255,3,2,204,0,3,4,186,233,3,5,221,98,3,6,170,0,3,8,191,250,3,9,221,0,4,1,221,255,4,2,209,104,4,4,169,255,4,5,237,219,4,8,187,255,4,9,187,0,5,2,243,178,5,3,187,209,5,5,204,128,5,6,251,242,5,7,240,253,5,9,187,0,6,3,170,0,6,4,153,0,6,7,238,0,6,8,238,0],secondary:!1},{width:7,bonus:160,chr:"9",pixels:[1,2,221,255,1,3,191,250,1,4,242,251,1,8,153,255,2,1,203,255,2,3,221,0,2,4,191,23,2,5,253,223,2,8,191,250,2,9,153,0,3,1,187,255,3,2,204,0,3,5,191,250,3,6,221,0,3,8,203,255,3,9,187,0,4,1,187,255,4,2,218,139,4,6,200,65,4,7,169,255,4,9,204,0,5,2,228,171,5,3,245,247,5,4,255,255,5,5,255,255,5,6,223,214,5,8,170,0,6,3,153,0,6,4,238,0,6,5,255,0,6,6,255,0,6,7,187,0],secondary:!1},{width:8,bonus:130,chr:"%",pixels:[0,3,255,255,0,8,255,255,1,2,255,255,1,4,255,255,1,7,255,255,1,9,255,0,2,3,255,255,2,5,255,41,2,6,255,255,2,8,255,0,3,4,255,41,3,5,255,255,3,7,255,0,4,4,255,255,4,6,255,92,4,7,255,255,5,3,255,255,5,5,255,0,5,6,255,255,5,8,255,255,6,2,255,255,6,4,255,0,6,7,255,255,6,9,255,0,7,3,255,0,7,8,255,0],secondary:!1},{width:4,bonus:80,chr:"/",pixels:[0,7,153,255,0,8,237,255,0,9,221,255,1,4,187,255,1,5,237,255,1,6,169,255,1,8,153,0,1,9,238,0,1,10,221,0,2,1,221,255,2,2,221,255,2,5,187,0,2,6,238,0,2,7,170,0,3,2,221,0,3,3,221,0],secondary:!1},{width:7,bonus:110,chr:"+",pixels:[0,5,221,255,1,5,255,255,1,6,221,0,2,5,255,255,2,6,255,34,3,2,153,255,3,3,223,253,3,4,225,251,3,5,255,255,3,6,255,221,3,7,225,251,3,8,210,247,4,3,153,0,4,4,221,0,4,5,255,255,4,6,255,0,4,7,221,0,4,8,221,0,4,9,204,0,5,5,255,255,5,6,255,0,6,6,255,0],secondary:!1},{width:5,bonus:75,chr:"?",pixels:[0,1,169,255,1,1,255,255,1,2,170,0,1,6,221,255,1,8,255,255,2,1,255,255,2,2,255,0,2,5,169,255,2,7,221,0,2,9,255,0,3,2,255,255,3,3,221,255,3,6,170,0,4,3,255,17,4,4,221,0],secondary:!1},{width:2,bonus:70,chr:"!",pixels:[0,1,169,255,0,2,187,255,0,3,187,255,0,4,187,255,0,5,187,255,0,6,169,255,0,8,255,255,1,2,181,48,1,3,196,45,1,4,196,45,1,5,196,45,1,6,196,45,1,7,170,0,1,9,255,0],secondary:!1},{width:8,bonus:230,chr:"@",pixels:[0,4,255,255,0,5,255,255,0,6,221,255,0,7,255,255,0,8,187,255,1,3,221,255,1,5,255,0,1,6,255,34,1,7,221,0,1,8,255,68,1,9,250,243,2,2,221,255,2,4,232,93,2,5,255,255,2,6,237,255,2,7,255,255,2,10,248,157,3,2,255,255,3,3,221,0,3,4,255,255,3,6,255,0,3,7,241,54,3,8,254,204,3,10,214,223,3,11,153,0,4,2,237,255,4,3,255,0,4,4,255,255,4,5,255,0,4,8,255,255,4,9,204,0,4,11,187,0,5,3,253,240,5,4,255,255,5,5,255,221,5,6,221,255,5,7,221,255,5,8,237,255,5,9,255,0,6,4,240,36,6,5,255,34,6,6,226,39,6,7,226,39,6,8,250,226,6,9,238,0,7,9,221,0],secondary:!1},{width:8,bonus:200,chr:"#",pixels:[0,6,255,255,1,3,255,255,1,6,255,255,1,7,254,171,1,8,237,255,2,1,169,255,2,2,237,255,2,3,255,255,2,4,255,221,2,5,175,247,2,6,255,255,2,7,255,85,2,8,170,0,2,9,238,0,3,2,170,0,3,3,255,255,3,4,255,0,3,5,221,0,3,6,255,255,3,7,255,0,4,3,255,255,4,4,255,153,4,5,203,255,4,6,255,255,4,7,254,239,4,8,187,255,5,1,255,255,5,2,187,255,5,3,255,255,5,4,255,85,5,5,159,27,5,6,255,255,5,7,255,0,5,8,238,0,5,9,187,0,6,2,255,0,6,3,255,255,6,4,255,0,6,7,255,0,7,4,255,0],secondary:!1},{width:6,bonus:130,chr:"$",pixels:[0,2,153,255,0,3,169,255,1,1,203,255,1,3,187,116,1,4,244,231,1,8,243,249,2,0,203,255,2,1,237,255,2,2,204,0,2,4,176,197,2,5,237,128,2,8,240,253,2,9,251,207,3,1,251,242,3,2,239,18,3,5,247,245,3,6,164,132,3,8,255,255,3,9,240,36,3,10,204,0,4,2,240,36,4,6,249,174,4,7,198,219,4,9,255,0,5,7,170,0,5,8,170,0],secondary:!1},{width:6,bonus:75,chr:"^",pixels:[0,4,153,255,0,5,237,255,1,2,203,255,1,3,221,255,1,5,153,0,1,6,238,0,2,1,221,255,2,2,230,245,2,3,218,80,2,4,221,0,3,2,227,57,3,3,246,194,3,4,230,245,4,4,187,0,4,5,239,145],secondary:!1},{width:6,bonus:35,chr:"~",pixels:[1,5,255,255,2,5,221,255,2,6,255,51,3,6,250,226,4,5,203,255,4,7,221,0,5,6,204,0],secondary:!1},{width:7,bonus:175,chr:"&",pixels:[0,6,187,255,1,2,237,255,1,3,255,255,1,4,191,250,1,5,187,255,1,7,224,155,1,8,223,214,2,1,255,255,2,3,238,0,2,4,255,255,2,5,191,23,2,6,187,0,2,8,255,255,2,9,187,0,3,1,255,255,3,2,255,0,3,4,255,255,3,5,255,0,3,8,255,255,3,9,255,0,4,2,255,0,4,4,255,255,4,5,255,34,4,8,187,255,4,9,255,0,5,3,203,255,5,4,255,255,5,5,255,221,5,6,196,243,5,7,155,196,5,9,187,0,6,4,234,167,6,5,255,0,6,6,221,0,6,7,187,0],secondary:!1},{width:6,bonus:70,chr:"*",pixels:[0,2,169,255,1,2,169,255,1,3,237,219,1,4,255,255,2,1,203,255,2,2,240,253,2,3,255,255,2,4,228,133,2,5,255,0,3,2,237,183,3,3,245,107,3,4,255,153,4,3,170,0,4,5,153,0],secondary:!1},{width:4,bonus:100,chr:"(",pixels:[0,3,173,255,0,4,239,255,0,5,253,255,0,6,229,255,0,7,171,255,1,1,193,255,1,2,203,255,1,4,188,64,1,5,241,25,1,6,252,46,1,7,240,112,1,8,238,218,1,9,210,232,2,0,209,255,2,2,194,2,2,3,204,0,2,9,223,111,2,10,245,224,3,1,210,0,3,11,216,0],secondary:!1},{width:4,bonus:75,chr:")",pixels:[1,0,211,255,1,10,215,255,2,1,244,203,2,2,222,234,2,8,203,255,2,9,191,255,2,11,216,0,3,2,213,94,3,3,238,186,3,4,246,248,3,5,253,255,3,6,231,253,3,7,186,234,3,9,203,1,3,10,191,0],secondary:!1},{width:7,bonus:60,chr:"_",pixels:[0,9,153,255,1,9,255,255,1,10,153,0,2,9,255,255,2,10,255,0,3,9,255,255,3,10,255,0,4,9,255,255,4,10,255,0,5,9,255,255,5,10,255,0,6,10,255,0],secondary:!1},{width:4,bonus:30,chr:"-",pixels:[0,5,255,255,1,5,255,255,1,6,255,0,2,5,255,255,2,6,255,0,3,6,255,0],secondary:!0},{width:8,bonus:100,chr:"=",pixels:[0,4,255,255,0,6,255,255,1,4,255,255,1,5,255,0,1,6,255,255,1,7,255,0,2,4,255,255,2,5,255,0,2,6,255,255,2,7,255,0,3,4,255,255,3,5,255,0,3,6,255,255,3,7,255,0,4,4,255,255,4,5,255,0,4,6,255,255,4,7,255,0,5,5,255,0,5,7,255,0],secondary:!1},{width:3,bonus:105,chr:"[",pixels:[0,0,203,255,0,1,221,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,203,255,1,0,237,255,1,1,211,41,1,2,226,39,1,3,226,39,1,4,226,39,1,5,226,39,1,6,226,39,1,7,226,39,1,8,252,241,1,9,204,0,2,1,238,0,2,9,238,0],secondary:!1},{width:3,bonus:105,chr:"]",pixels:[0,0,237,255,0,8,237,255,1,0,203,255,1,1,253,223,1,2,225,251,1,3,225,251,1,4,225,251,1,5,225,251,1,6,225,251,1,7,225,251,1,8,210,247,1,9,238,0,2,1,204,0,2,2,221,0,2,3,221,0,2,4,221,0,2,5,221,0,2,6,221,0,2,7,221,0,2,8,221,0,2,9,204,0],secondary:!1},{width:5,bonus:90,chr:"{",pixels:[0,5,153,255,1,2,169,255,1,3,221,255,1,4,221,255,1,5,203,255,1,6,255,255,1,7,221,255,1,8,169,255,2,1,237,255,2,3,181,48,2,4,223,19,2,5,221,0,2,6,207,21,2,7,255,34,2,8,232,93,2,9,249,243,3,2,238,0,3,10,238,0],secondary:!1},{width:5,bonus:90,chr:"}",pixels:[1,1,237,255,1,9,237,255,2,2,249,174,2,3,232,243,2,4,225,251,2,5,207,251,2,6,255,255,2,7,223,253,2,8,181,239,2,10,238,0,3,3,170,0,3,4,221,0,3,5,241,162,3,6,204,0,3,7,255,0,3,8,221,0,3,9,170,0,4,6,153,0],secondary:!1},{width:3,bonus:20,chr:":",pixels:[1,3,255,255,1,7,255,255,2,4,255,0,2,8,255,0],secondary:!0},{width:3,bonus:40,chr:";",pixels:[0,9,201,255,1,3,255,255,1,7,241,255,1,8,255,255,1,10,201,0,2,4,255,0,2,8,241,0,2,9,255,0],secondary:!0},{width:3,bonus:30,chr:'"',pixels:[0,1,255,255,0,2,255,255,1,2,255,0,1,3,255,0,2,1,255,255,2,2,255,255],secondary:!0},{width:2,bonus:20,chr:"'",pixels:[0,1,255,255,0,2,177,255,1,2,255,30,1,3,177,0],secondary:!0},{width:7,bonus:70,chr:"<",pixels:[0,5,203,255,1,5,255,255,1,6,228,133,2,4,237,255,2,6,254,239,3,4,169,255,3,5,238,0,3,6,175,247,3,7,243,89,4,3,221,255,4,5,170,0,4,7,244,231,5,4,221,0,5,8,221,0],secondary:!1},{width:7,bonus:80,chr:">",pixels:[0,3,203,255,0,7,203,255,1,4,228,133,1,7,187,255,1,8,204,0,2,4,247,245,2,6,255,255,2,8,187,0,3,4,175,247,3,5,248,157,3,6,203,255,3,7,255,0,4,5,255,255,4,6,173,75,4,7,204,0,5,6,255,0],secondary:!1},{width:5,bonus:70,chr:"\\",pixels:[1,1,153,255,1,2,255,255,1,3,203,255,2,2,153,0,2,3,255,51,2,4,231,150,2,5,255,255,2,6,203,255,3,6,255,34,3,7,231,150,3,8,255,255,3,9,207,251,4,9,255,0,4,10,204,0],secondary:!1},{width:2,bonus:10,chr:".",pixels:[0,8,255,255,1,9,255,0],secondary:!0},{width:3,bonus:30,chr:",",pixels:[0,9,205,255,1,7,205,255,1,8,255,255,1,10,205,0,2,8,205,0,2,9,255,0],secondary:!0},{width:3,bonus:100,chr:"|",pixels:[0,1,221,255,0,2,221,255,0,3,221,255,0,4,221,255,0,5,221,255,0,6,221,255,0,7,221,255,0,8,221,255,0,9,221,255,0,10,203,255,1,2,226,39,1,3,226,39,1,4,226,39,1,5,226,39,1,6,226,39,1,7,226,39,1,8,226,39,1,9,226,39,1,10,226,39,1,11,204,0],secondary:!1}],width:10,spacewidth:3,shadow:!0,height:12,basey:8}}],i={},function e(n){var o=i[n];if(void 0!==o)return o.exports;var r=i[n]={exports:{}};return t[n](r,r.exports,e),r.exports}(0))},4758:function(e){var t,i;"undefined"!=typeof self&&self,e.exports=(t=[e=>{e.exports={chars:[{width:3,bonus:55,chr:"!",pixels:[0,4,221,0,5,170,0,6,153,0,12,153,1,3,221,1,4,255,1,5,221,1,6,204,1,7,170,1,8,153,1,12,204],secondary:!1},{width:6,bonus:30,chr:'"',pixels:[1,2,221,1,3,255,1,4,170,3,2,221,3,3,255,3,4,170],secondary:!0},{width:9,bonus:160,chr:"#",pixels:[1,5,221,1,8,255,2,5,255,2,7,153,2,8,255,2,9,204,2,10,238,2,11,238,3,2,187,3,3,238,3,4,255,3,5,255,3,6,170,3,7,170,3,8,255,4,5,255,4,8,255,5,4,153,5,5,255,5,6,170,5,7,204,5,8,255,5,9,238,5,10,204,5,11,170,6,2,238,6,3,204,6,4,204,6,5,255,6,8,255,7,5,255,7,8,153],secondary:!1},{width:7,bonus:145,chr:"$",pixels:[1,3,204,1,4,255,1,5,187,1,10,153,1,11,204,2,2,187,2,5,221,2,6,255,2,10,170,2,11,255,2,12,221,3,1,153,3,2,238,3,3,221,3,4,238,3,5,204,3,6,238,3,7,255,3,8,153,3,11,221,4,2,221,4,7,255,4,8,221,4,10,187,5,2,170,5,3,187,5,8,221,5,9,255,5,10,153],secondary:!1},{width:12,bonus:175,chr:"%",pixels:[1,4,255,1,5,255,1,6,255,2,3,153,2,7,204,3,3,170,3,7,204,3,12,187,4,3,187,4,4,255,4,5,255,4,6,255,4,10,238,4,11,204,5,7,170,5,8,238,5,9,153,6,5,204,6,6,221,6,9,187,6,10,255,6,11,204,7,3,238,7,4,170,7,8,187,7,11,153,7,12,204,8,8,187,8,12,187,9,8,204,9,9,153,9,12,187,10,9,187,10,10,255,10,11,187],secondary:!1},{width:12,bonus:175,chr:"&",pixels:[0,9,221,0,10,255,0,11,153,1,5,153,1,8,238,1,9,187,1,10,238,1,11,255,2,4,255,2,5,255,2,6,255,2,7,255,2,11,170,2,12,221,3,3,204,3,7,255,3,8,221,3,12,255,4,3,221,4,8,238,4,9,221,4,12,238,5,3,238,5,9,238,5,10,187,5,12,170,6,4,153,6,10,255,6,11,238,7,10,221,7,11,255,8,8,238,8,9,170,8,12,238,9,12,221],secondary:!1},{width:3,bonus:15,chr:"'",pixels:[0,2,153,1,2,187,1,3,204],secondary:!0},{width:5,bonus:60,chr:"(",pixels:[0,6,204,0,7,255,0,8,238,0,9,187,1,4,238,1,5,204,1,6,153,1,9,170,1,10,238,1,11,204,2,3,153,2,12,187],secondary:!1},{width:5,bonus:50,chr:")",pixels:[1,3,204,1,4,153,1,11,221,2,4,153,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,204],secondary:!1},{width:5,bonus:40,chr:"*",pixels:[0,3,170,0,5,153,1,2,187,1,3,187,1,4,221,2,4,170,2,5,221,3,3,153],secondary:!0},{width:8,bonus:65,chr:"+",pixels:[0,8,153,1,8,255,2,8,255,3,5,153,3,6,255,3,7,255,3,8,255,3,9,255,3,10,255,3,11,153,4,8,255,5,8,255,6,8,187],secondary:!1},{width:3,bonus:10,chr:",",pixels:[1,10,187,1,11,221],secondary:!0},{width:6,bonus:20,chr:"-",pixels:[0,9,204,1,9,255,2,9,255,3,9,204],secondary:!0},{width:3,bonus:10,chr:".",pixels:[1,11,170,1,12,204],secondary:!0},{width:8,bonus:50,chr:"/",pixels:[0,11,187,1,10,238,2,8,221,2,9,153,3,6,170,3,7,204,4,5,238,5,3,221,5,4,170,6,2,153],secondary:!1},{width:8,bonus:145,chr:"0",pixels:[0,7,153,0,8,187,0,9,170,1,5,221,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,238,2,4,187,2,11,170,2,12,204,3,4,187,3,12,204,4,4,221,4,12,187,5,5,255,5,6,255,5,7,204,5,8,187,5,9,187,5,10,238,5,11,238,6,6,187,6,7,238,6,8,255,6,9,221,6,10,170],secondary:!1},{width:7,bonus:95,chr:"1",pixels:[1,5,153,2,5,255,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,187,2,12,238,3,4,204,3,5,255,3,6,255,3,7,255,3,8,255,3,9,255,3,10,255,3,11,255,3,12,255,4,12,153],secondary:!1},{width:9,bonus:115,chr:"2",pixels:[1,4,170,1,5,204,1,12,255,2,4,204,2,11,221,2,12,255,3,4,204,3,10,204,3,12,255,4,4,221,4,9,238,4,12,255,5,4,153,5,5,255,5,6,255,5,7,255,5,8,255,5,12,255,6,5,153,6,6,221,6,7,170,6,11,187,6,12,204],secondary:!1},{width:7,bonus:105,chr:"3",pixels:[0,11,187,0,12,187,1,4,204,1,12,238,2,4,221,2,12,221,3,4,238,3,7,187,3,8,221,3,12,204,4,4,170,4,5,255,4,6,255,4,7,153,4,8,238,4,9,255,4,10,221,4,11,255,5,5,170,5,9,221,5,10,238],secondary:!1},{width:9,bonus:120,chr:"4",pixels:[1,9,204,1,10,255,2,8,204,2,10,255,3,7,187,3,10,255,4,5,170,4,6,238,4,7,153,4,8,153,4,9,170,4,10,255,4,11,153,4,12,221,5,4,204,5,5,255,5,6,255,5,7,255,5,8,255,5,9,255,5,10,255,5,11,255,5,12,255,6,10,255],secondary:!1},{width:7,bonus:110,chr:"5",pixels:[0,11,170,0,12,221,1,4,255,1,5,204,1,6,221,1,7,187,1,12,238,2,4,255,2,7,255,2,12,204,3,4,255,3,7,255,3,8,204,3,12,170,4,4,255,4,8,255,4,9,255,4,10,255,4,11,238,5,4,153,5,9,187,5,10,153],secondary:!1},{width:7,bonus:105,chr:"6",pixels:[0,8,187,0,9,255,0,10,238,1,6,170,1,7,255,1,8,221,1,9,187,1,10,204,1,11,255,2,5,187,2,6,153,2,12,221,3,8,221,3,12,204,4,8,204,4,9,238,4,10,187,4,11,221,5,9,221,5,10,255,5,11,153],secondary:!1},{width:7,bonus:90,chr:"7",pixels:[0,4,204,0,5,187,1,4,255,1,12,170,2,4,255,2,10,221,2,11,255,2,12,187,3,4,255,3,8,221,3,9,238,3,10,153,4,4,255,4,5,153,4,6,204,4,7,187,5,4,255,5,5,187],secondary:!1},{width:8,bonus:170,chr:"8",pixels:[0,10,153,1,5,204,1,6,238,1,9,238,1,10,255,1,11,255,2,4,170,2,5,153,2,6,170,2,7,255,2,8,204,2,12,221,3,4,187,3,7,204,3,8,187,3,12,204,4,4,204,4,7,153,4,8,255,4,12,204,5,4,204,5,5,187,5,6,187,5,7,187,5,8,187,5,9,255,5,10,170,5,11,204,5,12,153,6,5,238,6,6,204,6,9,187,6,10,255,6,11,170],secondary:!1},{width:7,bonus:105,chr:"9",pixels:[0,6,238,0,7,238,0,8,153,1,5,204,1,6,153,1,7,187,1,8,255,2,4,204,2,9,187,3,4,221,3,11,187,4,5,255,4,6,238,4,7,187,4,8,187,4,9,238,4,10,255,5,6,221,5,7,255,5,8,238,5,9,170],secondary:!1},{width:3,bonus:20,chr:":",pixels:[0,5,170,0,6,204,0,10,204,0,11,170],secondary:!0},{width:3,bonus:25,chr:";",pixels:[0,4,170,0,5,204,0,9,221,0,11,153,1,9,170],secondary:!0},{width:8,bonus:55,chr:"<",pixels:[1,8,255,1,9,187,2,8,170,2,9,238,3,7,238,4,7,187,4,10,238,5,6,204,5,10,187,6,6,221,6,11,204],secondary:!1},{width:8,bonus:60,chr:"=",pixels:[1,7,255,1,9,255,2,7,255,2,9,255,3,7,255,3,9,255,4,7,255,4,9,255,5,7,255,5,9,255,6,7,255,6,9,255],secondary:!1},{width:8,bonus:55,chr:">",pixels:[1,6,238,1,11,170,2,6,170,2,10,221,3,7,238,3,10,204,4,7,204,4,9,187,5,8,221,5,9,238,6,8,221],secondary:!1},{width:7,bonus:80,chr:"?",pixels:[1,3,170,1,4,153,2,3,221,2,9,238,2,12,153,3,3,238,3,7,170,3,8,221,3,12,204,4,3,204,4,4,238,4,5,221,4,6,255,4,7,187,5,4,221,5,5,238],secondary:!1},{width:11,bonus:185,chr:"@",pixels:[0,7,187,0,8,238,0,9,255,0,10,187,1,5,153,1,6,170,1,11,238,2,12,170,3,7,221,3,8,255,3,9,255,3,10,238,3,12,204,4,3,153,4,6,170,4,12,187,5,3,153,5,5,170,5,8,170,5,9,204,5,12,170,6,3,170,6,5,187,6,6,238,6,7,255,6,8,255,6,9,255,6,10,238,6,12,153,7,3,170,7,10,204,8,4,187,8,9,170,9,5,204,9,6,221,9,7,221,9,8,170],secondary:!1},{width:10,bonus:125,chr:"A",pixels:[1,12,238,2,9,187,2,10,238,2,11,170,2,12,187,3,7,221,3,8,204,3,9,238,4,5,238,4,6,238,4,9,221,5,5,187,5,6,255,5,7,255,5,8,187,5,9,238,6,7,153,6,8,255,6,9,255,6,10,238,6,11,153,7,10,221,7,11,255,7,12,255,8,12,221],secondary:!1},{width:8,bonus:160,chr:"B",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,238,2,9,187,2,10,187,2,11,187,2,12,255,3,4,204,3,8,204,3,12,204,4,4,221,4,5,187,4,7,187,4,8,255,4,12,204,5,5,238,5,6,238,5,9,255,5,10,255,5,11,255,6,10,187],secondary:!1},{width:9,bonus:120,chr:"C",pixels:[0,7,221,0,8,255,0,9,221,1,5,221,1,6,255,1,7,238,1,8,221,1,9,255,1,10,255,1,11,204,2,5,187,2,11,255,3,4,204,3,12,204,4,4,221,4,12,238,5,4,221,5,12,221,6,4,221,6,12,238,7,4,187,7,5,204,7,11,187,7,12,170],secondary:!1},{width:11,bonus:200,chr:"D",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,204,2,12,255,3,4,221,3,12,238,4,4,238,4,12,221,5,4,238,5,12,221,6,4,204,6,5,153,6,12,187,7,5,255,7,6,153,7,11,238,8,5,204,8,6,255,8,7,255,8,8,255,8,9,255,8,10,255,8,11,170,9,7,204,9,8,221,9,9,187],secondary:!1},{width:7,bonus:135,chr:"E",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,255,2,9,187,2,10,187,2,11,204,2,12,255,3,4,221,3,8,221,3,12,238,4,4,238,4,8,221,4,12,221,5,4,187,5,8,153,5,12,238],secondary:!1},{width:7,bonus:115,chr:"F",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,255,2,9,187,2,10,187,2,11,187,2,12,238,3,4,221,3,8,221,4,4,238,4,8,221,5,4,221],secondary:!1},{width:10,bonus:150,chr:"G",pixels:[0,7,204,0,8,255,0,9,255,0,10,187,1,5,187,1,6,255,1,7,238,1,8,221,1,9,238,1,10,255,1,11,221,2,5,204,2,11,238,3,4,204,3,12,204,4,4,221,4,12,238,5,4,238,5,12,221,6,4,221,6,9,238,6,10,187,6,11,187,6,12,221,7,4,170,7,5,221,7,9,255,7,10,255,7,11,255,7,12,153],secondary:!1},{width:11,bonus:200,chr:"H",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,255,2,9,187,2,10,187,2,11,187,2,12,238,3,8,221,4,8,221,5,8,221,6,8,221,7,4,255,7,5,255,7,6,255,7,7,255,7,8,255,7,9,255,7,10,255,7,11,255,7,12,255,8,4,238,8,5,187,8,6,187,8,7,187,8,8,187,8,9,187,8,10,187,8,11,187,8,12,238],secondary:!1},{width:5,bonus:90,chr:"I",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,187,2,12,238],secondary:!1},{width:6,bonus:100,chr:"J",pixels:[2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,2,11,255,2,12,255,2,13,255,2,14,187,3,4,238,3,5,187,3,6,187,3,7,187,3,8,187,3,9,187,3,10,187,3,11,187,3,12,187],secondary:!1},{width:10,bonus:170,chr:"K",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,255,2,9,204,2,10,187,2,11,187,2,12,238,3,7,170,3,8,255,3,9,221,4,6,204,4,9,238,4,10,238,5,4,153,5,5,238,5,10,238,5,11,238,6,4,255,6,11,238,6,12,187,7,4,153,7,12,255,8,12,153],secondary:!1},{width:8,bonus:105,chr:"L",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,204,2,12,255,3,12,238,4,12,221,5,12,255],secondary:!1},{width:13,bonus:190,chr:"M",pixels:[1,9,170,1,10,204,1,11,238,1,12,255,2,4,187,2,5,255,2,6,255,2,7,238,2,8,153,2,12,153,3,6,238,3,7,255,3,8,238,4,8,238,4,9,255,4,10,238,5,10,238,5,11,255,5,12,187,6,9,153,6,10,238,7,7,153,7,8,238,8,5,170,8,6,255,8,7,238,9,4,153,9,5,204,9,6,255,9,7,255,9,8,255,9,9,255,9,10,255,9,11,255,9,12,238,10,10,153,10,11,187,10,12,255],secondary:!1},{width:11,bonus:170,chr:"N",pixels:[0,12,170,1,4,187,1,5,255,1,6,255,1,7,238,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,5,204,2,6,255,2,12,153,3,6,221,3,7,255,4,7,238,4,8,255,5,8,238,5,9,255,6,9,238,6,10,238,7,4,153,7,10,255,7,11,238,8,4,255,8,5,255,8,6,255,8,7,255,8,8,255,8,9,255,8,10,255,8,11,255,8,12,204,9,4,153],secondary:!1},{width:10,bonus:160,chr:"O",pixels:[0,7,221,0,8,255,0,9,221,1,5,204,1,6,255,1,7,221,1,8,221,1,9,255,1,10,255,1,11,221,2,5,170,2,11,238,3,4,221,3,12,221,4,4,221,4,12,221,5,4,238,5,12,204,6,4,153,6,5,238,6,11,170,7,5,238,7,6,255,7,7,255,7,8,221,7,9,238,7,10,255,7,11,187,8,6,153,8,7,238,8,8,255,8,9,204],secondary:!1},{width:8,bonus:130,chr:"P",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,187,2,12,238,3,4,204,4,4,238,5,4,170,5,5,255,5,6,255,5,7,255,5,8,204,6,6,187],secondary:!1},{width:10,bonus:200,chr:"Q",pixels:[0,7,221,0,8,255,0,9,221,1,5,187,1,6,255,1,7,238,1,8,221,1,9,255,1,10,255,1,11,221,2,5,170,2,11,238,2,12,153,3,4,221,3,12,221,4,4,221,4,12,238,5,4,238,5,12,204,6,4,153,6,5,238,6,11,153,6,12,238,7,5,221,7,6,255,7,7,255,7,8,221,7,9,238,7,10,255,7,11,170,7,12,204,7,13,221,8,6,153,8,7,238,8,8,255,8,9,221,8,13,255,8,14,170,9,13,170,9,14,255],secondary:!1},{width:10,bonus:175,chr:"R",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,187,2,9,255,2,10,187,2,11,187,2,12,238,3,4,221,3,9,221,4,4,238,4,9,255,4,10,170,5,4,153,5,5,255,5,6,255,5,7,255,5,8,187,5,10,255,5,11,187,6,6,187,6,11,238,6,12,170,7,12,255,8,12,153],secondary:!1},{width:7,bonus:95,chr:"S",pixels:[0,11,221,0,12,187,1,5,255,1,6,255,1,7,255,1,12,238,2,4,187,2,7,255,2,8,238,2,12,221,3,4,187,3,8,255,3,9,187,3,12,221,4,4,221,4,8,187,4,9,255,4,10,255,4,11,255],secondary:!1},{width:10,bonus:125,chr:"T",pixels:[0,4,187,1,4,221,2,4,221,3,4,255,3,5,187,3,6,187,3,7,187,3,8,187,3,9,187,3,10,187,3,11,187,3,12,238,4,4,255,4,5,255,4,6,255,4,7,255,4,8,255,4,9,255,4,10,255,4,11,255,4,12,255,5,4,221,5,12,153,6,4,221,7,4,255],secondary:!1},{width:11,bonus:145,chr:"U",pixels:[1,4,238,1,5,187,1,6,187,1,7,187,1,8,187,1,9,187,1,10,153,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,2,11,255,3,11,170,3,12,204,4,12,238,5,12,221,6,12,204,7,4,187,7,11,221,8,4,255,8,5,255,8,6,255,8,7,255,8,8,255,8,9,238,8,10,204],secondary:!1},{width:11,bonus:120,chr:"V",pixels:[1,4,204,2,4,255,2,5,255,2,6,204,3,4,187,3,5,170,3,6,255,3,7,255,3,8,238,3,9,153,4,8,204,4,9,255,4,10,255,4,11,187,5,10,238,5,11,255,6,8,204,6,9,221,7,4,170,7,5,153,7,6,238,7,7,187,8,4,255,8,5,170],secondary:!1},{width:14,bonus:200,chr:"W",pixels:[1,4,255,1,5,221,2,4,238,2,5,255,2,6,255,2,7,255,2,8,221,3,7,153,3,8,221,3,9,255,3,10,255,3,11,221,4,9,153,4,10,255,4,11,204,5,7,170,5,8,238,5,9,153,6,5,238,6,6,255,6,7,153,7,5,187,7,6,255,7,7,255,7,8,204,8,8,238,8,9,255,8,10,238,8,11,153,9,9,153,9,10,255,9,11,255,9,12,170,10,7,170,10,8,238,10,9,187,11,4,238,11,5,255,11,6,187,12,4,170],secondary:!1},{width:10,bonus:135,chr:"X",pixels:[1,4,221,1,12,238,2,4,255,2,5,255,2,10,170,2,11,221,2,12,187,3,4,153,3,5,187,3,6,255,3,7,238,3,9,221,4,7,255,4,8,255,4,9,204,5,6,204,5,7,153,5,9,255,5,10,255,5,11,153,6,4,221,6,5,238,6,10,204,6,11,255,6,12,255,7,4,204,7,12,238],secondary:!1},{width:9,bonus:115,chr:"Y",pixels:[0,5,187,1,5,255,1,6,221,2,5,170,2,6,238,2,7,255,2,8,170,3,8,255,3,9,255,3,10,187,3,11,187,3,12,187,3,13,238,4,9,255,4,10,255,4,11,255,4,12,255,4,13,255,5,7,187,5,8,204,6,5,238,6,6,238,7,5,204],secondary:!1},{width:9,bonus:145,chr:"Z",pixels:[1,5,187,1,6,153,1,13,255,2,5,238,2,11,221,2,12,255,2,13,255,3,5,221,3,9,153,3,10,255,3,11,238,3,13,255,4,5,221,4,8,238,4,9,255,4,10,187,4,13,255,5,5,238,5,6,187,5,7,255,5,8,238,5,13,255,6,5,255,6,6,255,6,7,153,6,13,255,7,5,204,7,12,187,7,13,187],secondary:!1},{width:5,bonus:70,chr:"[",pixels:[1,3,187,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,1,13,255,1,14,187,2,3,153,2,14,153],secondary:!1},{width:8,bonus:50,chr:"\\",pixels:[0,4,170,1,5,204,1,6,170,2,7,238,3,8,170,3,9,204,4,10,221,4,11,153,5,12,238,6,13,187],secondary:!1},{width:4,bonus:70,chr:"]",pixels:[1,3,170,1,14,170,2,3,187,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,2,11,255,2,12,255,2,13,255,2,14,187],secondary:!1},{width:7,bonus:55,chr:"^",pixels:[0,9,238,1,6,170,1,7,238,1,8,153,2,4,204,2,5,221,3,4,187,3,5,238,4,7,238,4,8,187,5,9,204],secondary:!1},{width:8,bonus:35,chr:"_",pixels:[0,12,221,1,12,221,2,12,221,3,12,221,4,12,221,5,12,221,6,12,153],secondary:!1},{width:10,bonus:125,chr:"a",pixels:[1,12,238,2,9,187,2,10,238,2,11,170,2,12,187,3,7,221,3,8,204,3,9,238,4,5,238,4,6,238,4,9,221,5,5,187,5,6,255,5,7,255,5,8,187,5,9,238,6,7,153,6,8,255,6,9,255,6,10,238,6,11,153,7,10,221,7,11,255,7,12,255,8,12,221],secondary:!1},{width:8,bonus:160,chr:"b",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,238,2,9,187,2,10,187,2,11,187,2,12,255,3,4,204,3,8,204,3,12,204,4,4,221,4,5,187,4,7,187,4,8,255,4,12,204,5,5,238,5,6,238,5,9,255,5,10,255,5,11,255,6,10,187],secondary:!1},{width:9,bonus:120,chr:"c",pixels:[0,7,221,0,8,255,0,9,221,1,5,221,1,6,255,1,7,238,1,8,221,1,9,255,1,10,255,1,11,204,2,5,187,2,11,255,3,4,204,3,12,204,4,4,221,4,12,238,5,4,221,5,12,221,6,4,221,6,12,238,7,4,187,7,5,204,7,11,187,7,12,170],secondary:!1},{width:11,bonus:200,chr:"d",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,204,2,12,255,3,4,221,3,12,238,4,4,238,4,12,221,5,4,238,5,12,221,6,4,204,6,5,153,6,12,187,7,5,255,7,6,153,7,11,238,8,5,204,8,6,255,8,7,255,8,8,255,8,9,255,8,10,255,8,11,170,9,7,204,9,8,221,9,9,187],secondary:!1},{width:7,bonus:135,chr:"e",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,255,2,9,187,2,10,187,2,11,204,2,12,255,3,4,221,3,8,221,3,12,238,4,4,238,4,8,221,4,12,221,5,4,187,5,8,153,5,12,238],secondary:!1},{width:7,bonus:115,chr:"f",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,255,2,9,187,2,10,187,2,11,187,2,12,238,3,4,221,3,8,221,4,4,238,4,8,221,5,4,221],secondary:!1},{width:10,bonus:150,chr:"g",pixels:[0,7,204,0,8,255,0,9,255,0,10,187,1,5,187,1,6,255,1,7,238,1,8,221,1,9,238,1,10,255,1,11,221,2,5,204,2,11,238,3,4,204,3,12,204,4,4,221,4,12,238,5,4,238,5,12,221,6,4,221,6,9,238,6,10,187,6,11,187,6,12,221,7,4,170,7,5,221,7,9,255,7,10,255,7,11,255,7,12,153],secondary:!1},{width:11,bonus:200,chr:"h",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,255,2,9,187,2,10,187,2,11,187,2,12,238,3,8,221,4,8,221,5,8,221,6,8,221,7,4,255,7,5,255,7,6,255,7,7,255,7,8,255,7,9,255,7,10,255,7,11,255,7,12,255,8,4,238,8,5,187,8,6,187,8,7,187,8,8,187,8,9,187,8,10,187,8,11,187,8,12,238],secondary:!1},{width:5,bonus:90,chr:"i",pixels:[1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,1,13,255,2,5,238,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,187,2,12,187,2,13,238],secondary:!1},{width:6,bonus:100,chr:"j",pixels:[2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,2,11,255,2,12,255,2,13,255,2,14,187,3,4,238,3,5,187,3,6,187,3,7,187,3,8,187,3,9,187,3,10,187,3,11,187,3,12,187],secondary:!1},{width:10,bonus:170,chr:"k",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,255,2,9,204,2,10,187,2,11,187,2,12,238,3,7,170,3,8,255,3,9,221,4,6,204,4,9,238,4,10,238,5,4,153,5,5,238,5,10,238,5,11,238,6,4,255,6,11,238,6,12,187,7,4,153,7,12,255,8,12,153],secondary:!1},{width:8,bonus:105,chr:"l",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,204,2,12,255,3,12,238,4,12,221,5,12,255],secondary:!1},{width:13,bonus:190,chr:"m",pixels:[1,9,170,1,10,204,1,11,238,1,12,255,2,4,187,2,5,255,2,6,255,2,7,238,2,8,153,2,12,153,3,6,238,3,7,255,3,8,238,4,8,238,4,9,255,4,10,238,5,10,238,5,11,255,5,12,187,6,9,153,6,10,238,7,7,153,7,8,238,8,5,170,8,6,255,8,7,238,9,4,153,9,5,204,9,6,255,9,7,255,9,8,255,9,9,255,9,10,255,9,11,255,9,12,238,10,10,153,10,11,187,10,12,255],secondary:!1},{width:11,bonus:170,chr:"n",pixels:[0,12,170,1,4,187,1,5,255,1,6,255,1,7,238,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,5,204,2,6,255,2,12,153,3,6,221,3,7,255,4,7,238,4,8,255,5,8,238,5,9,255,6,9,238,6,10,238,7,4,153,7,10,255,7,11,238,8,4,255,8,5,255,8,6,255,8,7,255,8,8,255,8,9,255,8,10,255,8,11,255,8,12,204,9,4,153],secondary:!1},{width:10,bonus:160,chr:"o",pixels:[0,7,221,0,8,255,0,9,221,1,5,204,1,6,255,1,7,221,1,8,221,1,9,255,1,10,255,1,11,221,2,5,170,2,11,238,3,4,221,3,12,221,4,4,221,4,12,221,5,4,238,5,12,204,6,4,153,6,5,238,6,11,170,7,5,238,7,6,255,7,7,255,7,8,221,7,9,238,7,10,255,7,11,187,8,6,153,8,7,238,8,8,255,8,9,204],secondary:!1},{width:8,bonus:130,chr:"p",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,238,2,5,187,2,6,187,2,7,187,2,8,187,2,9,187,2,10,187,2,11,187,2,12,238,3,4,204,4,4,238,5,4,170,5,5,255,5,6,255,5,7,255,5,8,204,6,6,187],secondary:!1},{width:10,bonus:200,chr:"q",pixels:[0,7,221,0,8,255,0,9,221,1,5,187,1,6,255,1,7,238,1,8,221,1,9,255,1,10,255,1,11,221,2,5,170,2,11,238,2,12,153,3,4,221,3,12,221,4,4,221,4,12,238,5,4,238,5,12,204,6,4,153,6,5,238,6,11,153,6,12,238,7,5,221,7,6,255,7,7,255,7,8,221,7,9,238,7,10,255,7,11,170,7,12,204,7,13,221,8,6,153,8,7,238,8,8,255,8,9,221,8,13,255,8,14,170,9,13,170,9,14,255],secondary:!1},{width:10,bonus:175,chr:"r",pixels:[1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255,2,4,255,2,5,187,2,6,187,2,7,187,2,8,187,2,9,255,2,10,187,2,11,187,2,12,238,3,4,221,3,9,221,4,4,238,4,9,255,4,10,170,5,4,153,5,5,255,5,6,255,5,7,255,5,8,187,5,10,255,5,11,187,6,6,187,6,11,238,6,12,170,7,12,255,8,12,153],secondary:!1},{width:7,bonus:95,chr:"s",pixels:[0,11,221,0,12,187,1,5,255,1,6,255,1,7,255,1,12,238,2,4,187,2,7,255,2,8,238,2,12,221,3,4,187,3,8,255,3,9,187,3,12,221,4,4,221,4,8,187,4,9,255,4,10,255,4,11,255],secondary:!1},{width:10,bonus:125,chr:"t",pixels:[0,4,187,1,4,221,2,4,221,3,4,255,3,5,187,3,6,187,3,7,187,3,8,187,3,9,187,3,10,187,3,11,187,3,12,238,4,4,255,4,5,255,4,6,255,4,7,255,4,8,255,4,9,255,4,10,255,4,11,255,4,12,255,5,4,221,5,12,153,6,4,221,7,4,255],secondary:!1},{width:11,bonus:145,chr:"u",pixels:[1,4,238,1,5,187,1,6,187,1,7,187,1,8,187,1,9,187,1,10,153,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,2,11,255,3,11,170,3,12,204,4,12,238,5,12,221,6,12,204,7,4,187,7,11,221,8,4,255,8,5,255,8,6,255,8,7,255,8,8,255,8,9,238,8,10,204],secondary:!1},{width:11,bonus:120,chr:"v",pixels:[1,4,204,2,4,255,2,5,255,2,6,204,3,4,187,3,5,170,3,6,255,3,7,255,3,8,238,3,9,153,4,8,204,4,9,255,4,10,255,4,11,187,5,10,238,5,11,255,6,8,204,6,9,221,7,4,170,7,5,153,7,6,238,7,7,187,8,4,255,8,5,170],secondary:!1},{width:14,bonus:200,chr:"w",pixels:[1,4,255,1,5,221,2,4,238,2,5,255,2,6,255,2,7,255,2,8,221,3,7,153,3,8,221,3,9,255,3,10,255,3,11,221,4,9,153,4,10,255,4,11,204,5,7,170,5,8,238,5,9,153,6,5,238,6,6,255,6,7,153,7,5,187,7,6,255,7,7,255,7,8,204,8,8,238,8,9,255,8,10,238,8,11,153,9,9,153,9,10,255,9,11,255,9,12,170,10,7,170,10,8,238,10,9,187,11,4,238,11,5,255,11,6,187,12,4,170],secondary:!1},{width:10,bonus:135,chr:"x",pixels:[1,4,221,1,12,238,2,4,255,2,5,255,2,10,170,2,11,221,2,12,187,3,4,153,3,5,187,3,6,255,3,7,238,3,9,221,4,7,255,4,8,255,4,9,204,5,6,204,5,7,153,5,9,255,5,10,255,5,11,153,6,4,221,6,5,238,6,10,204,6,11,255,6,12,255,7,4,204,7,12,238],secondary:!1},{width:9,bonus:115,chr:"y",pixels:[0,4,187,1,4,255,1,5,221,2,4,170,2,5,238,2,6,255,2,7,170,3,7,255,3,8,255,3,9,187,3,10,187,3,11,187,3,12,238,4,8,255,4,9,255,4,10,255,4,11,255,4,12,255,5,6,187,5,7,204,6,4,238,6,5,238,7,4,204],secondary:!1},{width:9,bonus:145,chr:"z",pixels:[1,4,187,1,5,153,1,12,255,2,4,238,2,10,221,2,11,255,2,12,255,3,4,221,3,8,153,3,9,255,3,10,238,3,12,255,4,4,221,4,7,238,4,8,255,4,9,187,4,12,255,5,4,238,5,5,187,5,6,255,5,7,238,5,12,255,6,4,255,6,5,255,6,6,153,6,12,255,7,4,204,7,11,187,7,12,187],secondary:!1},{width:5,bonus:55,chr:"{",pixels:[1,8,204,2,4,255,2,5,255,2,6,255,2,7,187,2,9,238,2,10,255,2,11,255,2,12,255,2,13,187,3,3,170],secondary:!1},{width:3,bonus:65,chr:"|",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,1,12,255],secondary:!0},{width:6,bonus:55,chr:"}",pixels:[1,3,170,2,4,255,2,5,255,2,6,255,2,7,187,2,9,238,2,10,255,2,11,255,2,12,255,2,13,187,3,8,204],secondary:!1},{width:7,bonus:35,chr:"~",pixels:[0,9,255,1,8,255,2,8,187,3,9,238,4,10,255,5,8,255,5,9,221],secondary:!1}],width:14,spacewidth:5,shadow:!1,height:15,basey:12}}],i={},function e(n){var o=i[n];if(void 0!==o)return o.exports;var r=i[n]={exports:{}};return t[n](r,r.exports,e),r.exports}(0))},2880:(e,t,i)=>{"use strict";var n=i(8538);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===o(r)?r:String(r)),n)}var r}function s(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var a,l,c=i(3537).codes,u=c.ERR_AMBIGUOUS_ARGUMENT,h=c.ERR_INVALID_ARG_TYPE,d=c.ERR_INVALID_ARG_VALUE,p=c.ERR_INVALID_RETURN_VALUE,g=c.ERR_MISSING_ARGS,m=i(1858),f=i(7877).inspect,y=i(7877).types,v=y.isPromise,_=y.isRegExp,x=i(8662)(),w=i(3809)(),b=i(9343)("RegExp.prototype.test");function k(){var e=i(607);a=e.isDeepEqual,l=e.isDeepStrictEqual}new Map;var T=!1,S=e.exports=z,C={};function E(e){if(e.message instanceof Error)throw e.message;throw new m(e)}function A(e,t,i,n){if(!i){var o=!1;if(0===t)o=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var r=new m({actual:i,expected:!0,message:n,operator:"==",stackStartFn:e});throw r.generatedMessage=o,r}}function z(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];A.apply(void 0,[z,t.length].concat(t))}S.fail=function e(t,i,o,r,s){var a,l=arguments.length;if(0===l?a="Failed":1===l?(o=t,t=void 0):(!1===T&&(T=!0,(n.emitWarning?n.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===l&&(r="!=")),o instanceof Error)throw o;var c={actual:t,expected:i,operator:void 0===r?"fail":r,stackStartFn:s||e};void 0!==o&&(c.message=o);var u=new m(c);throw a&&(u.message=a,u.generatedMessage=!0),u},S.AssertionError=m,S.ok=z,S.equal=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");t!=i&&E({actual:t,expected:i,message:n,operator:"==",stackStartFn:e})},S.notEqual=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");t==i&&E({actual:t,expected:i,message:n,operator:"!=",stackStartFn:e})},S.deepEqual=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");void 0===a&&k(),a(t,i)||E({actual:t,expected:i,message:n,operator:"deepEqual",stackStartFn:e})},S.notDeepEqual=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");void 0===a&&k(),a(t,i)&&E({actual:t,expected:i,message:n,operator:"notDeepEqual",stackStartFn:e})},S.deepStrictEqual=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");void 0===a&&k(),l(t,i)||E({actual:t,expected:i,message:n,operator:"deepStrictEqual",stackStartFn:e})},S.notDeepStrictEqual=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");void 0===a&&k(),l(t,i)&&E({actual:t,expected:i,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},S.strictEqual=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");w(t,i)||E({actual:t,expected:i,message:n,operator:"strictEqual",stackStartFn:e})},S.notStrictEqual=function e(t,i,n){if(arguments.length<2)throw new g("actual","expected");w(t,i)&&E({actual:t,expected:i,message:n,operator:"notStrictEqual",stackStartFn:e})};var L=s((function e(t,i,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&_(t[e])&&b(t[e],n[e])?o[e]=n[e]:o[e]=t[e])}))}));function P(e,t,i,n){if("function"!=typeof t){if(_(t))return b(t,e);if(2===arguments.length)throw new h("expected",["Function","RegExp"],t);if("object"!==o(e)||null===e){var r=new m({actual:e,expected:t,message:i,operator:"deepStrictEqual",stackStartFn:n});throw r.operator=n.name,r}var s=Object.keys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new d("error",t,"may not be an empty object");return void 0===a&&k(),s.forEach((function(o){"string"==typeof e[o]&&_(t[o])&&b(t[o],e[o])||function(e,t,i,n,o,r){if(!(i in e)||!l(e[i],t[i])){if(!n){var s=new L(e,o),a=new L(t,o,e),c=new m({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:r});throw c.actual=e,c.expected=t,c.operator=r.name,c}E({actual:e,expected:t,message:n,operator:r.name,stackStartFn:r})}}(e,t,o,i,s,n)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function M(e){if("function"!=typeof e)throw new h("fn","Function",e);try{e()}catch(e){return e}return C}function I(e){return v(e)||null!==e&&"object"===o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function O(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!I(t=e()))throw new p("instance of Promise","promiseFn",t)}else{if(!I(e))throw new h("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return C})).catch((function(e){return e}))}))}function D(e,t,i,n){if("string"==typeof i){if(4===arguments.length)throw new h("error",["Object","Error","Function","RegExp"],i);if("object"===o(t)&&null!==t){if(t.message===i)throw new u("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===i)throw new u("error/message",'The error "'.concat(t,'" is identical to the message.'));n=i,i=void 0}else if(null!=i&&"object"!==o(i)&&"function"!=typeof i)throw new h("error",["Object","Error","Function","RegExp"],i);if(t===C){var r="";i&&i.name&&(r+=" (".concat(i.name,")")),r+=n?": ".concat(n):".";var s="rejects"===e.name?"rejection":"exception";E({actual:void 0,expected:i,operator:e.name,message:"Missing expected ".concat(s).concat(r),stackStartFn:e})}if(i&&!P(t,i,n,e))throw t}function R(e,t,i,n){if(t!==C){if("string"==typeof i&&(n=i,i=void 0),!i||P(t,i)){var o=n?": ".concat(n):".",r="doesNotReject"===e.name?"rejection":"exception";E({actual:t,expected:i,operator:e.name,message:"Got unwanted ".concat(r).concat(o,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function B(e,t,i,n,r){if(!_(t))throw new h("regexp","RegExp",t);var s="match"===r;if("string"!=typeof e||b(t,e)!==s){if(i instanceof Error)throw i;var a=!i;i=i||("string"!=typeof e?'The "string" argument must be of type string. Received type '+"".concat(o(e)," (").concat(f(e),")"):(s?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(f(t),". Input:\n\n").concat(f(e),"\n"));var l=new m({actual:e,expected:t,message:i,operator:r,stackStartFn:n});throw l.generatedMessage=a,l}}function N(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];A.apply(void 0,[N,t.length].concat(t))}S.throws=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];D.apply(void 0,[e,M(t)].concat(n))},S.rejects=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return O(t).then((function(t){return D.apply(void 0,[e,t].concat(n))}))},S.doesNotThrow=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];R.apply(void 0,[e,M(t)].concat(n))},S.doesNotReject=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return O(t).then((function(t){return R.apply(void 0,[e,t].concat(n))}))},S.ifError=function e(t){if(null!=t){var i="ifError got unwanted exception: ";"object"===o(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?i+=t.constructor.name:i+=t.message:i+=f(t);var n=new m({actual:t,expected:null,operator:"ifError",message:i,stackStartFn:e}),r=t.stack;if("string"==typeof r){var s=r.split("\n");s.shift();for(var a=n.stack.split("\n"),l=0;l<s.length;l++){var c=a.indexOf(s[l]);if(-1!==c){a=a.slice(0,c);break}}n.stack="".concat(a.join("\n"),"\n").concat(s.join("\n"))}throw n}},S.match=function e(t,i,n){B(t,i,n,e,"match")},S.doesNotMatch=function e(t,i,n){B(t,i,n,e,"doesNotMatch")},S.strict=x(N,S,{equal:S.strictEqual,deepEqual:S.deepStrictEqual,notEqual:S.notStrictEqual,notDeepEqual:S.notDeepStrictEqual}),S.strict.strict=S.strict},1858:(e,t,i)=>{"use strict";var n=i(8538);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){var n,o,r;n=e,o=t,r=i[t],(o=a(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}function l(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},u(e)}function h(e,t,i){return h=d()?Reflect.construct.bind():function(e,t,i){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return i&&p(o,i.prototype),o},h.apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var f=i(7877).inspect,y=i(3537).codes.ERR_INVALID_ARG_TYPE;function v(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}var _="",x="",w="",b="",k={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function T(e){var t=Object.keys(e),i=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){i[t]=e[t]})),Object.defineProperty(i,"message",{value:e.message}),i}function S(e){return f(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var C=function(e,t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(C,e);var i,o,a,u,h=(i=C,o=d(),function(){var e,t=g(i);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function C(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C),"object"!==m(e)||null===e)throw new y("options","Object",e);var i=e.message,o=e.operator,r=e.stackStartFn,s=e.actual,a=e.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)t=h.call(this,String(i));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(_="[34m",x="[32m",b="[39m",w="[31m"):(_="",x="",b="",w="")),"object"===m(s)&&null!==s&&"object"===m(a)&&null!==a&&"stack"in s&&s instanceof Error&&"stack"in a&&a instanceof Error&&(s=T(s),a=T(a)),"deepStrictEqual"===o||"strictEqual"===o)t=h.call(this,function(e,t,i){var o="",r="",s=0,a="",l=!1,c=S(e),u=c.split("\n"),h=S(t).split("\n"),d=0,p="";if("strictEqual"===i&&"object"===m(e)&&"object"===m(t)&&null!==e&&null!==t&&(i="strictEqualObject"),1===u.length&&1===h.length&&u[0]!==h[0]){var g=u[0].length+h[0].length;if(g<=10){if(!("object"===m(e)&&null!==e||"object"===m(t)&&null!==t||0===e&&0===t))return"".concat(k[i],"\n\n")+"".concat(u[0]," !== ").concat(h[0],"\n")}else if("strictEqualObject"!==i&&g<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;u[0][d]===h[0][d];)d++;d>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var i=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,i-e.length)}(" ",d),"^"),d=0)}}for(var f=u[u.length-1],y=h[h.length-1];f===y&&(d++<2?a="\n  ".concat(f).concat(a):o=f,u.pop(),h.pop(),0!==u.length&&0!==h.length);)f=u[u.length-1],y=h[h.length-1];var T=Math.max(u.length,h.length);if(0===T){var C=c.split("\n");if(C.length>30)for(C[26]="".concat(_,"...").concat(b);C.length>27;)C.pop();return"".concat(k.notIdentical,"\n\n").concat(C.join("\n"),"\n")}d>3&&(a="\n".concat(_,"...").concat(b).concat(a),l=!0),""!==o&&(a="\n  ".concat(o).concat(a),o="");var E=0,A=k[i]+"\n".concat(x,"+ actual").concat(b," ").concat(w,"- expected").concat(b),z=" ".concat(_,"...").concat(b," Lines skipped");for(d=0;d<T;d++){var L=d-s;if(u.length<d+1)L>1&&d>2&&(L>4?(r+="\n".concat(_,"...").concat(b),l=!0):L>3&&(r+="\n  ".concat(h[d-2]),E++),r+="\n  ".concat(h[d-1]),E++),s=d,o+="\n".concat(w,"-").concat(b," ").concat(h[d]),E++;else if(h.length<d+1)L>1&&d>2&&(L>4?(r+="\n".concat(_,"...").concat(b),l=!0):L>3&&(r+="\n  ".concat(u[d-2]),E++),r+="\n  ".concat(u[d-1]),E++),s=d,r+="\n".concat(x,"+").concat(b," ").concat(u[d]),E++;else{var P=h[d],M=u[d],I=M!==P&&(!v(M,",")||M.slice(0,-1)!==P);I&&v(P,",")&&P.slice(0,-1)===M&&(I=!1,M+=","),I?(L>1&&d>2&&(L>4?(r+="\n".concat(_,"...").concat(b),l=!0):L>3&&(r+="\n  ".concat(u[d-2]),E++),r+="\n  ".concat(u[d-1]),E++),s=d,r+="\n".concat(x,"+").concat(b," ").concat(M),o+="\n".concat(w,"-").concat(b," ").concat(P),E+=2):(r+=o,o="",1!==L&&0!==d||(r+="\n  ".concat(M),E++))}if(E>20&&d<T-2)return"".concat(A).concat(z,"\n").concat(r,"\n").concat(_,"...").concat(b).concat(o,"\n")+"".concat(_,"...").concat(b)}return"".concat(A).concat(l?z:"","\n").concat(r).concat(o).concat(a).concat(p)}(s,a,o));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var d=k[o],p=S(s).split("\n");if("notStrictEqual"===o&&"object"===m(s)&&null!==s&&(d=k.notStrictEqualObject),p.length>30)for(p[26]="".concat(_,"...").concat(b);p.length>27;)p.pop();t=1===p.length?h.call(this,"".concat(d," ").concat(p[0])):h.call(this,"".concat(d,"\n\n").concat(p.join("\n"),"\n"))}else{var g=S(s),f="",E=k[o];"notDeepEqual"===o||"notEqual"===o?(g="".concat(k[o],"\n\n").concat(g)).length>1024&&(g="".concat(g.slice(0,1021),"...")):(f="".concat(S(a)),g.length>512&&(g="".concat(g.slice(0,509),"...")),f.length>512&&(f="".concat(f.slice(0,509),"...")),"deepEqual"===o||"equal"===o?g="".concat(E,"\n\n").concat(g,"\n\nshould equal\n\n"):f=" ".concat(o," ").concat(f)),t=h.call(this,"".concat(g).concat(f))}return Error.stackTraceLimit=u,t.generatedMessage=!i,Object.defineProperty(c(t),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),t.code="ERR_ASSERTION",t.actual=s,t.expected=a,t.operator=o,Error.captureStackTrace&&Error.captureStackTrace(c(t),r),t.stack,t.name="AssertionError",l(t)}return a=C,(u=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(e,t){return f(this,r(r({},t),{},{customInspect:!1,depth:0}))}}])&&s(a.prototype,u),Object.defineProperty(a,"prototype",{writable:!1}),C}(u(Error),f.custom);e.exports=C},3537:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}var s,a,l={};function c(e,t,i){i||(i=Error);var s=function(i){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,i);var s,a,l,c=(a=u,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=r(a);if(l){var i=r(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(i,n,o){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=c.call(this,function(e,i,n){return"string"==typeof t?t:t(e,i,n)}(i,n,o)),r.code=e,r}return s=u,Object.defineProperty(s,"prototype",{writable:!1}),s}(i);l[e]=s}function u(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return String(e)})),i>2?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",(function(e,t,o){var r,a,l,c,h;if(void 0===s&&(s=i(2880)),s("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(a="not ",t.substr(0,4)===a)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-9,i)===t}(e," argument"))l="The ".concat(e," ").concat(r," ").concat(u(t,"type"));else{var d=("number"!=typeof h&&(h=0),h+1>(c=e).length||-1===c.indexOf(".",h)?"argument":"property");l='The "'.concat(e,'" ').concat(d," ").concat(r," ").concat(u(t,"type"))}return l+". Received type ".concat(n(o))}),TypeError),c("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=i(7877));var o=a.inspect(t);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(o)}),TypeError,RangeError),c("ERR_INVALID_RETURN_VALUE",(function(e,t,i){var o;return o=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(n(i)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(o,".")}),TypeError),c("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===s&&(s=i(2880)),s(t.length>0,"At least one arg needs to be specified");var o="The ",r=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),r){case 1:o+="".concat(t[0]," argument");break;case 2:o+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:o+=t.slice(0,r-1).join(", "),o+=", and ".concat(t[r-1]," arguments")}return"".concat(o," must be specified")}),TypeError),e.exports.codes=l},607:(e,t,i)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var s=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},l=function(e){var t=[];return e.forEach((function(e,i){return t.push([i,e])})),t},c=Object.is?Object.is:i(9513),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:i(2889);function d(e){return e.call.bind(e)}var p=d(Object.prototype.hasOwnProperty),g=d(Object.prototype.propertyIsEnumerable),m=d(Object.prototype.toString),f=i(7877).types,y=f.isAnyArrayBuffer,v=f.isArrayBufferView,_=f.isDate,x=f.isMap,w=f.isRegExp,b=f.isSet,k=f.isNativeError,T=f.isBoxedPrimitive,S=f.isNumberObject,C=f.isStringObject,E=f.isBooleanObject,A=f.isBigIntObject,z=f.isSymbolObject,L=f.isFloat32Array,P=f.isFloat64Array;function M(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i<48||i>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function I(e){return Object.keys(e).filter(M).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function O(e,t){if(e===t)return 0;for(var i=e.length,n=t.length,o=0,r=Math.min(i,n);o<r;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0}var D=0,R=1,B=2,N=3;function j(e,t,i,n){if(e===t)return 0!==e||!i||c(e,t);if(i){if("object"!==r(e))return"number"==typeof e&&h(e)&&h(t);if("object"!==r(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==r(e))return(null===t||"object"!==r(t))&&e==t;if(null===t||"object"!==r(t))return!1}var o,a,l,u,d=m(e);if(d!==m(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var p=I(e),g=I(t);return p.length===g.length&&q(e,t,i,n,R,p)}if("[object Object]"===d&&(!x(e)&&x(t)||!b(e)&&b(t)))return!1;if(_(e)){if(!_(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(w(e)){if(!w(t)||(l=e,u=t,!(s?l.source===u.source&&l.flags===u.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(u))))return!1}else if(k(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(v(e)){if(i||!L(e)&&!P(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===O(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var i=0;i<e.byteLength;i++)if(e[i]!==t[i])return!1;return!0}(e,t))return!1;var f=I(e),M=I(t);return f.length===M.length&&q(e,t,i,n,D,f)}if(b(e))return!(!b(t)||e.size!==t.size)&&q(e,t,i,n,B);if(x(e))return!(!x(t)||e.size!==t.size)&&q(e,t,i,n,N);if(y(e)){if(a=t,(o=e).byteLength!==a.byteLength||0!==O(new Uint8Array(o),new Uint8Array(a)))return!1}else if(T(e)&&!function(e,t){return S(e)?S(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):C(e)?C(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):E(e)?E(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):A(e)?A(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):z(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return q(e,t,i,n,D)}function F(e,t){return t.filter((function(t){return g(e,t)}))}function q(e,t,i,o,s,c){if(5===arguments.length){c=Object.keys(e);var h=Object.keys(t);if(c.length!==h.length)return!1}for(var d=0;d<c.length;d++)if(!p(t,c[d]))return!1;if(i&&5===arguments.length){var m=u(e);if(0!==m.length){var f=0;for(d=0;d<m.length;d++){var y=m[d];if(g(e,y)){if(!g(t,y))return!1;c.push(y),f++}else if(g(t,y))return!1}var v=u(t);if(m.length!==v.length&&F(t,v).length!==f)return!1}else{var _=u(t);if(0!==_.length&&0!==F(t,_).length)return!1}}if(0===c.length&&(s===D||s===R&&0===e.length||0===e.size))return!0;if(void 0===o)o={val1:new Map,val2:new Map,position:0};else{var x=o.val1.get(e);if(void 0!==x){var w=o.val2.get(t);if(void 0!==w)return x===w}o.position++}o.val1.set(e,o.position),o.val2.set(t,o.position);var b=function(e,t,i,o,s,c){var u=0;if(c===B){if(!function(e,t,i,n){for(var o=null,s=a(e),l=0;l<s.length;l++){var c=s[l];if("object"===r(c)&&null!==c)null===o&&(o=new Set),o.add(c);else if(!t.has(c)){if(i)return!1;if(!V(e,t,c))return!1;null===o&&(o=new Set),o.add(c)}}if(null!==o){for(var u=a(t),h=0;h<u.length;h++){var d=u[h];if("object"===r(d)&&null!==d){if(!U(o,d,i,n))return!1}else if(!i&&!e.has(d)&&!U(o,d,i,n))return!1}return 0===o.size}return!0}(e,t,i,s))return!1}else if(c===N){if(!function(e,t,i,o){for(var s=null,a=l(e),c=0;c<a.length;c++){var u=n(a[c],2),h=u[0],d=u[1];if("object"===r(h)&&null!==h)null===s&&(s=new Set),s.add(h);else{var p=t.get(h);if(void 0===p&&!t.has(h)||!j(d,p,i,o)){if(i)return!1;if(!$(e,t,h,d,o))return!1;null===s&&(s=new Set),s.add(h)}}}if(null!==s){for(var g=l(t),m=0;m<g.length;m++){var f=n(g[m],2),y=f[0],v=f[1];if("object"===r(y)&&null!==y){if(!W(s,e,y,v,i,o))return!1}else if(!(i||e.has(y)&&j(e.get(y),v,!1,o)||W(s,e,y,v,!1,o)))return!1}return 0===s.size}return!0}(e,t,i,s))return!1}else if(c===R)for(;u<e.length;u++){if(!p(e,u)){if(p(t,u))return!1;for(var h=Object.keys(e);u<h.length;u++){var d=h[u];if(!p(t,d)||!j(e[d],t[d],i,s))return!1}return h.length===Object.keys(t).length}if(!p(t,u)||!j(e[u],t[u],i,s))return!1}for(u=0;u<o.length;u++){var g=o[u];if(!j(e[g],t[g],i,s))return!1}return!0}(e,t,i,c,o,s);return o.val1.delete(e),o.val2.delete(t),b}function U(e,t,i,n){for(var o=a(e),r=0;r<o.length;r++){var s=o[r];if(j(t,s,i,n))return e.delete(s),!0}return!1}function H(e){switch(r(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(h(e))return!1}return!0}function V(e,t,i){var n=H(i);return null!=n?n:t.has(n)&&!e.has(n)}function $(e,t,i,n,o){var r=H(i);if(null!=r)return r;var s=t.get(r);return!(void 0===s&&!t.has(r)||!j(n,s,!1,o))&&!e.has(r)&&j(n,s,!1,o)}function W(e,t,i,n,o,r){for(var s=a(e),l=0;l<s.length;l++){var c=s[l];if(j(i,c,o,r)&&j(n,t.get(c),o,r))return e.delete(c),!0}return!1}e.exports={isDeepEqual:function(e,t){return j(e,t,!1)},isDeepStrictEqual:function(e,t){return j(e,t,!0)}}},7322:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){var t,i,r=a(e),s=r[0],l=r[1],c=new o(function(e,t,i){return 3*(t+i)/4-i}(0,s,l)),u=0,h=l>0?s-4:s;for(i=0;i<h;i+=4)t=n[e.charCodeAt(i)]<<18|n[e.charCodeAt(i+1)]<<12|n[e.charCodeAt(i+2)]<<6|n[e.charCodeAt(i+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=n[e.charCodeAt(i)]<<2|n[e.charCodeAt(i+1)]>>4,c[u++]=255&t),1===l&&(t=n[e.charCodeAt(i)]<<10|n[e.charCodeAt(i+1)]<<4|n[e.charCodeAt(i+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,r=[],s=16383,a=0,c=n-o;a<c;a+=s)r.push(l(e,a,a+s>c?c:a+s));return 1===o?(t=e[n-1],r.push(i[t>>2]+i[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],r.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),r.join("")};for(var i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)i[s]=r[s],n[r.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function l(e,t,n){for(var o,r,s=[],a=t;a<n;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(r=o)>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8891:(e,t,i)=>{"use strict";const n=i(7322),o=i(8239),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,i)}function c(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const i=0|m(e,t);let n=a(i);const o=n.write(e,t);return o!==i&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return p(e,t,i);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return p(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,i);const o=function(e){if(l.isBuffer(e)){const t=0|g(e.length),i=a(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|g(e))}function d(e){const t=e.length<0?0:0|g(e.length),i=a(t);for(let n=0;n<t;n+=1)i[n]=255&e[n];return i}function p(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(n,l.prototype),n}function g(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const i=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Z(e).length;default:if(o)return n?-1:W(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,i){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,i);case"utf8":case"utf-8":return C(this,t,i);case"ascii":return A(this,t,i);case"latin1":case"binary":return z(this,t,i);case"base64":return S(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}function v(e,t,i,n,o){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Y(i=+i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:_(e,t,i,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):_(e,[t],i,n,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,i,n,o){let r,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,i/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let n=-1;for(r=i;r<a;r++)if(c(e,r)===c(t,-1===n?0:r-n)){if(-1===n&&(n=r),r-n+1===l)return n*s}else-1!==n&&(r-=r-n),n=-1}else for(i+l>a&&(i=a-l),r=i;r>=0;r--){let i=!0;for(let n=0;n<l;n++)if(c(e,r+n)!==c(t,n)){i=!1;break}if(i)return r}return-1}function x(e,t,i,n){i=Number(i)||0;const o=e.length-i;n?(n=Number(n))>o&&(n=o):n=o;const r=t.length;let s;for(n>r/2&&(n=r/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Y(n))return s;e[i+s]=n}return s}function w(e,t,i,n){return G(W(t,e.length-i),e,i,n)}function b(e,t,i,n){return G(function(e){const t=[];for(let i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function k(e,t,i,n){return G(Z(t),e,i,n)}function T(e,t,i,n){return G(function(e,t){let i,n,o;const r=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)i=e.charCodeAt(s),n=i>>8,o=i%256,r.push(o),r.push(n);return r}(t,e.length-i),e,i,n)}function S(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function C(e,t,i){i=Math.min(e.length,i);const n=[];let o=t;for(;o<i;){const t=e[o];let r=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=i){let i,n,a,l;switch(s){case 1:t<128&&(r=t);break;case 2:i=e[o+1],128==(192&i)&&(l=(31&t)<<6|63&i,l>127&&(r=l));break;case 3:i=e[o+1],n=e[o+2],128==(192&i)&&128==(192&n)&&(l=(15&t)<<12|(63&i)<<6|63&n,l>2047&&(l<55296||l>57343)&&(r=l));break;case 4:i=e[o+1],n=e[o+2],a=e[o+3],128==(192&i)&&128==(192&n)&&128==(192&a)&&(l=(15&t)<<18|(63&i)<<12|(63&n)<<6|63&a,l>65535&&l<1114112&&(r=l))}}null===r?(r=65533,s=1):r>65535&&(r-=65536,n.push(r>>>10&1023|55296),r=56320|1023&r),n.push(r),o+=s}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let i="",n=0;for(;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=E));return i}(n)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,i){return c(e,t,i)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,i){return function(e,t,i){return u(e),e<=0?a(e):void 0!==t?"string"==typeof i?a(e).fill(t,i):a(e).fill(t):a(e)}(e,t,i)},l.allocUnsafe=function(e){return h(e)},l.allocUnsafeSlow=function(e){return h(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,n=t.length;for(let o=0,r=Math.min(i,n);o<r;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;const n=l.allocUnsafe(t);let o=0;for(i=0;i<e.length;++i){let t=e[i];if(K(t,Uint8Array))o+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):f.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const i=t.IS;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(e,t,i,n,o){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(this===e)return 0;let r=(o>>>=0)-(n>>>=0),s=(i>>>=0)-(t>>>=0);const a=Math.min(r,s),c=this.slice(n,o),u=e.slice(t,i);for(let e=0;e<a;++e)if(c[e]!==u[e]){r=c[e],s=u[e];break}return r<s?-1:s<r?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return v(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return v(this,e,t,i,!1)},l.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}const o=this.length-t;if((void 0===i||i>o)&&(i=o),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let r=!1;for(;;)switch(n){case"hex":return x(this,e,t,i);case"utf8":case"utf-8":return w(this,e,t,i);case"ascii":case"latin1":case"binary":return b(this,e,t,i);case"base64":return k(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function A(e,t,i){let n="";i=Math.min(e.length,i);for(let o=t;o<i;++o)n+=String.fromCharCode(127&e[o]);return n}function z(e,t,i){let n="";i=Math.min(e.length,i);for(let o=t;o<i;++o)n+=String.fromCharCode(e[o]);return n}function L(e,t,i){const n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);let o="";for(let n=t;n<i;++n)o+=J[e[n]];return o}function P(e,t,i){const n=e.slice(t,i);let o="";for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}function M(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,i,n,o,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<r)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function O(e,t,i,n,o){U(t,n,o,e,i,7);let r=Number(t&BigInt(4294967295));e[i++]=r,r>>=8,e[i++]=r,r>>=8,e[i++]=r,r>>=8,e[i++]=r;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s,i}function D(e,t,i,n,o){U(t,n,o,e,i,7);let r=Number(t&BigInt(4294967295));e[i+7]=r,r>>=8,e[i+6]=r,r>>=8,e[i+5]=r,r>>=8,e[i+4]=r;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[i+3]=s,s>>=8,e[i+2]=s,s>>=8,e[i+1]=s,s>>=8,e[i]=s,i+8}function R(e,t,i,n,o,r){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function B(e,t,i,n,r){return t=+t,i>>>=0,r||R(e,0,i,4),o.write(e,t,i,n,23,4),i+4}function N(e,t,i,n,r){return t=+t,i>>>=0,r||R(e,0,i,8),o.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){const i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||M(e,t,this.length);let n=this[e],o=1,r=0;for(;++r<t&&(o*=256);)n+=this[e+r]*o;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||M(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=X((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||V(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+i*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),l.prototype.readBigUInt64BE=X((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||V(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+i;return(BigInt(n)<<BigInt(32))+BigInt(o)})),l.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||M(e,t,this.length);let n=this[e],o=1,r=0;for(;++r<t&&(o*=256);)n+=this[e+r]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||M(e,t,this.length);let n=t,o=1,r=this[e+--n];for(;n>0&&(o*=256);)r+=this[e+--n]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);const i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);const i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=X((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||V(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=X((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||V(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+i)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||I(this,e,t,i,Math.pow(2,8*i)-1,0);let o=1,r=0;for(this[t]=255&e;++r<i&&(o*=256);)this[t+r]=e/o&255;return t+i},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||I(this,e,t,i,Math.pow(2,8*i)-1,0);let o=i-1,r=1;for(this[t+o]=255&e;--o>=0&&(r*=256);)this[t+o]=e/r&255;return t+i},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=X((function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=X((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*i-1);I(this,e,t,i,n-1,-n)}let o=0,r=1,s=0;for(this[t]=255&e;++o<i&&(r*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/r|0)-s&255;return t+i},l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*i-1);I(this,e,t,i,n-1,-n)}let o=i-1,r=1,s=0;for(this[t+o]=255&e;--o>=0&&(r*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/r|0)-s&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=X((function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=X((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,i){return B(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return B(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return N(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return N(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);const o=n-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),t),o},l.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;let o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(o=t;o<i;++o)this[o]=e;else{const r=l.isBuffer(e)?e:l.from(e,n),s=r.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<i-t;++o)this[o+t]=r[o%s]}return this};const j={};function F(e,t,i){j[e]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",i=e.length;const n="-"===e[0]?1:0;for(;i>=n+4;i-=3)t=`_${e.slice(i-3,i)}${t}`;return`${e.slice(0,i)}${t}`}function U(e,t,i,n,o,r){if(e>i||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=r>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(r+1)}${n}`:`>= -(2${n} ** ${8*(r+1)-1}${n}) and < 2 ** ${8*(r+1)-1}${n}`:`>= ${t}${n} and <= ${i}${n}`,new j.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,i){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+i]||V(t,e.length-(i+1))}(n,o,r)}function H(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,i){if(Math.floor(e)!==e)throw H(e,i),new j.ERR_OUT_OF_RANGE(i||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,i){let n=`The value of "${e}" is out of range.`,o=i;return Number.isInteger(i)&&Math.abs(i)>2**32?o=q(String(i)):"bigint"==typeof i&&(o=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(o=q(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function W(e,t){let i;t=t||1/0;const n=e.length;let o=null;const r=[];for(let s=0;s<n;++s){if(i=e.charCodeAt(s),i>55295&&i<57344){if(!o){if(i>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&r.push(239,191,189);continue}o=i;continue}if(i<56320){(t-=3)>-1&&r.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&(t-=3)>-1&&r.push(239,191,189);if(o=null,i<128){if((t-=1)<0)break;r.push(i)}else if(i<2048){if((t-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function Z(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,i,n){let o;for(o=0;o<n&&!(o+i>=t.length||o>=e.length);++o)t[o+i]=e[o];return o}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let i=0;i<16;++i){const n=16*i;for(let o=0;o<16;++o)t[n+o]=e[i]+e[o]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},8350:(e,t)=>{"use strict";t.if=function(e){var t,n="",o=e.length;for(t=2;t<o;t+=3)n+=i[e[t-2]>>2],n+=i[(3&e[t-2])<<4|e[t-1]>>4],n+=i[(15&e[t-1])<<2|e[t]>>6],n+=i[63&e[t]];return t===o+1&&(n+=i[e[t-2]>>2],n+=i[(3&e[t-2])<<4],n+="=="),t===o&&(n+=i[e[t-2]>>2],n+=i[(3&e[t-2])<<4|e[t-1]>>4],n+=i[(15&e[t-1])<<2],n+="="),n},t.Kp=function(e){if(e.length%4!=0)throw new Error("Unable to parse base64 string.");var t=e.indexOf("=");if(-1!==t&&t<e.length-2)throw new Error("Unable to parse base64 string.");for(var i,n=e.endsWith("==")?2:e.endsWith("=")?1:0,r=e.length,s=new Uint8Array(r/4*3),a=0,l=0;a<r;a+=4,l+=3)i=o(e.charCodeAt(a))<<18|o(e.charCodeAt(a+1))<<12|o(e.charCodeAt(a+2))<<6|o(e.charCodeAt(a+3)),s[l]=i>>16,s[l+1]=i>>8&255,s[l+2]=255&i;return s.subarray(0,s.length-n)};var i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],n=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function o(e){if(e>=n.length)throw new Error("Unable to parse base64 string.");var t=n[e];if(255===t)throw new Error("Unable to parse base64 string.");return t}},9343:(e,t,i)=>{"use strict";var n=i(8897),o=i(8179),r=o(n("String.prototype.indexOf"));e.exports=function(e,t){var i=n(e,!!t);return"function"==typeof i&&r(e,".prototype.")>-1?o(i):i}},8179:(e,t,i)=>{"use strict";var n=i(4499),o=i(8897),r=i(8973),s=i(1711),a=o("%Function.prototype.apply%"),l=o("%Function.prototype.call%"),c=o("%Reflect.apply%",!0)||n.call(l,a),u=i(7539),h=o("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new s("a function is required");var t=c(n,l,arguments);return r(t,1+h(0,e.length-(arguments.length-1)),!0)};var d=function(){return c(n,a,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},9381:(e,t,i)=>{"use strict";var n=i(7539),o=i(6296),r=i(1711),s=i(1399);e.exports=function(e,t,i){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new r("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new r("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!s&&s(e,t);if(n)n(e,t,{configurable:null===c&&h?h.configurable:!c,enumerable:null===a&&h?h.enumerable:!a,value:i,writable:null===l&&h?h.writable:!l});else{if(!u&&(a||l||c))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=i}}},5144:(e,t,i)=>{"use strict";var n=i(3425),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,s=Array.prototype.concat,a=i(9381),l=i(6900)(),c=function(e,t,i,n){if(t in e)if(!0===n){if(e[t]===i)return}else if("function"!=typeof(o=n)||"[object Function]"!==r.call(o)||!n())return;var o;l?a(e,t,i,!0):a(e,t,i)},u=function(e,t){var i=arguments.length>2?arguments[2]:{},r=n(t);o&&(r=s.call(r,Object.getOwnPropertySymbols(t)));for(var a=0;a<r.length;a+=1)c(e,r[a],t[r[a]],i[r[a]])};u.supportsDescriptors=!!l,e.exports=u},1234:function(e){e.exports=function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:i,getPrototypeOf:n,getOwnPropertyDescriptor:o}=Object;let{freeze:r,seal:s,create:a}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;r||(r=function(e){return e}),s||(s=function(e){return e}),l||(l=function(e,t,i){return e.apply(t,i)}),c||(c=function(e,t){return new e(...t)});const u=k(Array.prototype.forEach),h=k(Array.prototype.pop),d=k(Array.prototype.push),p=k(String.prototype.toLowerCase),g=k(String.prototype.toString),m=k(String.prototype.match),f=k(String.prototype.replace),y=k(String.prototype.indexOf),v=k(String.prototype.trim),_=k(Object.prototype.hasOwnProperty),x=k(RegExp.prototype.test),w=(b=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(b,t)});var b;function k(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return l(e,t,n)}}function T(e,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;t&&t(e,null);let r=n.length;for(;r--;){let t=n[r];if("string"==typeof t){const e=o(t);e!==t&&(i(n)||(n[r]=e),t=e)}e[t]=!0}return e}function S(e){for(let t=0;t<e.length;t++)_(e,t)||(e[t]=null);return e}function C(t){const i=a(null);for(const[n,o]of e(t))_(t,n)&&(Array.isArray(o)?i[n]=S(o):o&&"object"==typeof o&&o.constructor===Object?i[n]=C(o):i[n]=o);return i}function E(e,t){for(;null!==e;){const i=o(e,t);if(i){if(i.get)return k(i.get);if("function"==typeof i.value)return k(i.value)}e=n(e)}return function(){return null}}const A=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),z=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P=r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),O=r(["#text"]),D=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),R=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),N=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F=s(/<%[\w\W]*|[\w\W]*%>/gm),q=s(/\${[\w\W]*}/gm),U=s(/^data-[\-\w.\u00B7-\uFFFF]/),H=s(/^aria-[\-\w]+$/),V=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$=s(/^(?:\w+script|data):/i),W=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Z=s(/^html$/i),G=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:j,ERB_EXPR:F,TMPLIT_EXPR:q,DATA_ATTR:U,ARIA_ATTR:H,IS_ALLOWED_URI:V,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:W,DOCTYPE_NAME:Z,CUSTOM_ELEMENT:G});const Y=1,J=3,X=7,Q=8,ee=9,te=function(){return"undefined"==typeof window?null:window};return function t(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();const n=e=>t(e);if(n.version="3.1.5",n.removed=[],!i||!i.document||i.document.nodeType!==ee)return n.isSupported=!1,n;let{document:o}=i;const s=o,l=s.currentScript,{DocumentFragment:c,HTMLTemplateElement:b,Node:k,Element:S,NodeFilter:j,NamedNodeMap:F=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:q,DOMParser:U,trustedTypes:H}=i,$=S.prototype,W=E($,"cloneNode"),G=E($,"nextSibling"),ie=E($,"childNodes"),ne=E($,"parentNode");if("function"==typeof b){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let oe,re="";const{implementation:se,createNodeIterator:ae,createDocumentFragment:le,getElementsByTagName:ce}=o,{importNode:ue}=s;let he={};n.isSupported="function"==typeof e&&"function"==typeof ne&&se&&void 0!==se.createHTMLDocument;const{MUSTACHE_EXPR:de,ERB_EXPR:pe,TMPLIT_EXPR:ge,DATA_ATTR:me,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:ye,ATTR_WHITESPACE:ve,CUSTOM_ELEMENT:_e}=K;let{IS_ALLOWED_URI:xe}=K,we=null;const be=T({},[...A,...z,...L,...M,...O]);let ke=null;const Te=T({},[...D,...R,...B,...N]);let Se=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,Ee=null,Ae=!0,ze=!0,Le=!1,Pe=!0,Me=!1,Ie=!0,Oe=!1,De=!1,Re=!1,Be=!1,Ne=!1,je=!1,Fe=!0,qe=!1,Ue=!0,He=!1,Ve={},$e=null;const We=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ze=null;const Ge=T({},["audio","video","img","source","image","track"]);let Ke=null;const Ye=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let et=Qe,tt=!1,it=null;const nt=T({},[Je,Xe,Qe],g);let ot=null;const rt=["application/xhtml+xml","text/html"];let st=null,at=null;const lt=o.createElement("form"),ct=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=C(e),ot=-1===rt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===ot?g:p,we=_(e,"ALLOWED_TAGS")?T({},e.ALLOWED_TAGS,st):be,ke=_(e,"ALLOWED_ATTR")?T({},e.ALLOWED_ATTR,st):Te,it=_(e,"ALLOWED_NAMESPACES")?T({},e.ALLOWED_NAMESPACES,g):nt,Ke=_(e,"ADD_URI_SAFE_ATTR")?T(C(Ye),e.ADD_URI_SAFE_ATTR,st):Ye,Ze=_(e,"ADD_DATA_URI_TAGS")?T(C(Ge),e.ADD_DATA_URI_TAGS,st):Ge,$e=_(e,"FORBID_CONTENTS")?T({},e.FORBID_CONTENTS,st):We,Ce=_(e,"FORBID_TAGS")?T({},e.FORBID_TAGS,st):{},Ee=_(e,"FORBID_ATTR")?T({},e.FORBID_ATTR,st):{},Ve=!!_(e,"USE_PROFILES")&&e.USE_PROFILES,Ae=!1!==e.ALLOW_ARIA_ATTR,ze=!1!==e.ALLOW_DATA_ATTR,Le=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Me=e.SAFE_FOR_TEMPLATES||!1,Ie=!1!==e.SAFE_FOR_XML,Oe=e.WHOLE_DOCUMENT||!1,Be=e.RETURN_DOM||!1,Ne=e.RETURN_DOM_FRAGMENT||!1,je=e.RETURN_TRUSTED_TYPE||!1,Re=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,qe=e.SANITIZE_NAMED_PROPS||!1,Ue=!1!==e.KEEP_CONTENT,He=e.IN_PLACE||!1,xe=e.ALLOWED_URI_REGEXP||V,et=e.NAMESPACE||Qe,Se=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Se.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Me&&(ze=!1),Ne&&(Be=!0),Ve&&(we=T({},O),ke=[],!0===Ve.html&&(T(we,A),T(ke,D)),!0===Ve.svg&&(T(we,z),T(ke,R),T(ke,N)),!0===Ve.svgFilters&&(T(we,L),T(ke,R),T(ke,N)),!0===Ve.mathMl&&(T(we,M),T(ke,B),T(ke,N))),e.ADD_TAGS&&(we===be&&(we=C(we)),T(we,e.ADD_TAGS,st)),e.ADD_ATTR&&(ke===Te&&(ke=C(ke)),T(ke,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&T(Ke,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&($e===We&&($e=C($e)),T($e,e.FORBID_CONTENTS,st)),Ue&&(we["#text"]=!0),Oe&&T(we,["html","head","body"]),we.table&&(T(we,["tbody"]),delete Ce.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');oe=e.TRUSTED_TYPES_POLICY,re=oe.createHTML("")}else void 0===oe&&(oe=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(H,l)),null!==oe&&"string"==typeof re&&(re=oe.createHTML(""));r&&r(e),at=e}},ht=T({},["mi","mo","mn","ms","mtext"]),dt=T({},["foreignobject","annotation-xml"]),pt=T({},["title","style","font","a","script"]),gt=T({},[...z,...L,...P]),mt=T({},[...M,...I]),ft=function(e){d(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},yt=function(e,t){try{d(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){d(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ke[e])if(Be||Ne)try{ft(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},vt=function(e){let t=null,i=null;if(Re)e="<remove></remove>"+e;else{const t=m(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===ot&&et===Qe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const n=oe?oe.createHTML(e):e;if(et===Qe)try{t=(new U).parseFromString(n,ot)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(et,"template",null);try{t.documentElement.innerHTML=tt?re:n}catch(e){}}const r=t.body||t.documentElement;return e&&i&&r.insertBefore(o.createTextNode(i),r.childNodes[0]||null),et===Qe?ce.call(t,Oe?"html":"body")[0]:Oe?t.documentElement:r},_t=function(e){return ae.call(e.ownerDocument||e,e,j.SHOW_ELEMENT|j.SHOW_COMMENT|j.SHOW_TEXT|j.SHOW_PROCESSING_INSTRUCTION|j.SHOW_CDATA_SECTION,null)},xt=function(e){return e instanceof q&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof F)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},wt=function(e){return"function"==typeof k&&e instanceof k},bt=function(e,t,i){he[e]&&u(he[e],(e=>{e.call(n,t,i,at)}))},kt=function(e){let t=null;if(bt("beforeSanitizeElements",e,null),xt(e))return ft(e),!0;const i=st(e.nodeName);if(bt("uponSanitizeElement",e,{tagName:i,allowedTags:we}),e.hasChildNodes()&&!wt(e.firstElementChild)&&x(/<[/\w]/g,e.innerHTML)&&x(/<[/\w]/g,e.textContent))return ft(e),!0;if(e.nodeType===X)return ft(e),!0;if(Ie&&e.nodeType===Q&&x(/<[/\w]/g,e.data))return ft(e),!0;if(!we[i]||Ce[i]){if(!Ce[i]&&St(i)){if(Se.tagNameCheck instanceof RegExp&&x(Se.tagNameCheck,i))return!1;if(Se.tagNameCheck instanceof Function&&Se.tagNameCheck(i))return!1}if(Ue&&!$e[i]){const t=ne(e)||e.parentNode,i=ie(e)||e.childNodes;if(i&&t)for(let n=i.length-1;n>=0;--n){const o=W(i[n],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,G(e))}}return ft(e),!0}return e instanceof S&&!function(e){let t=ne(e);t&&t.tagName||(t={namespaceURI:et,tagName:"template"});const i=p(e.tagName),n=p(t.tagName);return!!it[e.namespaceURI]&&(e.namespaceURI===Xe?t.namespaceURI===Qe?"svg"===i:t.namespaceURI===Je?"svg"===i&&("annotation-xml"===n||ht[n]):Boolean(gt[i]):e.namespaceURI===Je?t.namespaceURI===Qe?"math"===i:t.namespaceURI===Xe?"math"===i&&dt[n]:Boolean(mt[i]):e.namespaceURI===Qe?!(t.namespaceURI===Xe&&!dt[n])&&!(t.namespaceURI===Je&&!ht[n])&&!mt[i]&&(pt[i]||!gt[i]):!("application/xhtml+xml"!==ot||!it[e.namespaceURI]))}(e)?(ft(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!x(/<\/no(script|embed|frames)/i,e.innerHTML)?(Me&&e.nodeType===J&&(t=e.textContent,u([de,pe,ge],(e=>{t=f(t,e," ")})),e.textContent!==t&&(d(n.removed,{element:e.cloneNode()}),e.textContent=t)),bt("afterSanitizeElements",e,null),!1):(ft(e),!0)},Tt=function(e,t,i){if(Fe&&("id"===t||"name"===t)&&(i in o||i in lt))return!1;if(ze&&!Ee[t]&&x(me,t));else if(Ae&&x(fe,t));else if(!ke[t]||Ee[t]){if(!(St(e)&&(Se.tagNameCheck instanceof RegExp&&x(Se.tagNameCheck,e)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(e))&&(Se.attributeNameCheck instanceof RegExp&&x(Se.attributeNameCheck,t)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(t))||"is"===t&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&x(Se.tagNameCheck,i)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(i))))return!1}else if(Ke[t]);else if(x(xe,f(i,ve,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(i,"data:")||!Ze[e])if(Le&&!x(ye,f(i,ve,"")));else if(i)return!1;return!0},St=function(e){return"annotation-xml"!==e&&m(e,_e)},Ct=function(e){bt("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};let o=t.length;for(;o--;){const r=t[o],{name:s,namespaceURI:a,value:l}=r,c=st(s);let d="value"===s?l:v(l);if(i.attrName=c,i.attrValue=d,i.keepAttr=!0,i.forceKeepAttr=void 0,bt("uponSanitizeAttribute",e,i),d=i.attrValue,i.forceKeepAttr)continue;if(yt(s,e),!i.keepAttr)continue;if(!Pe&&x(/\/>/i,d)){yt(s,e);continue}if(Ie&&x(/((--!?|])>)|<\/(style|title)/i,d)){yt(s,e);continue}Me&&u([de,pe,ge],(e=>{d=f(d,e," ")}));const p=st(e.nodeName);if(Tt(p,c,d)){if(!qe||"id"!==c&&"name"!==c||(yt(s,e),d="user-content-"+d),oe&&"object"==typeof H&&"function"==typeof H.getAttributeType)if(a);else switch(H.getAttributeType(p,c)){case"TrustedHTML":d=oe.createHTML(d);break;case"TrustedScriptURL":d=oe.createScriptURL(d)}try{a?e.setAttributeNS(a,s,d):e.setAttribute(s,d),xt(e)?ft(e):h(n.removed)}catch(e){}}}bt("afterSanitizeAttributes",e,null)},Et=function e(t){let i=null;const n=_t(t);for(bt("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)bt("uponSanitizeShadowNode",i,null),kt(i)||(i.content instanceof c&&e(i.content),Ct(i));bt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,r=null,a=null;if(tt=!e,tt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!wt(e)){if("function"!=typeof e.toString)throw w("toString is not a function");if("string"!=typeof(e=e.toString()))throw w("dirty is not a string, aborting")}if(!n.isSupported)return e;if(De||ut(t),n.removed=[],"string"==typeof e&&(He=!1),He){if(e.nodeName){const t=st(e.nodeName);if(!we[t]||Ce[t])throw w("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof k)i=vt("\x3c!----\x3e"),o=i.ownerDocument.importNode(e,!0),o.nodeType===Y&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!Be&&!Me&&!Oe&&-1===e.indexOf("<"))return oe&&je?oe.createHTML(e):e;if(i=vt(e),!i)return Be?null:je?re:""}i&&Re&&ft(i.firstChild);const l=_t(He?e:i);for(;r=l.nextNode();)kt(r)||(r.content instanceof c&&Et(r.content),Ct(r));if(He)return e;if(Be){if(Ne)for(a=le.call(i.ownerDocument);i.firstChild;)a.appendChild(i.firstChild);else a=i;return(ke.shadowroot||ke.shadowrootmode)&&(a=ue.call(s,a,!0)),a}let h=Oe?i.outerHTML:i.innerHTML;return Oe&&we["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&x(Z,i.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+h),Me&&u([de,pe,ge],(e=>{h=f(h,e," ")})),oe&&je?oe.createHTML(h):h},n.setConfig=function(){ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),De=!0},n.clearConfig=function(){at=null,De=!1},n.isValidAttribute=function(e,t,i){at||ut({});const n=st(e),o=st(t);return Tt(n,o,i)},n.addHook=function(e,t){"function"==typeof t&&(he[e]=he[e]||[],d(he[e],t))},n.removeHook=function(e){if(he[e])return h(he[e])},n.removeHooks=function(e){he[e]&&(he[e]=[])},n.removeAllHooks=function(){he={}},n}()}()},7539:(e,t,i)=>{"use strict";var n=i(8897)("%Object.defineProperty%",!0)||!1;if(n)try{n({},"a",{value:1})}catch(e){n=!1}e.exports=n},3841:e=>{"use strict";e.exports=EvalError},219:e=>{"use strict";e.exports=Error},6190:e=>{"use strict";e.exports=RangeError},3950:e=>{"use strict";e.exports=ReferenceError},6296:e=>{"use strict";e.exports=SyntaxError},1711:e=>{"use strict";e.exports=TypeError},3221:e=>{"use strict";e.exports=URIError},7270:(e,t,i)=>{"use strict";var n=i(9916),o=Object.prototype.toString,r=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){if(!n(t))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=i),"[object Array]"===o.call(e)?function(e,t,i){for(var n=0,o=e.length;n<o;n++)r.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))}(e,t,s):"string"==typeof e?function(e,t,i){for(var n=0,o=e.length;n<o;n++)null==i?t(e.charAt(n),n,e):t.call(i,e.charAt(n),n,e)}(e,t,s):function(e,t,i){for(var n in e)r.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))}(e,t,s)}},5845:e=>{"use strict";var t=Object.prototype.toString,i=Math.max,n=function(e,t){for(var i=[],n=0;n<e.length;n+=1)i[n]=e[n];for(var o=0;o<t.length;o+=1)i[o+e.length]=t[o];return i};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var r,s=function(e,t){for(var i=[],n=1,o=0;n<e.length;n+=1,o+=1)i[o]=e[n];return i}(arguments),a=i(0,o.length-s.length),l=[],c=0;c<a;c++)l[c]="$"+c;if(r=Function("binder","return function ("+function(e,t){for(var i="",n=0;n<e.length;n+=1)i+=e[n],n+1<e.length&&(i+=",");return i}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var t=o.apply(this,n(s,arguments));return Object(t)===t?t:this}return o.apply(e,n(s,arguments))})),o.prototype){var u=function(){};u.prototype=o.prototype,r.prototype=new u,u.prototype=null}return r}},4499:(e,t,i)=>{"use strict";var n=i(5845);e.exports=Function.prototype.bind||n},2599:function(e,t){var i,n;void 0===(n="function"==typeof(i=e=>{"use strict";var t=(e,t)=>{if(e===S)return S;var i=e.target,n=i.length,o=e._indexes;o=o.slice(0,o.len).sort(((e,t)=>e-t));for(var r="",s=0,a=0,l=!1,c=(e=[],0);c<n;++c){var u=i[c];if(o[a]===c){if(++a,l||(l=!0,e.push(r),r=""),a===o.length){r+=u,e.push(t(r,s++)),r="",e.push(i.substr(c+1));break}}else l&&(l=!1,e.push(t(r,s++)),r="");r+=u}return e},i=e=>{"string"!=typeof e&&(e="");var t=c(e);return{target:e,_targetLower:t._lower,_targetLowerCodes:t.lowerCodes,_nextBeginningIndexes:S,_bitflags:t.bitflags,score:S,_indexes:[0],obj:S}},n=e=>{"string"!=typeof e&&(e=""),e=e.trim();var t=c(e),i=[];if(t.containsSpace){var n=e.split(/\s+/);n=[...new Set(n)];for(var o=0;o<n.length;o++)if(""!==n[o]){var r=c(n[o]);i.push({lowerCodes:r.lowerCodes,_lower:n[o].toLowerCase(),containsSpace:!1})}}return{lowerCodes:t.lowerCodes,bitflags:t.bitflags,containsSpace:t.containsSpace,_lower:t._lower,spaceSearches:i}},o=e=>{if(e.length>999)return i(e);var t=h.get(e);return void 0!==t||(t=i(e),h.set(e,t)),t},r=e=>{if(e.length>999)return n(e);var t=d.get(e);return void 0!==t||(t=n(e),d.set(e,t)),t},s=(e,t,i)=>{var n=[];n.total=t.length;var r=i&&i.limit||v;if(i&&i.key)for(var s=0;s<t.length;s++){var a=t[s];if(h=f(a,i.key)){y(h)||(h=o(h)),h.score=_,h._indexes.len=0;var l=h;if(l={target:l.target,_targetLower:"",_targetLowerCodes:S,_nextBeginningIndexes:S,_bitflags:0,score:h.score,_indexes:S,obj:a},n.push(l),n.length>=r)return n}}else if(i&&i.keys)for(s=0;s<t.length;s++){a=t[s];for(var c=new Array(i.keys.length),u=i.keys.length-1;u>=0;--u)(h=f(a,i.keys[u]))?(y(h)||(h=o(h)),h.score=_,h._indexes.len=0,c[u]=h):c[u]=S;if(c.obj=a,c.score=_,n.push(c),n.length>=r)return n}else for(s=0;s<t.length;s++){var h;if((h=t[s])&&(y(h)||(h=o(h)),h.score=_,h._indexes.len=0,n.push(h),n.length>=r))return n}return n},a=(e,t,i=!1)=>{if(!1===i&&e.containsSpace)return l(e,t);for(var n=e._lower,o=e.lowerCodes,r=o[0],s=t._targetLowerCodes,a=o.length,c=s.length,h=0,d=0,m=0;;){if(r===s[d]){if(p[m++]=d,++h===a)break;r=o[h]}if(++d>=c)return S}h=0;var f=!1,y=0,v=t._nextBeginningIndexes;v===S&&(v=t._nextBeginningIndexes=u(t.target));var _=0;if((d=0===p[0]?0:v[p[0]-1])!==c)for(;;)if(d>=c){if(h<=0)break;if(++_>200)break;--h,d=v[g[--y]]}else if(o[h]===s[d]){if(g[y++]=d,++h===a){f=!0;break}++d}else d=v[d];var x=t._targetLower.indexOf(n,p[0]),w=~x;if(w&&!f)for(var b=0;b<m;++b)p[b]=x+b;var k=!1;if(w&&(k=t._nextBeginningIndexes[x-1]===x),f)var T=g,C=y;else T=p,C=m;var E=0,A=0;for(b=1;b<a;++b)T[b]-T[b-1]!=1&&(E-=T[b],++A);if(E-=(T[a-1]-T[0]-(a-1)+12)*A,0!==T[0]&&(E-=T[0]*T[0]*.2),f){var z=1;for(b=v[0];b<c;b=v[b])++z;z>24&&(E*=10*(z-24))}else E*=1e3;for(w&&(E/=1+a*a*1),k&&(E/=1+a*a*1),E-=c-a,t.score=E,b=0;b<C;++b)t._indexes[b]=T[b];return t._indexes.len=C,t},l=(e,t)=>{for(var i=new Set,n=0,o=S,r=0,s=e.spaceSearches,l=0;l<s.length;++l){var c=s[l];if((o=a(c,t))===S)return S;n+=o.score,o._indexes[0]<r&&(n-=r-o._indexes[0]),r=o._indexes[0];for(var u=0;u<o._indexes.len;++u)i.add(o._indexes[u])}var h=a(e,t,!0);if(h!==S&&h.score>n)return h;o.score=n,l=0;for(let e of i)o._indexes[l++]=e;return o._indexes.len=l,o},c=e=>{for(var t=e.length,i=e.toLowerCase(),n=[],o=0,r=!1,s=0;s<t;++s){var a=n[s]=i.charCodeAt(s);32!==a?o|=1<<(a>=97&&a<=122?a-97:a>=48&&a<=57?26:a<=127?30:31):r=!0}return{lowerCodes:n,bitflags:o,containsSpace:r,_lower:i}},u=e=>{for(var t=e.length,i=(e=>{for(var t=e.length,i=[],n=0,o=!1,r=!1,s=0;s<t;++s){var a=e.charCodeAt(s),l=a>=65&&a<=90,c=l||a>=97&&a<=122||a>=48&&a<=57,u=l&&!o||!r||!c;o=l,r=c,u&&(i[n++]=s)}return i})(e),n=[],o=i[0],r=0,s=0;s<t;++s)o>s?n[s]=o:(o=i[++r],n[s]=void 0===o?t:o);return n},h=new Map,d=new Map,p=[],g=[],m=e=>{for(var t=_,i=e.length,n=0;n<i;++n){var o=e[n];if(o!==S){var r=o.score;r>t&&(t=r)}}return t===_?S:t},f=(e,t)=>{var i=e[t];if(void 0!==i)return i;var n=t;Array.isArray(t)||(n=t.split("."));for(var o=n.length,r=-1;e&&++r<o;)e=e[n[r]];return e},y=e=>"object"==typeof e,v=1/0,_=-v,x=[];x.total=0;var w,b,k,T,S=null,C=(w=[],b=0,T=e=>{for(var t=0,i=w[t],n=1;n<b;){var o=n+1;t=n,o<b&&w[o].score<w[n].score&&(t=o),w[t-1>>1]=w[t],n=1+(t<<1)}for(var r=t-1>>1;t>0&&i.score<w[r].score;r=(t=r)-1>>1)w[t]=w[r];w[t]=i},(k={}).add=e=>{var t=b;w[b++]=e;for(var i=t-1>>1;t>0&&e.score<w[i].score;i=(t=i)-1>>1)w[t]=w[i];w[t]=e},k.poll=e=>{if(0!==b){var t=w[0];return w[0]=w[--b],T(),t}},k.peek=e=>{if(0!==b)return w[0]},k.replaceTop=e=>{w[0]=e,T()},k);return{single:(e,t)=>{if("farzher"==e)return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!e||!t)return S;var i=r(e);y(t)||(t=o(t));var n=i.bitflags;return(n&t._bitflags)!==n?S:a(i,t)},go:(e,t,i)=>{if("farzher"==e)return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:t?t[0]:S}];if(!e)return i&&i.all?s(e,t,i):x;var n=r(e),l=n.bitflags,c=(n.containsSpace,i&&i.threshold||_),u=i&&i.limit||v,h=0,d=0,p=t.length;if(i&&i.key)for(var g=i.key,w=0;w<p;++w){var b=t[w];(P=f(b,g))&&(y(P)||(P=o(P)),(l&P._bitflags)===l&&(M=a(n,P))!==S&&(M.score<c||(M={target:M.target,_targetLower:"",_targetLowerCodes:S,_nextBeginningIndexes:S,_bitflags:0,score:M.score,_indexes:M._indexes,obj:b},h<u?(C.add(M),++h):(++d,M.score>C.peek().score&&C.replaceTop(M)))))}else if(i&&i.keys){var k=i.scoreFn||m,T=i.keys,E=T.length;for(w=0;w<p;++w){b=t[w];for(var A=new Array(E),z=0;z<E;++z)g=T[z],(P=f(b,g))?(y(P)||(P=o(P)),(l&P._bitflags)!==l?A[z]=S:A[z]=a(n,P)):A[z]=S;A.obj=b;var L=k(A);L!==S&&(L<c||(A.score=L,h<u?(C.add(A),++h):(++d,L>C.peek().score&&C.replaceTop(A))))}}else for(w=0;w<p;++w){var P,M;(P=t[w])&&(y(P)||(P=o(P)),(l&P._bitflags)===l&&(M=a(n,P))!==S&&(M.score<c||(h<u?(C.add(M),++h):(++d,M.score>C.peek().score&&C.replaceTop(M)))))}if(0===h)return x;var I=new Array(h);for(w=h-1;w>=0;--w)I[w]=C.poll();return I.total=h+d,I},highlight:(e,i,n)=>{if("function"==typeof i)return t(e,i);if(e===S)return S;void 0===i&&(i="<b>"),void 0===n&&(n="</b>");var o="",r=0,s=!1,a=e.target,l=a.length,c=e._indexes;c=c.slice(0,c.len).sort(((e,t)=>e-t));for(var u=0;u<l;++u){var h=a[u];if(c[r]===u){if(s||(s=!0,o+=i),++r===c.length){o+=h+n+a.substr(u+1);break}}else s&&(s=!1,o+=n);o+=h}return o},prepare:i,indexes:e=>e._indexes.slice(0,e._indexes.len).sort(((e,t)=>e-t)),cleanup:()=>{h.clear(),d.clear(),p=[],g=[]}}})?i.apply(t,[]):i)||(e.exports=n)},8897:(e,t,i)=>{"use strict";var n,o=i(219),r=i(3841),s=i(6190),a=i(3950),l=i(6296),c=i(1711),u=i(3221),h=Function,d=function(e){try{return h('"use strict"; return ('+e+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var g=function(){throw new c},m=p?function(){try{return g}catch(e){try{return p(arguments,"callee").get}catch(e){return g}}}():g,f=i(4923)(),y=i(9372)(),v=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),_={},x="undefined"!=typeof Uint8Array&&v?v(Uint8Array):n,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f&&v?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":r,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":_,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&v?v(v([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f&&v?v((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f&&v?v((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&v?v(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":m,"%TypedArray%":x,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(v)try{null.error}catch(e){var b=v(v(e));w["%Error.prototype%"]=b}var k=function e(t){var i;if("%AsyncFunction%"===t)i=d("async function () {}");else if("%GeneratorFunction%"===t)i=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)i=d("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&v&&(i=v(o.prototype))}return w[t]=i,i},T={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=i(4499),C=i(4313),E=S.call(Function.call,Array.prototype.concat),A=S.call(Function.apply,Array.prototype.splice),z=S.call(Function.call,String.prototype.replace),L=S.call(Function.call,String.prototype.slice),P=S.call(Function.call,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,O=function(e,t){var i,n=e;if(C(T,n)&&(n="%"+(i=T[n])[0]+"%"),C(w,n)){var o=w[n];if(o===_&&(o=k(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===P(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=function(e){var t=L(e,0,1),i=L(e,-1);if("%"===t&&"%"!==i)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return z(e,M,(function(e,t,i,o){n[n.length]=i?z(o,I,"$1"):t||e})),n}(e),n=i.length>0?i[0]:"",o=O("%"+n+"%",t),r=o.name,s=o.value,a=!1,u=o.alias;u&&(n=u[0],A(i,E([0,1],u)));for(var h=1,d=!0;h<i.length;h+=1){var g=i[h],m=L(g,0,1),f=L(g,-1);if(('"'===m||"'"===m||"`"===m||'"'===f||"'"===f||"`"===f)&&m!==f)throw new l("property names with quotes must have matching quotes");if("constructor"!==g&&d||(a=!0),C(w,r="%"+(n+="."+g)+"%"))s=w[r];else if(null!=s){if(!(g in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&h+1>=i.length){var y=p(s,g);s=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[g]}else d=C(s,g),s=s[g];d&&!a&&(w[r]=s)}}return s}},1399:(e,t,i)=>{"use strict";var n=i(8897)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},6900:(e,t,i)=>{"use strict";var n=i(7539),o=function(){return!!n};o.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},9372:e=>{"use strict";var t={__proto__:null,foo:{}},i=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof i)}},4923:(e,t,i)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=i(4361);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},4361:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),i=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},1432:(e,t,i)=>{"use strict";var n=i(4361);e.exports=function(){return n()&&!!Symbol.toStringTag}},4313:(e,t,i)=>{"use strict";var n=Function.prototype.call,o=Object.prototype.hasOwnProperty,r=i(4499);e.exports=r.call(n,o)},8239:(e,t)=>{t.read=function(e,t,i,n,o){var r,s,a=8*o-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?o-1:0,d=i?-1:1,p=e[t+h];for(h+=d,r=p&(1<<-u)-1,p>>=-u,u+=a;u>0;r=256*r+e[t+h],h+=d,u-=8);for(s=r&(1<<-u)-1,r>>=-u,u+=n;u>0;s=256*s+e[t+h],h+=d,u-=8);if(0===r)r=1-c;else{if(r===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),r-=c}return(p?-1:1)*s*Math.pow(2,r-n)},t.write=function(e,t,i,n,o,r){var s,a,l,c=8*r-o-1,u=(1<<c)-1,h=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:r-1,g=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*l-1)*Math.pow(2,o),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;e[i+p]=255&a,p+=g,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[i+p]=255&s,p+=g,s/=256,c-=8);e[i+p-g]|=128*m}},198:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},5456:(e,t,i)=>{"use strict";var n=i(1432)(),o=i(9343)("Object.prototype.toString"),r=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},s=function(e){return!!r(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},a=function(){return r(arguments)}();r.isLegacyArguments=s,e.exports=a?r:s},9916:e=>{"use strict";var t,i,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw i}}),i={},o((function(){throw 42}),null,t)}catch(e){e!==i&&(o=null)}else o=null;var r=/^\s*class\b/,s=function(e){try{var t=n.call(e);return r.test(t)}catch(e){return!1}},a=function(e){try{return!s(e)&&(n.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(h=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=o?function(e){if(h(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{o(e,null,t)}catch(e){if(e!==i)return!1}return!s(e)&&a(e)}:function(e){if(h(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(c)return a(e);if(s(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&a(e)}},6940:(e,t,i)=>{"use strict";var n,o=Object.prototype.toString,r=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=i(1432)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(s.test(r.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===o.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},7423:e=>{"use strict";e.exports=function(e){return e!=e}},2889:(e,t,i)=>{"use strict";var n=i(8179),o=i(5144),r=i(7423),s=i(8734),a=i(9004),l=n(s(),Number);o(l,{getPolyfill:s,implementation:r,shim:a}),e.exports=l},8734:(e,t,i)=>{"use strict";var n=i(7423);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},9004:(e,t,i)=>{"use strict";var n=i(5144),o=i(8734);e.exports=function(){var e=o();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},2116:(e,t,i)=>{"use strict";var n=i(6059);e.exports=function(e){return!!n(e)}},5616:function(e,t){var i;!function(t,i){"use strict";"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var r=[],s=Object.getPrototypeOf,a=r.slice,l=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},c=r.push,u=r.indexOf,h={},d=h.toString,p=h.hasOwnProperty,g=p.toString,m=g.call(Object),f={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},_=n.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,i){var n,o,r=(i=i||_).createElement("script");if(r.text=e,t)for(n in x)(o=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var k="3.7.1",T=/HTML$/i,S=function(e,t){return new S.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,i=b(e);return!y(e)&&!v(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}S.fn=S.prototype={jquery:k,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},S.extend=S.fn.extend=function(){var e,t,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(c&&n&&(S.isPlainObject(n)||(o=Array.isArray(n)))?(i=s[t],r=o&&!Array.isArray(i)?[]:o||S.isPlainObject(i)?i:{},o=!1,s[t]=S.extend(c,r,n)):void 0!==n&&(s[t]=n));return s},S.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==d.call(e)||(t=s(e))&&("function"!=typeof(i=p.call(t,"constructor")&&t.constructor)||g.call(i)!==m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){w(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(C(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},text:function(e){var t,i="",n=0,o=e.nodeType;if(!o)for(;t=e[n++];)i+=S.text(t);return 1===o||11===o?e.textContent:9===o?e.documentElement.textContent:3===o||4===o?e.nodeValue:i},makeArray:function(e,t){var i=t||[];return null!=e&&(C(Object(e))?S.merge(i,"string"==typeof e?[e]:e):c.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:u.call(t,e,i)},isXMLDoc:function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!T.test(t||i&&i.nodeName||"HTML")},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,r=e.length,s=!i;o<r;o++)!t(e[o],o)!==s&&n.push(e[o]);return n},map:function(e,t,i){var n,o,r=0,s=[];if(C(e))for(n=e.length;r<n;r++)null!=(o=t(e[r],r,i))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,i))&&s.push(o);return l(s)},guid:1,support:f}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=r[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var A=r.pop,z=r.sort,L=r.splice,P="[\\x20\\t\\r\\n\\f]",M=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");S.contains=function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function O(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}S.escapeSelector=function(e){return(e+"").replace(I,O)};var D=_,R=c;!function(){var e,t,i,o,s,l,c,h,d,g,m=R,y=S.expando,v=0,_=0,x=ee(),w=ee(),b=ee(),k=ee(),T=function(e,t){return e===t&&(s=!0),0},C="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",O="\\["+P+"*("+I+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+P+"*\\]",B=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",N=new RegExp(P+"+","g"),j=new RegExp("^"+P+"*,"+P+"*"),F=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),q=new RegExp(P+"|>"),U=new RegExp(B),H=new RegExp("^"+I+"$"),V={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+C+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/[+~]/,K=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),Y=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},J=function(){le()},X=de((function(e){return!0===e.disabled&&E(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(r=a.call(D.childNodes),D.childNodes),r[D.childNodes.length].nodeType}catch(e){m={apply:function(e,t){R.apply(e,a.call(t))},call:function(e){R.apply(e,a.call(arguments,1))}}}function Q(e,t,i,n){var o,r,s,a,c,u,p,g=t&&t.ownerDocument,v=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==v&&9!==v&&11!==v)return i;if(!n&&(le(t),t=t||l,h)){if(11!==v&&(c=Z.exec(e)))if(o=c[1]){if(9===v){if(!(s=t.getElementById(o)))return i;if(s.id===o)return m.call(i,s),i}else if(g&&(s=g.getElementById(o))&&Q.contains(t,s)&&s.id===o)return m.call(i,s),i}else{if(c[2])return m.apply(i,t.getElementsByTagName(e)),i;if((o=c[3])&&t.getElementsByClassName)return m.apply(i,t.getElementsByClassName(o)),i}if(!(k[e+" "]||d&&d.test(e))){if(p=e,g=t,1===v&&(q.test(e)||F.test(e))){for((g=G.test(e)&&ae(t.parentNode)||t)==t&&f.scope||((a=t.getAttribute("id"))?a=S.escapeSelector(a):t.setAttribute("id",a=y)),r=(u=ue(e)).length;r--;)u[r]=(a?"#"+a:":scope")+" "+he(u[r]);p=u.join(",")}try{return m.apply(i,g.querySelectorAll(p)),i}catch(t){k(e,!0)}finally{a===y&&t.removeAttribute("id")}}}return ve(e.replace(M,"$1"),t,i,n)}function ee(){var e=[];return function i(n,o){return e.push(n+" ")>t.cacheLength&&delete i[e.shift()],i[n+" "]=o}}function te(e){return e[y]=!0,e}function ie(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ne(e){return function(t){return E(t,"input")&&t.type===e}}function oe(e){return function(t){return(E(t,"input")||E(t,"button"))&&t.type===e}}function re(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&X(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te((function(t){return t=+t,te((function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))}))}))}function ae(e){return e&&void 0!==e.getElementsByTagName&&e}function le(e){var i,n=e?e.ownerDocument||e:D;return n!=l&&9===n.nodeType&&n.documentElement?(c=(l=n).documentElement,h=!S.isXMLDoc(l),g=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&D!=l&&(i=l.defaultView)&&i.top!==i&&i.addEventListener("unload",J),f.getById=ie((function(e){return c.appendChild(e).id=S.expando,!l.getElementsByName||!l.getElementsByName(S.expando).length})),f.disconnectedMatch=ie((function(e){return g.call(e,"*")})),f.scope=ie((function(){return l.querySelectorAll(":scope")})),f.cssHas=ie((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),f.getById?(t.filter.ID=function(e){var t=e.replace(K,Y);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var i=t.getElementById(e);return i?[i]:[]}}):(t.filter.ID=function(e){var t=e.replace(K,Y);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var i,n,o,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(o=t.getElementsByName(e),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],ie((function(e){var t;c.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+P+"*(?:value|"+C+")"),e.querySelectorAll("[id~="+y+"-]").length||d.push("~="),e.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),c.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+P+"*name"+P+"*="+P+"*(?:''|\"\")")})),f.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),T=function(e,t){if(e===t)return s=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===i?e===l||e.ownerDocument==D&&Q.contains(D,e)?-1:t===l||t.ownerDocument==D&&Q.contains(D,t)?1:o?u.call(o,e)-u.call(o,t):0:4&i?-1:1)},l):l}for(e in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(le(e),h&&!k[t+" "]&&(!d||!d.test(t)))try{var i=g.call(e,t);if(i||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){k(t,!0)}return Q(t,l,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=l&&le(e),S.contains(e,t)},Q.attr=function(e,i){(e.ownerDocument||e)!=l&&le(e);var n=t.attrHandle[i.toLowerCase()],o=n&&p.call(t.attrHandle,i.toLowerCase())?n(e,i,!h):void 0;return void 0!==o?o:e.getAttribute(i)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S.uniqueSort=function(e){var t,i=[],n=0,r=0;if(s=!f.sortStable,o=!f.sortStable&&a.call(e,0),z.call(e,T),s){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)L.call(e,i[n],1)}return o=null,e},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(a.apply(this)))},t=S.expr={cacheLength:50,createPseudo:te,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(K,Y),e[3]=(e[3]||e[4]||e[5]||"").replace(K,Y),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&U.test(i)&&(t=ue(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(K,Y).toLowerCase();return"*"===e?function(){return!0}:function(e){return E(e,t)}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&x(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var o=Q.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(N," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,u,h,d,p,g=r!==s?"nextSibling":"previousSibling",m=t.parentNode,f=a&&t.nodeName.toLowerCase(),_=!l&&!a,x=!1;if(m){if(r){for(;g;){for(h=t;h=h[g];)if(a?E(h,f):1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&_){for(x=(d=(c=(u=m[y]||(m[y]={}))[e]||[])[0]===v&&c[1])&&c[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(x=d=0)||p.pop();)if(1===h.nodeType&&++x&&h===t){u[e]=[v,d,x];break}}else if(_&&(x=d=(c=(u=t[y]||(t[y]={}))[e]||[])[0]===v&&c[1]),!1===x)for(;(h=++d&&h&&h[g]||(x=d=0)||p.pop())&&(!(a?E(h,f):1===h.nodeType)||!++x||(_&&((u=h[y]||(h[y]={}))[e]=[v,x]),h!==t)););return(x-=o)===n||x%n==0&&x/n>=0}}},PSEUDO:function(e,i){var n,o=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return o[y]?o(i):o.length>1?(n=[e,e,"",i],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var n,r=o(e,i),s=r.length;s--;)e[n=u.call(e,r[s])]=!(t[n]=r[s])})):function(e){return o(e,0,n)}):o}},pseudos:{not:te((function(e){var t=[],i=[],n=ye(e.replace(M,"$1"));return n[y]?te((function(e,t,i,o){for(var r,s=n(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))})):function(e,o,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}})),has:te((function(e){return function(t){return Q(e,t).length>0}})),contains:te((function(e){return e=e.replace(K,Y),function(t){return(t.textContent||S.text(t)).indexOf(e)>-1}})),lang:te((function(e){return H.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(K,Y).toLowerCase(),function(t){var i;do{if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:re(!1),disabled:re(!0),checked:function(e){return E(e,"input")&&!!e.checked||E(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){return E(e,"input")&&"button"===e.type||E(e,"button")},text:function(e){var t;return E(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,i){return[i<0?i+t:i]})),even:se((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:se((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:se((function(e,t,i){var n;for(n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:se((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=ne(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=oe(e);function ce(){}function ue(e,i){var n,o,r,s,a,l,c,u=w[e+" "];if(u)return i?0:u.slice(0);for(a=e,l=[],c=t.preFilter;a;){for(s in n&&!(o=j.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=F.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(M," ")}),a=a.slice(n.length)),t.filter)!(o=V[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?Q.error(e):w(e,l).slice(0)}function he(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function de(e,t,i){var n=t.dir,o=t.next,r=o||n,s=i&&"parentNode"===r,a=_++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,o);return!1}:function(t,i,l){var c,u,h=[v,a];if(l){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(u=t[y]||(t[y]={}),o&&E(t,o))t=t[n]||t;else{if((c=u[r])&&c[0]===v&&c[1]===a)return h[2]=c[2];if(u[r]=h,h[2]=e(t,i,l))return!0}return!1}}function pe(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function ge(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(r=e[a])&&(i&&!i(r,n,o)||(s.push(r),c&&t.push(a)));return s}function me(e,t,i,n,o,r){return n&&!n[y]&&(n=me(n)),o&&!o[y]&&(o=me(o,r)),te((function(r,s,a,l){var c,h,d,p,g=[],f=[],y=s.length,v=r||function(e,t,i){for(var n=0,o=t.length;n<o;n++)Q(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),_=!e||!r&&t?v:ge(v,g,e,a,l);if(i?i(_,p=o||(r?e:y||n)?[]:s,a,l):p=_,n)for(c=ge(p,f),n(c,[],a,l),h=c.length;h--;)(d=c[h])&&(p[f[h]]=!(_[f[h]]=d));if(r){if(o||e){if(o){for(c=[],h=p.length;h--;)(d=p[h])&&c.push(_[h]=d);o(null,p=[],c,l)}for(h=p.length;h--;)(d=p[h])&&(c=o?u.call(r,d):g[h])>-1&&(r[c]=!(s[c]=d))}}else p=ge(p===s?p.splice(y,p.length):p),o?o(null,s,p,l):m.apply(s,p)}))}function fe(e){for(var n,o,r,s=e.length,a=t.relative[e[0].type],l=a||t.relative[" "],c=a?1:0,h=de((function(e){return e===n}),l,!0),d=de((function(e){return u.call(n,e)>-1}),l,!0),p=[function(e,t,o){var r=!a&&(o||t!=i)||((n=t).nodeType?h(e,t,o):d(e,t,o));return n=null,r}];c<s;c++)if(o=t.relative[e[c].type])p=[de(pe(p),o)];else{if((o=t.filter[e[c].type].apply(null,e[c].matches))[y]){for(r=++c;r<s&&!t.relative[e[r].type];r++);return me(c>1&&pe(p),c>1&&he(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(M,"$1"),o,c<r&&fe(e.slice(c,r)),r<s&&fe(e=e.slice(r)),r<s&&he(e))}p.push(o)}return pe(p)}function ye(e,n){var o,r=[],s=[],a=b[e+" "];if(!a){for(n||(n=ue(e)),o=n.length;o--;)(a=fe(n[o]))[y]?r.push(a):s.push(a);a=b(e,function(e,n){var o=n.length>0,r=e.length>0,s=function(s,a,c,u,d){var p,g,f,y=0,_="0",x=s&&[],w=[],b=i,k=s||r&&t.find.TAG("*",d),T=v+=null==b?1:Math.random()||.1,C=k.length;for(d&&(i=a==l||a||d);_!==C&&null!=(p=k[_]);_++){if(r&&p){for(g=0,a||p.ownerDocument==l||(le(p),c=!h);f=e[g++];)if(f(p,a||l,c)){m.call(u,p);break}d&&(v=T)}o&&((p=!f&&p)&&y--,s&&x.push(p))}if(y+=_,o&&_!==y){for(g=0;f=n[g++];)f(x,w,a,c);if(s){if(y>0)for(;_--;)x[_]||w[_]||(w[_]=A.call(u));w=ge(w)}m.apply(u,w),d&&!s&&w.length>0&&y+n.length>1&&S.uniqueSort(u)}return d&&(v=T,i=b),x};return o?te(s):s}(s,r)),a.selector=e}return a}function ve(e,i,n,o){var r,s,a,l,c,u="function"==typeof e&&e,d=!o&&ue(e=u.selector||e);if(n=n||[],1===d.length){if((s=d[0]=d[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===i.nodeType&&h&&t.relative[s[1].type]){if(!(i=(t.find.ID(a.matches[0].replace(K,Y),i)||[])[0]))return n;u&&(i=i.parentNode),e=e.slice(s.shift().value.length)}for(r=V.needsContext.test(e)?0:s.length;r--&&(a=s[r],!t.relative[l=a.type]);)if((c=t.find[l])&&(o=c(a.matches[0].replace(K,Y),G.test(s[0].type)&&ae(i.parentNode)||i))){if(s.splice(r,1),!(e=o.length&&he(s)))return m.apply(n,o),n;break}}return(u||ye(e,d))(o,i,!h,n,!i||G.test(e)&&ae(i.parentNode)||i),n}ce.prototype=t.filters=t.pseudos,t.setFilters=new ce,f.sortStable=y.split("").sort(T).join("")===y,le(),f.sortDetached=ie((function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))})),S.find=Q,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,Q.compile=ye,Q.select=ve,Q.setDocument=le,Q.tokenize=ue,Q.escape=S.escapeSelector,Q.getText=S.text,Q.isXML=S.isXMLDoc,Q.selectors=S.expr,Q.support=S.support,Q.uniqueSort=S.uniqueSort}();var B=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&S(e).is(i))break;n.push(e)}return n},N=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},j=S.expr.match.needsContext,F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function q(e,t,i){return y(t)?S.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?S.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?S.grep(e,(function(e){return u.call(t,e)>-1!==i})):S.filter(t,e,i)}S.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<n;t++)if(S.contains(o[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)S.find(e,o[t],i);return n>1?S.uniqueSort(i):i},filter:function(e){return this.pushStack(q(this,e||[],!1))},not:function(e){return this.pushStack(q(this,e||[],!0))},is:function(e){return!!q(this,"string"==typeof e&&j.test(e)?S(e):e||[],!1).length}});var U,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||U,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),F.test(n[1])&&S.isPlainObject(t))for(n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(o=_.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==i.ready?i.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,U=S(_);var V=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,o=this.length,r=[],s="string"!=typeof e&&S(e);if(!j.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&S.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?S.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?u.call(S(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B(e,"parentNode")},parentsUntil:function(e,t,i){return B(e,"parentNode",i)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return B(e,"nextSibling")},prevAll:function(e){return B(e,"previousSibling")},nextUntil:function(e,t,i){return B(e,"nextSibling",i)},prevUntil:function(e,t,i){return B(e,"previousSibling",i)},siblings:function(e){return N((e.parentNode||{}).firstChild,e)},children:function(e){return N(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(E(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(i,n){var o=S.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=S.filter(n,o)),this.length>1&&($[e]||S.uniqueSort(o),V.test(e)&&o.reverse()),this.pushStack(o)}}));var Z=/[^\x20\t\r\n\f]+/g;function G(e){return e}function K(e){throw e}function Y(e,t,i,n){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(i):e&&y(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(Z)||[],(function(e,i){t[i]=!0})),t}(e):S.extend({},e);var t,i,n,o,r=[],s=[],a=-1,l=function(){for(o=o||e.once,n=t=!0;s.length;a=-1)for(i=s.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=r.length,i=!1);e.memory||(i=!1),t=!1,o&&(r=i?[]:"")},c={add:function(){return r&&(i&&!t&&(a=r.length-1,s.push(i)),function t(i){S.each(i,(function(i,n){y(n)?e.unique&&c.has(n)||r.push(n):n&&n.length&&"string"!==b(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var i;(i=S.inArray(t,r,i))>-1;)r.splice(i,1),i<=a&&a--})),this},has:function(e){return e?S.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=s=[],i||t||(r=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=[e,(i=i||[]).slice?i.slice():i],s.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(i){S.each(t,(function(t,n){var o=y(e[n[4]])&&e[n[4]];r[n[1]]((function(){var e=o&&o.apply(this,arguments);e&&y(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,i,o){var r=0;function s(e,t,i,o){return function(){var a=this,l=arguments,c=function(){var n,c;if(!(e<r)){if((n=i.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?o?c.call(n,s(r,t,G,o),s(r,t,K,o)):(r++,c.call(n,s(r,t,G,o),s(r,t,K,o),s(r,t,G,t.notifyWith))):(i!==G&&(a=void 0,l=[n]),(o||t.resolveWith)(a,l))}},u=o?c:function(){try{c()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,u.error),e+1>=r&&(i!==K&&(a=void 0,l=[n]),t.rejectWith(a,l))}};e?u():(S.Deferred.getErrorHook?u.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(u.error=S.Deferred.getStackHook()),n.setTimeout(u))}}return S.Deferred((function(n){t[0][3].add(s(0,n,y(o)?o:G,n.notifyWith)),t[1][3].add(s(0,n,y(e)?e:G)),t[2][3].add(s(0,n,y(i)?i:K))})).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},r={};return S.each(t,(function(e,n){var s=n[2],a=n[5];o[n[1]]=s.add,a&&s.add((function(){i=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),r[n[0]]=function(){return r[n[0]+"With"](this===r?void 0:this,arguments),this},r[n[0]+"With"]=s.fireWith})),o.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),o=a.call(arguments),r=S.Deferred(),s=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?a.call(arguments):i,--t||r.resolveWith(n,o)}};if(t<=1&&(Y(e,r.done(s(i)).resolve,r.reject,!t),"pending"===r.state()||y(o[i]&&o[i].then)))return r.then();for(;i--;)Y(o[i],s(i),r.reject);return r.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&J.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){n.setTimeout((function(){throw e}))};var X=S.Deferred();function Q(){_.removeEventListener("DOMContentLoaded",Q),n.removeEventListener("load",Q),S.ready()}S.fn.ready=function(e){return X.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||X.resolveWith(_,[S]))}}),S.ready.then=X.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?n.setTimeout(S.ready):(_.addEventListener("DOMContentLoaded",Q),n.addEventListener("load",Q));var ee=function(e,t,i,n,o,r,s){var a=0,l=e.length,c=null==i;if("object"===b(i))for(a in o=!0,i)ee(e,t,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,y(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(S(e),i)})),t))for(;a<l;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return o?e:c?t.call(e):l?t(e[0],i):r},te=/^-ms-/,ie=/-([a-z])/g;function ne(e,t){return t.toUpperCase()}function oe(e){return e.replace(te,"ms-").replace(ie,ne)}var re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function se(){this.expando=S.expando+se.uid++}se.uid=1,se.prototype={cache:function(e){var t=e[this.expando];return t||(t={},re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[oe(t)]=i;else for(n in t)o[oe(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][oe(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(oe):(t=oe(t))in n?[t]:t.match(Z)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||S.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var ae=new se,le=new se,ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function he(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ce.test(e)?JSON.parse(e):e)}(i)}catch(e){}le.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return le.hasData(e)||ae.hasData(e)},data:function(e,t,i){return le.access(e,t,i)},removeData:function(e,t){le.remove(e,t)},_data:function(e,t,i){return ae.access(e,t,i)},_removeData:function(e,t){ae.remove(e,t)}}),S.fn.extend({data:function(e,t){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=le.get(r),1===r.nodeType&&!ae.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=oe(n.slice(5)),he(r,n,o[n]));ae.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){le.set(this,e)})):ee(this,(function(t){var i;if(r&&void 0===t)return void 0!==(i=le.get(r,e))||void 0!==(i=he(r,e))?i:void 0;this.each((function(){le.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){le.remove(this,e)}))}}),S.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=ae.get(e,t),i&&(!n||Array.isArray(i)?n=ae.access(e,t,S.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=S.queue(e,t),n=i.length,o=i.shift(),r=S._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,(function(){S.dequeue(e,t)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ae.get(e,i)||ae.access(e,i,{empty:S.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",i])}))})}}),S.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?S.queue(this[0],e):void 0===t?this:this.each((function(){var i=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=S.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=ae.get(r[s],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),ge=["Top","Right","Bottom","Left"],me=_.documentElement,fe=function(e){return S.contains(e.ownerDocument,e)},ye={composed:!0};me.getRootNode&&(fe=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});var ve=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&fe(e)&&"none"===S.css(e,"display")};function _e(e,t,i,n){var o,r,s=20,a=n?function(){return n.cur()}:function(){return S.css(e,t,"")},l=a(),c=i&&i[3]||(S.cssNumber[t]?"":"px"),u=e.nodeType&&(S.cssNumber[t]||"px"!==c&&+l)&&pe.exec(S.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)S.style(e,t,u+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),u/=r;u*=2,S.style(e,t,u+c),i=i||[]}return i&&(u=+u||+l||0,o=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=o)),o}var xe={};function we(e){var t,i=e.ownerDocument,n=e.nodeName,o=xe[n];return o||(t=i.body.appendChild(i.createElement(n)),o=S.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),xe[n]=o,o)}function be(e,t){for(var i,n,o=[],r=0,s=e.length;r<s;r++)(n=e[r]).style&&(i=n.style.display,t?("none"===i&&(o[r]=ae.get(n,"display")||null,o[r]||(n.style.display="")),""===n.style.display&&ve(n)&&(o[r]=we(n))):"none"!==i&&(o[r]="none",ae.set(n,"display",i)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}S.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ve(this)?S(this).show():S(this).hide()}))}});var ke,Te,Se=/^(?:checkbox|radio)$/i,Ce=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ee=/^$|^module$|\/(?:java|ecma)script/i;ke=_.createDocumentFragment().appendChild(_.createElement("div")),(Te=_.createElement("input")).setAttribute("type","radio"),Te.setAttribute("checked","checked"),Te.setAttribute("name","t"),ke.appendChild(Te),f.checkClone=ke.cloneNode(!0).cloneNode(!0).lastChild.checked,ke.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!ke.cloneNode(!0).lastChild.defaultValue,ke.innerHTML="<option></option>",f.option=!!ke.lastChild;var Ae={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ze(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?S.merge([e],i):i}function Le(e,t){for(var i=0,n=e.length;i<n;i++)ae.set(e[i],"globalEval",!t||ae.get(t[i],"globalEval"))}Ae.tbody=Ae.tfoot=Ae.colgroup=Ae.caption=Ae.thead,Ae.th=Ae.td,f.option||(Ae.optgroup=Ae.option=[1,"<select multiple='multiple'>","</select>"]);var Pe=/<|&#?\w+;/;function Me(e,t,i,n,o){for(var r,s,a,l,c,u,h=t.createDocumentFragment(),d=[],p=0,g=e.length;p<g;p++)if((r=e[p])||0===r)if("object"===b(r))S.merge(d,r.nodeType?[r]:r);else if(Pe.test(r)){for(s=s||h.appendChild(t.createElement("div")),a=(Ce.exec(r)||["",""])[1].toLowerCase(),l=Ae[a]||Ae._default,s.innerHTML=l[1]+S.htmlPrefilter(r)+l[2],u=l[0];u--;)s=s.lastChild;S.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(r));for(h.textContent="",p=0;r=d[p++];)if(n&&S.inArray(r,n)>-1)o&&o.push(r);else if(c=fe(r),s=ze(h.appendChild(r),"script"),c&&Le(s),i)for(u=0;r=s[u++];)Ee.test(r.type||"")&&i.push(r);return h}var Ie=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function De(){return!1}function Re(e,t,i,n,o,r){var s,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)Re(e,a,i,n,t[a],r);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=De;else if(!o)return e;return 1===r&&(s=o,o=function(e){return S().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=S.guid++)),e.each((function(){S.event.add(this,t,o,n,i)}))}function Be(e,t,i){i?(ae.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var i,n=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(n)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(n=a.call(arguments),ae.set(this,t,n),this[t](),i=ae.get(this,t),ae.set(this,t,!1),n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i}else n&&(ae.set(this,t,S.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Oe)}})):void 0===ae.get(e,t)&&S.event.add(e,t,Oe)}S.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,c,u,h,d,p,g,m,f=ae.get(e);if(re(e))for(i.handler&&(i=(r=i).handler,o=r.selector),o&&S.find.matchesSelector(me,o),i.guid||(i.guid=S.guid++),(l=f.events)||(l=f.events=Object.create(null)),(s=f.handle)||(s=f.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(Z)||[""]).length;c--;)p=m=(a=Ie.exec(t[c])||[])[1],g=(a[2]||"").split(".").sort(),p&&(h=S.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=S.event.special[p]||{},u=S.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:g.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,g,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),S.event.global[p]=!0)},remove:function(e,t,i,n,o){var r,s,a,l,c,u,h,d,p,g,m,f=ae.hasData(e)&&ae.get(e);if(f&&(l=f.events)){for(c=(t=(t||"").match(Z)||[""]).length;c--;)if(p=m=(a=Ie.exec(t[c])||[])[1],g=(a[2]||"").split(".").sort(),p){for(h=S.event.special[p]||{},d=l[p=(n?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&m!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,g,f.handle)||S.removeEvent(e,p,f.handle),delete l[p])}else for(p in l)S.event.remove(e,p+t[c],i,n,!0);S.isEmptyObject(l)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,r,s,a=new Array(arguments.length),l=S.event.fix(e),c=(ae.get(this,"events")||Object.create(null))[l.type]||[],u=S.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=S.event.handlers.call(this,l,c),t=0;(o=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(n=((S.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,o,r,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],s={},i=0;i<l;i++)void 0===s[o=(n=t[i]).selector+" "]&&(s[o]=n.needsContext?S(o,this).index(c)>-1:S.find(o,this,null,[c]).length),s[o]&&r.push(n);r.length&&a.push({elem:c,handlers:r})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Se.test(t.type)&&t.click&&E(t,"input")&&Be(t,"click",!0),!1},trigger:function(e){var t=this||e;return Se.test(t.type)&&t.click&&E(t,"input")&&Be(t,"click"),!0},_default:function(e){var t=e.target;return Se.test(t.type)&&t.click&&E(t,"input")&&ae.get(t,"click")||E(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:De,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:De,isPropagationStopped:De,isImmediatePropagationStopped:De,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){function i(e){if(_.documentMode){var i=ae.get(this,"handle"),n=S.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,i(e),n.target===n.currentTarget&&i(n)}else S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[e]={setup:function(){var n;if(Be(this,e,!0),!_.documentMode)return!1;(n=ae.get(this,t))||this.addEventListener(t,i),ae.set(this,t,(n||0)+1)},trigger:function(){return Be(this,e),!0},teardown:function(){var e;if(!_.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,i),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},S.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,o=_.documentMode?this:n,r=ae.get(o,t);r||(_.documentMode?this.addEventListener(t,i):n.addEventListener(e,i,!0)),ae.set(o,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,o=_.documentMode?this:n,r=ae.get(o,t)-1;r?ae.set(o,t,r):(_.documentMode?this.removeEventListener(t,i):n.removeEventListener(e,i,!0),ae.remove(o,t))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,o=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}})),S.fn.extend({on:function(e,t,i,n){return Re(this,e,t,i,n)},one:function(e,t,i,n){return Re(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=De),this.each((function(){S.event.remove(this,e,i,t)}))}});var Ne=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function qe(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ue(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ve(e,t){var i,n,o,r,s,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(o in ae.remove(t,"handle events"),a)for(i=0,n=a[o].length;i<n;i++)S.event.add(t,o,a[o][i]);le.hasData(e)&&(r=le.access(e),s=S.extend({},r),le.set(t,s))}}function $e(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Se.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function We(e,t,i,n){t=l(t);var o,r,s,a,c,u,h=0,d=e.length,p=d-1,g=t[0],m=y(g);if(m||d>1&&"string"==typeof g&&!f.checkClone&&je.test(g))return e.each((function(o){var r=e.eq(o);m&&(t[0]=g.call(this,o,r.html())),We(r,t,i,n)}));if(d&&(r=(o=Me(t,e[0].ownerDocument,!1,e,n)).firstChild,1===o.childNodes.length&&(o=r),r||n)){for(a=(s=S.map(ze(o,"script"),Ue)).length;h<d;h++)c=o,h!==p&&(c=S.clone(c,!0,!0),a&&S.merge(s,ze(c,"script"))),i.call(e[h],c,h);if(a)for(u=s[s.length-1].ownerDocument,S.map(s,He),h=0;h<a;h++)c=s[h],Ee.test(c.type||"")&&!ae.access(c,"globalEval")&&S.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):w(c.textContent.replace(Fe,""),c,u))}return e}function Ze(e,t,i){for(var n,o=t?S.filter(t,e):e,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||S.cleanData(ze(n)),n.parentNode&&(i&&fe(n)&&Le(ze(n,"script")),n.parentNode.removeChild(n));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,o,r,s,a=e.cloneNode(!0),l=fe(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(s=ze(a),n=0,o=(r=ze(e)).length;n<o;n++)$e(r[n],s[n]);if(t)if(i)for(r=r||ze(e),s=s||ze(a),n=0,o=r.length;n<o;n++)Ve(r[n],s[n]);else Ve(e,a);return(s=ze(a,"script")).length>0&&Le(s,!l&&ze(e,"script")),a},cleanData:function(e){for(var t,i,n,o=S.event.special,r=0;void 0!==(i=e[r]);r++)if(re(i)){if(t=i[ae.expando]){if(t.events)for(n in t.events)o[n]?S.event.remove(i,n):S.removeEvent(i,n,t.handle);i[ae.expando]=void 0}i[le.expando]&&(i[le.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Ze(this,e,!0)},remove:function(e){return Ze(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ze(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!Ae[(Ce.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(ze(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(t){var i=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(ze(this)),i&&i.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var i,n=[],o=S(e),r=o.length-1,s=0;s<=r;s++)i=s===r?this:this.clone(!0),S(o[s])[t](i),c.apply(n,i.get());return this.pushStack(n)}}));var Ge=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ke=/^--/,Ye=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Je=function(e,t,i){var n,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in n=i.call(e),t)e.style[o]=r[o];return n},Xe=new RegExp(ge.join("|"),"i");function Qe(e,t,i){var n,o,r,s,a=Ke.test(t),l=e.style;return(i=i||Ye(e))&&(s=i.getPropertyValue(t)||i[t],a&&s&&(s=s.replace(M,"$1")||void 0),""!==s||fe(e)||(s=S.style(e,t)),!f.pixelBoxStyles()&&Ge.test(s)&&Xe.test(t)&&(n=l.width,o=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=i.width,l.width=n,l.minWidth=o,l.maxWidth=r)),void 0!==s?s+"":s}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(c).appendChild(u);var e=n.getComputedStyle(u);i="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),o=36===t(e.width),u.style.position="absolute",r=12===t(u.offsetWidth/3),me.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var i,o,r,s,a,l,c=_.createElement("div"),u=_.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===u.style.backgroundClip,S.extend(f,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,t,i,o;return null==a&&(e=_.createElement("table"),t=_.createElement("tr"),i=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",me.appendChild(e).appendChild(t).appendChild(i),o=n.getComputedStyle(t),a=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),a}}))}();var tt=["Webkit","Moz","ms"],it=_.createElement("div").style,nt={};function ot(e){return S.cssProps[e]||nt[e]||(e in it?e:nt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=tt.length;i--;)if((e=tt[i]+t)in it)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,st={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function lt(e,t,i){var n=pe.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function ct(e,t,i,n,o,r){var s="width"===t?1:0,a=0,l=0,c=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(c+=S.css(e,i+ge[s],!0,o)),n?("content"===i&&(l-=S.css(e,"padding"+ge[s],!0,o)),"margin"!==i&&(l-=S.css(e,"border"+ge[s]+"Width",!0,o))):(l+=S.css(e,"padding"+ge[s],!0,o),"padding"!==i?l+=S.css(e,"border"+ge[s]+"Width",!0,o):a+=S.css(e,"border"+ge[s]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-a-.5))||0),l+c}function ut(e,t,i){var n=Ye(e),o=(!f.boxSizingReliable()||i)&&"border-box"===S.css(e,"boxSizing",!1,n),r=o,s=Qe(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(s)){if(!i)return s;s="auto"}return(!f.boxSizingReliable()&&o||!f.reliableTrDimensions()&&E(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===S.css(e,"boxSizing",!1,n),(r=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+ct(e,t,i||(o?"border":"content"),r,n,s)+"px"}function ht(e,t,i,n,o){return new ht.prototype.init(e,t,i,n,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Qe(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=oe(t),l=Ke.test(t),c=e.style;if(l||(t=ot(a)),s=S.cssHooks[t]||S.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(e,!1,n))?o:c[t];"string"==(r=typeof i)&&(o=pe.exec(i))&&o[1]&&(i=_e(e,t,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||(S.cssNumber[a]?"":"px")),f.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var o,r,s,a=oe(t);return Ke.test(t)||(t=ot(a)),(s=S.cssHooks[t]||S.cssHooks[a])&&"get"in s&&(o=s.get(e,!0,i)),void 0===o&&(o=Qe(e,t,n)),"normal"===o&&t in at&&(o=at[t]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,i,n){if(i)return!rt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,n):Je(e,st,(function(){return ut(e,t,n)}))},set:function(e,i,n){var o,r=Ye(e),s=!f.scrollboxSize()&&"absolute"===r.position,a=(s||n)&&"border-box"===S.css(e,"boxSizing",!1,r),l=n?ct(e,t,n,a,r):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-ct(e,t,"border",!1,r)-.5)),l&&(o=pe.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=S.css(e,t)),lt(0,i,l)}}})),S.cssHooks.marginLeft=et(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+ge[n]+t]=r[n]||r[n-2]||r[0];return o}},"margin"!==e&&(S.cssHooks[e+t].set=lt)})),S.fn.extend({css:function(e,t){return ee(this,(function(e,t,i){var n,o,r={},s=0;if(Array.isArray(t)){for(n=Ye(e),o=t.length;s<o;s++)r[t[s]]=S.css(e,t[s],!1,n);return r}return void 0!==i?S.style(e,t,i):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(S.cssNumber[i]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,i=ht.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ot(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=ht.prototype.init,S.fx.step={};var dt,pt,gt=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function ft(){pt&&(!1===_.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ft):n.setTimeout(ft,S.fx.interval),S.fx.tick())}function yt(){return n.setTimeout((function(){dt=void 0})),dt=Date.now()}function vt(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=ge[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function _t(e,t,i){for(var n,o=(xt.tweeners[t]||[]).concat(xt.tweeners["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,t,e))return n}function xt(e,t,i){var n,o,r=0,s=xt.prefilters.length,a=S.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=dt||yt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),r=0,s=c.tweens.length;r<s;r++)c.tweens[r].run(n);return a.notifyWith(e,[c,n,i]),n<1&&s?i:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},i),originalProperties:t,originalOptions:i,startTime:dt||yt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=S.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var i,n,o,r,s;for(i in e)if(o=t[n=oe(i)],r=e[i],Array.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(s=S.cssHooks[n])&&"expand"in s)for(i in r=s.expand(r),delete e[n],r)i in e||(e[i]=r[i],t[i]=o);else t[n]=o}(u,c.opts.specialEasing);r<s;r++)if(n=xt.prefilters[r].call(c,e,u,c.opts))return y(n.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return S.map(u,_t,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(xt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return _e(i.elem,e,pe.exec(t),i),i}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(Z);for(var i,n=0,o=e.length;n<o;n++)i=e[n],xt.tweeners[i]=xt.tweeners[i]||[],xt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,o,r,s,a,l,c,u,h="width"in t||"height"in t,d=this,p={},g=e.style,m=e.nodeType&&ve(e),f=ae.get(e,"fxshow");for(n in i.queue||(null==(s=S._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,S.queue(e,"fx").length||s.empty.fire()}))}))),t)if(o=t[n],gt.test(o)){if(delete t[n],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!f||void 0===f[n])continue;m=!0}p[n]=f&&f[n]||S.style(e,n)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(p))for(n in h&&1===e.nodeType&&(i.overflow=[g.overflow,g.overflowX,g.overflowY],null==(c=f&&f.display)&&(c=ae.get(e,"display")),"none"===(u=S.css(e,"display"))&&(c?u=c:(be([e],!0),c=e.style.display||c,u=S.css(e,"display"),be([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===S.css(e,"float")&&(l||(d.done((function(){g.display=c})),null==c&&(u=g.display,c="none"===u?"":u)),g.display="inline-block")),i.overflow&&(g.overflow="hidden",d.always((function(){g.overflow=i.overflow[0],g.overflowX=i.overflow[1],g.overflowY=i.overflow[2]}))),l=!1,p)l||(f?"hidden"in f&&(m=f.hidden):f=ae.access(e,"fxshow",{display:c}),r&&(f.hidden=!m),m&&be([e],!0),d.done((function(){for(n in m||be([e]),ae.remove(e,"fxshow"),p)S.style(e,n,p[n])}))),l=_t(m?f[n]:0,n,d),n in f||(f[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?xt.prefilters.unshift(e):xt.prefilters.push(e)}}),S.speed=function(e,t,i){var n=e&&"object"==typeof e?S.extend({},e):{complete:i||!i&&t||y(e)&&e,duration:e,easing:i&&t||t&&!y(t)&&t};return S.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in S.fx.speeds?n.duration=S.fx.speeds[n.duration]:n.duration=S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=S.isEmptyObject(e),r=S.speed(t,i,n),s=function(){var t=xt(this,S.extend({},e),r);(o||ae.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",r=S.timers,s=ae.get(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&mt.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));!t&&i||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=ae.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=S.timers,s=n?n.length:0;for(i.finish=!0,S.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var i=S.fn[t];S.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(vt(t,!0),e,n,o)}})),S.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),S.timers=[],S.fx.tick=function(){var e,t=0,i=S.timers;for(dt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||S.fx.stop(),dt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){pt||(pt=!0,ft())},S.fx.stop=function(){pt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var o=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(o)}}))},function(){var e=_.createElement("input"),t=_.createElement("select").appendChild(_.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=_.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var wt,bt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return ee(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?S.prop(e,t,i):(1===r&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?wt:void 0)),void 0!==i?null===i?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=S.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&E(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(Z);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),wt={set:function(e,t,i){return!1===t?S.removeAttr(e,i):e.setAttribute(i,i),i}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=bt[t]||S.find.attr;bt[t]=function(e,t,n){var o,r,s=t.toLowerCase();return n||(r=bt[s],bt[s]=o,o=null!=i(e,t,n)?s:null,bt[s]=r),o}}));var kt=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;function St(e){return(e.match(Z)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(Z)||[]}S.fn.extend({prop:function(e,t){return ee(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&S.isXMLDoc(e)||(t=S.propFix[t]||t,o=S.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):kt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,i,n,o,r,s;return y(e)?this.each((function(t){S(this).addClass(e.call(this,t,Ct(this)))})):(t=Et(e)).length?this.each((function(){if(n=Ct(this),i=1===this.nodeType&&" "+St(n)+" "){for(r=0;r<t.length;r++)o=t[r],i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=St(i),n!==s&&this.setAttribute("class",s)}})):this},removeClass:function(e){var t,i,n,o,r,s;return y(e)?this.each((function(t){S(this).removeClass(e.call(this,t,Ct(this)))})):arguments.length?(t=Et(e)).length?this.each((function(){if(n=Ct(this),i=1===this.nodeType&&" "+St(n)+" "){for(r=0;r<t.length;r++)for(o=t[r];i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=St(i),n!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(e,t){var i,n,o,r,s=typeof e,a="string"===s||Array.isArray(e);return y(e)?this.each((function(i){S(this).toggleClass(e.call(this,i,Ct(this),t),t)})):"boolean"==typeof t&&a?t?this.addClass(e):this.removeClass(e):(i=Et(e),this.each((function(){if(a)for(r=S(this),o=0;o<i.length;o++)n=i[o],r.hasClass(n)?r.removeClass(n):r.addClass(n);else void 0!==e&&"boolean"!==s||((n=Ct(this))&&ae.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+St(Ct(i))+" ").indexOf(t)>-1)return!0;return!1}});var At=/\r/g;S.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=y(e),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,S(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=S.map(o,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(At,""):null==i?"":i:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:St(S.text(e))}},select:{get:function(e){var t,i,n,o=e.options,r=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?r+1:o.length;for(n=r<0?l:s?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!E(i.parentNode,"optgroup"))){if(t=S(i).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var i,n,o=e.options,r=S.makeArray(t),s=o.length;s--;)((n=o[s]).selected=S.inArray(S.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},f.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var zt=n.location,Lt={guid:Date.now()},Pt=/\?/;S.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){}return i=t&&t.getElementsByTagName("parsererror")[0],t&&!i||S.error("Invalid XML: "+(i?S.map(i.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Mt=/^(?:focusinfocus|focusoutblur)$/,It=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,i,o){var r,s,a,l,c,u,h,d,g=[i||_],m=p.call(e,"type")?e.type:e,f=p.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=i=i||_,3!==i.nodeType&&8!==i.nodeType&&!Mt.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(f=m.split("."),m=f.shift(),f.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[S.expando]?e:new S.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:S.makeArray(t,[e]),h=S.event.special[m]||{},o||!h.trigger||!1!==h.trigger.apply(i,t))){if(!o&&!h.noBubble&&!v(i)){for(l=h.delegateType||m,Mt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)g.push(s),a=s;a===(i.ownerDocument||_)&&g.push(a.defaultView||a.parentWindow||n)}for(r=0;(s=g[r++])&&!e.isPropagationStopped();)d=s,e.type=r>1?l:h.bindType||m,(u=(ae.get(s,"events")||Object.create(null))[e.type]&&ae.get(s,"handle"))&&u.apply(s,t),(u=c&&s[c])&&u.apply&&re(s)&&(e.result=u.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(g.pop(),t)||!re(i)||c&&y(i[m])&&!v(i)&&((a=i[c])&&(i[c]=null),S.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,It),i[m](),e.isPropagationStopped()&&d.removeEventListener(m,It),S.event.triggered=void 0,a&&(i[c]=a)),e.result}},simulate:function(e,t,i){var n=S.extend(new S.Event,i,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return S.event.trigger(e,t,i,!0)}});var Ot=/\[\]$/,Dt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function Nt(e,t,i,n){var o;if(Array.isArray(t))S.each(t,(function(t,o){i||Ot.test(e)?n(e,o):Nt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)}));else if(i||"object"!==b(t))n(e,t);else for(o in t)Nt(e+"["+o+"]",t[o],i,n)}S.param=function(e,t){var i,n=[],o=function(e,t){var i=y(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){o(this.name,this.value)}));else for(i in e)Nt(i,e[i],t,o);return n.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Bt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!Se.test(e))})).map((function(e,t){var i=S(this).val();return null==i?null:Array.isArray(i)?S.map(i,(function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}})):{name:t.name,value:i.replace(Dt,"\r\n")}})).get()}});var jt=/%20/g,Ft=/#.*$/,qt=/([?&])_=[^&]*/,Ut=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,Vt=/^\/\//,$t={},Wt={},Zt="*/".concat("*"),Gt=_.createElement("a");function Kt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(Z)||[];if(y(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Yt(e,t,i,n){var o={},r=e===Wt;function s(a){var l;return o[a]=!0,S.each(e[a]||[],(function(e,a){var c=a(t,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)})),l}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Jt(e,t){var i,n,o=S.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&S.extend(!0,e,n),e}Gt.href=zt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(zt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,S.ajaxSettings),t):Jt(S.ajaxSettings,e)},ajaxPrefilter:Kt($t),ajaxTransport:Kt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,r,s,a,l,c,u,h,d,p=S.ajaxSetup({},t),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?S(g):S.event,f=S.Deferred(),y=S.Callbacks("once memory"),v=p.statusCode||{},x={},w={},b="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Ut.exec(r);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||b;return i&&i.abort(t),T(0,t),this}};if(f.promise(k),p.url=((e||p.url||zt.href)+"").replace(Vt,zt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Z)||[""],null==p.crossDomain){l=_.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Gt.protocol+"//"+Gt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Yt($t,p,t,k),c)return k;for(h in(u=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ht.test(p.type),o=p.url.replace(Ft,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(jt,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Pt.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(qt,"$1"),d=(Pt.test(o)?"&":"?")+"_="+Lt.guid+++d),p.url=o+d),p.ifModified&&(S.lastModified[o]&&k.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&k.setRequestHeader("If-None-Match",S.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Zt+"; q=0.01":""):p.accepts["*"]),p.headers)k.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(g,k,p)||c))return k.abort();if(b="abort",y.add(p.complete),k.done(p.success),k.fail(p.error),i=Yt(Wt,p,t,k)){if(k.readyState=1,u&&m.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(a=n.setTimeout((function(){k.abort("timeout")}),p.timeout));try{c=!1,i.send(x,T)}catch(e){if(c)throw e;T(-1,e)}}else T(-1,"No Transport");function T(e,t,s,l){var h,d,_,x,w,b=t;c||(c=!0,a&&n.clearTimeout(a),i=void 0,r=l||"",k.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(x=function(e,t,i){for(var n,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}(p,k,s)),!h&&S.inArray("script",p.dataTypes)>-1&&S.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),x=function(e,t,i,n){var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(p,x,k,h),h?(p.ifModified&&((w=k.getResponseHeader("Last-Modified"))&&(S.lastModified[o]=w),(w=k.getResponseHeader("etag"))&&(S.etag[o]=w)),204===e||"HEAD"===p.type?b="nocontent":304===e?b="notmodified":(b=x.state,d=x.data,h=!(_=x.error))):(_=b,!e&&b||(b="error",e<0&&(e=0))),k.status=e,k.statusText=(t||b)+"",h?f.resolveWith(g,[d,b,k]):f.rejectWith(g,[k,b,_]),k.statusCode(v),v=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[k,p,h?d:_]),y.fireWith(g,[k,b]),u&&(m.trigger("ajaxComplete",[k,p]),--S.active||S.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,i,n,o){return y(i)&&(o=o||n,n=i,i=void 0),S.ajax(S.extend({url:e,type:t,dataType:o,data:i,success:n},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,i){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,i)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(i){S(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Qt=S.ajaxSettings.xhr();f.cors=!!Qt&&"withCredentials"in Qt,f.ajax=Qt=!!Qt,S.ajaxTransport((function(e){var t,i;if(f.cors||Qt&&!e.crossDomain)return{send:function(o,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);t=function(e){return function(){t&&(t=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Xt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),i=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){t&&i()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,o){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){i&&i()}}}));var ei,ti=[],ii=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||S.expando+"_"+Lt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,i){var o,r,s,a=!1!==e.jsonp&&(ii.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ii,"$1"+o):!1!==e.jsonp&&(e.url+=(Pt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||S.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=n[o],n[o]=function(){s=arguments},i.always((function(){void 0===r?S(n).removeProp(o):n[o]=r,e[o]&&(e.jsonpCallback=t.jsonpCallback,ti.push(o)),s&&y(r)&&r(s[0]),s=r=void 0})),"script"})),f.createHTMLDocument=((ei=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ei.childNodes.length),S.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(f.createHTMLDocument?((n=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(n)):t=_),r=!i&&[],(o=F.exec(e))?[t.createElement(o[1])]:(o=Me([e],t,r),r&&r.length&&S(r).remove(),S.merge([],o.childNodes)));var n,o,r},S.fn.load=function(e,t,i){var n,o,r,s=this,a=e.indexOf(" ");return a>-1&&(n=St(e.slice(a)),e=e.slice(0,a)),y(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){r=arguments,s.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)})).always(i&&function(e,t){s.each((function(){i.apply(this,r||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,i){var n,o,r,s,a,l,c=S.css(e,"position"),u=S(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),r=S.css(e,"top"),l=S.css(e,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(s=(n=u.position()).top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),y(t)&&(t=t.call(e,i,S.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+o),"using"in t?t.using.call(e,h):u.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((o=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),o.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-S.css(n,"marginTop",!0),left:t.left-o.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||me}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;S.fn[e]=function(n){return ee(this,(function(e,n,o){var r;if(v(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):e[n]=o}),e,n,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=et(f.pixelPosition,(function(e,i){if(i)return i=Qe(e,t),Ge.test(i)?S(e).position()[t]+"px":i}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){S.fn[n]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===r?"margin":"border");return ee(this,(function(t,i,o){var r;return v(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?S.css(t,i,a):S.style(t,i,o,a)}),t,s?o:void 0,s)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var ni=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var i,n,o;if("string"==typeof t&&(i=e[t],t=e,e=i),y(e))return n=a.call(arguments,2),o=function(){return e.apply(t||this,n.concat(a.call(arguments)))},o.guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=E,S.isFunction=y,S.isWindow=v,S.camelCase=oe,S.type=b,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(ni,"$1")},void 0===(i=function(){return S}.apply(t,[]))||(e.exports=i);var oi=n.jQuery,ri=n.$;return S.noConflict=function(e){return n.$===S&&(n.$=ri),e&&n.jQuery===S&&(n.jQuery=oi),S},void 0===o&&(n.jQuery=n.$=S),S}))},6541:function(e,t){!function(e){"use strict";function t(e){var t,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(t in o=arguments[i])e[t]=o[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function n(e,t){var i=Array.prototype.slice;if(e.bind)return e.bind.apply(e,i.call(arguments,1));var n=i.call(arguments,2);return function(){return e.apply(t,n.length?n.concat(i.call(arguments)):arguments)}}var o=0;function r(e){return"_leaflet_id"in e||(e._leaflet_id=++o),e._leaflet_id}function s(e,t,i){var n,o,r,s;return s=function(){n=!1,o&&(r.apply(i,o),o=!1)},r=function(){n?o=arguments:(e.apply(i,arguments),setTimeout(s,t),n=!0)},r}function a(e,t,i){var n=t[1],o=t[0],r=n-o;return e===n&&i?e:((e-o)%r+r)%r+o}function l(){return!1}function c(e,t){if(!1===t)return e;var i=Math.pow(10,void 0===t?6:t);return Math.round(e*i)/i}function u(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return u(e).split(/\s+/)}function d(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function p(e,t,i){var n=[];for(var o in e)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}var g=/\{ *([\w_ -]+) *\}/g;function m(e,t){return e.replace(g,(function(e,i){var n=t[i];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(t)),n}))}var f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function w(e){var t=+new Date,i=Math.max(0,16-(t-x));return x=t+i,window.setTimeout(e,i)}var b=window.requestAnimationFrame||_("RequestAnimationFrame")||w,k=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function T(e,t,i){if(!i||b!==w)return b.call(window,n(e,t));e.call(t)}function S(e){e&&k.call(window,e)}var C={__proto__:null,extend:t,create:i,bind:n,get lastId(){return o},stamp:r,throttle:s,wrapNum:a,falseFn:l,formatNum:c,trim:u,splitWords:h,setOptions:d,getParamString:p,template:m,isArray:f,indexOf:y,emptyImageUrl:v,requestFn:b,cancelFn:k,requestAnimFrame:T,cancelAnimFrame:S};function E(){}E.extend=function(e){var n=function(){d(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=n.__super__=this.prototype,r=i(o);for(var s in r.constructor=n,n.prototype=r,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(n[s]=this[s]);return e.statics&&t(n,e.statics),e.includes&&(function(e){if("undefined"!=typeof L&&L&&L.Mixin){e=f(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(e.includes),t.apply(null,[r].concat(e.includes))),t(r,e),delete r.statics,delete r.includes,r.options&&(r.options=o.options?i(o.options):{},t(r.options,e.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;e<t;e++)r._initHooks[e].call(this)}},n},E.include=function(e){var i=this.prototype.options;return t(this.prototype,e),e.options&&(this.prototype.options=i,this.mergeOptions(e.options)),this},E.mergeOptions=function(e){return t(this.prototype.options,e),this},E.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var A={on:function(e,t,i){if("object"==typeof e)for(var n in e)this._on(n,e[n],t);else for(var o=0,r=(e=h(e)).length;o<r;o++)this._on(e[o],t,i);return this},off:function(e,t,i){if(arguments.length)if("object"==typeof e)for(var n in e)this._off(n,e[n],t);else{e=h(e);for(var o=1===arguments.length,r=0,s=e.length;r<s;r++)o?this._off(e[r]):this._off(e[r],t,i)}else delete this._events;return this},_on:function(e,t,i,n){if("function"==typeof t){if(!1===this._listens(e,t,i)){i===this&&(i=void 0);var o={fn:t,ctx:i};n&&(o.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(o)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,i){var n,o,r;if(this._events&&(n=this._events[e]))if(1!==arguments.length)if("function"==typeof t){var s=this._listens(e,t,i);if(!1!==s){var a=n[s];this._firingCount&&(a.fn=l,this._events[e]=n=n.slice()),n.splice(s,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(o=0,r=n.length;o<r;o++)n[o].fn=l;delete this._events[e]}},fire:function(e,i,n){if(!this.listens(e,n))return this;var o=t({},i,{type:e,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var r=this._events[e];if(r){this._firingCount=this._firingCount+1||1;for(var s=0,a=r.length;s<a;s++){var l=r[s],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(e,t,i,n){"string"!=typeof e&&console.warn('"string" type argument expected');var o=t;"function"!=typeof t&&(n=!!t,o=void 0,i=void 0);var r=this._events&&this._events[e];if(r&&r.length&&!1!==this._listens(e,o,i))return!0;if(n)for(var s in this._eventParents)if(this._eventParents[s].listens(e,t,i,n))return!0;return!1},_listens:function(e,t,i){if(!this._events)return!1;var n=this._events[e]||[];if(!t)return!!n.length;i===this&&(i=void 0);for(var o=0,r=n.length;o<r;o++)if(n[o].fn===t&&n[o].ctx===i)return o;return!1},once:function(e,t,i){if("object"==typeof e)for(var n in e)this._on(n,e[n],t,!0);else for(var o=0,r=(e=h(e)).length;o<r;o++)this._on(e[o],t,i,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[r(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[r(e)],this},_propagateEvent:function(e){for(var i in this._eventParents)this._eventParents[i].fire(e.type,t({layer:e.target,propagatedFrom:e.target},e),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var z=E.extend(A);function P(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}var M=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function I(e,t,i){return e instanceof P?e:f(e)?new P(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new P(e.x,e.y):new P(e,t,i)}function O(e,t){if(e)for(var i=t?[e,t]:e,n=0,o=i.length;n<o;n++)this.extend(i[n])}function D(e,t){return!e||e instanceof O?e:new O(e,t)}function R(e,t){if(e)for(var i=t?[e,t]:e,n=0,o=i.length;n<o;n++)this.extend(i[n])}function B(e,t){return e instanceof R?e:new R(e,t)}function N(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==i&&(this.alt=+i)}function j(e,t,i){return e instanceof N?e:f(e)&&"object"!=typeof e[0]?3===e.length?new N(e[0],e[1],e[2]):2===e.length?new N(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new N(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new N(e,t,i)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(e){return this.clone()._add(I(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(I(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new P(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new P(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=M(this.x),this.y=M(this.y),this},distanceTo:function(e){var t=(e=I(e)).x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return(e=I(e)).x===this.x&&e.y===this.y},contains:function(e){return e=I(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},O.prototype={extend:function(e){var t,i;if(!e)return this;if(e instanceof P||"number"==typeof e[0]||"x"in e)t=i=I(e);else if(t=(e=D(e)).min,i=e.max,!t||!i)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=t.clone(),this.max=i.clone()),this},getCenter:function(e){return I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return I(this.min.x,this.max.y)},getTopRight:function(){return I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return(e="number"==typeof e[0]||e instanceof P?I(e):D(e))instanceof O?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=D(e);var t=this.min,i=this.max,n=e.min,o=e.max,r=o.x>=t.x&&n.x<=i.x,s=o.y>=t.y&&n.y<=i.y;return r&&s},overlaps:function(e){e=D(e);var t=this.min,i=this.max,n=e.min,o=e.max,r=o.x>t.x&&n.x<i.x,s=o.y>t.y&&n.y<i.y;return r&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,i=this.max,n=Math.abs(t.x-i.x)*e,o=Math.abs(t.y-i.y)*e;return D(I(t.x-n,t.y-o),I(i.x+n,i.y+o))},equals:function(e){return!!e&&(e=D(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},R.prototype={extend:function(e){var t,i,n=this._southWest,o=this._northEast;if(e instanceof N)t=e,i=e;else{if(!(e instanceof R))return e?this.extend(j(e)||B(e)):this;if(t=e._southWest,i=e._northEast,!t||!i)return this}return n||o?(n.lat=Math.min(t.lat,n.lat),n.lng=Math.min(t.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new N(t.lat,t.lng),this._northEast=new N(i.lat,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,o=Math.abs(t.lng-i.lng)*e;return new R(new N(t.lat-n,t.lng-o),new N(i.lat+n,i.lng+o))},getCenter:function(){return new N((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new N(this.getNorth(),this.getWest())},getSouthEast:function(){return new N(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof N||"lat"in e?j(e):B(e);var t,i,n=this._southWest,o=this._northEast;return e instanceof R?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=n.lat&&i.lat<=o.lat&&t.lng>=n.lng&&i.lng<=o.lng},intersects:function(e){e=B(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),o=e.getNorthEast(),r=o.lat>=t.lat&&n.lat<=i.lat,s=o.lng>=t.lng&&n.lng<=i.lng;return r&&s},overlaps:function(e){e=B(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),o=e.getNorthEast(),r=o.lat>t.lat&&n.lat<i.lat,s=o.lng>t.lng&&n.lng<i.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},N.prototype={equals:function(e,t){return!!e&&(e=j(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+c(this.lat,e)+", "+c(this.lng,e)+")"},distanceTo:function(e){return U.distance(this,j(e))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new N(this.lat,this.lng,this.alt)}};var F,q={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(e);return new O(this.transformation.transform(t.min,i),this.transformation.transform(t.max,i))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?a(e.lng,this.wrapLng,!0):e.lng;return new N(this.wrapLat?a(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,o=t.lng-i.lng;if(0===n&&0===o)return e;var r=e.getSouthWest(),s=e.getNorthEast();return new R(new N(r.lat-n,r.lng-o),new N(s.lat-n,s.lng-o))}},U=t({},q,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,n=e.lat*i,o=t.lat*i,r=Math.sin((t.lat-e.lat)*i/2),s=Math.sin((t.lng-e.lng)*i/2),a=r*r+Math.cos(n)*Math.cos(o)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),H=6378137,V={R:H,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),o=Math.sin(n*t);return new P(this.R*e.lng*t,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(e){var t=180/Math.PI;return new N((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(F=H*Math.PI,new O([-F,-F],[F,F]))};function $(e,t,i,n){if(f(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=i,this._d=n}function W(e,t,i,n){return new $(e,t,i,n)}$.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new P((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Z=t({},U,{code:"EPSG:3857",projection:V,transformation:function(){var e=.5/(Math.PI*V.R);return W(e,.5,-e,.5)}()}),G=t({},Z,{code:"EPSG:900913"});function K(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Y(e,t){var i,n,o,r,s,a,l="";for(i=0,o=e.length;i<o;i++){for(n=0,r=(s=e[i]).length;n<r;n++)l+=(n?"L":"M")+(a=s[n]).x+" "+a.y;l+=t?Oe.svg?"z":"x":""}return l||"M0 0"}var J,X=document.documentElement.style,Q="ActiveXObject"in window,ee=Q&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ie=Ie("webkit"),ne=Ie("android"),oe=Ie("android 2")||Ie("android 3"),re=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),se=ne&&Ie("Google")&&re<537&&!("AudioNode"in window),ae=!!window.opera,le=!te&&Ie("chrome"),ce=Ie("gecko")&&!ie&&!ae&&!Q,ue=!le&&Ie("safari"),he=Ie("phantom"),de="OTransition"in X,pe=0===navigator.platform.indexOf("Win"),ge=Q&&"transition"in X,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!oe,fe="MozPerspective"in X,ye=!window.L_DISABLE_3D&&(ge||me||fe)&&!de&&!he,ve="undefined"!=typeof orientation||Ie("mobile"),_e=ve&&ie,xe=ve&&me,we=!window.PointerEvent&&window.MSPointerEvent,be=!(!window.PointerEvent&&!we),ke="ontouchstart"in window||!!window.TouchEvent,Te=!window.L_NO_TOUCH&&(ke||be),Se=ve&&ae,Ce=ve&&ce,Ee=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ae=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",l,t),window.removeEventListener("testPassiveEventSupport",l,t)}catch(e){}return e}(),ze=!!document.createElement("canvas").getContext,Le=!(!document.createElementNS||!K("svg").createSVGRect),Pe=!!Le&&((J=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(J.firstChild&&J.firstChild.namespaceURI)),Me=!Le&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}();function Ie(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Oe={ie:Q,ielt9:ee,edge:te,webkit:ie,android:ne,android23:oe,androidStock:se,opera:ae,chrome:le,gecko:ce,safari:ue,phantom:he,opera12:de,win:pe,ie3d:ge,webkit3d:me,gecko3d:fe,any3d:ye,mobile:ve,mobileWebkit:_e,mobileWebkit3d:xe,msPointer:we,pointer:be,touch:Te,touchNative:ke,mobileOpera:Se,mobileGecko:Ce,retina:Ee,passiveEvents:Ae,canvas:ze,svg:Le,vml:Me,inlineSvg:Pe,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},De=Oe.msPointer?"MSPointerDown":"pointerdown",Re=Oe.msPointer?"MSPointerMove":"pointermove",Be=Oe.msPointer?"MSPointerUp":"pointerup",Ne=Oe.msPointer?"MSPointerCancel":"pointercancel",je={touchstart:De,touchmove:Re,touchend:Be,touchcancel:Ne},Fe={touchstart:function(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Nt(t),Ze(e,t)},touchmove:Ze,touchend:Ze,touchcancel:Ze},qe={},Ue=!1;function He(e,t,i){return"touchstart"===t&&(Ue||(document.addEventListener(De,Ve,!0),document.addEventListener(Re,$e,!0),document.addEventListener(Be,We,!0),document.addEventListener(Ne,We,!0),Ue=!0)),Fe[t]?(i=Fe[t].bind(this,i),e.addEventListener(je[t],i,!1),i):(console.warn("wrong event specified:",t),l)}function Ve(e){qe[e.pointerId]=e}function $e(e){qe[e.pointerId]&&(qe[e.pointerId]=e)}function We(e){delete qe[e.pointerId]}function Ze(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in t.touches=[],qe)t.touches.push(qe[i]);t.changedTouches=[t],e(t)}}var Ge=200;var Ke,Ye,Je,Xe,Qe,et=ft(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tt=ft(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),it="webkitTransition"===tt||"OTransition"===tt?tt+"End":"transitionend";function nt(e){return"string"==typeof e?document.getElementById(e):e}function ot(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(e,null);i=n?n[t]:null}return"auto"===i?null:i}function rt(e,t,i){var n=document.createElement(e);return n.className=t||"",i&&i.appendChild(n),n}function st(e){var t=e.parentNode;t&&t.removeChild(e)}function at(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function lt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function ct(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function ut(e,t){if(void 0!==e.classList)return e.classList.contains(t);var i=gt(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function ht(e,t){if(void 0!==e.classList)for(var i=h(t),n=0,o=i.length;n<o;n++)e.classList.add(i[n]);else if(!ut(e,t)){var r=gt(e);pt(e,(r?r+" ":"")+t)}}function dt(e,t){void 0!==e.classList?e.classList.remove(t):pt(e,u((" "+gt(e)+" ").replace(" "+t+" "," ")))}function pt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function gt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function mt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&function(e,t){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(e){if(1===t)return}t=Math.round(100*t),i?(i.Enabled=100!==t,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}(e,t)}function ft(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function yt(e,t,i){var n=t||new P(0,0);e.style[et]=(Oe.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function vt(e,t){e._leaflet_pos=t,Oe.any3d?yt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function _t(e){return e._leaflet_pos||new P(0,0)}if("onselectstart"in document)Ke=function(){At(window,"selectstart",Nt)},Ye=function(){Lt(window,"selectstart",Nt)};else{var xt=ft(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ke=function(){if(xt){var e=document.documentElement.style;Je=e[xt],e[xt]="none"}},Ye=function(){xt&&(document.documentElement.style[xt]=Je,Je=void 0)}}function wt(){At(window,"dragstart",Nt)}function bt(){Lt(window,"dragstart",Nt)}function kt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Tt(),Xe=e,Qe=e.style.outlineStyle,e.style.outlineStyle="none",At(window,"keydown",Tt))}function Tt(){Xe&&(Xe.style.outlineStyle=Qe,Xe=void 0,Qe=void 0,Lt(window,"keydown",Tt))}function St(e){do{e=e.parentNode}while(!(e.offsetWidth&&e.offsetHeight||e===document.body));return e}function Ct(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Et={__proto__:null,TRANSFORM:et,TRANSITION:tt,TRANSITION_END:it,get:nt,getStyle:ot,create:rt,remove:st,empty:at,toFront:lt,toBack:ct,hasClass:ut,addClass:ht,removeClass:dt,setClass:pt,getClass:gt,setOpacity:mt,testProp:ft,setTransform:yt,setPosition:vt,getPosition:_t,get disableTextSelection(){return Ke},get enableTextSelection(){return Ye},disableImageDrag:wt,enableImageDrag:bt,preventOutline:kt,restoreOutline:Tt,getSizedParentNode:St,getScale:Ct};function At(e,t,i,n){if(t&&"object"==typeof t)for(var o in t)It(e,o,t[o],i);else for(var r=0,s=(t=h(t)).length;r<s;r++)It(e,t[r],i,n);return this}var zt="_leaflet_events";function Lt(e,t,i,n){if(1===arguments.length)Pt(e),delete e[zt];else if(t&&"object"==typeof t)for(var o in t)Ot(e,o,t[o],i);else if(t=h(t),2===arguments.length)Pt(e,(function(e){return-1!==y(t,e)}));else for(var r=0,s=t.length;r<s;r++)Ot(e,t[r],i,n);return this}function Pt(e,t){for(var i in e[zt]){var n=i.split(/\d/)[0];t&&!t(n)||Ot(e,n,null,null,i)}}var Mt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function It(e,t,i,n){var o=t+r(i)+(n?"_"+r(n):"");if(e[zt]&&e[zt][o])return this;var s=function(t){return i.call(n||e,t||window.event)},a=s;!Oe.touchNative&&Oe.pointer&&0===t.indexOf("touch")?s=He(e,t,s):Oe.touch&&"dblclick"===t?s=function(e,t){e.addEventListener("dblclick",t);var i,n=0;function o(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var o=Ft(e);if(!o.some((function(e){return e instanceof HTMLLabelElement&&e.attributes.for}))||o.some((function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement}))){var r=Date.now();r-n<=Ge?2==++i&&t(function(e){var t,i,n={};for(i in e)t=e[i],n[i]=t&&t.bind?t.bind(e):t;return e=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}(e)):i=1,n=r}}}else i=e.detail}return e.addEventListener("click",o),{dblclick:t,simDblclick:o}}(e,s):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Mt[t]||t,s,!!Oe.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||window.event,Vt(e,t)&&a(t)},e.addEventListener(Mt[t],s,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,s),e[zt]=e[zt]||{},e[zt][o]=s}function Ot(e,t,i,n,o){o=o||t+r(i)+(n?"_"+r(n):"");var s=e[zt]&&e[zt][o];if(!s)return this;!Oe.touchNative&&Oe.pointer&&0===t.indexOf("touch")?function(e,t,i){je[t]?e.removeEventListener(je[t],i,!1):console.warn("wrong event specified:",t)}(e,t,s):Oe.touch&&"dblclick"===t?function(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}(e,s):"removeEventListener"in e?e.removeEventListener(Mt[t]||t,s,!1):e.detachEvent("on"+t,s),e[zt][o]=null}function Dt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Rt(e){return It(e,"wheel",Dt),this}function Bt(e){return At(e,"mousedown touchstart dblclick contextmenu",Dt),e._leaflet_disable_click=!0,this}function Nt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function jt(e){return Nt(e),Dt(e),this}function Ft(e){if(e.composedPath)return e.composedPath();for(var t=[],i=e.target;i;)t.push(i),i=i.parentNode;return t}function qt(e,t){if(!t)return new P(e.clientX,e.clientY);var i=Ct(t),n=i.boundingClientRect;return new P((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)}var Ut=Oe.linux&&Oe.chrome?window.devicePixelRatio:Oe.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ht(e){return Oe.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Ut:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Vt(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(e){return!1}return i!==e}var $t={__proto__:null,on:At,off:Lt,stopPropagation:Dt,disableScrollPropagation:Rt,disableClickPropagation:Bt,preventDefault:Nt,stop:jt,getPropagationPath:Ft,getMousePosition:qt,getWheelDelta:Ht,isExternalTarget:Vt,addListener:At,removeListener:Lt},Wt=z.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=_t(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=1e3*this._duration;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));t&&i._round(),vt(this._el,i),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Zt=z.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=d(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(j(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tt&&Oe.any3d&&!Oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),At(this._proxy,it,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,i,n){return i=void 0===i?this._zoom:this._limitZoom(i),e=this._limitCenter(j(e),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=t({animate:n.animate},n.zoom),n.pan=t({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,i,n.zoom):this._tryAnimatedPan(e,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,i,n.pan&&n.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),o=this.getSize().divideBy(2),r=(e instanceof P?e:this.latLngToContainerPoint(e)).subtract(o).multiplyBy(1-1/n),s=this.containerPointToLatLng(o.add(r));return this.setView(s,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var i=I(t.paddingTopLeft||t.padding||[0,0]),n=I(t.paddingBottomRight||t.padding||[0,0]),o=this.getBoundsZoom(e,!1,i.add(n));if((o="number"==typeof t.maxZoom?Math.min(t.maxZoom,o):o)===1/0)return{center:e.getCenter(),zoom:o};var r=n.subtract(i).divideBy(2),s=this.project(e.getSouthWest(),o),a=this.project(e.getNorthEast(),o);return{center:this.unproject(s.add(a).divideBy(2).add(r),o),zoom:o}},fitBounds:function(e,t){if(!(e=B(e)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=I(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Wt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){ht(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,i){if(!1===(i=i||{}).animate||!Oe.any3d)return this.setView(e,t,i);this._stop();var n=this.project(this.getCenter()),o=this.project(e),r=this.getSize(),s=this._zoom;e=j(e),t=void 0===t?s:t;var a=Math.max(r.x,r.y),l=a*this.getZoomScale(s,t),c=o.distanceTo(n)||1,u=1.42,h=u*u;function d(e){var t=(l*l-a*a+(e?-1:1)*h*h*c*c)/(2*(e?l:a)*h*c),i=Math.sqrt(t*t+1)-t;return i<1e-9?-18:Math.log(i)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function g(e){return(Math.exp(e)+Math.exp(-e))/2}var m=d(0);function f(e){return a*(g(m)*(p(t=m+u*e)/g(t))-p(m))/h;var t}var y=Date.now(),v=(d(1)-m)/u,_=i.duration?1e3*i.duration:1e3*v*.8;return this._moveStart(!0,i.noMoveStart),function i(){var r=(Date.now()-y)/_,l=function(e){return 1-Math.pow(1-e,1.5)}(r)*v;r<=1?(this._flyToFrame=T(i,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(f(l)/c)),s),this.getScaleZoom(a/function(e){return a*(g(m)/g(m+u*e))}(l),s),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}.call(this),this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){return e=B(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,B(e));return i.equals(n)||this.panTo(n,t),this._enforcingBounds=!1,this},panInside:function(e,t){var i=I((t=t||{}).paddingTopLeft||t.padding||[0,0]),n=I(t.paddingBottomRight||t.padding||[0,0]),o=this.project(this.getCenter()),r=this.project(e),s=this.getPixelBounds(),a=D([s.min.add(i),s.max.subtract(n)]),l=a.getSize();if(!a.contains(r)){this._enforcingBounds=!0;var c=r.subtract(a.getCenter()),u=a.extend(r).getSize().subtract(l);o.x+=c.x<0?-u.x:u.x,o.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(o),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=t({animate:!1,pan:!0},!0===e?{animate:!0}:e);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=i.divideBy(2).round(),s=o.divideBy(2).round(),a=r.subtract(s);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=t({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),o=n(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,e):navigator.geolocation.getCurrentPosition(i,o,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,i=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new N(e.coords.latitude,e.coords.longitude),i=t.toBounds(2*e.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(t,n.maxZoom?Math.min(o,n.maxZoom):o)}var r={latlng:t,bounds:i,timestamp:e.timestamp};for(var s in e.coords)"number"==typeof e.coords[s]&&(r[s]=e.coords[s]);this.fire("locationfound",r)}},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),st(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)st(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var i=rt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new R(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=B(e),i=I(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),s=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(i),c=D(this.project(a,n),this.project(s,n)).getSize(),u=Oe.any3d?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,p=t?Math.max(h,d):Math.min(h,d);return n=this.getScaleZoom(p,n),u&&(n=Math.round(n/(u/100))*(u/100),n=t?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(o,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new O(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=void 0===t?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=void 0===t?this._zoom:t;var n=i.zoom(e*i.scale(t));return isNaN(n)?1/0:n},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(j(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(I(e),t)},layerPointToLatLng:function(e){var t=I(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(j(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(j(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(j(e),j(t))},containerPointToLayerPoint:function(e){return I(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return I(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(I(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(e)))},mouseEventToContainerPoint:function(e){return qt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=nt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");At(t,"scroll",this._onScroll,this),this._containerId=r(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Oe.any3d,ht(e,"leaflet-container"+(Oe.touch?" leaflet-touch":"")+(Oe.retina?" leaflet-retina":"")+(Oe.ielt9?" leaflet-oldie":"")+(Oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ot(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vt(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ht(e.markerPane,"leaflet-zoom-hide"),ht(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,i){vt(this._mapPane,new P(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var o=this._zoom!==t;this._moveStart(o,i)._move(e,t)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i,n){void 0===t&&(t=this._zoom);var o=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),n?i&&i.pinch&&this.fire("zoom",i):((o||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){vt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[r(this._container)]=this;var t=e?Lt:At;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Oe.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=T((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var i,n=[],o="mouseout"===t||"mouseover"===t,s=e.target||e.srcElement,a=!1;s;){if((i=this._targets[r(s)])&&("click"===t||"preclick"===t)&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(t,!0)){if(o&&!Vt(s,e))break;if(n.push(i),o)break}if(s===this._container)break;s=s.parentNode}return n.length||a||o||!this.listens(t,!0)||(n=[this]),n},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var i=e.type;"mousedown"===i&&kt(t),this._fireDOMEvent(e,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,i,n){if("click"===e.type){var o=t({},e);o.type="preclick",this._fireDOMEvent(o,o.type,n)}var r=this._findEventTargets(e,i);if(n){for(var s=[],a=0;a<n.length;a++)n[a].listens(i,!0)&&s.push(n[a]);r=s.concat(r)}if(r.length){"contextmenu"===i&&Nt(e);var l=r[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(a=0;a<r.length;a++)if(r[a].fire(i,c,!0),c.originalEvent._stopped||!1===r[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,i))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return _t(this._mapPane)||new P(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(n)},_latLngBoundsToNewLayerBounds:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return D([this.project(e.getSouthWest(),t)._subtract(n),this.project(e.getNorthWest(),t)._subtract(n),this.project(e.getSouthEast(),t)._subtract(n),this.project(e.getNorthEast(),t)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var n=this.project(e,t),o=this.getSize().divideBy(2),r=new O(n.subtract(o),n.add(o)),s=this._getBoundsOffset(r,i,t);return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?e:this.unproject(n.add(s),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),n=new O(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=D(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),o=n.min.subtract(e.min),r=n.max.subtract(e.max);return new P(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=Oe.any3d?this.options.zoomSnap:1;return n&&(e=Math.round(e/n)*n),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(i)||(this.panBy(i,t),0))},_createAnimProxy:function(){var e=this._proxy=rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",(function(e){var t=et,i=this._proxy.style[t];yt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),i===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();yt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),o=this._getCenterOffset(e)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o)||(T((function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(e,t,!0)}),this),0))},_animateZoom:function(e,t,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,ht(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Gt=E.extend({options:{position:"topright"},initialize:function(e){d(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];return ht(t,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(t,n.firstChild):n.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(st(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Kt=function(e){return new Gt(e)};Zt.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",i=this._controlContainer=rt("div",t+"control-container",this._container);function n(n,o){var r=t+n+" "+t+o;e[n+o]=rt("div",r,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)st(this._controlCorners[e]);st(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yt=Gt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,n){return i<n?-1:n<i?1:0}},initialize:function(e,t,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Gt.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(r(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){ht(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(ht(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=rt("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Bt(t),Rt(t);var n=this._section=rt("section",e+"-list");i&&(this._map.on("click",this.collapse,this),At(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var o=this._layersLink=rt("a",e+"-toggle",t);o.href="#",o.title="Layers",o.setAttribute("role","button"),At(o,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Nt(e),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=rt("div",e+"-base",n),this._separator=rt("div",e+"-separator",n),this._overlaysList=rt("div",e+"-overlays",n),t.appendChild(n)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&r(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:i}),this.options.sortLayers&&this._layers.sort(n((function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)}),this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;at(this._baseLayersList),at(this._overlaysList),this._layerControlInputs=[];var e,t,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),t=t||n.overlay,e=e||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(e=e&&o>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(r(e.target)),i=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(e){var t,i=document.createElement("label"),n=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=n):t=this._createRadioElement("leaflet-base-layers_"+r(this),n),this._layerControlInputs.push(t),t.layerId=r(e.layer),At(t,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+e.name;var s=document.createElement("span");return i.appendChild(s),s.appendChild(t),s.appendChild(o),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var e,t,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var r=i.length-1;r>=0;r--)e=i[r],t=this._getLayer(e.layerId).layer,e.checked?n.push(t):e.checked||o.push(t);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])||this._map.addLayer(n[r]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;o>=0;o--)e=i[o],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&n<t.options.minZoom||void 0!==t.options.maxZoom&&n>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,At(e,"click",Nt),this.expand();var t=this;setTimeout((function(){Lt(e,"click",Nt),t._preventClick=!1}))}}),Jt=Gt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=rt("div",t+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,n,o){var r=rt("a",i,n);return r.innerHTML=e,r.href="#",r.title=t,r.setAttribute("role","button"),r.setAttribute("aria-label",t),Bt(r),At(r,"click",jt),At(r,"click",o,this),At(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";dt(this._zoomInButton,t),dt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(ht(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(ht(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});Zt.mergeOptions({zoomControl:!0}),Zt.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Jt,this.addControl(this.zoomControl))}));var Xt=Gt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",i=rt("div",t),n=this.options;return this._addScales(n,t+"-line",i),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=rt("div",t,i)),e.imperial&&(this._iScale=rt("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t,i,n,o=3.2808399*e;o>5280?(t=o/5280,i=this._getRoundNum(t),this._updateScale(this._iScale,i+" mi",i/t)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return t*(i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),Qt=Gt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Oe.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(e){d(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=rt("div","leaflet-control-attribution"),Bt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",(function(){this.removeAttribution(e.layer.getAttribution())}),this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});Zt.mergeOptions({attributionControl:!0}),Zt.addInitHook((function(){this.options.attributionControl&&(new Qt).addTo(this)}));Gt.Layers=Yt,Gt.Zoom=Jt,Gt.Scale=Xt,Gt.Attribution=Qt,Kt.layers=function(e,t,i){return new Yt(e,t,i)},Kt.zoom=function(e){return new Jt(e)},Kt.scale=function(e){return new Xt(e)},Kt.attribution=function(e){return new Qt(e)};var ei=E.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ei.addTo=function(e,t){return e.addHandler(t,this),this};var ti={Events:A},ii=Oe.touch?"touchstart mousedown":"mousedown",ni=z.extend({options:{clickTolerance:3},initialize:function(e,t,i,n){d(this,n),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(At(this._dragStartTarget,ii,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ni._dragging===this&&this.finishDrag(!0),Lt(this._dragStartTarget,ii,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!ut(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)ni._dragging===this&&this.finishDrag();else if(!(ni._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(ni._dragging=this,this._preventOutline&&kt(this._element),wt(),Ke(),this._moving))){this.fire("down");var t=e.touches?e.touches[0]:e,i=St(this._element);this._startPoint=new P(t.clientX,t.clientY),this._startPos=_t(this._element),this._parentScale=Ct(i);var n="mousedown"===e.type;At(document,n?"mousemove":"touchmove",this._onMove,this),At(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,i=new P(t.clientX,t.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Nt(e),this._moved||(this.fire("dragstart"),this._moved=!0,ht(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ht(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),vt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){dt(document.body,"leaflet-dragging"),this._lastTarget&&(dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Lt(document,"mousemove touchmove",this._onMove,this),Lt(document,"mouseup touchend touchcancel",this._onUp,this),bt(),Ye();var t=this._moved&&this._moving;this._moving=!1,ni._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function oi(e,t,i){var n,o,r,s,a,l,c,u,h,d=[1,4,2,8];for(o=0,c=e.length;o<c;o++)e[o]._code=gi(e[o],t);for(s=0;s<4;s++){for(u=d[s],n=[],o=0,r=(c=e.length)-1;o<c;r=o++)a=e[o],l=e[r],a._code&u?l._code&u||((h=pi(l,a,u,t,i))._code=gi(h,t),n.push(h)):(l._code&u&&((h=pi(l,a,u,t,i))._code=gi(h,t),n.push(h)),n.push(a));e=n}return e}function ri(e,t){var i,n,o,r,s,a,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");yi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=j([0,0]),d=B(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(h=si(e));var p=e.length,g=[];for(i=0;i<p;i++){var m=j(e[i]);g.push(t.project(j([m.lat-h.lat,m.lng-h.lng])))}for(a=l=c=0,i=0,n=p-1;i<p;n=i++)o=g[i],r=g[n],s=o.y*r.x-r.y*o.x,l+=(o.x+r.x)*s,c+=(o.y+r.y)*s,a+=3*s;u=0===a?g[0]:[l/a,c/a];var f=t.unproject(I(u));return j([f.lat+h.lat,f.lng+h.lng])}function si(e){for(var t=0,i=0,n=0,o=0;o<e.length;o++){var r=j(e[o]);t+=r.lat,i+=r.lng,n++}return j([t/n,i/n])}var ai,li={__proto__:null,clipPolygon:oi,polygonCenter:ri,centroid:si};function ci(e,t){if(!t||!e.length)return e.slice();var i=t*t;return function(e,t){var i=e.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,hi(e,n,t,0,i-1);var o,r=[];for(o=0;o<i;o++)n[o]&&r.push(e[o]);return r}(e=function(e,t){for(var i=[e[0]],n=1,o=0,r=e.length;n<r;n++)mi(e[n],e[o])>t&&(i.push(e[n]),o=n);return o<r-1&&i.push(e[r-1]),i}(e,i),i)}function ui(e,t,i){return Math.sqrt(fi(e,t,i,!0))}function hi(e,t,i,n,o){var r,s,a,l=0;for(s=n+1;s<=o-1;s++)(a=fi(e[s],e[n],e[o],!0))>l&&(r=s,l=a);l>i&&(t[r]=1,hi(e,t,i,n,r),hi(e,t,i,r,o))}function di(e,t,i,n,o){var r,s,a,l=n?ai:gi(e,i),c=gi(t,i);for(ai=c;;){if(!(l|c))return[e,t];if(l&c)return!1;a=gi(s=pi(e,t,r=l||c,i,o),i),r===l?(e=s,l=a):(t=s,c=a)}}function pi(e,t,i,n,o){var r,s,a=t.x-e.x,l=t.y-e.y,c=n.min,u=n.max;return 8&i?(r=e.x+a*(u.y-e.y)/l,s=u.y):4&i?(r=e.x+a*(c.y-e.y)/l,s=c.y):2&i?(r=u.x,s=e.y+l*(u.x-e.x)/a):1&i&&(r=c.x,s=e.y+l*(c.x-e.x)/a),new P(r,s,o)}function gi(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function mi(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function fi(e,t,i,n){var o,r=t.x,s=t.y,a=i.x-r,l=i.y-s,c=a*a+l*l;return c>0&&((o=((e.x-r)*a+(e.y-s)*l)/c)>1?(r=i.x,s=i.y):o>0&&(r+=a*o,s+=l*o)),a=e.x-r,l=e.y-s,n?a*a+l*l:new P(r,s)}function yi(e){return!f(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function vi(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yi(e)}function _i(e,t){var i,n,o,r,s,a,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");yi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=j([0,0]),h=B(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=si(e));var d=e.length,p=[];for(i=0;i<d;i++){var g=j(e[i]);p.push(t.project(j([g.lat-u.lat,g.lng-u.lng])))}for(i=0,n=0;i<d-1;i++)n+=p[i].distanceTo(p[i+1])/2;if(0===n)c=p[0];else for(i=0,r=0;i<d-1;i++)if(s=p[i],a=p[i+1],(r+=o=s.distanceTo(a))>n){l=(r-n)/o,c=[a.x-l*(a.x-s.x),a.y-l*(a.y-s.y)];break}var m=t.unproject(I(c));return j([m.lat+u.lat,m.lng+u.lng])}var xi={__proto__:null,simplify:ci,pointToSegmentDistance:ui,closestPointOnSegment:function(e,t,i){return fi(e,t,i)},clipSegment:di,_getEdgeIntersection:pi,_getBitCode:gi,_sqClosestPointOnSegment:fi,isFlat:yi,_flat:vi,polylineCenter:_i},wi={project:function(e){return new P(e.lng,e.lat)},unproject:function(e){return new N(e.y,e.x)},bounds:new O([-180,-90],[180,90])},bi={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),s=r*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-s)/(1+s),r/2);return n=-i*Math.log(Math.max(a,1e-10)),new P(e.lng*t*i,n)},unproject:function(e){for(var t,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),s=Math.exp(-e.y/n),a=Math.PI/2-2*Math.atan(s),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=r*Math.sin(a),t=Math.pow((1-t)/(1+t),r/2),a+=c=Math.PI/2-2*Math.atan(s*t)-a;return new N(a*i,e.x*i/n)}},ki={__proto__:null,LonLat:wi,Mercator:bi,SphericalMercator:V},Ti=t({},U,{code:"EPSG:3395",projection:bi,transformation:function(){var e=.5/(Math.PI*bi.R);return W(e,.5,-e,.5)}()}),Si=t({},U,{code:"EPSG:4326",projection:wi,transformation:W(1/180,1,-1/180,.5)}),Ci=t({},q,{projection:wi,transformation:W(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,n=t.lat-e.lat;return Math.sqrt(i*i+n*n)},infinite:!0});q.Earth=U,q.EPSG3395=Ti,q.EPSG3857=Z,q.EPSG900913=G,q.EPSG4326=Si,q.Simple=Ci;var Ei=z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[r(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[r(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var i=this.getEvents();t.on(i,this),this.once("remove",(function(){t.off(i,this)}),this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});Zt.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=r(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=r(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return r(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){for(var t=0,i=(e=e?f(e)?e:[e]:[]).length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[r(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=r(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;e=void 0===o.minZoom?e:Math.min(e,o.minZoom),t=void 0===o.maxZoom?t:Math.max(t,o.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ai=Ei.extend({initialize:function(e,t){var i,n;if(d(this,t),this._layers={},e)for(i=0,n=e.length;i<n;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"==typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,i,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)(i=this._layers[t])[e]&&i[e].apply(i,n);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return r(e)}}),zi=Ai.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Ai.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Ai.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new R;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),Li=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){d(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(n,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n},_setIconStyles:function(e,t){var i=this.options,n=i[t+"Size"];"number"==typeof n&&(n=[n,n]);var o=I(n),r=I("shadow"===t&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),r&&(e.style.marginLeft=-r.x+"px",e.style.marginTop=-r.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Oe.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});var Pi=Li.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!=typeof Pi.imagePath&&(Pi.imagePath=this._detectIconPath()),(this.options.imagePath||Pi.imagePath)+Li.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,i){var n=t.exec(e);return n&&n[i]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=rt("div","leaflet-default-icon-path",document.body),t=ot(e,"background-image")||ot(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Mi=ei.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new ni(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ht(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=_t(t._icon),s=i.getPixelBounds(),a=i.getPixelOrigin(),l=D(s.min._subtract(a).add(o),s.max._subtract(a).subtract(o));if(!l.contains(r)){var c=I((Math.max(l.max.x,r.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),vt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=T(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,n=_t(t._icon),o=t._map.layerPointToLatLng(n);i&&vt(i,n),t._latlng=o,e.latlng=o,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Ii=Ei.extend({options:{icon:new Pi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){d(this,t),this._latlng=j(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=j(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(i.title=e.title),"IMG"===i.tagName&&(i.alt=e.alt||"")),ht(i,t),e.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(i,"focus",this._panOnFocus,this);var o=e.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(ht(o,t),o.alt=""),this._shadow=o,e.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Lt(this._icon,"focus",this._panOnFocus,this),st(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&st(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&vt(this._icon,e),this._shadow&&vt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(ht(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mi)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mi(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&mt(this._icon,e),this._shadow&&mt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,i=t.iconSize?I(t.iconSize):I(0,0),n=t.iconAnchor?I(t.iconAnchor):I(0,0);e.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Oi=Ei.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return d(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Di=Oi.extend({options:{fill:!0,radius:10},initialize:function(e,t){d(this,t),this._latlng=j(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=j(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Oi.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),n=[e+i,t+i];this._pxBounds=new O(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ri=Di.extend({initialize:function(e,i,n){if("number"==typeof i&&(i=t({},n,{radius:i})),d(this,i),this._latlng=j(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Oi.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===U.distance){var o=Math.PI/180,r=this._mRadius/U.R/o,s=i.project([t+r,e]),a=i.project([t-r,e]),l=s.add(a).divideBy(2),c=i.unproject(l).lat,u=Math.acos((Math.cos(r*o)-Math.sin(t*o)*Math.sin(c*o))/(Math.cos(t*o)*Math.cos(c*o)))/o;(isNaN(u)||0===u)&&(u=r/Math.cos(Math.PI/180*t)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([c,e-u]).x,this._radiusY=l.y-s.y}else{var h=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(h).x}this._updateBounds()}});var Bi=Oi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){d(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,i,n=1/0,o=null,r=fi,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],c=1,u=l.length;c<u;c++){var h=r(e,t=l[c-1],i=l[c],!0);h<n&&(n=h,o=r(e,t,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _i(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=j(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new R,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return yi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=yi(e),n=0,o=e.length;n<o;n++)i?(t[n]=j(e[n]),this._bounds.extend(t[n])):t[n]=this._convertLatLngs(e[n]);return t},_project:function(){var e=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new P(e,e);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,i){var n,o,r=e[0]instanceof N,s=e.length;if(r){for(o=[],n=0;n<s;n++)o[n]=this._map.latLngToLayerPoint(e[n]),i.extend(o[n]);t.push(o)}else for(n=0;n<s;n++)this._projectLatlngs(e[n],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,i,n,o,r,s,a,l=this._parts;for(t=0,n=0,o=this._rings.length;t<o;t++)for(i=0,r=(a=this._rings[t]).length;i<r-1;i++)(s=di(a[i],a[i+1],e,i,!0))&&(l[n]=l[n]||[],l[n].push(s[0]),s[1]===a[i+1]&&i!==r-2||(l[n].push(s[1]),n++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,n=e.length;i<n;i++)e[i]=ci(e[i],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,n,o,r,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,r=this._parts.length;i<r;i++)for(n=0,o=(s=(a=this._parts[i]).length)-1;n<s;o=n++)if((t||0!==n)&&ui(e,a[o],a[n])<=l)return!0;return!1}});Bi._flat=vi;var Ni=Bi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ri(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Bi.prototype._convertLatLngs.call(this,e),i=t.length;return i>=2&&t[0]instanceof N&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(e){Bi.prototype._setLatLngs.call(this,e),yi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new P(t,t);if(e=new O(e.min.subtract(i),e.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,r=this._rings.length;o<r;o++)(n=oi(this._rings[o],e,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,i,n,o,r,s,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(o=0,a=this._parts.length;o<a;o++)for(r=0,s=(l=(t=this._parts[o]).length)-1;r<l;s=r++)i=t[r],n=t[s],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||Bi.prototype._containsPoint.call(this,e,!0)}});var ji=zi.extend({initialize:function(e,t){d(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,i,n,o=f(e)?e:e.features;if(o){for(t=0,i=o.length;t<i;t++)((n=o[t]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(e))return this;var s=Fi(e,r);return s?(s.feature=Zi(e),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(e,s),this.addLayer(s)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=t({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){e.setStyle&&("function"==typeof t&&(t=t(e.feature)),e.setStyle(t))}});function Fi(e,t){var i,n,o,r,s="Feature"===e.type?e.geometry:e,a=s?s.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||Ui;if(!a&&!s)return null;switch(s.type){case"Point":return qi(c,e,i=u(a),t);case"MultiPoint":for(o=0,r=a.length;o<r;o++)i=u(a[o]),l.push(qi(c,e,i,t));return new zi(l);case"LineString":case"MultiLineString":return n=Hi(a,"LineString"===s.type?0:1,u),new Bi(n,t);case"Polygon":case"MultiPolygon":return n=Hi(a,"Polygon"===s.type?1:2,u),new Ni(n,t);case"GeometryCollection":for(o=0,r=s.geometries.length;o<r;o++){var h=Fi({geometry:s.geometries[o],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new zi(l);case"FeatureCollection":for(o=0,r=s.features.length;o<r;o++){var d=Fi(s.features[o],t);d&&l.push(d)}return new zi(l);default:throw new Error("Invalid GeoJSON object.")}}function qi(e,t,i,n){return e?e(t,i):new Ii(i,n&&n.markersInheritOptions&&n)}function Ui(e){return new N(e[1],e[0],e[2])}function Hi(e,t,i){for(var n,o=[],r=0,s=e.length;r<s;r++)n=t?Hi(e[r],t-1,i):(i||Ui)(e[r]),o.push(n);return o}function Vi(e,t){return void 0!==(e=j(e)).alt?[c(e.lng,t),c(e.lat,t),c(e.alt,t)]:[c(e.lng,t),c(e.lat,t)]}function $i(e,t,i,n){for(var o=[],r=0,s=e.length;r<s;r++)o.push(t?$i(e[r],yi(e[r])?0:t-1,i,n):Vi(e[r],n));return!t&&i&&o.length>0&&o.push(o[0].slice()),o}function Wi(e,i){return e.feature?t({},e.feature,{geometry:i}):Zi(i)}function Zi(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var Gi={toGeoJSON:function(e){return Wi(this,{type:"Point",coordinates:Vi(this.getLatLng(),e)})}};function Ki(e,t){return new ji(e,t)}Ii.include(Gi),Ri.include(Gi),Di.include(Gi),Bi.include({toGeoJSON:function(e){var t=!yi(this._latlngs);return Wi(this,{type:(t?"Multi":"")+"LineString",coordinates:$i(this._latlngs,t?1:0,!1,e)})}}),Ni.include({toGeoJSON:function(e){var t=!yi(this._latlngs),i=t&&!yi(this._latlngs[0]),n=$i(this._latlngs,i?2:t?1:0,!0,e);return t||(n=[n]),Wi(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Ai.include({toMultiPoint:function(e){var t=[];return this.eachLayer((function(i){t.push(i.toGeoJSON(e).geometry.coordinates)})),Wi(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var i="GeometryCollection"===t,n=[];return this.eachLayer((function(t){if(t.toGeoJSON){var o=t.toGeoJSON(e);if(i)n.push(o.geometry);else{var r=Zi(o);"FeatureCollection"===r.type?n.push.apply(n,r.features):n.push(r)}}})),i?Wi(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Yi=Ki,Ji=Ei.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=B(t),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ht(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){st(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&lt(this._image),this},bringToBack:function(){return this._map&&ct(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:rt("img");ht(t,"leaflet-image-layer"),this._zoomAnimated&&ht(t,"leaflet-zoom-animated"),this.options.className&&ht(t,this.options.className),t.onselectstart=l,t.onmousemove=l,t.onload=n(this.fire,this,"load"),t.onerror=n(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;yt(this._image,i,t)},_reset:function(){var e=this._image,t=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();vt(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){mt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Xi=Ji.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:rt("video");if(ht(t,"leaflet-image-layer"),this._zoomAnimated&&ht(t,"leaflet-zoom-animated"),this.options.className&&ht(t,this.options.className),t.onselectstart=l,t.onmousemove=l,t.onloadeddata=n(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),o=[],r=0;r<i.length;r++)o.push(i[r].src);this._url=i.length>0?o:[t.src]}else{f(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var a=rt("source");a.src=this._url[s],t.appendChild(a)}}}});var Qi=Ji.extend({_initImage:function(){var e=this._image=this._url;ht(e,"leaflet-image-layer"),this._zoomAnimated&&ht(e,"leaflet-zoom-animated"),this.options.className&&ht(e,this.options.className),e.onselectstart=l,e.onmousemove=l}});var en=Ei.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof N||f(e))?(this._latlng=j(e),d(this,t)):(d(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&mt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&mt(this._container,1),this.bringToFront(),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(mt(this._container,0),this._removeTimeout=setTimeout(n(st,void 0,this._container),200)):st(this._container),this.options.interactive&&(dt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=j(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lt(this._container),this},bringToBack:function(){return this._map&&ct(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof zi){t=null;var i=this._source._layers;for(var n in i)if(i[n]._map){t=i[n];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=I(this.options.offset),i=this._getAnchor();this._zoomAnimated?vt(this._container,e.add(i)):t=t.add(e).add(i);var n=this._containerBottom=-t.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}});Zt.include({_initOverlay:function(e,t,i,n){var o=t;return o instanceof e||(o=new e(n).setContent(t)),i&&o.setLatLng(i),o}}),Ei.include({_initOverlay:function(e,t,i,n){var o=i;return o instanceof e?(d(o,n),o._source=this):(o=t&&!n?t:new e(n,this)).setContent(i),o}});var tn=en.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,en.prototype.openOn.call(this,e)},onAdd:function(e){en.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Oi||this._source.on("preclick",Dt))},onRemove:function(e){en.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Oi||this._source.off("preclick",Dt))},getEvents:function(){var e=en.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=rt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=rt("div",e+"-content-wrapper",t);if(this._contentNode=rt("div",e+"-content",i),Bt(t),Rt(this._contentNode),At(t,"contextmenu",Dt),this._tipContainer=rt("div",e+"-tip-container",t),this._tip=rt("div",e+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=rt("a",e+"-close-button",t);n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',At(n,"click",(function(e){Nt(e),this.close()}),this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&n>o?(t.height=o+"px",ht(e,r)):dt(e,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();vt(this._container,t.add(i))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ot(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,n=this._containerWidth,o=new P(this._containerLeft,-i-this._containerBottom);o._add(_t(this._container));var r=e.layerPointToContainerPoint(o),s=I(this.options.autoPanPadding),a=I(this.options.autoPanPaddingTopLeft||s),l=I(this.options.autoPanPaddingBottomRight||s),c=e.getSize(),u=0,h=0;r.x+n+l.x>c.x&&(u=r.x+n-c.x+l.x),r.x-u-a.x<0&&(u=r.x-a.x),r.y+i+l.y>c.y&&(h=r.y+i-c.y+l.y),r.y-h-a.y<0&&(h=r.y-a.y),(u||h)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,h]))}},_getAnchor:function(){return I(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Zt.mergeOptions({closePopupOnClick:!0}),Zt.include({openPopup:function(e,t,i){return this._initOverlay(tn,e,t,i).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Ei.include({bindPopup:function(e,t){return this._popup=this._initOverlay(tn,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof zi||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){jt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof Oi?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var nn=en.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){en.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){en.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=en.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=rt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+r(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,i,n=this._map,o=this._container,r=n.latLngToContainerPoint(n.getCenter()),s=n.layerPointToContainerPoint(e),a=this.options.direction,l=o.offsetWidth,c=o.offsetHeight,u=I(this.options.offset),h=this._getAnchor();"top"===a?(t=l/2,i=c):"bottom"===a?(t=l/2,i=0):"center"===a?(t=l/2,i=c/2):"right"===a?(t=0,i=c/2):"left"===a?(t=l,i=c/2):s.x<r.x?(a="right",t=0,i=c/2):(a="left",t=l+2*(u.x+h.x),i=c/2),e=e.subtract(I(t,i,!0)).add(u).add(h),dt(o,"leaflet-tooltip-right"),dt(o,"leaflet-tooltip-left"),dt(o,"leaflet-tooltip-top"),dt(o,"leaflet-tooltip-bottom"),ht(o,"leaflet-tooltip-"+a),vt(o,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&mt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return I(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Zt.include({openTooltip:function(e,t,i){return this._initOverlay(nn,e,t,i).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Ei.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(nn,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[t](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof zi||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"==typeof e.getElement&&e.getElement();t&&(At(t,"focus",(function(){this._tooltip._source=e,this.openTooltip()}),this),At(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"==typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",(function(){t._openOnceFlag=!1,t._openTooltip(e)}))}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,i,n=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),i=this._map.containerPointToLayerPoint(t),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var on=Li.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),i=this.options;if(i.html instanceof Element?(at(t),t.appendChild(i.html)):t.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=I(i.bgPos);t.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});Li.Default=Pi;var rn=Ei.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){d(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),st(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ct(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof P?e:new P(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,i=this.getPane().children,n=-e(-1/0,1/0),o=0,r=i.length;o<r;o++)t=i[o].style.zIndex,i[o]!==this._container&&t&&(n=e(n,+t));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Oe.ielt9){mt(this._container,this.options.opacity);var e=+new Date,t=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var r=Math.min(1,(e-o.loaded)/200);mt(o.el,r),r<1?t=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(S(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(st(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[e],o=this._map;return n||((n=this._levels[e]={}).el=rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=t,n.origin=o.project(o.unproject(o.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,o.getCenter(),o.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var e,t,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)st(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,n){var o=Math.floor(e/2),r=Math.floor(t/2),s=i-1,a=new P(+o,+r);a.z=+s;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),s>n&&this._retainParent(o,r,s,n))},_retainChildren:function(e,t,i,n){for(var o=2*e;o<2*e+2;o++)for(var r=2*t;r<2*t+2;r++){var s=new P(o,r);s.z=i+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,n){var o=Math.round(t);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var r=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),o=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();Oe.any3d?yt(e.el,o,n):vt(e.el,o)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),n=t.getZoomScale(i,this._tileZoom),o=t.project(e,this._tileZoom).floor(),r=t.getSize().divideBy(2*n);return new O(o.subtract(r),o.add(r))},_update:function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(e),o=this._pxBoundsToTileRange(n),r=o.getCenter(),s=[],a=this.options.keepBuffer,l=new O(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new P(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(e,i);else{for(var h=o.min.y;h<=o.max.y;h++)for(var d=o.min.x;d<=o.max.x;d++){var p=new P(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var g=this._tiles[this._tileCoordsToKey(p)];g?g.current=!0:s.push(p)}}if(s.sort((function(e,t){return e.distanceTo(r)-t.distanceTo(r)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(n)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),o=n.add(i);return[t.unproject(n,e.z),t.unproject(o,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new R(t[0],t[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new P(+t[0],+t[1]);return i.z=+t[2],i},_removeTile:function(e){var t=this._tiles[e];t&&(st(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){ht(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=l,e.onmousemove=l,Oe.ielt9&&this.options.opacity<1&&mt(e,this.options.opacity)},_addTile:function(e,t){var i=this._getTilePos(e),o=this._tileCoordsToKey(e),r=this.createTile(this._wrapCoords(e),n(this._tileReady,this,e));this._initTile(r),this.createTile.length<2&&T(n(this._tileReady,this,e,null,r)),vt(r,i),this._tiles[o]={el:r,coords:e,current:!0},t.appendChild(r),this.fire("tileloadstart",{tile:r,coords:e})},_tileReady:function(e,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:e});var o=this._tileCoordsToKey(e);(i=this._tiles[o])&&(i.loaded=+new Date,this._map._fadeAnimated?(mt(i.el,0),S(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(ht(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Oe.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new P(this._wrapX?a(e.x,this._wrapX):e.x,this._wrapY?a(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new O(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});var sn=rn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=d(this,t)).detectRetina&&Oe.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var i=document.createElement("img");return At(i,"load",n(this._tileOnLoad,this,t,i)),At(i,"error",n(this._tileOnError,this,t,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(e),i},getTileUrl:function(e){var i={r:Oe.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(i.y=n),i["-y"]=n}return m(this._url,t(i,this.options))},_tileOnLoad:function(e,t){Oe.ielt9?setTimeout(n(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var n=this.options.errorTileUrl;n&&t.getAttribute("src")!==n&&(t.src=n),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=l,t.onerror=l,!t.complete)){t.src=v;var i=this._tiles[e].coords;st(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:i})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",v),rn.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(this._map&&(!i||i.getAttribute("src")!==v))return rn.prototype._tileReady.call(this,e,t,i)}});function an(e,t){return new sn(e,t)}var ln=sn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,i){this._url=e;var n=t({},this.defaultWmsParams);for(var o in i)o in this.options||(n[o]=i[o]);var r=(i=d(this,i)).detectRetina&&Oe.retina?2:1,s=this.getTileSize();n.width=s.x*r,n.height=s.y*r,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,sn.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,n=D(i.project(t[0]),i.project(t[1])),o=n.min,r=n.max,s=(this._wmsVersion>=1.3&&this._crs===Si?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),a=sn.prototype.getTileUrl.call(this,e);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(e,i){return t(this.wmsParams,e),i||this.redraw(),this}});sn.WMS=ln,an.wms=function(e,t){return new ln(e,t)};var cn=Ei.extend({options:{padding:.1},initialize:function(e){d(this,e),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ht(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),r=n.multiplyBy(-i).add(o).subtract(this._map._getNewPixelOrigin(e,t));Oe.any3d?yt(this._container,r,i):vt(this._container,r)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new O(i,i.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),un=cn.extend({options:{tolerance:0},getEvents:function(){var e=cn.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");At(e,"mousemove",this._onMouseMove,this),At(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),At(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,st(this._container),Lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){cn.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),n=Oe.retina?2:1;vt(t,e.min),t.width=n*i.x,t.height=n*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",Oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){cn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[r(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,n=t.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete e._order,delete this._layers[r(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){var t,i,n=e.options.dashArray.split(/[, ]+/),o=[];for(i=0;i<n.length;i++){if(t=Number(n[i]),isNaN(t))return;o.push(t)}e.options._dashArray=o}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var i=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)e=n.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var i,n,o,r,s=e._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),i=0;i<a;i++){for(n=0,o=s[i].length;n<o;n++)r=s[i][n],l[n?"lineTo":"moveTo"](r.x,r.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),o=(Math.max(Math.round(e._radiusY),1)||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(t.x,t.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,e)}},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t,i,n=this._map.mouseEventToLayerPoint(e),o=this._drawFirst;o;o=o.next)(t=o.layer).options.interactive&&t._containsPoint(n)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(i=t);this._fireEvent(!!i&&[i],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(dt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var i,o,r=this._drawFirst;r;r=r.next)(i=r.layer).options.interactive&&i._containsPoint(t)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(e),o&&(ht(this._container,"leaflet-interactive"),this._fireEvent([o],e,"mouseover"),this._hoveredLayer=o)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(n((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var i=t.next,n=t.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var i=t.next,n=t.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function hn(e){return Oe.canvas?new un(e):null}var dn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),pn={_initContainer:function(){this._container=rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cn.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=dn("shape");ht(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=dn("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[r(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;st(t),e.removeInteractiveTarget(t),delete this._layers[r(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,n=e.options,o=e._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(t||(t=e._stroke=dn("stroke")),o.appendChild(t),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=f(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=n.lineCap.replace("butt","flat"),t.joinstyle=n.lineJoin):t&&(o.removeChild(t),e._stroke=null),n.fill?(i||(i=e._fill=dn("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){lt(e._container)},_bringToBack:function(e){ct(e._container)}},gn=Oe.vml?dn:K,mn=cn.extend({_initContainer:function(){this._container=gn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container),Lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){cn.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),vt(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=gn("path");e.options.className&&ht(t,e.options.className),e.options.interactive&&ht(t,"leaflet-interactive"),this._updateStyle(e),this._layers[r(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){st(e._path),e.removeInteractiveTarget(e._path),delete this._layers[r(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,i=e.options;t&&(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Y(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n="a"+i+","+(Math.max(Math.round(e._radiusY),1)||i)+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){lt(e._path)},_bringToBack:function(e){ct(e._path)}});function fn(e){return Oe.svg||Oe.vml?new mn(e):null}Oe.vml&&mn.include(pn),Zt.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&hn(e)||fn(e)}});var yn=Ni.extend({initialize:function(e,t){Ni.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=B(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});mn.create=gn,mn.pointsToPath=Y,ji.geometryToLayer=Fi,ji.coordsToLatLng=Ui,ji.coordsToLatLngs=Hi,ji.latLngToCoords=Vi,ji.latLngsToCoords=$i,ji.getFeature=Wi,ji.asFeature=Zi,Zt.mergeOptions({boxZoom:!0});var vn=ei.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),Ke(),wt(),this._startPoint=this._map.mouseEventToContainerPoint(e),At(document,{contextmenu:jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=rt("div","leaflet-zoom-box",this._container),ht(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new O(this._point,this._startPoint),i=t.getSize();vt(this._box,t.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(st(this._box),dt(this._container,"leaflet-crosshair")),Ye(),bt(),Lt(document,{contextmenu:jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var t=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Zt.addInitHook("addHandler","boxZoom",vn),Zt.mergeOptions({doubleClickZoom:!0});var _n=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,o=e.originalEvent.shiftKey?i-n:i+n;"center"===t.options.doubleClickZoom?t.setZoom(o):t.setZoomAround(e.containerPoint,o)}});Zt.addInitHook("addHandler","doubleClickZoom",_n),Zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xn=ei.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new ni(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}ht(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){dt(this._map._container,"leaflet-grab"),dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-t+i)%e+t-i,r=(n+t+i)%e-t-i,s=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,i=t.options,n=!i.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),n)t.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,s=i.easeLinearity,a=o.multiplyBy(s/r),l=a.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),h=c/(i.inertiaDeceleration*s),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=t._limitOffset(d,t.options.maxBounds),T((function(){t.panBy(d,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})}))):t.fire("moveend")}}});Zt.addInitHook("addHandler","dragging",xn),Zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wn=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),At(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,n=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,i,n=this._panKeys={},o=this.keyCodes;for(t=0,i=o.left.length;t<i;t++)n[o.left[t]]=[-1*e,0];for(t=0,i=o.right.length;t<i;t++)n[o.right[t]]=[e,0];for(t=0,i=o.down.length;t<i;t++)n[o.down[t]]=[0,e];for(t=0,i=o.up.length;t<i;t++)n[o.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,i,n=this._zoomKeys={},o=this.keyCodes;for(t=0,i=o.zoomIn.length;t<i;t++)n[o.zoomIn[t]]=e;for(t=0,i=o.zoomOut.length;t<i;t++)n[o.zoomOut[t]]=-e},_addHooks:function(){At(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,i=e.keyCode,n=this._map;if(i in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(t=this._panKeys[i],e.shiftKey&&(t=I(t).multiplyBy(3)),n.options.maxBounds&&(t=n._limitOffset(I(t),n.options.maxBounds)),n.options.worldCopyJump){var o=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(t)));n.panTo(o)}else n.panBy(t)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}jt(e)}}});Zt.addInitHook("addHandler","keyboard",wn),Zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bn=ei.extend({addHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Ht(e),i=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),o),jt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=i?Math.ceil(o/i)*i:o,s=e._limitZoom(t+(this._delta>0?r:-r))-t;this._delta=0,this._startTime=null,s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});Zt.addInitHook("addHandler","scrollWheelZoom",bn);Zt.mergeOptions({tapHold:Oe.touchNative&&Oe.safari&&Oe.mobile,tapTolerance:15});var kn=ei.extend({addHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new P(t.clientX,t.clientY),this._holdTimeout=setTimeout(n((function(){this._cancel(),this._isTapValid()&&(At(document,"touchend",Nt),At(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))}),this),600),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Lt(document,"touchend",Nt),Lt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Lt(document,"touchend touchcancel contextmenu",this._cancel,this),Lt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new P(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var i=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});i._simulated=!0,t.target.dispatchEvent(i)}});Zt.addInitHook("addHandler","tapHold",kn),Zt.mergeOptions({touchZoom:Oe.touch,bounceAtZoomLimits:!0});var Tn=ei.extend({addHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){dt(this._map._container,"leaflet-touch-zoom"),Lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),Nt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),o=t.mouseEventToContainerPoint(e.touches[1]),r=i.distanceTo(o)/this._startDist;if(this._zoom=t.getScaleZoom(r,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&r<1||this._zoom>t.getMaxZoom()&&r>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var s=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===s.x&&0===s.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var a=n(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=T(a,this,!0),Nt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),Lt(document,"touchmove",this._onTouchMove,this),Lt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Zt.addInitHook("addHandler","touchZoom",Tn),Zt.BoxZoom=vn,Zt.DoubleClickZoom=_n,Zt.Drag=xn,Zt.Keyboard=wn,Zt.ScrollWheelZoom=bn,Zt.TapHold=kn,Zt.TouchZoom=Tn,e.Bounds=O,e.Browser=Oe,e.CRS=q,e.Canvas=un,e.Circle=Ri,e.CircleMarker=Di,e.Class=E,e.Control=Gt,e.DivIcon=on,e.DivOverlay=en,e.DomEvent=$t,e.DomUtil=Et,e.Draggable=ni,e.Evented=z,e.FeatureGroup=zi,e.GeoJSON=ji,e.GridLayer=rn,e.Handler=ei,e.Icon=Li,e.ImageOverlay=Ji,e.LatLng=N,e.LatLngBounds=R,e.Layer=Ei,e.LayerGroup=Ai,e.LineUtil=xi,e.Map=Zt,e.Marker=Ii,e.Mixin=ti,e.Path=Oi,e.Point=P,e.PolyUtil=li,e.Polygon=Ni,e.Polyline=Bi,e.Popup=tn,e.PosAnimation=Wt,e.Projection=ki,e.Rectangle=yn,e.Renderer=cn,e.SVG=mn,e.SVGOverlay=Qi,e.TileLayer=sn,e.Tooltip=nn,e.Transformation=$,e.Util=C,e.VideoOverlay=Xi,e.bind=n,e.bounds=D,e.canvas=hn,e.circle=function(e,t,i){return new Ri(e,t,i)},e.circleMarker=function(e,t){return new Di(e,t)},e.control=Kt,e.divIcon=function(e){return new on(e)},e.extend=t,e.featureGroup=function(e,t){return new zi(e,t)},e.geoJSON=Ki,e.geoJson=Yi,e.gridLayer=function(e){return new rn(e)},e.icon=function(e){return new Li(e)},e.imageOverlay=function(e,t,i){return new Ji(e,t,i)},e.latLng=j,e.latLngBounds=B,e.layerGroup=function(e,t){return new Ai(e,t)},e.map=function(e,t){return new Zt(e,t)},e.marker=function(e,t){return new Ii(e,t)},e.point=I,e.polygon=function(e,t){return new Ni(e,t)},e.polyline=function(e,t){return new Bi(e,t)},e.popup=function(e,t){return new tn(e,t)},e.rectangle=function(e,t){return new yn(e,t)},e.setOptions=d,e.stamp=r,e.svg=fn,e.svgOverlay=function(e,t,i){return new Qi(e,t,i)},e.tileLayer=an,e.tooltip=function(e,t){return new nn(e,t)},e.transformation=W,e.version="1.9.4",e.videoOverlay=function(e,t,i){return new Xi(e,t,i)};var Sn=window.L;e.noConflict=function(){return window.L=Sn,this},window.L=e}(t)},7243:function(e,t,i){var n;e=i.nmd(e),function(){var o,r="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,c=128,u=1/0,h=9007199254740991,d=NaN,p=4294967295,g=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],m="[object Arguments]",f="[object Array]",y="[object Boolean]",v="[object Date]",_="[object Error]",x="[object Function]",w="[object GeneratorFunction]",b="[object Map]",k="[object Number]",T="[object Object]",S="[object Promise]",C="[object RegExp]",E="[object Set]",A="[object String]",z="[object Symbol]",L="[object WeakMap]",P="[object ArrayBuffer]",M="[object DataView]",I="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",R="[object Int16Array]",B="[object Int32Array]",N="[object Uint8Array]",j="[object Uint8ClampedArray]",F="[object Uint16Array]",q="[object Uint32Array]",U=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,Z=RegExp($.source),G=RegExp(W.source),K=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(te.source),ne=/^\s+/,oe=/\s/,re=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,fe=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Te="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="["+we+"]",ze="["+Ee+"]",Le="["+be+"]",Pe="\\d+",Me="["+ke+"]",Ie="["+Te+"]",Oe="[^"+we+Ee+Pe+ke+Te+Se+"]",De="\\ud83c[\\udffb-\\udfff]",Re="[^"+we+"]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",Ne="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+Se+"]",Fe="\\u200d",qe="(?:"+Ie+"|"+Oe+")",Ue="(?:"+je+"|"+Oe+")",He="(?:['](?:d|ll|m|re|s|t|ve))?",Ve="(?:['](?:D|LL|M|RE|S|T|VE))?",$e="(?:"+Le+"|"+De+")?",We="["+Ce+"]?",Ze=We+$e+"(?:"+Fe+"(?:"+[Re,Be,Ne].join("|")+")"+We+$e+")*",Ge="(?:"+[Me,Be,Ne].join("|")+")"+Ze,Ke="(?:"+[Re+Le+"?",Le,Be,Ne,Ae].join("|")+")",Ye=RegExp("[']","g"),Je=RegExp(Le,"g"),Xe=RegExp(De+"(?="+De+")|"+Ke+Ze,"g"),Qe=RegExp([je+"?"+Ie+"+"+He+"(?="+[ze,je,"$"].join("|")+")",Ue+"+"+Ve+"(?="+[ze,je+qe,"$"].join("|")+")",je+"?"+qe+"+"+He,je+"+"+Ve,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,Ge].join("|"),"g"),et=RegExp("["+Fe+we+be+Ce+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,ot={};ot[I]=ot[O]=ot[D]=ot[R]=ot[B]=ot[N]=ot[j]=ot[F]=ot[q]=!0,ot[m]=ot[f]=ot[P]=ot[y]=ot[M]=ot[v]=ot[_]=ot[x]=ot[b]=ot[k]=ot[T]=ot[C]=ot[E]=ot[A]=ot[L]=!1;var rt={};rt[m]=rt[f]=rt[P]=rt[M]=rt[y]=rt[v]=rt[I]=rt[O]=rt[D]=rt[R]=rt[B]=rt[b]=rt[k]=rt[T]=rt[C]=rt[E]=rt[A]=rt[z]=rt[N]=rt[j]=rt[F]=rt[q]=!0,rt[_]=rt[x]=rt[L]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,lt=parseInt,ct="object"==typeof global&&global&&global.Object===Object&&global,ut="object"==typeof self&&self&&self.Object===Object&&self,ht=ct||ut||Function("return this")(),dt=t&&!t.nodeType&&t,pt=dt&&e&&!e.nodeType&&e,gt=pt&&pt.exports===dt,mt=gt&&ct.process,ft=function(){try{return pt&&pt.require&&pt.require("util").types||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),yt=ft&&ft.isArrayBuffer,vt=ft&&ft.isDate,_t=ft&&ft.isMap,xt=ft&&ft.isRegExp,wt=ft&&ft.isSet,bt=ft&&ft.isTypedArray;function kt(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function Tt(e,t,i,n){for(var o=-1,r=null==e?0:e.length;++o<r;){var s=e[o];t(n,s,i(s),e)}return n}function St(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function Ct(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function Et(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function At(e,t){for(var i=-1,n=null==e?0:e.length,o=0,r=[];++i<n;){var s=e[i];t(s,i,e)&&(r[o++]=s)}return r}function zt(e,t){return!(null==e||!e.length)&&jt(e,t,0)>-1}function Lt(e,t,i){for(var n=-1,o=null==e?0:e.length;++n<o;)if(i(t,e[n]))return!0;return!1}function Pt(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}function Mt(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}function It(e,t,i,n){var o=-1,r=null==e?0:e.length;for(n&&r&&(i=e[++o]);++o<r;)i=t(i,e[o],o,e);return i}function Ot(e,t,i,n){var o=null==e?0:e.length;for(n&&o&&(i=e[--o]);o--;)i=t(i,e[o],o,e);return i}function Dt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var Rt=Ht("length");function Bt(e,t,i){var n;return i(e,(function(e,i,o){if(t(e,i,o))return n=i,!1})),n}function Nt(e,t,i,n){for(var o=e.length,r=i+(n?1:-1);n?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function jt(e,t,i){return t==t?function(e,t,i){for(var n=i-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,i):Nt(e,qt,i)}function Ft(e,t,i,n){for(var o=i-1,r=e.length;++o<r;)if(n(e[o],t))return o;return-1}function qt(e){return e!=e}function Ut(e,t){var i=null==e?0:e.length;return i?Wt(e,t)/i:d}function Ht(e){return function(t){return null==t?o:t[e]}}function Vt(e){return function(t){return null==e?o:e[t]}}function $t(e,t,i,n,o){return o(e,(function(e,o,r){i=n?(n=!1,e):t(i,e,o,r)})),i}function Wt(e,t){for(var i,n=-1,r=e.length;++n<r;){var s=t(e[n]);s!==o&&(i=i===o?s:i+s)}return i}function Zt(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Gt(e){return e?e.slice(0,hi(e)+1).replace(ne,""):e}function Kt(e){return function(t){return e(t)}}function Yt(e,t){return Pt(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Xt(e,t){for(var i=-1,n=e.length;++i<n&&jt(t,e[i],0)>-1;);return i}function Qt(e,t){for(var i=e.length;i--&&jt(t,e[i],0)>-1;);return i}var ei=Vt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),ti=Vt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ii(e){return"\\"+st[e]}function ni(e){return et.test(e)}function oi(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function ri(e,t){return function(i){return e(t(i))}}function si(e,t){for(var i=-1,n=e.length,o=0,r=[];++i<n;){var s=e[i];s!==t&&s!==a||(e[i]=a,r[o++]=i)}return r}function ai(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function li(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}function ci(e){return ni(e)?function(e){for(var t=Xe.lastIndex=0;Xe.test(e);)++t;return t}(e):Rt(e)}function ui(e){return ni(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.split("")}(e)}function hi(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var di=Vt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pi=function e(t){var i,n=(t=null==t?ht:pi.defaults(ht.Object(),t,pi.pick(ht,it))).Array,oe=t.Date,we=t.Error,be=t.Function,ke=t.Math,Te=t.Object,Se=t.RegExp,Ce=t.String,Ee=t.TypeError,Ae=n.prototype,ze=be.prototype,Le=Te.prototype,Pe=t["__core-js_shared__"],Me=ze.toString,Ie=Le.hasOwnProperty,Oe=0,De=(i=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Re=Le.toString,Be=Me.call(Te),Ne=ht._,je=Se("^"+Me.call(Ie).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=gt?t.Buffer:o,qe=t.Symbol,Ue=t.Uint8Array,He=Fe?Fe.allocUnsafe:o,Ve=ri(Te.getPrototypeOf,Te),$e=Te.create,We=Le.propertyIsEnumerable,Ze=Ae.splice,Ge=qe?qe.isConcatSpreadable:o,Ke=qe?qe.iterator:o,Xe=qe?qe.toStringTag:o,et=function(){try{var e=cr(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),st=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,ct=oe&&oe.now!==ht.Date.now&&oe.now,ut=t.setTimeout!==ht.setTimeout&&t.setTimeout,dt=ke.ceil,pt=ke.floor,mt=Te.getOwnPropertySymbols,ft=Fe?Fe.isBuffer:o,Rt=t.isFinite,Vt=Ae.join,gi=ri(Te.keys,Te),mi=ke.max,fi=ke.min,yi=oe.now,vi=t.parseInt,_i=ke.random,xi=Ae.reverse,wi=cr(t,"DataView"),bi=cr(t,"Map"),ki=cr(t,"Promise"),Ti=cr(t,"Set"),Si=cr(t,"WeakMap"),Ci=cr(Te,"create"),Ei=Si&&new Si,Ai={},zi=Br(wi),Li=Br(bi),Pi=Br(ki),Mi=Br(Ti),Ii=Br(Si),Oi=qe?qe.prototype:o,Di=Oi?Oi.valueOf:o,Ri=Oi?Oi.toString:o;function Bi(e){if(ea(e)&&!Hs(e)&&!(e instanceof qi)){if(e instanceof Fi)return e;if(Ie.call(e,"__wrapped__"))return Nr(e)}return new Fi(e)}var Ni=function(){function e(){}return function(t){if(!Qs(t))return{};if($e)return $e(t);e.prototype=t;var i=new e;return e.prototype=o,i}}();function ji(){}function Fi(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function qi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Ui(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Hi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Vi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function $i(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Vi;++t<i;)this.add(e[t])}function Wi(e){var t=this.__data__=new Hi(e);this.size=t.size}function Zi(e,t){var i=Hs(e),n=!i&&Us(e),o=!i&&!n&&Zs(e),r=!i&&!n&&!o&&la(e),s=i||n||o||r,a=s?Zt(e.length,Ce):[],l=a.length;for(var c in e)!t&&!Ie.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||fr(c,l))||a.push(c);return a}function Gi(e){var t=e.length;return t?e[$n(0,t-1)]:o}function Ki(e,t){return Mr(Eo(e),rn(t,0,e.length))}function Yi(e){return Mr(Eo(e))}function Ji(e,t,i){(i!==o&&!js(e[t],i)||i===o&&!(t in e))&&nn(e,t,i)}function Xi(e,t,i){var n=e[t];Ie.call(e,t)&&js(n,i)&&(i!==o||t in e)||nn(e,t,i)}function Qi(e,t){for(var i=e.length;i--;)if(js(e[i][0],t))return i;return-1}function en(e,t,i,n){return un(e,(function(e,o,r){t(n,e,i(e),r)})),n}function tn(e,t){return e&&Ao(t,La(t),e)}function nn(e,t,i){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function on(e,t){for(var i=-1,r=t.length,s=n(r),a=null==e;++i<r;)s[i]=a?o:Sa(e,t[i]);return s}function rn(e,t,i){return e==e&&(i!==o&&(e=e<=i?e:i),t!==o&&(e=e>=t?e:t)),e}function sn(e,t,i,n,r,s){var a,l=1&t,c=2&t,u=4&t;if(i&&(a=r?i(e,n,r,s):i(e)),a!==o)return a;if(!Qs(e))return e;var h=Hs(e);if(h){if(a=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&Ie.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!l)return Eo(e,a)}else{var d=dr(e),p=d==x||d==w;if(Zs(e))return wo(e,l);if(d==T||d==m||p&&!r){if(a=c||p?{}:gr(e),!l)return c?function(e,t){return Ao(e,hr(e),t)}(e,function(e,t){return e&&Ao(t,Pa(t),e)}(a,e)):function(e,t){return Ao(e,ur(e),t)}(e,tn(a,e))}else{if(!rt[d])return r?e:{};a=function(e,t,i){var n,o=e.constructor;switch(t){case P:return bo(e);case y:case v:return new o(+e);case M:return function(e,t){var i=t?bo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case I:case O:case D:case R:case B:case N:case j:case F:case q:return ko(e,i);case b:return new o;case k:case A:return new o(e);case C:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new o;case z:return n=e,Di?Te(Di.call(n)):{}}}(e,d,l)}}s||(s=new Wi);var g=s.get(e);if(g)return g;s.set(e,a),ra(e)?e.forEach((function(n){a.add(sn(n,t,i,n,e,s))})):ta(e)&&e.forEach((function(n,o){a.set(o,sn(n,t,i,o,e,s))}));var f=h?o:(u?c?ir:tr:c?Pa:La)(e);return St(f||e,(function(n,o){f&&(n=e[o=n]),Xi(a,o,sn(n,t,i,o,e,s))})),a}function an(e,t,i){var n=i.length;if(null==e)return!n;for(e=Te(e);n--;){var r=i[n],s=t[r],a=e[r];if(a===o&&!(r in e)||!s(a))return!1}return!0}function ln(e,t,i){if("function"!=typeof e)throw new Ee(r);return Ar((function(){e.apply(o,i)}),t)}function cn(e,t,i,n){var o=-1,r=zt,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;i&&(t=Pt(t,Kt(i))),n?(r=Lt,s=!1):t.length>=200&&(r=Jt,s=!1,t=new $i(t));e:for(;++o<a;){var u=e[o],h=null==i?u:i(u);if(u=n||0!==u?u:0,s&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else r(t,h,n)||l.push(u)}return l}Bi.templateSettings={escape:K,evaluate:Y,interpolate:J,variable:"",imports:{_:Bi}},Bi.prototype=ji.prototype,Bi.prototype.constructor=Bi,Fi.prototype=Ni(ji.prototype),Fi.prototype.constructor=Fi,qi.prototype=Ni(ji.prototype),qi.prototype.constructor=qi,Ui.prototype.clear=function(){this.__data__=Ci?Ci(null):{},this.size=0},Ui.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ui.prototype.get=function(e){var t=this.__data__;if(Ci){var i=t[e];return i===s?o:i}return Ie.call(t,e)?t[e]:o},Ui.prototype.has=function(e){var t=this.__data__;return Ci?t[e]!==o:Ie.call(t,e)},Ui.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ci&&t===o?s:t,this},Hi.prototype.clear=function(){this.__data__=[],this.size=0},Hi.prototype.delete=function(e){var t=this.__data__,i=Qi(t,e);return!(i<0||(i==t.length-1?t.pop():Ze.call(t,i,1),--this.size,0))},Hi.prototype.get=function(e){var t=this.__data__,i=Qi(t,e);return i<0?o:t[i][1]},Hi.prototype.has=function(e){return Qi(this.__data__,e)>-1},Hi.prototype.set=function(e,t){var i=this.__data__,n=Qi(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Vi.prototype.clear=function(){this.size=0,this.__data__={hash:new Ui,map:new(bi||Hi),string:new Ui}},Vi.prototype.delete=function(e){var t=ar(this,e).delete(e);return this.size-=t?1:0,t},Vi.prototype.get=function(e){return ar(this,e).get(e)},Vi.prototype.has=function(e){return ar(this,e).has(e)},Vi.prototype.set=function(e,t){var i=ar(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},$i.prototype.add=$i.prototype.push=function(e){return this.__data__.set(e,s),this},$i.prototype.has=function(e){return this.__data__.has(e)},Wi.prototype.clear=function(){this.__data__=new Hi,this.size=0},Wi.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Wi.prototype.get=function(e){return this.__data__.get(e)},Wi.prototype.has=function(e){return this.__data__.has(e)},Wi.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Hi){var n=i.__data__;if(!bi||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Vi(n)}return i.set(e,t),this.size=i.size,this};var un=Po(vn),hn=Po(_n,!0);function dn(e,t){var i=!0;return un(e,(function(e,n,o){return i=!!t(e,n,o)})),i}function pn(e,t,i){for(var n=-1,r=e.length;++n<r;){var s=e[n],a=t(s);if(null!=a&&(l===o?a==a&&!aa(a):i(a,l)))var l=a,c=s}return c}function gn(e,t){var i=[];return un(e,(function(e,n,o){t(e,n,o)&&i.push(e)})),i}function mn(e,t,i,n,o){var r=-1,s=e.length;for(i||(i=mr),o||(o=[]);++r<s;){var a=e[r];t>0&&i(a)?t>1?mn(a,t-1,i,n,o):Mt(o,a):n||(o[o.length]=a)}return o}var fn=Mo(),yn=Mo(!0);function vn(e,t){return e&&fn(e,t,La)}function _n(e,t){return e&&yn(e,t,La)}function xn(e,t){return At(t,(function(t){return Ys(e[t])}))}function wn(e,t){for(var i=0,n=(t=yo(t,e)).length;null!=e&&i<n;)e=e[Rr(t[i++])];return i&&i==n?e:o}function bn(e,t,i){var n=t(e);return Hs(e)?n:Mt(n,i(e))}function kn(e){return null==e?e===o?"[object Undefined]":"[object Null]":Xe&&Xe in Te(e)?function(e){var t=Ie.call(e,Xe),i=e[Xe];try{e[Xe]=o;var n=!0}catch(e){}var r=Re.call(e);return n&&(t?e[Xe]=i:delete e[Xe]),r}(e):function(e){return Re.call(e)}(e)}function Tn(e,t){return e>t}function Sn(e,t){return null!=e&&Ie.call(e,t)}function Cn(e,t){return null!=e&&t in Te(e)}function En(e,t,i){for(var r=i?Lt:zt,s=e[0].length,a=e.length,l=a,c=n(a),u=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Pt(d,Kt(t))),u=fi(d.length,u),c[l]=!i&&(t||s>=120&&d.length>=120)?new $i(l&&d):o}d=e[0];var p=-1,g=c[0];e:for(;++p<s&&h.length<u;){var m=d[p],f=t?t(m):m;if(m=i||0!==m?m:0,!(g?Jt(g,f):r(h,f,i))){for(l=a;--l;){var y=c[l];if(!(y?Jt(y,f):r(e[l],f,i)))continue e}g&&g.push(f),h.push(m)}}return h}function An(e,t,i){var n=null==(e=Sr(e,t=yo(t,e)))?e:e[Rr(Kr(t))];return null==n?o:kt(n,e,i)}function zn(e){return ea(e)&&kn(e)==m}function Ln(e,t,i,n,r){return e===t||(null==e||null==t||!ea(e)&&!ea(t)?e!=e&&t!=t:function(e,t,i,n,r,s){var a=Hs(e),l=Hs(t),c=a?f:dr(e),u=l?f:dr(t),h=(c=c==m?T:c)==T,d=(u=u==m?T:u)==T,p=c==u;if(p&&Zs(e)){if(!Zs(t))return!1;a=!0,h=!1}if(p&&!h)return s||(s=new Wi),a||la(e)?Qo(e,t,i,n,r,s):function(e,t,i,n,o,r,s){switch(i){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!r(new Ue(e),new Ue(t)));case y:case v:case k:return js(+e,+t);case _:return e.name==t.name&&e.message==t.message;case C:case A:return e==t+"";case b:var a=oi;case E:var l=1&n;if(a||(a=ai),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var u=Qo(a(e),a(t),n,o,r,s);return s.delete(e),u;case z:if(Di)return Di.call(e)==Di.call(t)}return!1}(e,t,c,i,n,r,s);if(!(1&i)){var g=h&&Ie.call(e,"__wrapped__"),x=d&&Ie.call(t,"__wrapped__");if(g||x){var w=g?e.value():e,S=x?t.value():t;return s||(s=new Wi),r(w,S,i,n,s)}}return!!p&&(s||(s=new Wi),function(e,t,i,n,r,s){var a=1&i,l=tr(e),c=l.length;if(c!=tr(t).length&&!a)return!1;for(var u=c;u--;){var h=l[u];if(!(a?h in t:Ie.call(t,h)))return!1}var d=s.get(e),p=s.get(t);if(d&&p)return d==t&&p==e;var g=!0;s.set(e,t),s.set(t,e);for(var m=a;++u<c;){var f=e[h=l[u]],y=t[h];if(n)var v=a?n(y,f,h,t,e,s):n(f,y,h,e,t,s);if(!(v===o?f===y||r(f,y,i,n,s):v)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(g=!1)}return s.delete(e),s.delete(t),g}(e,t,i,n,r,s))}(e,t,i,n,Ln,r))}function Pn(e,t,i,n){var r=i.length,s=r,a=!n;if(null==e)return!s;for(e=Te(e);r--;){var l=i[r];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<s;){var c=(l=i[r])[0],u=e[c],h=l[1];if(a&&l[2]){if(u===o&&!(c in e))return!1}else{var d=new Wi;if(n)var p=n(u,h,c,e,t,d);if(!(p===o?Ln(h,u,3,n,d):p))return!1}}return!0}function Mn(e){return!(!Qs(e)||(t=e,De&&De in t))&&(Ys(e)?je:me).test(Br(e));var t}function In(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Hs(e)?Nn(e[0],e[1]):Bn(e):hl(e)}function On(e){if(!wr(e))return gi(e);var t=[];for(var i in Te(e))Ie.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Dn(e,t){return e<t}function Rn(e,t){var i=-1,o=$s(e)?n(e.length):[];return un(e,(function(e,n,r){o[++i]=t(e,n,r)})),o}function Bn(e){var t=lr(e);return 1==t.length&&t[0][2]?kr(t[0][0],t[0][1]):function(i){return i===e||Pn(i,e,t)}}function Nn(e,t){return vr(e)&&br(t)?kr(Rr(e),t):function(i){var n=Sa(i,e);return n===o&&n===t?Ca(i,e):Ln(t,n,3)}}function jn(e,t,i,n,r){e!==t&&fn(t,(function(s,a){if(r||(r=new Wi),Qs(s))!function(e,t,i,n,r,s,a){var l=Cr(e,i),c=Cr(t,i),u=a.get(c);if(u)Ji(e,i,u);else{var h=s?s(l,c,i+"",e,t,a):o,d=h===o;if(d){var p=Hs(c),g=!p&&Zs(c),m=!p&&!g&&la(c);h=c,p||g||m?Hs(l)?h=l:Ws(l)?h=Eo(l):g?(d=!1,h=wo(c,!0)):m?(d=!1,h=ko(c,!0)):h=[]:na(c)||Us(c)?(h=l,Us(l)?h=fa(l):Qs(l)&&!Ys(l)||(h=gr(c))):d=!1}d&&(a.set(c,h),r(h,c,n,s,a),a.delete(c)),Ji(e,i,h)}}(e,t,a,i,jn,n,r);else{var l=n?n(Cr(e,a),s,a+"",e,t,r):o;l===o&&(l=s),Ji(e,a,l)}}),Pa)}function Fn(e,t){var i=e.length;if(i)return fr(t+=t<0?i:0,i)?e[t]:o}function qn(e,t,i){t=t.length?Pt(t,(function(e){return Hs(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e})):[il];var n=-1;t=Pt(t,Kt(sr()));var o=Rn(e,(function(e,i,o){var r=Pt(t,(function(t){return t(e)}));return{criteria:r,index:++n,value:e}}));return function(e,t){var n=e.length;for(e.sort((function(e,t){return function(e,t,i){for(var n=-1,o=e.criteria,r=t.criteria,s=o.length,a=i.length;++n<s;){var l=To(o[n],r[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return e.index-t.index}(e,t,i)}));n--;)e[n]=e[n].value;return e}(o)}function Un(e,t,i){for(var n=-1,o=t.length,r={};++n<o;){var s=t[n],a=wn(e,s);i(a,s)&&Yn(r,yo(s,e),a)}return r}function Hn(e,t,i,n){var o=n?Ft:jt,r=-1,s=t.length,a=e;for(e===t&&(t=Eo(t)),i&&(a=Pt(e,Kt(i)));++r<s;)for(var l=0,c=t[r],u=i?i(c):c;(l=o(a,u,l,n))>-1;)a!==e&&Ze.call(a,l,1),Ze.call(e,l,1);return e}function Vn(e,t){for(var i=e?t.length:0,n=i-1;i--;){var o=t[i];if(i==n||o!==r){var r=o;fr(o)?Ze.call(e,o,1):lo(e,o)}}return e}function $n(e,t){return e+pt(_i()*(t-e+1))}function Wn(e,t){var i="";if(!e||t<1||t>h)return i;do{t%2&&(i+=e),(t=pt(t/2))&&(e+=e)}while(t);return i}function Zn(e,t){return zr(Tr(e,t,il),e+"")}function Gn(e){return Gi(ja(e))}function Kn(e,t){var i=ja(e);return Mr(i,rn(t,0,i.length))}function Yn(e,t,i,n){if(!Qs(e))return e;for(var r=-1,s=(t=yo(t,e)).length,a=s-1,l=e;null!=l&&++r<s;){var c=Rr(t[r]),u=i;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(r!=a){var h=l[c];(u=n?n(h,c,l):o)===o&&(u=Qs(h)?h:fr(t[r+1])?[]:{})}Xi(l,c,u),l=l[c]}return e}var Jn=Ei?function(e,t){return Ei.set(e,t),e}:il,Xn=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Qa(t),writable:!0})}:il;function Qn(e){return Mr(ja(e))}function eo(e,t,i){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var s=n(r);++o<r;)s[o]=e[o+t];return s}function to(e,t){var i;return un(e,(function(e,n,o){return!(i=t(e,n,o))})),!!i}function io(e,t,i){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var r=n+o>>>1,s=e[r];null!==s&&!aa(s)&&(i?s<=t:s<t)?n=r+1:o=r}return o}return no(e,t,il,i)}function no(e,t,i,n){var r=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=i(t))!=t,l=null===t,c=aa(t),u=t===o;r<s;){var h=pt((r+s)/2),d=i(e[h]),p=d!==o,g=null===d,m=d==d,f=aa(d);if(a)var y=n||m;else y=u?m&&(n||p):l?m&&p&&(n||!g):c?m&&p&&!g&&(n||!f):!g&&!f&&(n?d<=t:d<t);y?r=h+1:s=h}return fi(s,4294967294)}function oo(e,t){for(var i=-1,n=e.length,o=0,r=[];++i<n;){var s=e[i],a=t?t(s):s;if(!i||!js(a,l)){var l=a;r[o++]=0===s?0:s}}return r}function ro(e){return"number"==typeof e?e:aa(e)?d:+e}function so(e){if("string"==typeof e)return e;if(Hs(e))return Pt(e,so)+"";if(aa(e))return Ri?Ri.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ao(e,t,i){var n=-1,o=zt,r=e.length,s=!0,a=[],l=a;if(i)s=!1,o=Lt;else if(r>=200){var c=t?null:Zo(e);if(c)return ai(c);s=!1,o=Jt,l=new $i}else l=t?[]:a;e:for(;++n<r;){var u=e[n],h=t?t(u):u;if(u=i||0!==u?u:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),a.push(u)}else o(l,h,i)||(l!==a&&l.push(h),a.push(u))}return a}function lo(e,t){return null==(e=Sr(e,t=yo(t,e)))||delete e[Rr(Kr(t))]}function co(e,t,i,n){return Yn(e,t,i(wn(e,t)),n)}function uo(e,t,i,n){for(var o=e.length,r=n?o:-1;(n?r--:++r<o)&&t(e[r],r,e););return i?eo(e,n?0:r,n?r+1:o):eo(e,n?r+1:0,n?o:r)}function ho(e,t){var i=e;return i instanceof qi&&(i=i.value()),It(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),i)}function po(e,t,i){var o=e.length;if(o<2)return o?ao(e[0]):[];for(var r=-1,s=n(o);++r<o;)for(var a=e[r],l=-1;++l<o;)l!=r&&(s[r]=cn(s[r]||a,e[l],t,i));return ao(mn(s,1),t,i)}function go(e,t,i){for(var n=-1,r=e.length,s=t.length,a={};++n<r;){var l=n<s?t[n]:o;i(a,e[n],l)}return a}function mo(e){return Ws(e)?e:[]}function fo(e){return"function"==typeof e?e:il}function yo(e,t){return Hs(e)?e:vr(e,t)?[e]:Dr(ya(e))}var vo=Zn;function _o(e,t,i){var n=e.length;return i=i===o?n:i,!t&&i>=n?e:eo(e,t,i)}var xo=st||function(e){return ht.clearTimeout(e)};function wo(e,t){if(t)return e.slice();var i=e.length,n=He?He(i):new e.constructor(i);return e.copy(n),n}function bo(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function ko(e,t){var i=t?bo(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function To(e,t){if(e!==t){var i=e!==o,n=null===e,r=e==e,s=aa(e),a=t!==o,l=null===t,c=t==t,u=aa(t);if(!l&&!u&&!s&&e>t||s&&a&&c&&!l&&!u||n&&a&&c||!i&&c||!r)return 1;if(!n&&!s&&!u&&e<t||u&&i&&r&&!n&&!s||l&&i&&r||!a&&r||!c)return-1}return 0}function So(e,t,i,o){for(var r=-1,s=e.length,a=i.length,l=-1,c=t.length,u=mi(s-a,0),h=n(c+u),d=!o;++l<c;)h[l]=t[l];for(;++r<a;)(d||r<s)&&(h[i[r]]=e[r]);for(;u--;)h[l++]=e[r++];return h}function Co(e,t,i,o){for(var r=-1,s=e.length,a=-1,l=i.length,c=-1,u=t.length,h=mi(s-l,0),d=n(h+u),p=!o;++r<h;)d[r]=e[r];for(var g=r;++c<u;)d[g+c]=t[c];for(;++a<l;)(p||r<s)&&(d[g+i[a]]=e[r++]);return d}function Eo(e,t){var i=-1,o=e.length;for(t||(t=n(o));++i<o;)t[i]=e[i];return t}function Ao(e,t,i,n){var r=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var l=t[s],c=n?n(i[l],e[l],l,i,e):o;c===o&&(c=e[l]),r?nn(i,l,c):Xi(i,l,c)}return i}function zo(e,t){return function(i,n){var o=Hs(i)?Tt:en,r=t?t():{};return o(i,e,sr(n,2),r)}}function Lo(e){return Zn((function(t,i){var n=-1,r=i.length,s=r>1?i[r-1]:o,a=r>2?i[2]:o;for(s=e.length>3&&"function"==typeof s?(r--,s):o,a&&yr(i[0],i[1],a)&&(s=r<3?o:s,r=1),t=Te(t);++n<r;){var l=i[n];l&&e(t,l,n,s)}return t}))}function Po(e,t){return function(i,n){if(null==i)return i;if(!$s(i))return e(i,n);for(var o=i.length,r=t?o:-1,s=Te(i);(t?r--:++r<o)&&!1!==n(s[r],r,s););return i}}function Mo(e){return function(t,i,n){for(var o=-1,r=Te(t),s=n(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===i(r[l],l,r))break}return t}}function Io(e){return function(t){var i=ni(t=ya(t))?ui(t):o,n=i?i[0]:t.charAt(0),r=i?_o(i,1).join(""):t.slice(1);return n[e]()+r}}function Oo(e){return function(t){return It(Ya(Ua(t).replace(Ye,"")),e,"")}}function Do(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Ni(e.prototype),n=e.apply(i,t);return Qs(n)?n:i}}function Ro(e){return function(t,i,n){var r=Te(t);if(!$s(t)){var s=sr(i,3);t=La(t),i=function(e){return s(r[e],e,r)}}var a=e(t,i,n);return a>-1?r[s?t[a]:a]:o}}function Bo(e){return er((function(t){var i=t.length,n=i,s=Fi.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new Ee(r);if(s&&!l&&"wrapper"==or(a))var l=new Fi([],!0)}for(n=l?n:i;++n<i;){var c=or(a=t[n]),u="wrapper"==c?nr(a):o;l=u&&_r(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[or(u[0])].apply(l,u[3]):1==a.length&&_r(a)?l[c]():l.thru(a)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Hs(n))return l.plant(n).value();for(var o=0,r=i?t[o].apply(this,e):n;++o<i;)r=t[o].call(this,r);return r}}))}function No(e,t,i,r,s,a,l,u,h,d){var p=t&c,g=1&t,m=2&t,f=24&t,y=512&t,v=m?o:Do(e);return function c(){for(var _=arguments.length,x=n(_),w=_;w--;)x[w]=arguments[w];if(f)var b=rr(c),k=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(x,b);if(r&&(x=So(x,r,s,f)),a&&(x=Co(x,a,l,f)),_-=k,f&&_<d){var T=si(x,b);return $o(e,t,No,c.placeholder,i,x,T,u,h,d-_)}var S=g?i:this,C=m?S[e]:e;return _=x.length,u?x=function(e,t){for(var i=e.length,n=fi(t.length,i),r=Eo(e);n--;){var s=t[n];e[n]=fr(s,i)?r[s]:o}return e}(x,u):y&&_>1&&x.reverse(),p&&h<_&&(x.length=h),this&&this!==ht&&this instanceof c&&(C=v||Do(C)),C.apply(S,x)}}function jo(e,t){return function(i,n){return function(e,t,i,n){return vn(e,(function(e,o,r){t(n,i(e),o,r)})),n}(i,e,t(n),{})}}function Fo(e,t){return function(i,n){var r;if(i===o&&n===o)return t;if(i!==o&&(r=i),n!==o){if(r===o)return n;"string"==typeof i||"string"==typeof n?(i=so(i),n=so(n)):(i=ro(i),n=ro(n)),r=e(i,n)}return r}}function qo(e){return er((function(t){return t=Pt(t,Kt(sr())),Zn((function(i){var n=this;return e(t,(function(e){return kt(e,n,i)}))}))}))}function Uo(e,t){var i=(t=t===o?" ":so(t)).length;if(i<2)return i?Wn(t,e):t;var n=Wn(t,dt(e/ci(t)));return ni(t)?_o(ui(n),0,e).join(""):n.slice(0,e)}function Ho(e){return function(t,i,r){return r&&"number"!=typeof r&&yr(t,i,r)&&(i=r=o),t=da(t),i===o?(i=t,t=0):i=da(i),function(e,t,i,o){for(var r=-1,s=mi(dt((t-e)/(i||1)),0),a=n(s);s--;)a[o?s:++r]=e,e+=i;return a}(t,i,r=r===o?t<i?1:-1:da(r),e)}}function Vo(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=ma(t),i=ma(i)),e(t,i)}}function $o(e,t,i,n,r,s,a,c,u,h){var d=8&t;t|=d?l:64,4&(t&=~(d?64:l))||(t&=-4);var p=[e,t,r,d?s:o,d?a:o,d?o:s,d?o:a,c,u,h],g=i.apply(o,p);return _r(e)&&Er(g,p),g.placeholder=n,Lr(g,e,t)}function Wo(e){var t=ke[e];return function(e,i){if(e=ma(e),(i=null==i?0:fi(pa(i),292))&&Rt(e)){var n=(ya(e)+"e").split("e");return+((n=(ya(t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return t(e)}}var Zo=Ti&&1/ai(new Ti([,-0]))[1]==u?function(e){return new Ti(e)}:al;function Go(e){return function(t){var i=dr(t);return i==b?oi(t):i==E?li(t):function(e,t){return Pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ko(e,t,i,s,u,h,d,p){var g=2&t;if(!g&&"function"!=typeof e)throw new Ee(r);var m=s?s.length:0;if(m||(t&=-97,s=u=o),d=d===o?d:mi(pa(d),0),p=p===o?p:pa(p),m-=u?u.length:0,64&t){var f=s,y=u;s=u=o}var v=g?o:nr(e),_=[e,t,i,s,u,f,y,h,d,p];if(v&&function(e,t){var i=e[1],n=t[1],o=i|n,r=o<131,s=n==c&&8==i||n==c&&256==i&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!r&&!s)return e;1&n&&(e[2]=t[2],o|=1&i?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?So(u,l,t[4]):l,e[4]=u?si(e[3],a):t[4]}(l=t[5])&&(u=e[5],e[5]=u?Co(u,l,t[6]):l,e[6]=u?si(e[5],a):t[6]),(l=t[7])&&(e[7]=l),n&c&&(e[8]=null==e[8]?t[8]:fi(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(_,v),e=_[0],t=_[1],i=_[2],s=_[3],u=_[4],!(p=_[9]=_[9]===o?g?0:e.length:mi(_[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)x=8==t||16==t?function(e,t,i){var r=Do(e);return function s(){for(var a=arguments.length,l=n(a),c=a,u=rr(s);c--;)l[c]=arguments[c];var h=a<3&&l[0]!==u&&l[a-1]!==u?[]:si(l,u);return(a-=h.length)<i?$o(e,t,No,s.placeholder,o,l,h,o,o,i-a):kt(this&&this!==ht&&this instanceof s?r:e,this,l)}}(e,t,p):t!=l&&33!=t||u.length?No.apply(o,_):function(e,t,i,o){var r=1&t,s=Do(e);return function t(){for(var a=-1,l=arguments.length,c=-1,u=o.length,h=n(u+l),d=this&&this!==ht&&this instanceof t?s:e;++c<u;)h[c]=o[c];for(;l--;)h[c++]=arguments[++a];return kt(d,r?i:this,h)}}(e,t,i,s);else var x=function(e,t,i){var n=1&t,o=Do(e);return function t(){return(this&&this!==ht&&this instanceof t?o:e).apply(n?i:this,arguments)}}(e,t,i);return Lr((v?Jn:Er)(x,_),e,t)}function Yo(e,t,i,n){return e===o||js(e,Le[i])&&!Ie.call(n,i)?t:e}function Jo(e,t,i,n,r,s){return Qs(e)&&Qs(t)&&(s.set(t,e),jn(e,t,o,Jo,s),s.delete(t)),e}function Xo(e){return na(e)?o:e}function Qo(e,t,i,n,r,s){var a=1&i,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(e),h=s.get(t);if(u&&h)return u==t&&h==e;var d=-1,p=!0,g=2&i?new $i:o;for(s.set(e,t),s.set(t,e);++d<l;){var m=e[d],f=t[d];if(n)var y=a?n(f,m,d,t,e,s):n(m,f,d,e,t,s);if(y!==o){if(y)continue;p=!1;break}if(g){if(!Dt(t,(function(e,t){if(!Jt(g,t)&&(m===e||r(m,e,i,n,s)))return g.push(t)}))){p=!1;break}}else if(m!==f&&!r(m,f,i,n,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function er(e){return zr(Tr(e,o,Vr),e+"")}function tr(e){return bn(e,La,ur)}function ir(e){return bn(e,Pa,hr)}var nr=Ei?function(e){return Ei.get(e)}:al;function or(e){for(var t=e.name+"",i=Ai[t],n=Ie.call(Ai,t)?i.length:0;n--;){var o=i[n],r=o.func;if(null==r||r==e)return o.name}return t}function rr(e){return(Ie.call(Bi,"placeholder")?Bi:e).placeholder}function sr(){var e=Bi.iteratee||nl;return e=e===nl?In:e,arguments.length?e(arguments[0],arguments[1]):e}function ar(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function lr(e){for(var t=La(e),i=t.length;i--;){var n=t[i],o=e[n];t[i]=[n,o,br(o)]}return t}function cr(e,t){var i=function(e,t){return null==e?o:e[t]}(e,t);return Mn(i)?i:o}var ur=mt?function(e){return null==e?[]:(e=Te(e),At(mt(e),(function(t){return We.call(e,t)})))}:gl,hr=mt?function(e){for(var t=[];e;)Mt(t,ur(e)),e=Ve(e);return t}:gl,dr=kn;function pr(e,t,i){for(var n=-1,o=(t=yo(t,e)).length,r=!1;++n<o;){var s=Rr(t[n]);if(!(r=null!=e&&i(e,s)))break;e=e[s]}return r||++n!=o?r:!!(o=null==e?0:e.length)&&Xs(o)&&fr(s,o)&&(Hs(e)||Us(e))}function gr(e){return"function"!=typeof e.constructor||wr(e)?{}:Ni(Ve(e))}function mr(e){return Hs(e)||Us(e)||!!(Ge&&e&&e[Ge])}function fr(e,t){var i=typeof e;return!!(t=null==t?h:t)&&("number"==i||"symbol"!=i&&ye.test(e))&&e>-1&&e%1==0&&e<t}function yr(e,t,i){if(!Qs(i))return!1;var n=typeof t;return!!("number"==n?$s(i)&&fr(t,i.length):"string"==n&&t in i)&&js(i[t],e)}function vr(e,t){if(Hs(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!aa(e))||Q.test(e)||!X.test(e)||null!=t&&e in Te(t)}function _r(e){var t=or(e),i=Bi[t];if("function"!=typeof i||!(t in qi.prototype))return!1;if(e===i)return!0;var n=nr(i);return!!n&&e===n[0]}(wi&&dr(new wi(new ArrayBuffer(1)))!=M||bi&&dr(new bi)!=b||ki&&dr(ki.resolve())!=S||Ti&&dr(new Ti)!=E||Si&&dr(new Si)!=L)&&(dr=function(e){var t=kn(e),i=t==T?e.constructor:o,n=i?Br(i):"";if(n)switch(n){case zi:return M;case Li:return b;case Pi:return S;case Mi:return E;case Ii:return L}return t});var xr=Pe?Ys:ml;function wr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function br(e){return e==e&&!Qs(e)}function kr(e,t){return function(i){return null!=i&&i[e]===t&&(t!==o||e in Te(i))}}function Tr(e,t,i){return t=mi(t===o?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=mi(o.length-t,0),a=n(s);++r<s;)a[r]=o[t+r];r=-1;for(var l=n(t+1);++r<t;)l[r]=o[r];return l[t]=i(a),kt(e,this,l)}}function Sr(e,t){return t.length<2?e:wn(e,eo(t,0,-1))}function Cr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Er=Pr(Jn),Ar=ut||function(e,t){return ht.setTimeout(e,t)},zr=Pr(Xn);function Lr(e,t,i){var n=t+"";return zr(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(re,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return St(g,(function(i){var n="_."+i[0];t&i[1]&&!zt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(ae):[]}(n),i)))}function Pr(e){var t=0,i=0;return function(){var n=yi(),r=16-(n-i);if(i=n,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Mr(e,t){var i=-1,n=e.length,r=n-1;for(t=t===o?n:t;++i<t;){var s=$n(i,r),a=e[s];e[s]=e[i],e[i]=a}return e.length=t,e}var Ir,Or,Dr=(Ir=Is((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,i,n,o){t.push(n?o.replace(ue,"$1"):i||e)})),t}),(function(e){return 500===Or.size&&Or.clear(),e})),Or=Ir.cache,Ir);function Rr(e){if("string"==typeof e||aa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Br(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Nr(e){if(e instanceof qi)return e.clone();var t=new Fi(e.__wrapped__,e.__chain__);return t.__actions__=Eo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var jr=Zn((function(e,t){return Ws(e)?cn(e,mn(t,1,Ws,!0)):[]})),Fr=Zn((function(e,t){var i=Kr(t);return Ws(i)&&(i=o),Ws(e)?cn(e,mn(t,1,Ws,!0),sr(i,2)):[]})),qr=Zn((function(e,t){var i=Kr(t);return Ws(i)&&(i=o),Ws(e)?cn(e,mn(t,1,Ws,!0),o,i):[]}));function Ur(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:pa(i);return o<0&&(o=mi(n+o,0)),Nt(e,sr(t,3),o)}function Hr(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n-1;return i!==o&&(r=pa(i),r=i<0?mi(n+r,0):fi(r,n-1)),Nt(e,sr(t,3),r,!0)}function Vr(e){return null!=e&&e.length?mn(e,1):[]}function $r(e){return e&&e.length?e[0]:o}var Wr=Zn((function(e){var t=Pt(e,mo);return t.length&&t[0]===e[0]?En(t):[]})),Zr=Zn((function(e){var t=Kr(e),i=Pt(e,mo);return t===Kr(i)?t=o:i.pop(),i.length&&i[0]===e[0]?En(i,sr(t,2)):[]})),Gr=Zn((function(e){var t=Kr(e),i=Pt(e,mo);return(t="function"==typeof t?t:o)&&i.pop(),i.length&&i[0]===e[0]?En(i,o,t):[]}));function Kr(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Yr=Zn(Jr);function Jr(e,t){return e&&e.length&&t&&t.length?Hn(e,t):e}var Xr=er((function(e,t){var i=null==e?0:e.length,n=on(e,t);return Vn(e,Pt(t,(function(e){return fr(e,i)?+e:e})).sort(To)),n}));function Qr(e){return null==e?e:xi.call(e)}var es=Zn((function(e){return ao(mn(e,1,Ws,!0))})),ts=Zn((function(e){var t=Kr(e);return Ws(t)&&(t=o),ao(mn(e,1,Ws,!0),sr(t,2))})),is=Zn((function(e){var t=Kr(e);return t="function"==typeof t?t:o,ao(mn(e,1,Ws,!0),o,t)}));function ns(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if(Ws(e))return t=mi(e.length,t),!0})),Zt(t,(function(t){return Pt(e,Ht(t))}))}function os(e,t){if(!e||!e.length)return[];var i=ns(e);return null==t?i:Pt(i,(function(e){return kt(t,o,e)}))}var rs=Zn((function(e,t){return Ws(e)?cn(e,t):[]})),ss=Zn((function(e){return po(At(e,Ws))})),as=Zn((function(e){var t=Kr(e);return Ws(t)&&(t=o),po(At(e,Ws),sr(t,2))})),ls=Zn((function(e){var t=Kr(e);return t="function"==typeof t?t:o,po(At(e,Ws),o,t)})),cs=Zn(ns),us=Zn((function(e){var t=e.length,i=t>1?e[t-1]:o;return i="function"==typeof i?(e.pop(),i):o,os(e,i)}));function hs(e){var t=Bi(e);return t.__chain__=!0,t}function ds(e,t){return t(e)}var ps=er((function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,r=function(t){return on(t,e)};return!(t>1||this.__actions__.length)&&n instanceof qi&&fr(i)?((n=n.slice(i,+i+(t?1:0))).__actions__.push({func:ds,args:[r],thisArg:o}),new Fi(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(r)})),gs=zo((function(e,t,i){Ie.call(e,i)?++e[i]:nn(e,i,1)})),ms=Ro(Ur),fs=Ro(Hr);function ys(e,t){return(Hs(e)?St:un)(e,sr(t,3))}function vs(e,t){return(Hs(e)?Ct:hn)(e,sr(t,3))}var _s=zo((function(e,t,i){Ie.call(e,i)?e[i].push(t):nn(e,i,[t])})),xs=Zn((function(e,t,i){var o=-1,r="function"==typeof t,s=$s(e)?n(e.length):[];return un(e,(function(e){s[++o]=r?kt(t,e,i):An(e,t,i)})),s})),ws=zo((function(e,t,i){nn(e,i,t)}));function bs(e,t){return(Hs(e)?Pt:Rn)(e,sr(t,3))}var ks=zo((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]})),Ts=Zn((function(e,t){if(null==e)return[];var i=t.length;return i>1&&yr(e,t[0],t[1])?t=[]:i>2&&yr(t[0],t[1],t[2])&&(t=[t[0]]),qn(e,mn(t,1),[])})),Ss=ct||function(){return ht.Date.now()};function Cs(e,t,i){return t=i?o:t,t=e&&null==t?e.length:t,Ko(e,c,o,o,o,o,t)}function Es(e,t){var i;if("function"!=typeof t)throw new Ee(r);return e=pa(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=o),i}}var As=Zn((function(e,t,i){var n=1;if(i.length){var o=si(i,rr(As));n|=l}return Ko(e,n,t,i,o)})),zs=Zn((function(e,t,i){var n=3;if(i.length){var o=si(i,rr(zs));n|=l}return Ko(t,n,e,i,o)}));function Ls(e,t,i){var n,s,a,l,c,u,h=0,d=!1,p=!1,g=!0;if("function"!=typeof e)throw new Ee(r);function m(t){var i=n,r=s;return n=s=o,h=t,l=e.apply(r,i)}function f(e){var i=e-u;return u===o||i>=t||i<0||p&&e-h>=a}function y(){var e=Ss();if(f(e))return v(e);c=Ar(y,function(e){var i=t-(e-u);return p?fi(i,a-(e-h)):i}(e))}function v(e){return c=o,g&&n?m(e):(n=s=o,l)}function _(){var e=Ss(),i=f(e);if(n=arguments,s=this,u=e,i){if(c===o)return function(e){return h=e,c=Ar(y,t),d?m(e):l}(u);if(p)return xo(c),c=Ar(y,t),m(u)}return c===o&&(c=Ar(y,t)),l}return t=ma(t)||0,Qs(i)&&(d=!!i.leading,a=(p="maxWait"in i)?mi(ma(i.maxWait)||0,t):a,g="trailing"in i?!!i.trailing:g),_.cancel=function(){c!==o&&xo(c),h=0,n=u=s=c=o},_.flush=function(){return c===o?l:v(Ss())},_}var Ps=Zn((function(e,t){return ln(e,1,t)})),Ms=Zn((function(e,t,i){return ln(e,ma(t)||0,i)}));function Is(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ee(r);var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=e.apply(this,n);return i.cache=r.set(o,s)||r,s};return i.cache=new(Is.Cache||Vi),i}function Os(e){if("function"!=typeof e)throw new Ee(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Is.Cache=Vi;var Ds=vo((function(e,t){var i=(t=1==t.length&&Hs(t[0])?Pt(t[0],Kt(sr())):Pt(mn(t,1),Kt(sr()))).length;return Zn((function(n){for(var o=-1,r=fi(n.length,i);++o<r;)n[o]=t[o].call(this,n[o]);return kt(e,this,n)}))})),Rs=Zn((function(e,t){var i=si(t,rr(Rs));return Ko(e,l,o,t,i)})),Bs=Zn((function(e,t){var i=si(t,rr(Bs));return Ko(e,64,o,t,i)})),Ns=er((function(e,t){return Ko(e,256,o,o,o,t)}));function js(e,t){return e===t||e!=e&&t!=t}var Fs=Vo(Tn),qs=Vo((function(e,t){return e>=t})),Us=zn(function(){return arguments}())?zn:function(e){return ea(e)&&Ie.call(e,"callee")&&!We.call(e,"callee")},Hs=n.isArray,Vs=yt?Kt(yt):function(e){return ea(e)&&kn(e)==P};function $s(e){return null!=e&&Xs(e.length)&&!Ys(e)}function Ws(e){return ea(e)&&$s(e)}var Zs=ft||ml,Gs=vt?Kt(vt):function(e){return ea(e)&&kn(e)==v};function Ks(e){if(!ea(e))return!1;var t=kn(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!na(e)}function Ys(e){if(!Qs(e))return!1;var t=kn(e);return t==x||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Js(e){return"number"==typeof e&&e==pa(e)}function Xs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function Qs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ea(e){return null!=e&&"object"==typeof e}var ta=_t?Kt(_t):function(e){return ea(e)&&dr(e)==b};function ia(e){return"number"==typeof e||ea(e)&&kn(e)==k}function na(e){if(!ea(e)||kn(e)!=T)return!1;var t=Ve(e);if(null===t)return!0;var i=Ie.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Me.call(i)==Be}var oa=xt?Kt(xt):function(e){return ea(e)&&kn(e)==C},ra=wt?Kt(wt):function(e){return ea(e)&&dr(e)==E};function sa(e){return"string"==typeof e||!Hs(e)&&ea(e)&&kn(e)==A}function aa(e){return"symbol"==typeof e||ea(e)&&kn(e)==z}var la=bt?Kt(bt):function(e){return ea(e)&&Xs(e.length)&&!!ot[kn(e)]},ca=Vo(Dn),ua=Vo((function(e,t){return e<=t}));function ha(e){if(!e)return[];if($s(e))return sa(e)?ui(e):Eo(e);if(Ke&&e[Ke])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[Ke]());var t=dr(e);return(t==b?oi:t==E?ai:ja)(e)}function da(e){return e?(e=ma(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function pa(e){var t=da(e),i=t%1;return t==t?i?t-i:t:0}function ga(e){return e?rn(pa(e),0,p):0}function ma(e){if("number"==typeof e)return e;if(aa(e))return d;if(Qs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var i=ge.test(e);return i||fe.test(e)?lt(e.slice(2),i?2:8):pe.test(e)?d:+e}function fa(e){return Ao(e,Pa(e))}function ya(e){return null==e?"":so(e)}var va=Lo((function(e,t){if(wr(t)||$s(t))Ao(t,La(t),e);else for(var i in t)Ie.call(t,i)&&Xi(e,i,t[i])})),_a=Lo((function(e,t){Ao(t,Pa(t),e)})),xa=Lo((function(e,t,i,n){Ao(t,Pa(t),e,n)})),wa=Lo((function(e,t,i,n){Ao(t,La(t),e,n)})),ba=er(on),ka=Zn((function(e,t){e=Te(e);var i=-1,n=t.length,r=n>2?t[2]:o;for(r&&yr(t[0],t[1],r)&&(n=1);++i<n;)for(var s=t[i],a=Pa(s),l=-1,c=a.length;++l<c;){var u=a[l],h=e[u];(h===o||js(h,Le[u])&&!Ie.call(e,u))&&(e[u]=s[u])}return e})),Ta=Zn((function(e){return e.push(o,Jo),kt(Ia,o,e)}));function Sa(e,t,i){var n=null==e?o:wn(e,t);return n===o?i:n}function Ca(e,t){return null!=e&&pr(e,t,Cn)}var Ea=jo((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Re.call(t)),e[t]=i}),Qa(il)),Aa=jo((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Re.call(t)),Ie.call(e,t)?e[t].push(i):e[t]=[i]}),sr),za=Zn(An);function La(e){return $s(e)?Zi(e):On(e)}function Pa(e){return $s(e)?Zi(e,!0):function(e){if(!Qs(e))return function(e){var t=[];if(null!=e)for(var i in Te(e))t.push(i);return t}(e);var t=wr(e),i=[];for(var n in e)("constructor"!=n||!t&&Ie.call(e,n))&&i.push(n);return i}(e)}var Ma=Lo((function(e,t,i){jn(e,t,i)})),Ia=Lo((function(e,t,i,n){jn(e,t,i,n)})),Oa=er((function(e,t){var i={};if(null==e)return i;var n=!1;t=Pt(t,(function(t){return t=yo(t,e),n||(n=t.length>1),t})),Ao(e,ir(e),i),n&&(i=sn(i,7,Xo));for(var o=t.length;o--;)lo(i,t[o]);return i})),Da=er((function(e,t){return null==e?{}:function(e,t){return Un(e,t,(function(t,i){return Ca(e,i)}))}(e,t)}));function Ra(e,t){if(null==e)return{};var i=Pt(ir(e),(function(e){return[e]}));return t=sr(t),Un(e,i,(function(e,i){return t(e,i[0])}))}var Ba=Go(La),Na=Go(Pa);function ja(e){return null==e?[]:Yt(e,La(e))}var Fa=Oo((function(e,t,i){return t=t.toLowerCase(),e+(i?qa(t):t)}));function qa(e){return Ka(ya(e).toLowerCase())}function Ua(e){return(e=ya(e))&&e.replace(ve,ei).replace(Je,"")}var Ha=Oo((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),Va=Oo((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),$a=Io("toLowerCase"),Wa=Oo((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()})),Za=Oo((function(e,t,i){return e+(i?" ":"")+Ka(t)})),Ga=Oo((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),Ka=Io("toUpperCase");function Ya(e,t,i){return e=ya(e),(t=i?o:t)===o?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var Ja=Zn((function(e,t){try{return kt(e,o,t)}catch(e){return Ks(e)?e:new we(e)}})),Xa=er((function(e,t){return St(t,(function(t){t=Rr(t),nn(e,t,As(e[t],e))})),e}));function Qa(e){return function(){return e}}var el=Bo(),tl=Bo(!0);function il(e){return e}function nl(e){return In("function"==typeof e?e:sn(e,1))}var ol=Zn((function(e,t){return function(i){return An(i,e,t)}})),rl=Zn((function(e,t){return function(i){return An(e,i,t)}}));function sl(e,t,i){var n=La(t),o=xn(t,n);null!=i||Qs(t)&&(o.length||!n.length)||(i=t,t=e,e=this,o=xn(t,La(t)));var r=!(Qs(i)&&"chain"in i&&!i.chain),s=Ys(e);return St(o,(function(i){var n=t[i];e[i]=n,s&&(e.prototype[i]=function(){var t=this.__chain__;if(r||t){var i=e(this.__wrapped__);return(i.__actions__=Eo(this.__actions__)).push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,Mt([this.value()],arguments))})})),e}function al(){}var ll=qo(Pt),cl=qo(Et),ul=qo(Dt);function hl(e){return vr(e)?Ht(Rr(e)):function(e){return function(t){return wn(t,e)}}(e)}var dl=Ho(),pl=Ho(!0);function gl(){return[]}function ml(){return!1}var fl,yl=Fo((function(e,t){return e+t}),0),vl=Wo("ceil"),_l=Fo((function(e,t){return e/t}),1),xl=Wo("floor"),wl=Fo((function(e,t){return e*t}),1),bl=Wo("round"),kl=Fo((function(e,t){return e-t}),0);return Bi.after=function(e,t){if("function"!=typeof t)throw new Ee(r);return e=pa(e),function(){if(--e<1)return t.apply(this,arguments)}},Bi.ary=Cs,Bi.assign=va,Bi.assignIn=_a,Bi.assignInWith=xa,Bi.assignWith=wa,Bi.at=ba,Bi.before=Es,Bi.bind=As,Bi.bindAll=Xa,Bi.bindKey=zs,Bi.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Hs(e)?e:[e]},Bi.chain=hs,Bi.chunk=function(e,t,i){t=(i?yr(e,t,i):t===o)?1:mi(pa(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var s=0,a=0,l=n(dt(r/t));s<r;)l[a++]=eo(e,s,s+=t);return l},Bi.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,o=[];++t<i;){var r=e[t];r&&(o[n++]=r)}return o},Bi.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Mt(Hs(i)?Eo(i):[i],mn(t,1))},Bi.cond=function(e){var t=null==e?0:e.length,i=sr();return e=t?Pt(e,(function(e){if("function"!=typeof e[1])throw new Ee(r);return[i(e[0]),e[1]]})):[],Zn((function(i){for(var n=-1;++n<t;){var o=e[n];if(kt(o[0],this,i))return kt(o[1],this,i)}}))},Bi.conforms=function(e){return function(e){var t=La(e);return function(i){return an(i,e,t)}}(sn(e,1))},Bi.constant=Qa,Bi.countBy=gs,Bi.create=function(e,t){var i=Ni(e);return null==t?i:tn(i,t)},Bi.curry=function e(t,i,n){var r=Ko(t,8,o,o,o,o,o,i=n?o:i);return r.placeholder=e.placeholder,r},Bi.curryRight=function e(t,i,n){var r=Ko(t,16,o,o,o,o,o,i=n?o:i);return r.placeholder=e.placeholder,r},Bi.debounce=Ls,Bi.defaults=ka,Bi.defaultsDeep=Ta,Bi.defer=Ps,Bi.delay=Ms,Bi.difference=jr,Bi.differenceBy=Fr,Bi.differenceWith=qr,Bi.drop=function(e,t,i){var n=null==e?0:e.length;return n?eo(e,(t=i||t===o?1:pa(t))<0?0:t,n):[]},Bi.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?eo(e,0,(t=n-(t=i||t===o?1:pa(t)))<0?0:t):[]},Bi.dropRightWhile=function(e,t){return e&&e.length?uo(e,sr(t,3),!0,!0):[]},Bi.dropWhile=function(e,t){return e&&e.length?uo(e,sr(t,3),!0):[]},Bi.fill=function(e,t,i,n){var r=null==e?0:e.length;return r?(i&&"number"!=typeof i&&yr(e,t,i)&&(i=0,n=r),function(e,t,i,n){var r=e.length;for((i=pa(i))<0&&(i=-i>r?0:r+i),(n=n===o||n>r?r:pa(n))<0&&(n+=r),n=i>n?0:ga(n);i<n;)e[i++]=t;return e}(e,t,i,n)):[]},Bi.filter=function(e,t){return(Hs(e)?At:gn)(e,sr(t,3))},Bi.flatMap=function(e,t){return mn(bs(e,t),1)},Bi.flatMapDeep=function(e,t){return mn(bs(e,t),u)},Bi.flatMapDepth=function(e,t,i){return i=i===o?1:pa(i),mn(bs(e,t),i)},Bi.flatten=Vr,Bi.flattenDeep=function(e){return null!=e&&e.length?mn(e,u):[]},Bi.flattenDepth=function(e,t){return null!=e&&e.length?mn(e,t=t===o?1:pa(t)):[]},Bi.flip=function(e){return Ko(e,512)},Bi.flow=el,Bi.flowRight=tl,Bi.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var o=e[t];n[o[0]]=o[1]}return n},Bi.functions=function(e){return null==e?[]:xn(e,La(e))},Bi.functionsIn=function(e){return null==e?[]:xn(e,Pa(e))},Bi.groupBy=_s,Bi.initial=function(e){return null!=e&&e.length?eo(e,0,-1):[]},Bi.intersection=Wr,Bi.intersectionBy=Zr,Bi.intersectionWith=Gr,Bi.invert=Ea,Bi.invertBy=Aa,Bi.invokeMap=xs,Bi.iteratee=nl,Bi.keyBy=ws,Bi.keys=La,Bi.keysIn=Pa,Bi.map=bs,Bi.mapKeys=function(e,t){var i={};return t=sr(t,3),vn(e,(function(e,n,o){nn(i,t(e,n,o),e)})),i},Bi.mapValues=function(e,t){var i={};return t=sr(t,3),vn(e,(function(e,n,o){nn(i,n,t(e,n,o))})),i},Bi.matches=function(e){return Bn(sn(e,1))},Bi.matchesProperty=function(e,t){return Nn(e,sn(t,1))},Bi.memoize=Is,Bi.merge=Ma,Bi.mergeWith=Ia,Bi.method=ol,Bi.methodOf=rl,Bi.mixin=sl,Bi.negate=Os,Bi.nthArg=function(e){return e=pa(e),Zn((function(t){return Fn(t,e)}))},Bi.omit=Oa,Bi.omitBy=function(e,t){return Ra(e,Os(sr(t)))},Bi.once=function(e){return Es(2,e)},Bi.orderBy=function(e,t,i,n){return null==e?[]:(Hs(t)||(t=null==t?[]:[t]),Hs(i=n?o:i)||(i=null==i?[]:[i]),qn(e,t,i))},Bi.over=ll,Bi.overArgs=Ds,Bi.overEvery=cl,Bi.overSome=ul,Bi.partial=Rs,Bi.partialRight=Bs,Bi.partition=ks,Bi.pick=Da,Bi.pickBy=Ra,Bi.property=hl,Bi.propertyOf=function(e){return function(t){return null==e?o:wn(e,t)}},Bi.pull=Yr,Bi.pullAll=Jr,Bi.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Hn(e,t,sr(i,2)):e},Bi.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?Hn(e,t,o,i):e},Bi.pullAt=Xr,Bi.range=dl,Bi.rangeRight=pl,Bi.rearg=Ns,Bi.reject=function(e,t){return(Hs(e)?At:gn)(e,Os(sr(t,3)))},Bi.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,o=[],r=e.length;for(t=sr(t,3);++n<r;){var s=e[n];t(s,n,e)&&(i.push(s),o.push(n))}return Vn(e,o),i},Bi.rest=function(e,t){if("function"!=typeof e)throw new Ee(r);return Zn(e,t=t===o?t:pa(t))},Bi.reverse=Qr,Bi.sampleSize=function(e,t,i){return t=(i?yr(e,t,i):t===o)?1:pa(t),(Hs(e)?Ki:Kn)(e,t)},Bi.set=function(e,t,i){return null==e?e:Yn(e,t,i)},Bi.setWith=function(e,t,i,n){return n="function"==typeof n?n:o,null==e?e:Yn(e,t,i,n)},Bi.shuffle=function(e){return(Hs(e)?Yi:Qn)(e)},Bi.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&yr(e,t,i)?(t=0,i=n):(t=null==t?0:pa(t),i=i===o?n:pa(i)),eo(e,t,i)):[]},Bi.sortBy=Ts,Bi.sortedUniq=function(e){return e&&e.length?oo(e):[]},Bi.sortedUniqBy=function(e,t){return e&&e.length?oo(e,sr(t,2)):[]},Bi.split=function(e,t,i){return i&&"number"!=typeof i&&yr(e,t,i)&&(t=i=o),(i=i===o?p:i>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=so(t))&&ni(e)?_o(ui(e),0,i):e.split(t,i):[]},Bi.spread=function(e,t){if("function"!=typeof e)throw new Ee(r);return t=null==t?0:mi(pa(t),0),Zn((function(i){var n=i[t],o=_o(i,0,t);return n&&Mt(o,n),kt(e,this,o)}))},Bi.tail=function(e){var t=null==e?0:e.length;return t?eo(e,1,t):[]},Bi.take=function(e,t,i){return e&&e.length?eo(e,0,(t=i||t===o?1:pa(t))<0?0:t):[]},Bi.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?eo(e,(t=n-(t=i||t===o?1:pa(t)))<0?0:t,n):[]},Bi.takeRightWhile=function(e,t){return e&&e.length?uo(e,sr(t,3),!1,!0):[]},Bi.takeWhile=function(e,t){return e&&e.length?uo(e,sr(t,3)):[]},Bi.tap=function(e,t){return t(e),e},Bi.throttle=function(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new Ee(r);return Qs(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),Ls(e,t,{leading:n,maxWait:t,trailing:o})},Bi.thru=ds,Bi.toArray=ha,Bi.toPairs=Ba,Bi.toPairsIn=Na,Bi.toPath=function(e){return Hs(e)?Pt(e,Rr):aa(e)?[e]:Eo(Dr(ya(e)))},Bi.toPlainObject=fa,Bi.transform=function(e,t,i){var n=Hs(e),o=n||Zs(e)||la(e);if(t=sr(t,4),null==i){var r=e&&e.constructor;i=o?n?new r:[]:Qs(e)&&Ys(r)?Ni(Ve(e)):{}}return(o?St:vn)(e,(function(e,n,o){return t(i,e,n,o)})),i},Bi.unary=function(e){return Cs(e,1)},Bi.union=es,Bi.unionBy=ts,Bi.unionWith=is,Bi.uniq=function(e){return e&&e.length?ao(e):[]},Bi.uniqBy=function(e,t){return e&&e.length?ao(e,sr(t,2)):[]},Bi.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?ao(e,o,t):[]},Bi.unset=function(e,t){return null==e||lo(e,t)},Bi.unzip=ns,Bi.unzipWith=os,Bi.update=function(e,t,i){return null==e?e:co(e,t,fo(i))},Bi.updateWith=function(e,t,i,n){return n="function"==typeof n?n:o,null==e?e:co(e,t,fo(i),n)},Bi.values=ja,Bi.valuesIn=function(e){return null==e?[]:Yt(e,Pa(e))},Bi.without=rs,Bi.words=Ya,Bi.wrap=function(e,t){return Rs(fo(t),e)},Bi.xor=ss,Bi.xorBy=as,Bi.xorWith=ls,Bi.zip=cs,Bi.zipObject=function(e,t){return go(e||[],t||[],Xi)},Bi.zipObjectDeep=function(e,t){return go(e||[],t||[],Yn)},Bi.zipWith=us,Bi.entries=Ba,Bi.entriesIn=Na,Bi.extend=_a,Bi.extendWith=xa,sl(Bi,Bi),Bi.add=yl,Bi.attempt=Ja,Bi.camelCase=Fa,Bi.capitalize=qa,Bi.ceil=vl,Bi.clamp=function(e,t,i){return i===o&&(i=t,t=o),i!==o&&(i=(i=ma(i))==i?i:0),t!==o&&(t=(t=ma(t))==t?t:0),rn(ma(e),t,i)},Bi.clone=function(e){return sn(e,4)},Bi.cloneDeep=function(e){return sn(e,5)},Bi.cloneDeepWith=function(e,t){return sn(e,5,t="function"==typeof t?t:o)},Bi.cloneWith=function(e,t){return sn(e,4,t="function"==typeof t?t:o)},Bi.conformsTo=function(e,t){return null==t||an(e,t,La(t))},Bi.deburr=Ua,Bi.defaultTo=function(e,t){return null==e||e!=e?t:e},Bi.divide=_l,Bi.endsWith=function(e,t,i){e=ya(e),t=so(t);var n=e.length,r=i=i===o?n:rn(pa(i),0,n);return(i-=t.length)>=0&&e.slice(i,r)==t},Bi.eq=js,Bi.escape=function(e){return(e=ya(e))&&G.test(e)?e.replace(W,ti):e},Bi.escapeRegExp=function(e){return(e=ya(e))&&ie.test(e)?e.replace(te,"\\$&"):e},Bi.every=function(e,t,i){var n=Hs(e)?Et:dn;return i&&yr(e,t,i)&&(t=o),n(e,sr(t,3))},Bi.find=ms,Bi.findIndex=Ur,Bi.findKey=function(e,t){return Bt(e,sr(t,3),vn)},Bi.findLast=fs,Bi.findLastIndex=Hr,Bi.findLastKey=function(e,t){return Bt(e,sr(t,3),_n)},Bi.floor=xl,Bi.forEach=ys,Bi.forEachRight=vs,Bi.forIn=function(e,t){return null==e?e:fn(e,sr(t,3),Pa)},Bi.forInRight=function(e,t){return null==e?e:yn(e,sr(t,3),Pa)},Bi.forOwn=function(e,t){return e&&vn(e,sr(t,3))},Bi.forOwnRight=function(e,t){return e&&_n(e,sr(t,3))},Bi.get=Sa,Bi.gt=Fs,Bi.gte=qs,Bi.has=function(e,t){return null!=e&&pr(e,t,Sn)},Bi.hasIn=Ca,Bi.head=$r,Bi.identity=il,Bi.includes=function(e,t,i,n){e=$s(e)?e:ja(e),i=i&&!n?pa(i):0;var o=e.length;return i<0&&(i=mi(o+i,0)),sa(e)?i<=o&&e.indexOf(t,i)>-1:!!o&&jt(e,t,i)>-1},Bi.indexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:pa(i);return o<0&&(o=mi(n+o,0)),jt(e,t,o)},Bi.inRange=function(e,t,i){return t=da(t),i===o?(i=t,t=0):i=da(i),function(e,t,i){return e>=fi(t,i)&&e<mi(t,i)}(e=ma(e),t,i)},Bi.invoke=za,Bi.isArguments=Us,Bi.isArray=Hs,Bi.isArrayBuffer=Vs,Bi.isArrayLike=$s,Bi.isArrayLikeObject=Ws,Bi.isBoolean=function(e){return!0===e||!1===e||ea(e)&&kn(e)==y},Bi.isBuffer=Zs,Bi.isDate=Gs,Bi.isElement=function(e){return ea(e)&&1===e.nodeType&&!na(e)},Bi.isEmpty=function(e){if(null==e)return!0;if($s(e)&&(Hs(e)||"string"==typeof e||"function"==typeof e.splice||Zs(e)||la(e)||Us(e)))return!e.length;var t=dr(e);if(t==b||t==E)return!e.size;if(wr(e))return!On(e).length;for(var i in e)if(Ie.call(e,i))return!1;return!0},Bi.isEqual=function(e,t){return Ln(e,t)},Bi.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:o)?i(e,t):o;return n===o?Ln(e,t,o,i):!!n},Bi.isError=Ks,Bi.isFinite=function(e){return"number"==typeof e&&Rt(e)},Bi.isFunction=Ys,Bi.isInteger=Js,Bi.isLength=Xs,Bi.isMap=ta,Bi.isMatch=function(e,t){return e===t||Pn(e,t,lr(t))},Bi.isMatchWith=function(e,t,i){return i="function"==typeof i?i:o,Pn(e,t,lr(t),i)},Bi.isNaN=function(e){return ia(e)&&e!=+e},Bi.isNative=function(e){if(xr(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mn(e)},Bi.isNil=function(e){return null==e},Bi.isNull=function(e){return null===e},Bi.isNumber=ia,Bi.isObject=Qs,Bi.isObjectLike=ea,Bi.isPlainObject=na,Bi.isRegExp=oa,Bi.isSafeInteger=function(e){return Js(e)&&e>=-9007199254740991&&e<=h},Bi.isSet=ra,Bi.isString=sa,Bi.isSymbol=aa,Bi.isTypedArray=la,Bi.isUndefined=function(e){return e===o},Bi.isWeakMap=function(e){return ea(e)&&dr(e)==L},Bi.isWeakSet=function(e){return ea(e)&&"[object WeakSet]"==kn(e)},Bi.join=function(e,t){return null==e?"":Vt.call(e,t)},Bi.kebabCase=Ha,Bi.last=Kr,Bi.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n;return i!==o&&(r=(r=pa(i))<0?mi(n+r,0):fi(r,n-1)),t==t?function(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}(e,t,r):Nt(e,qt,r,!0)},Bi.lowerCase=Va,Bi.lowerFirst=$a,Bi.lt=ca,Bi.lte=ua,Bi.max=function(e){return e&&e.length?pn(e,il,Tn):o},Bi.maxBy=function(e,t){return e&&e.length?pn(e,sr(t,2),Tn):o},Bi.mean=function(e){return Ut(e,il)},Bi.meanBy=function(e,t){return Ut(e,sr(t,2))},Bi.min=function(e){return e&&e.length?pn(e,il,Dn):o},Bi.minBy=function(e,t){return e&&e.length?pn(e,sr(t,2),Dn):o},Bi.stubArray=gl,Bi.stubFalse=ml,Bi.stubObject=function(){return{}},Bi.stubString=function(){return""},Bi.stubTrue=function(){return!0},Bi.multiply=wl,Bi.nth=function(e,t){return e&&e.length?Fn(e,pa(t)):o},Bi.noConflict=function(){return ht._===this&&(ht._=Ne),this},Bi.noop=al,Bi.now=Ss,Bi.pad=function(e,t,i){e=ya(e);var n=(t=pa(t))?ci(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return Uo(pt(o),i)+e+Uo(dt(o),i)},Bi.padEnd=function(e,t,i){e=ya(e);var n=(t=pa(t))?ci(e):0;return t&&n<t?e+Uo(t-n,i):e},Bi.padStart=function(e,t,i){e=ya(e);var n=(t=pa(t))?ci(e):0;return t&&n<t?Uo(t-n,i)+e:e},Bi.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),vi(ya(e).replace(ne,""),t||0)},Bi.random=function(e,t,i){if(i&&"boolean"!=typeof i&&yr(e,t,i)&&(t=i=o),i===o&&("boolean"==typeof t?(i=t,t=o):"boolean"==typeof e&&(i=e,e=o)),e===o&&t===o?(e=0,t=1):(e=da(e),t===o?(t=e,e=0):t=da(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var r=_i();return fi(e+r*(t-e+at("1e-"+((r+"").length-1))),t)}return $n(e,t)},Bi.reduce=function(e,t,i){var n=Hs(e)?It:$t,o=arguments.length<3;return n(e,sr(t,4),i,o,un)},Bi.reduceRight=function(e,t,i){var n=Hs(e)?Ot:$t,o=arguments.length<3;return n(e,sr(t,4),i,o,hn)},Bi.repeat=function(e,t,i){return t=(i?yr(e,t,i):t===o)?1:pa(t),Wn(ya(e),t)},Bi.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bi.result=function(e,t,i){var n=-1,r=(t=yo(t,e)).length;for(r||(r=1,e=o);++n<r;){var s=null==e?o:e[Rr(t[n])];s===o&&(n=r,s=i),e=Ys(s)?s.call(e):s}return e},Bi.round=bl,Bi.runInContext=e,Bi.sample=function(e){return(Hs(e)?Gi:Gn)(e)},Bi.size=function(e){if(null==e)return 0;if($s(e))return sa(e)?ci(e):e.length;var t=dr(e);return t==b||t==E?e.size:On(e).length},Bi.snakeCase=Wa,Bi.some=function(e,t,i){var n=Hs(e)?Dt:to;return i&&yr(e,t,i)&&(t=o),n(e,sr(t,3))},Bi.sortedIndex=function(e,t){return io(e,t)},Bi.sortedIndexBy=function(e,t,i){return no(e,t,sr(i,2))},Bi.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=io(e,t);if(n<i&&js(e[n],t))return n}return-1},Bi.sortedLastIndex=function(e,t){return io(e,t,!0)},Bi.sortedLastIndexBy=function(e,t,i){return no(e,t,sr(i,2),!0)},Bi.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var i=io(e,t,!0)-1;if(js(e[i],t))return i}return-1},Bi.startCase=Za,Bi.startsWith=function(e,t,i){return e=ya(e),i=null==i?0:rn(pa(i),0,e.length),t=so(t),e.slice(i,i+t.length)==t},Bi.subtract=kl,Bi.sum=function(e){return e&&e.length?Wt(e,il):0},Bi.sumBy=function(e,t){return e&&e.length?Wt(e,sr(t,2)):0},Bi.template=function(e,t,i){var n=Bi.templateSettings;i&&yr(e,t,i)&&(t=o),e=ya(e),t=xa({},t,n,Yo);var r,s,a=xa({},t.imports,n.imports,Yo),l=La(a),c=Yt(a,l),u=0,h=t.interpolate||_e,d="__p += '",p=Se((t.escape||_e).source+"|"+h.source+"|"+(h===J?he:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),g="//# sourceURL="+(Ie.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";e.replace(p,(function(t,i,n,o,a,l){return n||(n=o),d+=e.slice(u,l).replace(xe,ii),i&&(r=!0,d+="' +\n__e("+i+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var m=Ie.call(t,"variable")&&t.variable;if(m){if(ce.test(m))throw new we("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(U,""):d).replace(H,"$1").replace(V,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var f=Ja((function(){return be(l,g+"return "+d).apply(o,c)}));if(f.source=d,Ks(f))throw f;return f},Bi.times=function(e,t){if((e=pa(e))<1||e>h)return[];var i=p,n=fi(e,p);t=sr(t),e-=p;for(var o=Zt(n,t);++i<e;)t(i);return o},Bi.toFinite=da,Bi.toInteger=pa,Bi.toLength=ga,Bi.toLower=function(e){return ya(e).toLowerCase()},Bi.toNumber=ma,Bi.toSafeInteger=function(e){return e?rn(pa(e),-9007199254740991,h):0===e?e:0},Bi.toString=ya,Bi.toUpper=function(e){return ya(e).toUpperCase()},Bi.trim=function(e,t,i){if((e=ya(e))&&(i||t===o))return Gt(e);if(!e||!(t=so(t)))return e;var n=ui(e),r=ui(t);return _o(n,Xt(n,r),Qt(n,r)+1).join("")},Bi.trimEnd=function(e,t,i){if((e=ya(e))&&(i||t===o))return e.slice(0,hi(e)+1);if(!e||!(t=so(t)))return e;var n=ui(e);return _o(n,0,Qt(n,ui(t))+1).join("")},Bi.trimStart=function(e,t,i){if((e=ya(e))&&(i||t===o))return e.replace(ne,"");if(!e||!(t=so(t)))return e;var n=ui(e);return _o(n,Xt(n,ui(t))).join("")},Bi.truncate=function(e,t){var i=30,n="...";if(Qs(t)){var r="separator"in t?t.separator:r;i="length"in t?pa(t.length):i,n="omission"in t?so(t.omission):n}var s=(e=ya(e)).length;if(ni(e)){var a=ui(e);s=a.length}if(i>=s)return e;var l=i-ci(n);if(l<1)return n;var c=a?_o(a,0,l).join(""):e.slice(0,l);if(r===o)return c+n;if(a&&(l+=c.length-l),oa(r)){if(e.slice(l).search(r)){var u,h=c;for(r.global||(r=Se(r.source,ya(de.exec(r))+"g")),r.lastIndex=0;u=r.exec(h);)var d=u.index;c=c.slice(0,d===o?l:d)}}else if(e.indexOf(so(r),l)!=l){var p=c.lastIndexOf(r);p>-1&&(c=c.slice(0,p))}return c+n},Bi.unescape=function(e){return(e=ya(e))&&Z.test(e)?e.replace($,di):e},Bi.uniqueId=function(e){var t=++Oe;return ya(e)+t},Bi.upperCase=Ga,Bi.upperFirst=Ka,Bi.each=ys,Bi.eachRight=vs,Bi.first=$r,sl(Bi,(fl={},vn(Bi,(function(e,t){Ie.call(Bi.prototype,t)||(fl[t]=e)})),fl),{chain:!1}),Bi.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bi[e].placeholder=Bi})),St(["drop","take"],(function(e,t){qi.prototype[e]=function(i){i=i===o?1:mi(pa(i),0);var n=this.__filtered__&&!t?new qi(this):this.clone();return n.__filtered__?n.__takeCount__=fi(i,n.__takeCount__):n.__views__.push({size:fi(i,p),type:e+(n.__dir__<0?"Right":"")}),n},qi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),St(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;qi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:sr(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),St(["head","last"],(function(e,t){var i="take"+(t?"Right":"");qi.prototype[e]=function(){return this[i](1).value()[0]}})),St(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");qi.prototype[e]=function(){return this.__filtered__?new qi(this):this[i](1)}})),qi.prototype.compact=function(){return this.filter(il)},qi.prototype.find=function(e){return this.filter(e).head()},qi.prototype.findLast=function(e){return this.reverse().find(e)},qi.prototype.invokeMap=Zn((function(e,t){return"function"==typeof e?new qi(this):this.map((function(i){return An(i,e,t)}))})),qi.prototype.reject=function(e){return this.filter(Os(sr(e)))},qi.prototype.slice=function(e,t){e=pa(e);var i=this;return i.__filtered__&&(e>0||t<0)?new qi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==o&&(i=(t=pa(t))<0?i.dropRight(-t):i.take(t-e)),i)},qi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},qi.prototype.toArray=function(){return this.take(p)},vn(qi.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),r=Bi[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);r&&(Bi.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,l=t instanceof qi,c=a[0],u=l||Hs(t),h=function(e){var t=r.apply(Bi,Mt([e],a));return n&&d?t[0]:t};u&&i&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,p=!!this.__actions__.length,g=s&&!d,m=l&&!p;if(!s&&u){t=m?t:new qi(this);var f=e.apply(t,a);return f.__actions__.push({func:ds,args:[h],thisArg:o}),new Fi(f,d)}return g&&m?e.apply(this,a):(f=this.thru(h),g?n?f.value()[0]:f.value():f)})})),St(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Bi.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(Hs(o)?o:[],e)}return this[i]((function(i){return t.apply(Hs(i)?i:[],e)}))}})),vn(qi.prototype,(function(e,t){var i=Bi[t];if(i){var n=i.name+"";Ie.call(Ai,n)||(Ai[n]=[]),Ai[n].push({name:t,func:i})}})),Ai[No(o,2).name]=[{name:"wrapper",func:o}],qi.prototype.clone=function(){var e=new qi(this.__wrapped__);return e.__actions__=Eo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Eo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Eo(this.__views__),e},qi.prototype.reverse=function(){if(this.__filtered__){var e=new qi(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},qi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=Hs(e),n=t<0,o=i?e.length:0,r=function(e,t,i){for(var n=-1,o=i.length;++n<o;){var r=i[n],s=r.size;switch(r.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=fi(t,e+s);break;case"takeRight":e=mi(e,t-s)}}return{start:e,end:t}}(0,o,this.__views__),s=r.start,a=r.end,l=a-s,c=n?a:s-1,u=this.__iteratees__,h=u.length,d=0,p=fi(l,this.__takeCount__);if(!i||!n&&o==l&&p==l)return ho(e,this.__actions__);var g=[];e:for(;l--&&d<p;){for(var m=-1,f=e[c+=t];++m<h;){var y=u[m],v=y.iteratee,_=y.type,x=v(f);if(2==_)f=x;else if(!x){if(1==_)continue e;break e}}g[d++]=f}return g},Bi.prototype.at=ps,Bi.prototype.chain=function(){return hs(this)},Bi.prototype.commit=function(){return new Fi(this.value(),this.__chain__)},Bi.prototype.next=function(){this.__values__===o&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},Bi.prototype.plant=function(e){for(var t,i=this;i instanceof ji;){var n=Nr(i);n.__index__=0,n.__values__=o,t?r.__wrapped__=n:t=n;var r=n;i=i.__wrapped__}return r.__wrapped__=e,t},Bi.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof qi){var t=e;return this.__actions__.length&&(t=new qi(this)),(t=t.reverse()).__actions__.push({func:ds,args:[Qr],thisArg:o}),new Fi(t,this.__chain__)}return this.thru(Qr)},Bi.prototype.toJSON=Bi.prototype.valueOf=Bi.prototype.value=function(){return ho(this.__wrapped__,this.__actions__)},Bi.prototype.first=Bi.prototype.head,Ke&&(Bi.prototype[Ke]=function(){return this}),Bi}();ht._=pi,(n=function(){return pi}.call(t,i,t,e))===o||(e.exports=n)}.call(this)},6223:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,i){return 0===e&&0===i?1/e==1/i:e===i||!(!t(e)||!t(i))}},9513:(e,t,i)=>{"use strict";var n=i(5144),o=i(8179),r=i(6223),s=i(3809),a=i(2700),l=o(s(),Object);n(l,{getPolyfill:s,implementation:r,shim:a}),e.exports=l},3809:(e,t,i)=>{"use strict";var n=i(6223);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},2700:(e,t,i)=>{"use strict";var n=i(3809),o=i(5144);e.exports=function(){var e=n();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},1895:(e,t,i)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,s=i(8825),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,i="[object Function]"===r.call(e),n=s(e),a=t&&"[object String]"===r.call(e),d=[];if(!t&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var g=c&&i;if(a&&e.length>0&&!o.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(n&&e.length>0)for(var f=0;f<e.length;++f)d.push(String(f));else for(var y in e)g&&"prototype"===y||!o.call(e,y)||d.push(String(y));if(l)for(var v=function(e){if("undefined"==typeof window||!p)return h(e);try{return h(e)}catch(e){return!1}}(e),_=0;_<u.length;++_)v&&"constructor"===u[_]||!o.call(e,u[_])||d.push(u[_]);return d}}e.exports=n},3425:(e,t,i)=>{"use strict";var n=Array.prototype.slice,o=i(8825),r=Object.keys,s=r?function(e){return r(e)}:i(1895),a=Object.keys;s.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?a(n.call(e)):a(e)})}else Object.keys=s;return Object.keys||s},e.exports=s},8825:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var i=t.call(e),n="[object Arguments]"===i;return n||(n="[object Array]"!==i&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},8599:(e,t,i)=>{"use strict";var n=i(3425),o=i(4361)(),r=i(9343),s=Object,a=r("Array.prototype.push"),l=r("Object.prototype.propertyIsEnumerable"),c=o?Object.getOwnPropertySymbols:null;e.exports=function(e,t){if(null==e)throw new TypeError("target must be an object");var i=s(e);if(1===arguments.length)return i;for(var r=1;r<arguments.length;++r){var u=s(arguments[r]),h=n(u),d=o&&(Object.getOwnPropertySymbols||c);if(d)for(var p=d(u),g=0;g<p.length;++g){var m=p[g];l(u,m)&&a(h,m)}for(var f=0;f<h.length;++f){var y=h[f];if(l(u,y)){var v=u[y];i[y]=v}}}return i}},8662:(e,t,i)=>{"use strict";var n=i(8599);e.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),i={},n=0;n<t.length;++n)i[t[n]]=t[n];var o=Object.assign({},i),r="";for(var s in o)r+=s;return e!==r}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?n:Object.assign:n}},6350:e=>{"use strict";e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},8538:e=>{var t,i,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var a,l=[],c=!1,u=-1;function h(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new p(e,t)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},8973:(e,t,i)=>{"use strict";var n=i(8897),o=i(9381),r=i(6900)(),s=i(1399),a=i(1711),l=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,c=!0;if("length"in e&&s){var u=s(e,"length");u&&!u.configurable&&(n=!1),u&&!u.writable&&(c=!1)}return(n||c||!i)&&(r?o(e,"length",t,!0,!0):o(e,"length",t)),e}},5171:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},1028:(e,t,i)=>{"use strict";var n=i(5456),o=i(6940),r=i(6059),s=i(2116);function a(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=a(Object.prototype.toString),h=a(Number.prototype.valueOf),d=a(String.prototype.valueOf),p=a(Boolean.prototype.valueOf);if(l)var g=a(BigInt.prototype.valueOf);if(c)var m=a(Symbol.prototype.valueOf);function f(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===u(e)}function v(e){return"[object Set]"===u(e)}function _(e){return"[object WeakMap]"===u(e)}function x(e){return"[object WeakSet]"===u(e)}function w(e){return"[object ArrayBuffer]"===u(e)}function b(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function k(e){return"[object DataView]"===u(e)}function T(e){return"undefined"!=typeof DataView&&(k.working?k(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||T(e)},t.isUint8Array=function(e){return"Uint8Array"===r(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===r(e)},t.isUint16Array=function(e){return"Uint16Array"===r(e)},t.isUint32Array=function(e){return"Uint32Array"===r(e)},t.isInt8Array=function(e){return"Int8Array"===r(e)},t.isInt16Array=function(e){return"Int16Array"===r(e)},t.isInt32Array=function(e){return"Int32Array"===r(e)},t.isFloat32Array=function(e){return"Float32Array"===r(e)},t.isFloat64Array=function(e){return"Float64Array"===r(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===r(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===r(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},_.working="undefined"!=typeof WeakMap&&_(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(_.working?_(e):e instanceof WeakMap)},x.working="undefined"!=typeof WeakSet&&x(new WeakSet),t.isWeakSet=function(e){return x(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=b,k.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&k(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=T;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function C(e){return"[object SharedArrayBuffer]"===u(e)}function E(e){return void 0!==S&&(void 0===C.working&&(C.working=C(new S)),C.working?C(e):e instanceof S)}function A(e){return f(e,h)}function z(e){return f(e,d)}function L(e){return f(e,p)}function P(e){return l&&f(e,g)}function M(e){return c&&f(e,m)}t.isSharedArrayBuffer=E,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=A,t.isStringObject=z,t.isBooleanObject=L,t.isBigIntObject=P,t.isSymbolObject=M,t.isBoxedPrimitive=function(e){return A(e)||z(e)||L(e)||P(e)||M(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(b(e)||E(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},7877:(e,t,i)=>{var n=i(8538),o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++)i[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return i},r=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(c(arguments[i]));return t.join(" ")}i=1;for(var n=arguments,o=n.length,s=String(e).replace(r,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}})),a=n[i];i<o;a=n[++i])y(a)||!b(a)?s+=" "+a:s+=" "+c(a);return s},t.deprecate=function(e,i){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,i).apply(this,arguments)};var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var s={},a=/^$/;if(n.env.NODE_DEBUG){var l=n.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+l+"$","i")}function c(e,i){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(i)?n.showHidden=i:i&&t._extend(n,i),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),d(n,e,n.depth)}function u(e,t){var i=c.styles[t];return i?"["+c.colors[i][0]+"m"+e+"["+c.colors[i][1]+"m":e}function h(e,t){return e}function d(e,i,n){if(e.customInspect&&i&&S(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var o=i.inspect(n,e);return _(o)||(o=d(e,o,n)),o}var r=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(_(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return v(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}(e,i);if(r)return r;var s=Object.keys(i),a=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(i)),T(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(i);if(0===s.length){if(S(i)){var l=i.name?": "+i.name:"";return e.stylize("[Function"+l+"]","special")}if(w(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(k(i))return e.stylize(Date.prototype.toString.call(i),"date");if(T(i))return p(i)}var c,u="",h=!1,b=["{","}"];return m(i)&&(h=!0,b=["[","]"]),S(i)&&(u=" [Function"+(i.name?": "+i.name:"")+"]"),w(i)&&(u=" "+RegExp.prototype.toString.call(i)),k(i)&&(u=" "+Date.prototype.toUTCString.call(i)),T(i)&&(u=" "+p(i)),0!==s.length||h&&0!=i.length?n<0?w(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),c=h?function(e,t,i,n,o){for(var r=[],s=0,a=t.length;s<a;++s)z(t,String(s))?r.push(g(e,t,i,n,String(s),!0)):r.push("");return o.forEach((function(o){o.match(/^\d+$/)||r.push(g(e,t,i,n,o,!0))})),r}(e,i,n,a,s):s.map((function(t){return g(e,i,n,a,t,h)})),e.seen.pop(),function(e,t,i){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}(c,u,b)):b[0]+u+b[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,i,n,o,r){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),z(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(l.value)<0?(a=y(i)?d(e,l.value,null):d(e,l.value,i-1)).indexOf("\n")>-1&&(a=r?a.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),x(s)){if(r&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function m(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return"number"==typeof e}function _(e){return"string"==typeof e}function x(e){return void 0===e}function w(e){return b(e)&&"[object RegExp]"===C(e)}function b(e){return"object"==typeof e&&null!==e}function k(e){return b(e)&&"[object Date]"===C(e)}function T(e){return b(e)&&("[object Error]"===C(e)||e instanceof Error)}function S(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(a.test(e)){var i=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,i,n)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=i(1028),t.isArray=m,t.isBoolean=f,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=_,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=x,t.isRegExp=w,t.types.isRegExp=w,t.isObject=b,t.isDate=k,t.types.isDate=k,t.isError=T,t.types.isNativeError=T,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i(5171);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,i;console.log("%s - %s",(i=[E((e=new Date).getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":"),[e.getDate(),A[e.getMonth()],i].join(" ")),t.format.apply(t,arguments))},t.inherits=i(198),t._extend=function(e,t){if(!t||!b(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e};var L="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e,e=i}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(L&&e[L]){var t;if("function"!=typeof(t=e[L]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,i,n=new Promise((function(e,n){t=e,i=n})),o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);o.push((function(e,n){e?i(e):t(n)}));try{e.apply(this,o)}catch(e){i(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),L&&Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=L,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);var o=t.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var r=this,s=function(){return o.apply(r,arguments)};e.apply(this,t).then((function(e){n.nextTick(s.bind(null,null,e))}),(function(e){n.nextTick(P.bind(null,e,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,o(e)),t}},6059:(e,t,i)=>{"use strict";var n=i(7270),o=i(2847),r=i(8179),s=i(9343),a=i(1399),l=s("Object.prototype.toString"),c=i(1432)(),u="undefined"==typeof globalThis?global:globalThis,h=o(),d=s("String.prototype.slice"),p=Object.getPrototypeOf,g=s("Array.prototype.indexOf",!0)||function(e,t){for(var i=0;i<e.length;i+=1)if(e[i]===t)return i;return-1},m={__proto__:null};n(h,c&&a&&p?function(e){var t=new u[e];if(Symbol.toStringTag in t){var i=p(t),n=a(i,Symbol.toStringTag);if(!n){var o=p(i);n=a(o,Symbol.toStringTag)}m["$"+e]=r(n.get)}}:function(e){var t=new u[e],i=t.slice||t.set;i&&(m["$"+e]=r(i))}),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c){var t=d(l(e),8,-1);return g(h,t)>-1?t:"Object"===t&&function(e){var t=!1;return n(m,(function(i,n){if(!t)try{i(e),t=d(n,1)}catch(e){}})),t}(e)}return a?function(e){var t=!1;return n(m,(function(i,n){if(!t)try{"$"+i(e)===n&&(t=d(n,1))}catch(e){}})),t}(e):null}},2847:(e,t,i)=>{"use strict";var n=i(6350),o="undefined"==typeof globalThis?global:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n={};return(()=>{"use strict";var e;i.r(n),function(e){function t(e,t=(()=>null)){let i=localStorage.getItem(e);return null==i?t():JSON.parse(i)}function i(e,t){localStorage.setItem(e,JSON.stringify(t))}e.get=t,e.set=i,e.Variable=class{constructor(e,i){this.key=e,this.value=null,this.value=t(e,i)}get(){return this.value}set(e){this.value=e,i(this.key,e)}map(e){let t=this.get(),i=e(this.get());null==i&&(i=t),this.set(i)}save(){i(this.key,this.value)}}}(e||(e={}));var t=i(1234),o=i(7243);class r{constructor(...e){this.templates={};for(let t of e)this.templates[t.name]=t}with(...e){let t=this.copy();for(let i of e)t.templates[i.name]=i;return t}resolve(e){const t=r.Expression.parse(e,this.templates);return r.Expression.evaluate(t).map(r.Value.asAppendable)}copy(){return new r(...Object.values(this.templates))}}!function(e){let i,n;e.ExpressionType=["safestring","application","domelement","error"],function(e){e.asAppendable=function(e){switch(e.type){case"safestring":case"domelement":return e.value;case"error":return"ERROR"}}}(i=e.Value||(e.Value={})),e.Concat={name:"concat",apply:e=>{const t=[];let i=[];function n(){if(i.length>0){let e=t.length>0?"&nbsp;":"";e+=i.map((e=>e.value)).join(" "),e+="&nbsp;",t.push({type:"safestring",value:e}),i=[]}}for(const o of e)switch(o.type){case"safestring":i.push(o);break;case"domelement":n(),t.push(o)}return n(),t}},e.Unknown={name:"Unknown",apply:()=>[{type:"safestring",value:"UNKNOWN FUNCTION"}]},function(i){i.evaluate=function t(i){var n;try{if("application"===i.type){const o=i.arguments.flatMap((e=>t(e)));return(null!==(n=i.function)&&void 0!==n?n:e.Unknown).apply(o)}return[i]}catch(e){return[{type:"error",message:e.toString()}]}},i.parse=function(i,n){const r=function(e){let i=[],n=0;for(;n<e.length;){if(e.startsWith("{{",n))i.push("open"),n+=2;else if(e.startsWith("}}",n))i.push("close"),n+=2;else{let r=Math.min(...[e.indexOf(" ",n),e.indexOf("{{",n),e.indexOf("}}",n)].filter((e=>e>0)));r<0&&(r=e.length),i.push({type:"safestring",value:t.sanitize(o.escape(e.substring(n,r).trimEnd()))}),n=r}for(;" "==e.charAt(n);)n++}return i}(i);let s=0;function a(){return r[s]}function l(){let i=a();if(!i||"open"==i||"close"==i)return{type:"application",function:e.Concat,arguments:[]};const r=t.sanitize(o.escape(i.value));s+=1;const l=n[r];return l?{type:"application",function:l,arguments:c()}:{type:"error",message:`Unknown Function ${r}`}}function c(){const e=[];for(;;){const t=a();if("close"==t||null==t)return s+=1,e;"open"==t?(s+=1,e.push(l())):(e.push(t),s+=1)}}const u=c();return{type:"application",function:e.Concat,arguments:u}}}(n=e.Expression||(e.Expression={}))}(r||(r={}));var s,a=i(6541);!function(e){e.toCoords=function(e){return{x:2440+Math.round((60*e.longitude.degrees+e.longitude.minutes)*("west"==e.longitude.direction?-1:1)/1.875),y:3161+Math.round((60*e.latitude.degrees+e.latitude.minutes)*("south"==e.latitude.direction?-1:1)/1.875),level:0}},e.toString=function(e){return`${e.latitude.degrees}${e.latitude.minutes}' ${"north"==e.latitude.direction?"N":"S"}, ${e.longitude.degrees}${e.longitude.minutes}' ${"east"==e.longitude.direction?"E":"W"}`}}(s||(s={}));const l={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let u;const h=new Uint8Array(16);function d(){if(!u&&(u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(h)}const p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));const g=function(e,t,i){if(l.randomUUID&&!t&&!e)return l.randomUUID();const n=(e=e||{}).random||(e.rng||d)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return function(e,t=0){return p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]}(n)},m=[],f=[];class y{constructor(e,t,i,n){this.t="none",this.x=e,this.y=t,this.width=i,this.height=n}read(e=0,t=0,i=this.width,n=this.height){throw new Error("This imgref ("+this.t+") does not support toData")}findSubimage(e,t=0,i=0,n=this.width,o=this.height){return function(e,t,i=0,n=0,o=e.width,r=e.height){if(!e)throw new TypeError;if(!t)throw new TypeError;if(e instanceof v&&L&&alt1.bindFindSubImg){var s=function(e,t=0,i=0,n=e.width,o=e.height){for(var r="",s=i;s<i+o;s++)for(var a=t;a<t+n;a++){var l=4*a+4*e.width*s|0;r+=String.fromCharCode(e.data[l+2|0]),r+=String.fromCharCode(e.data[l+1|0]),r+=String.fromCharCode(e.data[l+0|0]),r+=String.fromCharCode(e.data[l+3|0])}return btoa(r)}(t),a=alt1.bindFindSubImg(e.handle,s,t.width,i,n,o,r);if(!a)throw new z;return JSON.parse(a)}return function(e,t,i=0,n=0,o=e.width,r=e.height){for(var s=[],a=4*t.width,l=4*e.width,c=[],u=0;u<t.height;u++){for(var h=0;h<t.width;h++){var d=4*h+u*a;if(255==t.data[d+3]&&c.push({x:h,y:u}),10==c.length)break}if(10==c.length)break}var p=i+o-t.width,g=n+r-t.height,m=c.length;for(u=n;u<=g;u++)e:for(h=i;h<=p;h++){for(var f=0;f<m;f++){var y=4*(h+c[f].x)+(u+c[f].y)*l,v=4*c[f].x+c[f].y*a,_=0;if(_=(_=(_=_+Math.abs(e.data[y+0]-t.data[v+0])|0)+Math.abs(e.data[y+1]-t.data[v+1])|0)+Math.abs(e.data[y+2]-t.data[v+2])|0,(_*=255/t.data[v+3])>30)continue e}if(H(e,t,h,u,30)!=1/0&&(s.push({x:h,y:u}),s.length>50))return s}return s}(e.read(),t,i,n,o,r)}(this,e,t,i,n,o)}toData(e=this.x,t=this.y,i=this.width,n=this.height){return this.read(e-this.x,t-this.y,i,n)}containsArea(e){return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+e.width&&this.y+this.height>=e.y+e.height}}class v extends y{constructor(e,t=0,i=0,n=0,o=0){super(t,i,n,o),this.handle=e,this.t="bind"}read(e=0,t=0,i=this.width,n=this.height){return function(e,t,i,n,o){if(t=Math.round(t),i=Math.round(i),n=Math.round(n),o=Math.round(o),M(),alt1.bindGetRegionBuffer)return new _(alt1.bindGetRegionBuffer(e,t,i,n,o),n,o);for(var r=new _(n,o),s=t;;){var a=Math.min(t+n,Math.floor(s+P/4/o)),l=alt1.bindGetRegion(e,s,i,a-s,o);if(!l)throw new z;if(O(l,r,s-t,0,a-s,o),(s=a)==t+n)break}return r}(this.handle,e,t,i,n)}}var _,x=i(8891).hp,w=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},b=null;function k(){try{return b?b("sharp"):require("sharp")}catch(e){}return null}function T(){k();try{return b?b("canvas"):require("canvas")}catch(e){}return null}function S(){try{return b?b("electron/common"):require("electron/common")}catch(e){}return null}function C(e){for(let t=0;t<e.length;t+=4){let i=e[t+2];e[t+2]=e[t+0],e[t+0]=i}}function E(e){return w(this,void 0,void 0,(function*(){var t,i;if(function(e){if(137!=(t=e)[0]||80!=t[1]||78!=t[2]||71!=t[3])throw new Error("non-png image received");for(var t,i=8;i<e.length;){var n=16777216*e[i++]+65536*e[i++]+256*e[i++]+e[i++],o=!!(e[i]>>5&1),r=String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3]);if("trns"!=r.toLowerCase()&&o){e[i+0]="n".charCodeAt(0),e[i+1]="o".charCodeAt(0),e[i+2]="P".charCodeAt(0),e[i+3]="E".charCodeAt(0);for(var s=i+4+n,a=4294967295,l=function(e){for(var t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;return e},c=i;c<s;c++)c>=i+4&&(e[c]=0),a=l(255&(a^e[c]))^a>>>8;a^=4294967295,e[i+4+n+0]=a>>24&255,e[i+4+n+1]=a>>16&255,e[i+4+n+2]=a>>8&255,e[i+4+n+3]=255&a}if("IEND"==r)break;i+=4,i+=n,i+=4}}(e),t=S()){let i=t.nativeImage.createFromBuffer(e),n=i.toBitmap(),o=i.getSize(),r=new Uint8ClampedArray(n.buffer,n.byteOffset,n.byteLength);return C(r),new _(r,o.width,o.height)}if(i=T())return new Promise(((t,n)=>{let o=new i.Image;o.onerror=n,o.onload=()=>{var e=i.createCanvas(o.naturalWidth,o.naturalHeight).getContext("2d");e.drawImage(o,0,0);var n=e.getImageData(0,0,o.naturalWidth,o.naturalHeight);t(new _(n.data,n.width,n.height))},o.src=x.from(e.buffer,e.byteOffset,e.byteLength)}));throw new Error("couldn't find built-in canvas, module 'electron/common' or the module 'canvas'")}))}!function(){var e="undefined"!=typeof self?self:"undefined"!=typeof global?global:null,t=void 0===e.ImageData||void 0===e.document,i=t;if(!t){e.ImageData;try{let t=new Uint8ClampedArray(4);t[0]=1;let n=new e.ImageData(t,1,1);i=1!=n.data[0]}catch(e){i=!0}}if(i){var n=function(){var e=0,n=arguments[e]instanceof Uint8ClampedArray?arguments[e++]:null,o=arguments[e++],r=arguments[e++];if(t)n||(n=new Uint8ClampedArray(o*r*4)),this.width=o,this.height=r,this.data=n;else if(i){var s=document.createElement("canvas");s.width=o,s.height=r;var a=s.getContext("2d").createImageData(o,r);return n&&a.data.set(n),a}};t||(n.prototype=e.ImageData.prototype),e.ImageData=n,_=n}else _=e.ImageData}(),_.prototype.toDrawableData=function(){return"undefined"==typeof document?function(e){let t=T();if(!t)throw new Error("couldn't find built-in canvas or the module 'canvas'");return new t.ImageData(e.data,e.width,e.height)}(this):this},_.prototype.putImageData=function(e,t,i){for(var n=0;n<e.width;n++)for(var o=0;o<e.height;o++){var r=4*(n+t)+4*(o+i)*this.width,s=4*n+4*o*e.width;this.data[r]=e.data[s],this.data[r+1]=e.data[s+1],this.data[r+2]=e.data[s+2],this.data[r+3]=e.data[s+3]}},_.prototype.pixelOffset=function(e,t){return 4*e+t*this.width*4},_.prototype.getPixelHash=function(e){e||(e=new V(0,0,this.width,this.height));for(var t=0,i=e.x;i<e.x+e.width;i++)for(var n=e.y;n<e.y+e.height;n++){var o=4*i+4*n*this.width;t=((t=((t=((t=(t<<5)-t+this.data[o]|0)<<5)-t+this.data[o+1]|0)<<5)-t+this.data[o+2]|0)<<5)-t+this.data[o+3]|0}return t},_.prototype.clone=function(e){return this.toImage(e).getContext("2d").getImageData(0,0,e.width,e.height)},_.prototype.show=function(e=5,t=5,i=1){if("undefined"!=typeof document){for(var n=document.getElementsByClassName("debugimage");n.length>_.prototype.show.maxImages;)n[0].remove();var o=this.toImage();return o.classList.add("debugimage"),o.style.position="absolute",o.style.zIndex="1000",o.style.left=e/i+"px",o.style.top=t/i+"px",o.style.background="purple",o.style.cursor="pointer",o.style.imageRendering="pixelated",o.style.outline="1px solid #0f0",o.style.width=(1==this.width?100:this.width)*i+"px",o.style.height=(1==this.height?100:this.height)*i+"px",o.onclick=function(){o.remove()},document.body.appendChild(o),o}console.error("need a document to show an imagedata object")},_.prototype.show.maxImages=10,_.prototype.toImage=function(e){if(e||(e=new V(0,0,this.width,this.height)),"undefined"!=typeof document){var t=document.createElement("canvas");t.width=e.width,t.height=e.height}else t=function(e,t){let i=T();if(!i)throw new Error("couldn't find built-in canvas or the module 'canvas'");return i.createCanvas(e,t)}(e.width,e.height);return t.getContext("2d").putImageData(this.toDrawableData(),-e.x,-e.y),t},_.prototype.getPixel=function(e,t){var i=4*e+4*t*this.width;return[this.data[i],this.data[i+1],this.data[i+2],this.data[i+3]]},_.prototype.getPixelValueSum=function(e,t){var i=4*e+4*t*this.width;return this.data[i]+this.data[i+1]+this.data[i+2]},_.prototype.getPixelInt=function(e,t){var i=4*e+4*t*this.width;return(this.data[i+3]<<24)+(this.data[i+0]<<16)+(this.data[i+1]<<8)+(0|this.data[i+2])},_.prototype.getColorDifference=function(e,t,i,n,o,r=255){var s=4*e+4*t*this.width;return Math.abs(this.data[s]-i)+Math.abs(this.data[s+1]-n)+Math.abs(this.data[s+2]-o)*r/255},_.prototype.setPixel=function(e,t,...i){var n,o,r,s,[n,o,r,s]=Array.isArray(i[0])?i[0]:i,a=4*e+4*t*this.width;this.data[a]=n,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=null==s?255:s},_.prototype.setPixelInt=function(e,t,i){var n=4*e+4*t*this.width;this.data[n]=i>>24&255,this.data[n+1]=i>>16&255,this.data[n+2]=i>>8&255,this.data[n+3]=255&i},_.prototype.toFileBytes=function(e,t){return"undefined"!=typeof HTMLCanvasElement?new Promise((i=>this.toImage().toBlob((e=>{var t=new FileReader;t.readAsArrayBuffer(e),t.onload=()=>i(new Uint8Array(t.result))}),e,t))):function(e,t,i){return w(this,void 0,void 0,(function*(){var n,o;if(n=S()){let t=n.nativeImage,i=x.from(e.data.slice(e.data.byteOffset,e.data.byteLength));return C(i),t.createFromBitmap(i,{width:e.width,height:e.height}).toPNG()}if(o=k()){let n=o(x.from(e.data.buffer),{raw:{width:e.width,height:e.height,channels:4}});if("image/png"==t)n.png();else{if("image/webp"!=t)throw new Error("unknown image format: "+t);var r={quality:80};"number"==typeof i&&(r.quality=100*i),n.webp(r)}return yield n.toBuffer({resolveWithObject:!1}).buffer}throw new Error("coulnd't find build-in image compression methods or the module 'electron/common' or 'sharp'")}))}(this,e,t)},_.prototype.toPngBase64=function(){if("undefined"!=typeof HTMLCanvasElement){var e=this.toImage().toDataURL("image/png");return e.slice(e.indexOf(",")+1)}throw new Error("synchronous image conversion not supported in nodejs, try using ImageData.prototype.toFileBytes")},_.prototype.pixelCompare=function(e,t=0,i=0,n){return H(this,e,t,i,n)},_.prototype.copyTo=function(e,t,i,n,o,r,s){const a=0|e.width,l=0|this.width,c=0|n,u=4*Math.floor(n/4),h=new Int32Array(this.data.buffer,this.data.byteOffset,this.data.byteLength/4),d=new Int32Array(e.data.buffer,e.data.byteOffset,e.data.byteLength/4);for(let e=0;e<o;e++){let n=0,o=n+r+(e+s)*a,p=n+t+(e+i)*l;for(;n<u;n+=4)d[o]=h[p],d[o+1]=h[p+1],d[o+2]=h[p+2],d[o+3]=h[p+3],o+=4,p+=4;for(;n<c;n++)d[o]=h[p],o+=1,p+=1}},"undefined"!=typeof HTMLImageElement&&(HTMLImageElement.prototype.toBuffer=function(e=0,t=0,i=this.width,n=this.height){var o=document.createElement("canvas");o.width=i,o.height=n;var r=o.getContext("2d");return r.drawImage(this,-e,-t),r.getImageData(0,0,i,n)},HTMLImageElement.prototype.toCanvas=function(e=0,t=0,i=this.width,n=this.height){var o=document.createElement("canvas");return o.width=i,o.height=n,o.getContext("2d").drawImage(this,-e,-t),o});class A extends Error{constructor(){super(),this.message="This method can not be ran outside of Alt1"}}class z extends Error{}var L="undefined"!=typeof alt1,P=(L&&alt1.skinName,4e6);function M(){if(!L)throw new A}function I(e,t,i,n){e=Math.round(e),t=Math.round(t),i=Math.round(i),n=Math.round(n),M();var o=alt1.bindRegion(e,t,i,n);if(o<=0)throw new z("capturehold failed");return new v(o,e,t,i,n)}function O(e,t,i,n,o,r){var s=atob(e),a=t.data;o|=0,r|=0;for(var l=4*i+4*n*t.width,c=0|t.width,u=0;u<o;u++)for(var h=0;h<r;h++){var d=l+(4*u|0)+(h*c*4|0)|0,p=(4*u|0)+(4*h*o|0)|0;a[d+0|0]=s.charCodeAt(p+2|0),a[d+1|0]=s.charCodeAt(p+1|0),a[d+2|0]=s.charCodeAt(p+0|0),a[d+3|0]=s.charCodeAt(p+3|0)}return t}function D(e,t,i,n=255){return(0|i)+(t<<8)+(e<<16)+(n<<24)}function R(e,t){L&&(alt1.events||(alt1.events={}),alt1.events[e]||(alt1.events[e]=[]),alt1.events[e].push(t))}var B,N,j,F,q=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function U(e){return q(this,void 0,void 0,(function*(){if("undefined"!=typeof Image){var t=new Image;return t.crossOrigin="crossorigin",yield new Promise(((i,n)=>{t.onload=function(){i(t.toBuffer())},t.onerror=n,t.src=e}))}if(e.startsWith("data:image/png;base64,"))return function(e){return q(this,void 0,void 0,(function*(){return"undefined"!=typeof Image?U("data:image/png;base64,"+e):(t=e,E(x.from(t,"base64")));var t}))}(e.slice(22));throw new Error("loading remote images in nodejs has been disabled, load the raw bytes and use imageDataFromNodeBuffer instead")}))}function H(e,t,i,n,o=30){if(i<0||n<0)throw new RangeError;if(i+t.width>e.width||n+t.height>e.height)throw new RangeError;-1==o&&(o=1020);for(var r=0,s=8;s>=1;s/=2)for(var a=0;a<t.width;a+=s)for(var l=0;l<t.height;l+=s){var c=4*(i+a)+(n+l)*e.width*4,u=4*a+l*t.width*4,h=0;if(h=(h=(h=h+Math.abs(e.data[c+0]-t.data[u+0])|0)+Math.abs(e.data[c+1]-t.data[u+1])|0)+Math.abs(e.data[c+2]-t.data[u+2])|0,h*=t.data[u+3]/255,1==s&&(r+=h),h>o)return 1/0}return r/t.width/t.height}class V{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}static fromArgs(...e){if("object"==typeof e[0])return new V(e[0].x,e[0].y,e[0].width,e[0].height);if("number"==typeof e[0]&&e.length>=4)return new V(e[0],e[1],e[2],e[3]);throw new Error("invalid rect args")}union(e){var t=Math.min(this.x,e.x),i=Math.min(this.y,e.y);return this.width=Math.max(this.x+this.width,e.x+e.width)-t,this.height=Math.max(this.y+this.height,e.y+e.height)-i,this.x=t,this.y=i,this}includePoint(e,t){this.union(new V(e,t,0,0))}inflate(e,t){this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t}intersect(e){this.x<e.x&&(this.width-=e.x-this.x,this.x=e.x),this.y<e.y&&(this.height-=e.y-this.y,this.y=e.y),this.width=Math.min(this.x+this.width,e.x+e.width)-this.x,this.height=Math.min(this.y+this.height,e.y+e.height)-this.y,(this.width<=0||this.height<=0)&&(this.width=0,this.height=0)}overlaps(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}contains(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height}containsPoint(e,t){return this.x<=e&&this.x+this.width>e&&this.y<=t&&this.y+this.height>t}}!function(e){let t,i;function n(e,t){return e[(e.length+t)%e.length]}function r(e,t){const i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function s(e,t){function i(e,t){return Math.max(0,1-Math.abs(e-t)/128)}return(i(e[0],t[0])+i(e[1],t[1])+i(e[2],t[2]))/3}function l(e,t){return o.padStart(e.toString(),t,"0")}e.natural_join=function(e,t="and"){return 0==e.length?"":1==e.length?e.toString():2==e.length?`${e[0]} ${t} ${e[1]}`:e.slice(0,-1).join(", ")+`, ${t} `+e[e.length-1]},e.plural=function(e,t,i="s"){let n=`${e} ${t}`;return 1!=e&&(n+=i),n},function(e){e.natural_order=function(e,t){return e-t},e.comap=function(e,t){return(i,n)=>e(t(i),t(n))},e.reverse=function(e){return(t,i)=>-e(t,i)},e.chain=function(...e){return(t,i)=>{for(let n of e){let e=n(t,i);if(0!=e)return e}return 0}}}(t=e.Order||(e.Order={})),e.capitalize=function(e){return e?e[0].toUpperCase()+e.slice(1):""},e.index=n,e.multiIndex=function(e,...t){let i=e;return t.forEach((e=>{i=n(i,e)})),i},e.minIndex=function(e){return e.indexOf(Math.min(...e))},e.shorten_integer_list=function(e,i=(e=>e.toString())){e.sort(t.natural_order);let n=[],o=e[0],r=o;for(let t=1;t<e.length;t++){let s=e[t];s<=r+1||(r==o?n.push(i(r)):r==o+1?n.push(i(o),i(r)):n.push(`${i(o)} - ${i(r)}`),o=s),r=s}return r==o?n.push(i(r)):r==o+1?n.push(i(o),i(r)):n.push(`${i(o)} - ${i(r)}`),n},e.convert_bounds=function(e){return a.latLngBounds([[e.getTopLeft().y,e.getTopLeft().x],[e.getBottomRight().y,e.getBottomRight().x]])},e.compose=function(e,...t){return t.reduce(((e,t)=>i=>t(e(i))),e)},e.swap=function(e,t){return[t,e]},e.count=function(e,t){return e.reduce(((e,i)=>e+(t(i)?1:0)),0)},e.signedToString=function(e){return`${Math.sign(e)<0?"":"+"}${e}`},e.tap=function(e,...t){return t.forEach((t=>t(e))),e},e.profile=function(e,t=null){console.time(t||e.name);let i=e();return console.timeEnd(t||e.name),i},e.profileAsync=async function(e,t=null){console.time(t||e.name);let i=await e();return console.timeEnd(t||e.name),i},e.avg=function(...e){return e.reduce(((e,t)=>e+t),0)/e.length},e.positiveMod=function(e,t){return(e+=Math.ceil(Math.abs(e/t))*t)%t},e.uuid=function(){return g()},e.timestamp=function(){return Math.floor((new Date).getTime()/1e3)},e.asyncFilter=async function(e,t){let i=await Promise.all(e.map(t));return e.filter(((e,t)=>i[t]))},e.todo=function(){throw new Error("Not implemented.")},e.copyUpdate=function(e,t){const i=o.cloneDeep(e);return t(i),i},e.copyUpdate2=function(e,t){const i=o.clone(e);return t(i),i},e.cleanedJSON=function(e,t=void 0){return JSON.stringify(e,((e,t)=>{if(!e.startsWith("_"))return t}),t)},e.eqWithNull=function(e){return(t,i)=>t==i||null!=t&&null!=i&&e(t,i)},e.downloadTextFile=function(e,t){r(e,"data:text/plain;charset=utf-8,"+encodeURIComponent(t))},e.download=r,e.downloadBinaryFile=function(e,t){r(e,window.URL.createObjectURL(new Blob([t])))},e.selectFile=function(e=void 0){return new Promise((t=>{const i=document.createElement("input");i.setAttribute("type","file"),e&&i.setAttribute("accept",e),i.addEventListener("change",(e=>{var i;t(null===(i=e.currentTarget.files)||void 0===i?void 0:i[0])})),i.click()}))},e.stringSimilarity=function(e,t){return 1-function(e,t,i){if(e===t)return 0;if(0===e.length)return t.length;if(0===t.length)return e.length;e=e.toLowerCase(),t=t.toLowerCase();let n=0;for(;n<e.length;)m[n]=e.charCodeAt(n),f[n]=++n;let o,r=0;for(;r<t.length;){const i=t.charCodeAt(r);let n=-1,s=r++;for(o=s;++n<e.length;){const e=i===m[n]?s:s+1;s=f[n],o=s>o?e>o?o+1:e:e>s?s+1:e,f[n]=o}}return o}(e,t)/t.length},e.findBestMatch=function(e,t,i=void 0,n=!1){const r=e.map((e=>({value:e,score:t(e)})));if(n){const e=o.minBy(r,(e=>e.score));return null!=i&&e.score>i?null:e}{const e=o.maxBy(r,(e=>e.score));return null!=i&&e.score<i?null:e}},e.hslSimilarity=function(e,t){return 1-function(e,t){let i=Math.abs(e-t);return i>128&&(i=255-i),i/128}(e[0],t[0])*(1-Math.abs(e[1]-t[1])/255)*(1-Math.abs(e[2]-t[2])/255)},function(e){e.fromHex=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return D(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16))},e.toHex=function(e){const[t,i,n]=[(o=e)>>16&255,o>>8&255,255&o];var o;function r(e){const t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+r(t)+r(i)+r(n)}}(i=e.A1Color||(e.A1Color={})),e.rgbSimilarity=s,e.rgbContrast=function(e,t){return 1-s(e,t)},e.greatestCommonDivisor=function e(t,i){return 0==i?Math.abs(t):e(i,t%i)},e.sampleImage=function(e,t){return e.getPixel(t.x,t.y)},e.positive_mod=function(e,t){return(e%t+t)%t},e.factorial=function e(t,i=1){return t<=i?1:t*e(t-1,i)},e.numberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.padInteger=l,e.chooseRandom=function(e){return e[Math.floor(Math.random()*e.length)]},e.formatTime=function(e){const t=new Date(e);return`${l(t.getHours(),2)}:${l(t.getMinutes(),2)}:${l(t.getSeconds(),2)}.${l(t.getMilliseconds(),4)}`},e.delay=async function(e){return new Promise((t=>setTimeout(t,e)))}}(B||(B={})),function(e){let t;function i(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function n(e,t){return e[t]}function o(e,t){return[e[0][t],e[1][t],e[2][t]]}function r(e,t){return[0,1,2].map((r=>[0,1,2].map((s=>i(n(e,r),o(t,s))))))}!function(e){e.toVector2=function(e){return{x:e[0],y:e[1]}},e.position=function(e){return[e.x,e.y,1]},e.direction=function(e){return[e.x,e.y,0]}}(t=e.Vector3||(e.Vector3={})),e.translation=function(e){return[[1,0,e.x],[0,1,e.y],[0,0,1]]},e.rotation=function(e){let t=e*Math.PI/2;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},e.rotationRadians=function(e){let t=e;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},e.scale=function(e){return[[e.x,0,0],[0,e.y,0],[0,0,1]]},e.mirror_x=function(){return[[-1,0,0],[0,1,0],[0,0,1]]},e.mirror_y=function(){return[[1,0,0],[0,-1,0],[0,0,1]]},e.row=n,e.col=o,e.mult=r,e.chain=function(...e){let t=[[1,0,0],[0,1,0],[0,0,1]];for(let i of e)t=r(t,i);return t},e.apply=function(e,t){return[i(n(e,0),t),i(n(e,1),t),i(n(e,2),t)]},e.identity=function(){return[[1,0,0],[0,1,0],[0,0,1]]}}(N||(N={})),function(e){function t(e,t){return{x:t.x*e,y:t.y*e}}function i(e){return Math.sqrt(n(e))}function n(e){return e.x*e.x+e.y*e.y}function o(e,t=1){return{x:Math.round(e.x/t)*t,y:Math.round(e.y/t)*t}}e.add=function(...e){return{x:e.map((e=>e.x)).reduce(((e,t)=>e+t),0),y:e.map((e=>e.y)).reduce(((e,t)=>e+t),0)}},e.sub=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.mul=function(e,t){return{x:e.x*t.x,y:e.y*t.y}},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.det=function(e,t){return e.x*t.y-e.y*t.x},e.neg=function(e){return{x:-e.x,y:-e.y}},e.scale=t,e.length=i,e.lengthSquared=n,e.normalize=function(e){return t(1/i(e),e)},e.sign=function(e){return{x:Math.sign(e.x),y:Math.sign(e.y)}},e.rotate=function(e,t){let i=Math.sin(t),n=Math.cos(t);return{x:n*e.x-i*e.y,y:i*e.x+n*e.y}},e.angle=function(t,i){return X(Math.atan2(e.det(t,i),e.dot(t,i)))},e.eq=function(e,t){return e.x==t.x&&e.y==t.y},e.manhatten=function(e){return Math.abs(e.x)+Math.abs(e.y)},e.max_axis=function(e){return Math.max(Math.abs(e.x),Math.abs(e.y))},e.min_axis=function(e){return Math.min(Math.abs(e.x),Math.abs(e.y))},e.toLatLong=function(e){return a.latLng(e.y,e.x)},e.asTuple=function(e){return[e.x,e.y]},e.fromLatLong=function(e){return{x:e.lng,y:e.lat}},e.toPoint=function(e){return a.point(e.x,e.y)},e.copy=function(e){return{x:e.x,y:e.y}},e.snap=o,e.transform=function(e,t){let i=N.apply(t,[e.x,e.y,0]);return{x:i[0],y:i[1]}},e.transform_point=function(e,t){let i=N.apply(t,[e.x,e.y,1]);return o({x:i[0],y:i[1]},.5)},e.abs=function(e){return{x:Math.abs(e.x),y:Math.abs(e.y)}},e.toString=function(e){return`${e.x} | ${e.y}`},e.hash=function(e,t=64){return Math.floor(Math.abs((e.x^e.y)%t))}}(j||(j={})),function(e){function t(...e){return 0==(e=e.filter(o.identity)).length?null:{topleft:{x:Math.min(...e.map((e=>e.x))),y:Math.max(...e.map((e=>e.y)))},botright:{x:Math.max(...e.map((e=>e.x))),y:Math.min(...e.map((e=>e.y)))}}}function i(e,i){return t(e,j.add(e,i,{x:-1,y:-1}))}function n(e,...t){return{topleft:{x:Math.min(e.topleft.x,...t.map((e=>e.x))),y:Math.max(e.topleft.y,...t.map((e=>e.y)))},botright:{x:Math.max(e.botright.x,...t.map((e=>e.x))),y:Math.min(e.botright.y,...t.map((e=>e.y)))}}}e.from=t,e.fromOriginAndSize=i,e.fromRectLike=function(e){return i({x:e.x,y:e.y},{x:e.width,y:e.height})},e.containsTile=function(e,t){return e.topleft.x-.5<=t.x&&e.topleft.y+.5>=t.y&&e.botright.x+.5>=t.x&&e.botright.y-.5<=t.y},e.contains=function(e,t){return e.topleft.x<=t.x&&e.topleft.y>=t.y&&e.botright.x>=t.x&&e.botright.y<=t.y},e.extend=function(e,t){return{topleft:j.add(e.topleft,{x:-t,y:t}),botright:j.add(e.botright,{x:t,y:-t})}},e.clampInto=function(e,t){return{x:(0,o.clamp)(e.x,t.topleft.x,t.botright.x),y:(0,o.clamp)(e.y,t.botright.y,t.topleft.y)}},e.center=function(e,t=!0){let i={x:(e.topleft.x+e.botright.x)/2,y:(e.topleft.y+e.botright.y)/2};return t?j.snap(i):i},e.toBounds=function(e){let t=a.point(e.topleft),i=a.point(e.botright);return a.bounds(t,i)},e.left=function(e){return{topleft:{x:e.topleft.x,y:e.topleft.y},botright:{x:e.topleft.x,y:e.botright.y}}},e.right=function(e){return{topleft:{x:e.botright.x,y:e.topleft.y},botright:{x:e.botright.x,y:e.botright.y}}},e.top=function(e){return{topleft:{x:e.topleft.x,y:e.topleft.y},botright:{x:e.botright.x,y:e.topleft.y}}},e.bottom=function(e){return{topleft:{x:e.topleft.x,y:e.botright.y},botright:{x:e.botright.x,y:e.botright.y}}},e.topRight=function(e){return{x:e.botright.x,y:e.topleft.y}},e.bottomLeft=function(e){return{x:e.topleft.x,y:e.botright.y}},e.topLeft=function(e){return{x:e.topleft.x,y:e.topleft.y}},e.bottomRight=function(e){return{x:e.botright.x,y:e.botright.y}},e.tileWidth=function(e){return e.botright.x-e.topleft.x+1},e.tileHeight=function(e){return e.topleft.y-e.botright.y+1},e.width=function(e){return e.botright.x-e.topleft.x},e.height=function(e){return e.topleft.y-e.botright.y},e.extendTo=n,e.extendToRect=function(e,t){return n(n(e,t.topleft),t.botright)},e.combine=function(...t){return e.from(...t.flatMap((e=>e?[e.topleft,e.botright]:[])))},e.translate=function(e,t){return{topleft:j.add(e.topleft,t),botright:j.add(e.botright,t)}},e.transform=function(t,i){return e.from(j.transform_point(t.topleft,i),j.transform_point(t.botright,i))},e.overlaps=function(e,t){return e.topleft.x<=t.botright.x&&e.botright.x>=t.topleft.x&&e.botright.y<=t.topleft.y&&e.topleft.y>=t.botright.y},e.centeredOn=function(e,t,i=void 0){return null==i&&(i=t),{topleft:j.add(e,{x:-t,y:i}),botright:j.add(e,{x:t,y:-i})}},e.equals=function(e,t){return e==t||!!e&&!!t&&j.eq(e.topleft,t.topleft)&&j.eq(e.botright,t.botright)},e.containsRect=function(t,i){return e.containsTile(t,i.topleft)&&e.containsTile(t,i.botright)},e.screenOrigin=function(t){return e.bottomLeft(t)}}(F||(F={}));var $,W,Z,G,K=B.positive_mod;function Y(e){return e/(2*Math.PI)*360}function J(e){return e/360*(2*Math.PI)}function X(e){for(;e<0;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e}function Q(e,t){return Math.abs(K(t-e+Math.PI,2*Math.PI)-Math.PI)}function ee(e,t){const i=j.length(e),n=[Math.atan2(e.y,e.x),Math.atan2(e.y,-e.x)].map((e=>{let n=Q(e,t);return n>Math.PI&&(n=2*Math.PI-n),n>Math.PI/2&&(n=Math.PI-n),Math.sin(n)*i}));return Math.max(...n)}!function(e){function t(e){return(0,o.isArray)(e)?{matrix:e,level_offset:0}:e}function i(e,t=0){return{matrix:e,level_offset:t}}function n(e,n){let o=t(e),r=t(n);return i(N.mult(o.matrix,r.matrix),o.level_offset+r.level_offset)}function r(){return{matrix:N.identity(),level_offset:0}}e.normalize=t,e.lift=i,e.mult=n,e.chain=function(...e){let t=r();for(let i of e)t=n(t,i);return t},e.translation=function(e,t){return{matrix:N.translation(e),level_offset:t}},e.identity=r}($||($={})),function(e){function t(e,t){return j.eq(e,t)&&e.level==t.level}function i(e,i){return null!=e&&null!=i&&(e==i||t(e,i))}function n(e,t){return{...e,level:t}}e.eq=t,e.eq2=i,e.equals=function(e,t){return e==t||i(e,t)},e.lift=n,e.move=function(e,t){return{x:e.x+t.x,y:e.y+t.y,level:e.level}},e.toString=function(e){return`${e.x} | ${e.y} | ${e.level}`},e.snap=function(e,t=1){return 0==t?e:{x:Math.round(e.x/t)*t,y:Math.round(e.y/t)*t,level:e.level}},e.distance=function(e,t){return j.max_axis(j.sub(e,t))},e.transform=function(e,t){let i=$.normalize(t);return n(j.transform_point(e,i.matrix),e.level+i.level_offset)},e.chunk=function(e){return{x:Math.floor(e.x/64),y:Math.floor(e.y/64)}}}(W||(W={})),function(e){function t(e,t){return{...e,level:t}}e.contains=function(e,t){return t.level==e.level&&F.containsTile(e,t)},e.containsCoords=function(e,t){return t.level==e.level&&F.contains(e,t)},e.clampInto=function(e,t){return W.lift(F.clampInto(e,t),e.level)},e.extend=function(e,i){return t(F.extend(e,i),e.level)},e.tl=function(e){return W.lift(e.topleft,e.level)},e.br=function(e){return W.lift(e.botright,e.level)},e.tr=function(e){return W.lift(F.topRight(e),e.level)},e.bl=function(e){return W.lift(F.bottomLeft(e),e.level)},e.center=function(e,t=!0){return W.lift(F.center(e,t),e.level)},e.fromTile=function(e){return e?{level:e.level,topleft:{x:e.x,y:e.y},botright:{x:e.x,y:e.y}}:null},e.isTile=function(e){return j.eq(e.topleft,e.botright)},e.lift=t,e.left=function(e){return t(F.left(e),e.level)},e.right=function(e){return t(F.right(e),e.level)},e.top=function(e){return t(F.top(e),e.level)},e.bottom=function(e){return t(F.bottom(e),e.level)},e.from=function(...e){return t(F.from(...e),Math.min(...e.map((e=>e.level))))},e.extendTo=function(e,i){return t(F.extendTo(e,i),e.level)},e.extendToRect=function(e,i){return t(F.extendToRect(e,i),e.level)},e.translate=function(e,i){return t(F.translate(e,i),e.level)},e.transform=function(e,i){let n=$.normalize(i);return t(F.transform(e,n.matrix),G.clamp(e.level+n.level_offset))},e.equals=function(e,t){return e==t||!!e&&!!t&&F.equals(e,t)&&e.level==t.level}}(Z||(Z={})),function(e){e.all=[0,1,2,3],e.clamp=function(e){return Math.max(0,Math.min(3,e))}}(G||(G={}));class te extends a.FeatureGroup{constructor(e){super(),this._options=e,this.last_drawn=null,this._hook=()=>this.redraw(),this._style=e.lineStyle,this._options.offset||(this._options.offset={x:.5,y:.5}),this._options.lineStyle||(this._options.lineStyle={stroke:!0,color:"#111",opacity:.6,weight:1,interactive:!1}),e.pane&&!this._style.pane&&(this._style.pane=e.pane)}onAdd(e){return super.onAdd(e),this._map=e,this._map.on("zoomend",this._hook),this._map.on("moveend",this._hook),this.redraw(),this}onRemove(e){return this._map.off("zoomend",this._hook),this._map.off("moveend",this._hook),this}redraw(){let e=this._map.getBounds(),t=o.minBy(this._options.intervals.filter((e=>this._map.getZoom()>=e.min_zoom)),(e=>e.interval));this.last_drawn&&this.last_drawn.bounds.contains(e)&&this.last_drawn.interval==(null==t?void 0:t.interval)||this.constructLines(this._map.getBounds().pad(.5),null==t?void 0:t.interval)}constructLines(e,t){if(this.last_drawn={bounds:e,interval:t},this.clearLayers(),!t)return;let i=Math.ceil((e.getEast()-e.getWest())/t),n=Math.ceil((e.getNorth()-e.getSouth())/t),o=Math.floor(e.getWest()/t)*t,r=Math.floor(e.getSouth()/t)*t;const s=[];for(let n=0;n<=i;n++){let i=o+n*t+this._options.offset.x-1;s.push([[e.getSouth(),i],[e.getNorth(),i]])}for(let i=0;i<=n;i++){let n=r+i*t+this._options.offset.y-1;s.push([[n,e.getWest()],[n,e.getEast()]])}new a.Polyline(s,this._style).addTo(this)}}var ie=i(5616);function ne(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function oe(e){return e instanceof ne(e).Element||e instanceof Element}function re(e){return e instanceof ne(e).HTMLElement||e instanceof HTMLElement}function se(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ne(e).ShadowRoot||e instanceof ShadowRoot)}var ae=Math.max,le=Math.min,ce=Math.round;function ue(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function he(){return!/^((?!chrome|android).)*safari/i.test(ue())}function de(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=e.getBoundingClientRect(),o=1,r=1;t&&re(e)&&(o=e.offsetWidth>0&&ce(n.width)/e.offsetWidth||1,r=e.offsetHeight>0&&ce(n.height)/e.offsetHeight||1);var s=(oe(e)?ne(e):window).visualViewport,a=!he()&&i,l=(n.left+(a&&s?s.offsetLeft:0))/o,c=(n.top+(a&&s?s.offsetTop:0))/r,u=n.width/o,h=n.height/r;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function pe(e){var t=ne(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ge(e){return e?(e.nodeName||"").toLowerCase():null}function me(e){return((oe(e)?e.ownerDocument:e.document)||window.document).documentElement}function fe(e){return de(me(e)).left+pe(e).scrollLeft}function ye(e){return ne(e).getComputedStyle(e)}function ve(e){var t=ye(e),i=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+o+n)}function _e(e,t,i){void 0===i&&(i=!1);var n,o,r=re(t),s=re(t)&&function(e){var t=e.getBoundingClientRect(),i=ce(t.width)/e.offsetWidth||1,n=ce(t.height)/e.offsetHeight||1;return 1!==i||1!==n}(t),a=me(t),l=de(e,s,i),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!i)&&(("body"!==ge(t)||ve(a))&&(c=(n=t)!==ne(n)&&re(n)?{scrollLeft:(o=n).scrollLeft,scrollTop:o.scrollTop}:pe(n)),re(t)?((u=de(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=fe(a))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function xe(e){var t=de(e),i=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function we(e){return"html"===ge(e)?e:e.assignedSlot||e.parentNode||(se(e)?e.host:null)||me(e)}function be(e){return["html","body","#document"].indexOf(ge(e))>=0?e.ownerDocument.body:re(e)&&ve(e)?e:be(we(e))}function ke(e,t){var i;void 0===t&&(t=[]);var n=be(e),o=n===(null==(i=e.ownerDocument)?void 0:i.body),r=ne(n),s=o?[r].concat(r.visualViewport||[],ve(n)?n:[]):n,a=t.concat(s);return o?a:a.concat(ke(we(s)))}function Te(e){return["table","td","th"].indexOf(ge(e))>=0}function Se(e){return re(e)&&"fixed"!==ye(e).position?e.offsetParent:null}function Ce(e){for(var t=ne(e),i=Se(e);i&&Te(i)&&"static"===ye(i).position;)i=Se(i);return i&&("html"===ge(i)||"body"===ge(i)&&"static"===ye(i).position)?t:i||function(e){var t=/firefox/i.test(ue());if(/Trident/i.test(ue())&&re(e)&&"fixed"===ye(e).position)return null;var i=we(e);for(se(i)&&(i=i.host);re(i)&&["html","body"].indexOf(ge(i))<0;){var n=ye(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(e)||t}var Ee="top",Ae="bottom",ze="right",Le="left",Pe="auto",Me=[Ee,Ae,ze,Le],Ie="start",Oe="end",De="viewport",Re="popper",Be=Me.reduce((function(e,t){return e.concat([t+"-"+Ie,t+"-"+Oe])}),[]),Ne=[].concat(Me,[Pe]).reduce((function(e,t){return e.concat([t,t+"-"+Ie,t+"-"+Oe])}),[]),je=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Fe(e){var t=new Map,i=new Set,n=[];function o(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var n=t.get(e);n&&o(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||o(e)})),n}var qe={placement:"bottom",modifiers:[],strategy:"absolute"};function Ue(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function He(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,n=void 0===i?[]:i,o=t.defaultOptions,r=void 0===o?qe:o;return function(e,t,i){void 0===i&&(i=r);var o,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},qe,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(i){var o="function"==typeof i?i(a.options):i;h(),a.options=Object.assign({},r,a.options,o),a.scrollParents={reference:oe(e)?ke(e):e.contextElement?ke(e.contextElement):[],popper:ke(t)};var s,c,d=function(e){var t=Fe(e);return je.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((s=[].concat(n,a.options.modifiers),c=s.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return a.orderedModifiers=d.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,n=void 0===i?{}:i,o=e.effect;if("function"==typeof o){var r=o({state:a,name:t,instance:u,options:n});l.push(r||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,i=e.popper;if(Ue(t,i)){a.rects={reference:_e(t,Ce(i),"fixed"===a.options.strategy),popper:xe(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var o=a.orderedModifiers[n],r=o.fn,s=o.options,l=void 0===s?{}:s,h=o.name;"function"==typeof r&&(a=r({state:a,options:l,name:h,instance:u})||a)}else a.reset=!1,n=-1}}},update:(o=function(){return new Promise((function(e){u.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(o())}))}))),s}),destroy:function(){h(),c=!0}};if(!Ue(e,t))return u;function h(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(i).then((function(e){!c&&i.onFirstUpdate&&i.onFirstUpdate(e)})),u}}var Ve={passive:!0};function $e(e){return e.split("-")[0]}function We(e){return e.split("-")[1]}function Ze(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ge(e){var t,i=e.reference,n=e.element,o=e.placement,r=o?$e(o):null,s=o?We(o):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(r){case Ee:t={x:a,y:i.y-n.height};break;case Ae:t={x:a,y:i.y+i.height};break;case ze:t={x:i.x+i.width,y:l};break;case Le:t={x:i.x-n.width,y:l};break;default:t={x:i.x,y:i.y}}var c=r?Ze(r):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case Ie:t[c]=t[c]-(i[u]/2-n[u]/2);break;case Oe:t[c]=t[c]+(i[u]/2-n[u]/2)}}return t}var Ke={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ye(e){var t,i=e.popper,n=e.popperRect,o=e.placement,r=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=s.x,p=void 0===d?0:d,g=s.y,m=void 0===g?0:g,f="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=f.x,m=f.y;var y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),_=Le,x=Ee,w=window;if(c){var b=Ce(i),k="clientHeight",T="clientWidth";b===ne(i)&&"static"!==ye(b=me(i)).position&&"absolute"===a&&(k="scrollHeight",T="scrollWidth"),(o===Ee||(o===Le||o===ze)&&r===Oe)&&(x=Ae,m-=(h&&b===w&&w.visualViewport?w.visualViewport.height:b[k])-n.height,m*=l?1:-1),o!==Le&&(o!==Ee&&o!==Ae||r!==Oe)||(_=ze,p-=(h&&b===w&&w.visualViewport?w.visualViewport.width:b[T])-n.width,p*=l?1:-1)}var S,C=Object.assign({position:a},c&&Ke),E=!0===u?function(e,t){var i=e.x,n=e.y,o=t.devicePixelRatio||1;return{x:ce(i*o)/o||0,y:ce(n*o)/o||0}}({x:p,y:m},ne(i)):{x:p,y:m};return p=E.x,m=E.y,l?Object.assign({},C,((S={})[x]=v?"0":"",S[_]=y?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",S)):Object.assign({},C,((t={})[x]=v?m+"px":"",t[_]=y?p+"px":"",t.transform="",t))}const Je={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];re(o)&&ge(o)&&(Object.assign(o.style,i),Object.keys(n).forEach((function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],o=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});re(n)&&ge(n)&&(Object.assign(n.style,r),Object.keys(o).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};var Xe={left:"right",right:"left",bottom:"top",top:"bottom"};function Qe(e){return e.replace(/left|right|bottom|top/g,(function(e){return Xe[e]}))}var et={start:"end",end:"start"};function tt(e){return e.replace(/start|end/g,(function(e){return et[e]}))}function it(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&se(i)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function nt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ot(e,t,i){return t===De?nt(function(e,t){var i=ne(e),n=me(e),o=i.visualViewport,r=n.clientWidth,s=n.clientHeight,a=0,l=0;if(o){r=o.width,s=o.height;var c=he();(c||!c&&"fixed"===t)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:s,x:a+fe(e),y:l}}(e,i)):oe(t)?function(e,t){var i=de(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):nt(function(e){var t,i=me(e),n=pe(e),o=null==(t=e.ownerDocument)?void 0:t.body,r=ae(i.scrollWidth,i.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=ae(i.scrollHeight,i.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-n.scrollLeft+fe(e),l=-n.scrollTop;return"rtl"===ye(o||i).direction&&(a+=ae(i.clientWidth,o?o.clientWidth:0)-r),{width:r,height:s,x:a,y:l}}(me(e)))}function rt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function st(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}function at(e,t){void 0===t&&(t={});var i=t,n=i.placement,o=void 0===n?e.placement:n,r=i.strategy,s=void 0===r?e.strategy:r,a=i.boundary,l=void 0===a?"clippingParents":a,c=i.rootBoundary,u=void 0===c?De:c,h=i.elementContext,d=void 0===h?Re:h,p=i.altBoundary,g=void 0!==p&&p,m=i.padding,f=void 0===m?0:m,y=rt("number"!=typeof f?f:st(f,Me)),v=d===Re?"reference":Re,_=e.rects.popper,x=e.elements[g?v:d],w=function(e,t,i,n){var o="clippingParents"===t?function(e){var t=ke(we(e)),i=["absolute","fixed"].indexOf(ye(e).position)>=0&&re(e)?Ce(e):e;return oe(i)?t.filter((function(e){return oe(e)&&it(e,i)&&"body"!==ge(e)})):[]}(e):[].concat(t),r=[].concat(o,[i]),s=r[0],a=r.reduce((function(t,i){var o=ot(e,i,n);return t.top=ae(o.top,t.top),t.right=le(o.right,t.right),t.bottom=le(o.bottom,t.bottom),t.left=ae(o.left,t.left),t}),ot(e,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(oe(x)?x:x.contextElement||me(e.elements.popper),l,u,s),b=de(e.elements.reference),k=Ge({reference:b,element:_,strategy:"absolute",placement:o}),T=nt(Object.assign({},_,k)),S=d===Re?T:b,C={top:w.top-S.top+y.top,bottom:S.bottom-w.bottom+y.bottom,left:w.left-S.left+y.left,right:S.right-w.right+y.right},E=e.modifiersData.offset;if(d===Re&&E){var A=E[o];Object.keys(C).forEach((function(e){var t=[ze,Ae].indexOf(e)>=0?1:-1,i=[Ee,Ae].indexOf(e)>=0?"y":"x";C[e]+=A[i]*t}))}return C}function lt(e,t,i){return ae(e,le(t,i))}function ct(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function ut(e){return[Ee,ze,Ae,Le].some((function(t){return e[t]>=0}))}var ht=He({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,n=e.options,o=n.scroll,r=void 0===o||o,s=n.resize,a=void 0===s||s,l=ne(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach((function(e){e.addEventListener("scroll",i.update,Ve)})),a&&l.addEventListener("resize",i.update,Ve),function(){r&&c.forEach((function(e){e.removeEventListener("scroll",i.update,Ve)})),a&&l.removeEventListener("resize",i.update,Ve)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=Ge({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,n=i.gpuAcceleration,o=void 0===n||n,r=i.adaptive,s=void 0===r||r,a=i.roundOffsets,l=void 0===a||a,c={placement:$e(t.placement),variation:We(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ye(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ye(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Je,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,n=e.name,o=i.offset,r=void 0===o?[0,0]:o,s=Ne.reduce((function(e,i){return e[i]=function(e,t,i){var n=$e(e),o=[Le,Ee].indexOf(n)>=0?-1:1,r="function"==typeof i?i(Object.assign({},t,{placement:e})):i,s=r[0],a=r[1];return s=s||0,a=(a||0)*o,[Le,ze].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}(i,t.rects,r),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=i.mainAxis,r=void 0===o||o,s=i.altAxis,a=void 0===s||s,l=i.fallbackPlacements,c=i.padding,u=i.boundary,h=i.rootBoundary,d=i.altBoundary,p=i.flipVariations,g=void 0===p||p,m=i.allowedAutoPlacements,f=t.options.placement,y=$e(f),v=l||(y!==f&&g?function(e){if($e(e)===Pe)return[];var t=Qe(e);return[tt(e),t,tt(t)]}(f):[Qe(f)]),_=[f].concat(v).reduce((function(e,i){return e.concat($e(i)===Pe?function(e,t){void 0===t&&(t={});var i=t,n=i.placement,o=i.boundary,r=i.rootBoundary,s=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?Ne:l,u=We(n),h=u?a?Be:Be.filter((function(e){return We(e)===u})):Me,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h);var p=d.reduce((function(t,i){return t[i]=at(e,{placement:i,boundary:o,rootBoundary:r,padding:s})[$e(i)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:i,boundary:u,rootBoundary:h,padding:c,flipVariations:g,allowedAutoPlacements:m}):i)}),[]),x=t.rects.reference,w=t.rects.popper,b=new Map,k=!0,T=_[0],S=0;S<_.length;S++){var C=_[S],E=$e(C),A=We(C)===Ie,z=[Ee,Ae].indexOf(E)>=0,L=z?"width":"height",P=at(t,{placement:C,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),M=z?A?ze:Le:A?Ae:Ee;x[L]>w[L]&&(M=Qe(M));var I=Qe(M),O=[];if(r&&O.push(P[E]<=0),a&&O.push(P[M]<=0,P[I]<=0),O.every((function(e){return e}))){T=C,k=!1;break}b.set(C,O)}if(k)for(var D=function(e){var t=_.find((function(t){var i=b.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return T=t,"break"},R=g?3:1;R>0&&"break"!==D(R);R--);t.placement!==T&&(t.modifiersData[n]._skip=!0,t.placement=T,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name,o=i.mainAxis,r=void 0===o||o,s=i.altAxis,a=void 0!==s&&s,l=i.boundary,c=i.rootBoundary,u=i.altBoundary,h=i.padding,d=i.tether,p=void 0===d||d,g=i.tetherOffset,m=void 0===g?0:g,f=at(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=$e(t.placement),v=We(t.placement),_=!v,x=Ze(y),w="x"===x?"y":"x",b=t.modifiersData.popperOffsets,k=t.rects.reference,T=t.rects.popper,S="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,C="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(b){if(r){var z,L="y"===x?Ee:Le,P="y"===x?Ae:ze,M="y"===x?"height":"width",I=b[x],O=I+f[L],D=I-f[P],R=p?-T[M]/2:0,B=v===Ie?k[M]:T[M],N=v===Ie?-T[M]:-k[M],j=t.elements.arrow,F=p&&j?xe(j):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=q[L],H=q[P],V=lt(0,k[M],F[M]),$=_?k[M]/2-R-V-U-C.mainAxis:B-V-U-C.mainAxis,W=_?-k[M]/2+R+V+H+C.mainAxis:N+V+H+C.mainAxis,Z=t.elements.arrow&&Ce(t.elements.arrow),G=Z?"y"===x?Z.clientTop||0:Z.clientLeft||0:0,K=null!=(z=null==E?void 0:E[x])?z:0,Y=I+W-K,J=lt(p?le(O,I+$-K-G):O,I,p?ae(D,Y):D);b[x]=J,A[x]=J-I}if(a){var X,Q="x"===x?Ee:Le,ee="x"===x?Ae:ze,te=b[w],ie="y"===w?"height":"width",ne=te+f[Q],oe=te-f[ee],re=-1!==[Ee,Le].indexOf(y),se=null!=(X=null==E?void 0:E[w])?X:0,ce=re?ne:te-k[ie]-T[ie]-se+C.altAxis,ue=re?te+k[ie]+T[ie]-se-C.altAxis:oe,he=p&&re?function(e,t,i){var n=lt(e,t,i);return n>i?i:n}(ce,te,ue):lt(p?ce:ne,te,p?ue:oe);b[w]=he,A[w]=he-te}t.modifiersData[n]=A}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,n=e.name,o=e.options,r=i.elements.arrow,s=i.modifiersData.popperOffsets,a=$e(i.placement),l=Ze(a),c=[Le,ze].indexOf(a)>=0?"height":"width";if(r&&s){var u=function(e,t){return rt("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:st(e,Me))}(o.padding,i),h=xe(r),d="y"===l?Ee:Le,p="y"===l?Ae:ze,g=i.rects.reference[c]+i.rects.reference[l]-s[l]-i.rects.popper[c],m=s[l]-i.rects.reference[l],f=Ce(r),y=f?"y"===l?f.clientHeight||0:f.clientWidth||0:0,v=g/2-m/2,_=u[d],x=y-h[c]-u[p],w=y/2-h[c]/2+v,b=lt(_,w,x),k=l;i.modifiersData[n]=((t={})[k]=b,t.centerOffset=b-w,t)}},effect:function(e){var t=e.state,i=e.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&it(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,n=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,s=at(t,{elementContext:"reference"}),a=at(t,{altBoundary:!0}),l=ct(s,n),c=ct(a,o,r),u=ut(l),h=ut(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),dt="tippy-content",pt="tippy-backdrop",gt="tippy-arrow",mt="tippy-svg-arrow",ft={passive:!0,capture:!0},yt=function(){return document.body};function vt(e,t,i){if(Array.isArray(e)){var n=e[t];return null==n?Array.isArray(i)?i[t]:i:n}return e}function _t(e,t){var i={}.toString.call(e);return 0===i.indexOf("[object")&&i.indexOf(t+"]")>-1}function xt(e,t){return"function"==typeof e?e.apply(void 0,t):e}function wt(e,t){return 0===t?e:function(n){clearTimeout(i),i=setTimeout((function(){e(n)}),t)};var i}function bt(e){return[].concat(e)}function kt(e,t){-1===e.indexOf(t)&&e.push(t)}function Tt(e){return[].slice.call(e)}function St(e){return Object.keys(e).reduce((function(t,i){return void 0!==e[i]&&(t[i]=e[i]),t}),{})}function Ct(){return document.createElement("div")}function Et(e){return["Element","Fragment"].some((function(t){return _t(e,t)}))}function At(e){return _t(e,"MouseEvent")}function zt(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function Lt(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function Pt(e){var t,i=bt(e)[0];return null!=i&&null!=(t=i.ownerDocument)&&t.body?i.ownerDocument:document}function Mt(e,t,i){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[n](t,i)}))}function It(e,t){for(var i=t;i;){var n;if(e.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var Ot={isTouch:!1},Dt=0;function Rt(){Ot.isTouch||(Ot.isTouch=!0,window.performance&&document.addEventListener("mousemove",Bt))}function Bt(){var e=performance.now();e-Dt<20&&(Ot.isTouch=!1,document.removeEventListener("mousemove",Bt)),Dt=e}function Nt(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var i=t._tippy;t.blur&&!i.state.isVisible&&t.blur()}}var jt=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),Ft=Object.assign({appendTo:yt,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),qt=Object.keys(Ft);function Ut(e){var t=(e.plugins||[]).reduce((function(t,i){var n,o=i.name,r=i.defaultValue;return o&&(t[o]=void 0!==e[o]?e[o]:null!=(n=Ft[o])?n:r),t}),{});return Object.assign({},e,t)}function Ht(e,t){var i=Object.assign({},t,{content:xt(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(Ut(Object.assign({},Ft,{plugins:t}))):qt).reduce((function(t,i){var n=(e.getAttribute("data-tippy-"+i)||"").trim();if(!n)return t;if("content"===i)t[i]=n;else try{t[i]=JSON.parse(n)}catch(e){t[i]=n}return t}),{})}(e,t.plugins));return i.aria=Object.assign({},Ft.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?t.interactive:i.aria.expanded,content:"auto"===i.aria.content?t.interactive?null:"describedby":i.aria.content},i}var Vt=function(){return"innerHTML"};function $t(e,t){e[Vt()]=t}function Wt(e){var t=Ct();return!0===e?t.className=gt:(t.className=mt,Et(e)?t.appendChild(e):$t(t,e)),t}function Zt(e,t){Et(t.content)?($t(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?$t(e,t.content):e.textContent=t.content)}function Gt(e){var t=e.firstElementChild,i=Tt(t.children);return{box:t,content:i.find((function(e){return e.classList.contains(dt)})),arrow:i.find((function(e){return e.classList.contains(gt)||e.classList.contains(mt)})),backdrop:i.find((function(e){return e.classList.contains(pt)}))}}function Kt(e){var t=Ct(),i=Ct();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var n=Ct();function o(i,n){var o=Gt(t),r=o.box,s=o.content,a=o.arrow;n.theme?r.setAttribute("data-theme",n.theme):r.removeAttribute("data-theme"),"string"==typeof n.animation?r.setAttribute("data-animation",n.animation):r.removeAttribute("data-animation"),n.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?r.setAttribute("role",n.role):r.removeAttribute("role"),i.content===n.content&&i.allowHTML===n.allowHTML||Zt(s,e.props),n.arrow?a?i.arrow!==n.arrow&&(r.removeChild(a),r.appendChild(Wt(n.arrow))):r.appendChild(Wt(n.arrow)):a&&r.removeChild(a)}return n.className=dt,n.setAttribute("data-state","hidden"),Zt(n,e.props),t.appendChild(i),i.appendChild(n),o(e.props,e.props),{popper:t,onUpdate:o}}Kt.$$tippy=!0;var Yt=1,Jt=[],Xt=[];function Qt(e,t){var i,n,o,r,s,a,l,c,u=Ht(e,Object.assign({},Ft,Ut(St(t)))),h=!1,d=!1,p=!1,g=!1,m=[],f=wt(Z,u.interactiveDebounce),y=Yt++,v=(c=u.plugins).filter((function(e,t){return c.indexOf(e)===t})),_={id:y,reference:e,popper:Ct(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(o)},setProps:function(t){if(!_.state.isDestroyed){I("onBeforeUpdate",[_,t]),$();var i=_.props,n=Ht(e,Object.assign({},i,St(t),{ignoreAttributes:!0}));_.props=n,V(),i.interactiveDebounce!==n.interactiveDebounce&&(R(),f=wt(Z,n.interactiveDebounce)),i.triggerTarget&&!n.triggerTarget?bt(i.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):n.triggerTarget&&e.removeAttribute("aria-expanded"),D(),M(),b&&b(i,n),_.popperInstance&&(J(),Q().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),I("onAfterUpdate",[_,t])}},setContent:function(e){_.setProps({content:e})},show:function(){var e=_.state.isVisible,t=_.state.isDestroyed,i=!_.state.isEnabled,n=Ot.isTouch&&!_.props.touch,o=vt(_.props.duration,0,Ft.duration);if(!(e||t||i||n||A().hasAttribute("disabled")||(I("onShow",[_],!1),!1===_.props.onShow(_)))){if(_.state.isVisible=!0,E()&&(w.style.visibility="visible"),M(),F(),_.state.isMounted||(w.style.transition="none"),E()){var r=L();zt([r.box,r.content],0)}var s,l,c;a=function(){var e;if(_.state.isVisible&&!g){if(g=!0,w.offsetHeight,w.style.transition=_.props.moveTransition,E()&&_.props.animation){var t=L(),i=t.box,n=t.content;zt([i,n],o),Lt([i,n],"visible")}O(),D(),kt(Xt,_),null==(e=_.popperInstance)||e.forceUpdate(),I("onMount",[_]),_.props.animation&&E()&&function(e,t){U(e,(function(){_.state.isShown=!0,I("onShown",[_])}))}(o)}},l=_.props.appendTo,c=A(),(s=_.props.interactive&&l===yt||"parent"===l?c.parentNode:xt(l,[c])).contains(w)||s.appendChild(w),_.state.isMounted=!0,J()}},hide:function(){var e=!_.state.isVisible,t=_.state.isDestroyed,i=!_.state.isEnabled,n=vt(_.props.duration,1,Ft.duration);if(!(e||t||i)&&(I("onHide",[_],!1),!1!==_.props.onHide(_))){if(_.state.isVisible=!1,_.state.isShown=!1,g=!1,h=!1,E()&&(w.style.visibility="hidden"),R(),q(),M(!0),E()){var o=L(),r=o.box,s=o.content;_.props.animation&&(zt([r,s],n),Lt([r,s],"hidden"))}O(),D(),_.props.animation?E()&&function(e,t){U(e,(function(){!_.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()}))}(n,_.unmount):_.unmount()}},hideWithInteractivity:function(e){z().addEventListener("mousemove",f),kt(Jt,f),f(e)},enable:function(){_.state.isEnabled=!0},disable:function(){_.hide(),_.state.isEnabled=!1},unmount:function(){_.state.isVisible&&_.hide(),_.state.isMounted&&(X(),Q().forEach((function(e){e._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w),Xt=Xt.filter((function(e){return e!==_})),_.state.isMounted=!1,I("onHidden",[_]))},destroy:function(){_.state.isDestroyed||(_.clearDelayTimeouts(),_.unmount(),$(),delete e._tippy,_.state.isDestroyed=!0,I("onDestroy",[_]))}};if(!u.render)return _;var x=u.render(_),w=x.popper,b=x.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+_.id,_.popper=w,e._tippy=_,w._tippy=_;var k=v.map((function(e){return e.fn(_)})),T=e.hasAttribute("aria-expanded");return V(),D(),M(),I("onCreate",[_]),u.showOnCreate&&ee(),w.addEventListener("mouseenter",(function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&z().addEventListener("mousemove",f)})),_;function S(){var e=_.props.touch;return Array.isArray(e)?e:[e,0]}function C(){return"hold"===S()[0]}function E(){var e;return!(null==(e=_.props.render)||!e.$$tippy)}function A(){return l||e}function z(){var e=A().parentNode;return e?Pt(e):document}function L(){return Gt(w)}function P(e){return _.state.isMounted&&!_.state.isVisible||Ot.isTouch||r&&"focus"===r.type?0:vt(_.props.delay,e?0:1,Ft.delay)}function M(e){void 0===e&&(e=!1),w.style.pointerEvents=_.props.interactive&&!e?"":"none",w.style.zIndex=""+_.props.zIndex}function I(e,t,i){var n;void 0===i&&(i=!0),k.forEach((function(i){i[e]&&i[e].apply(i,t)})),i&&(n=_.props)[e].apply(n,t)}function O(){var t=_.props.aria;if(t.content){var i="aria-"+t.content,n=w.id;bt(_.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(i);if(_.state.isVisible)e.setAttribute(i,t?t+" "+n:n);else{var o=t&&t.replace(n,"").trim();o?e.setAttribute(i,o):e.removeAttribute(i)}}))}}function D(){!T&&_.props.aria.expanded&&bt(_.props.triggerTarget||e).forEach((function(e){_.props.interactive?e.setAttribute("aria-expanded",_.state.isVisible&&e===A()?"true":"false"):e.removeAttribute("aria-expanded")}))}function R(){z().removeEventListener("mousemove",f),Jt=Jt.filter((function(e){return e!==f}))}function B(t){if(!Ot.isTouch||!p&&"mousedown"!==t.type){var i=t.composedPath&&t.composedPath()[0]||t.target;if(!_.props.interactive||!It(w,i)){if(bt(_.props.triggerTarget||e).some((function(e){return It(e,i)}))){if(Ot.isTouch)return;if(_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else I("onClickOutside",[_,t]);!0===_.props.hideOnClick&&(_.clearDelayTimeouts(),_.hide(),d=!0,setTimeout((function(){d=!1})),_.state.isMounted||q())}}}function N(){p=!0}function j(){p=!1}function F(){var e=z();e.addEventListener("mousedown",B,!0),e.addEventListener("touchend",B,ft),e.addEventListener("touchstart",j,ft),e.addEventListener("touchmove",N,ft)}function q(){var e=z();e.removeEventListener("mousedown",B,!0),e.removeEventListener("touchend",B,ft),e.removeEventListener("touchstart",j,ft),e.removeEventListener("touchmove",N,ft)}function U(e,t){var i=L().box;function n(e){e.target===i&&(Mt(i,"remove",n),t())}if(0===e)return t();Mt(i,"remove",s),Mt(i,"add",n),s=n}function H(t,i,n){void 0===n&&(n=!1),bt(_.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,i,n),m.push({node:e,eventType:t,handler:i,options:n})}))}function V(){var e;C()&&(H("touchstart",W,{passive:!0}),H("touchend",G,{passive:!0})),(e=_.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(H(e,W),e){case"mouseenter":H("mouseleave",G);break;case"focus":H(jt?"focusout":"blur",K);break;case"focusin":H("focusout",K)}}))}function $(){m.forEach((function(e){var t=e.node,i=e.eventType,n=e.handler,o=e.options;t.removeEventListener(i,n,o)})),m=[]}function W(e){var t,i=!1;if(_.state.isEnabled&&!Y(e)&&!d){var n="focus"===(null==(t=r)?void 0:t.type);r=e,l=e.currentTarget,D(),!_.state.isVisible&&At(e)&&Jt.forEach((function(t){return t(e)})),"click"===e.type&&(_.props.trigger.indexOf("mouseenter")<0||h)&&!1!==_.props.hideOnClick&&_.state.isVisible?i=!0:ee(e),"click"===e.type&&(h=!i),i&&!n&&te(e)}}function Z(e){var t=e.target,i=A().contains(t)||w.contains(t);if("mousemove"!==e.type||!i){var n=Q().concat(w).map((function(e){var t,i=null==(t=e._tippy.popperInstance)?void 0:t.state;return i?{popperRect:e.getBoundingClientRect(),popperState:i,props:u}:null})).filter(Boolean);(function(e,t){var i=t.clientX,n=t.clientY;return e.every((function(e){var t=e.popperRect,o=e.popperState,r=e.props.interactiveBorder,s=o.placement.split("-")[0],a=o.modifiersData.offset;if(!a)return!0;var l="bottom"===s?a.top.y:0,c="top"===s?a.bottom.y:0,u="right"===s?a.left.x:0,h="left"===s?a.right.x:0,d=t.top-n+l>r,p=n-t.bottom-c>r,g=t.left-i+u>r,m=i-t.right-h>r;return d||p||g||m}))})(n,e)&&(R(),te(e))}}function G(e){Y(e)||_.props.trigger.indexOf("click")>=0&&h||(_.props.interactive?_.hideWithInteractivity(e):te(e))}function K(e){_.props.trigger.indexOf("focusin")<0&&e.target!==A()||_.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||te(e)}function Y(e){return!!Ot.isTouch&&C()!==e.type.indexOf("touch")>=0}function J(){X();var t=_.props,i=t.popperOptions,n=t.placement,o=t.offset,r=t.getReferenceClientRect,s=t.moveTransition,l=E()?Gt(w).arrow:null,c=r?{getBoundingClientRect:r,contextElement:r.contextElement||A()}:e,u=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(E()){var i=L().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?i.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?i.setAttribute("data-"+e,""):i.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];E()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==i?void 0:i.modifiers)||[]),_.popperInstance=ht(c,w,Object.assign({},i,{placement:n,onFirstUpdate:a,modifiers:u}))}function X(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function Q(){return Tt(w.querySelectorAll("[data-tippy-root]"))}function ee(e){_.clearDelayTimeouts(),e&&I("onTrigger",[_,e]),F();var t=P(!0),n=S(),o=n[0],r=n[1];Ot.isTouch&&"hold"===o&&r&&(t=r),t?i=setTimeout((function(){_.show()}),t):_.show()}function te(e){if(_.clearDelayTimeouts(),I("onUntrigger",[_,e]),_.state.isVisible){if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&h)){var t=P(!1);t?n=setTimeout((function(){_.state.isVisible&&_.hide()}),t):o=requestAnimationFrame((function(){_.hide()}))}}else q()}}function ei(e,t){void 0===t&&(t={});var i=Ft.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Rt,ft),window.addEventListener("blur",Nt);var n,o=Object.assign({},t,{plugins:i}),r=(n=e,Et(n)?[n]:function(e){return _t(e,"NodeList")}(n)?Tt(n):Array.isArray(n)?n:Tt(document.querySelectorAll(n))).reduce((function(e,t){var i=t&&Qt(t,o);return i&&e.push(i),e}),[]);return Et(e)?r[0]:r}ei.defaultProps=Ft,ei.setDefaultProps=function(e){Object.keys(e).forEach((function(t){Ft[t]=e[t]}))},ei.currentInput=Ot,Object.assign({},Je,{effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow)}});var ti={clientX:0,clientY:0},ii=[];function ni(e){var t=e.clientX,i=e.clientY;ti={clientX:t,clientY:i}}var oi={name:"followCursor",defaultValue:!1,fn:function(e){var t=e.reference,i=Pt(e.props.triggerTarget||t),n=!1,o=!1,r=!0,s=e.props;function a(){return"initial"===e.props.followCursor&&e.state.isVisible}function l(){i.addEventListener("mousemove",h)}function c(){i.removeEventListener("mousemove",h)}function u(){n=!0,e.setProps({getReferenceClientRect:null}),n=!1}function h(i){var n=!i.target||t.contains(i.target),o=e.props.followCursor,r=i.clientX,s=i.clientY,a=t.getBoundingClientRect(),l=r-a.left,c=s-a.top;!n&&e.props.interactive||e.setProps({getReferenceClientRect:function(){var e=t.getBoundingClientRect(),i=r,n=s;"initial"===o&&(i=e.left+l,n=e.top+c);var a="horizontal"===o?e.top:n,u="vertical"===o?e.right:i,h="horizontal"===o?e.bottom:n,d="vertical"===o?e.left:i;return{width:u-d,height:h-a,top:a,right:u,bottom:h,left:d}}})}function d(){e.props.followCursor&&(ii.push({instance:e,doc:i}),function(e){e.addEventListener("mousemove",ni)}(i))}function p(){0===(ii=ii.filter((function(t){return t.instance!==e}))).filter((function(e){return e.doc===i})).length&&function(e){e.removeEventListener("mousemove",ni)}(i)}return{onCreate:d,onDestroy:p,onBeforeUpdate:function(){s=e.props},onAfterUpdate:function(t,i){var r=i.followCursor;n||void 0!==r&&s.followCursor!==r&&(p(),r?(d(),!e.state.isMounted||o||a()||l()):(c(),u()))},onMount:function(){e.props.followCursor&&!o&&(r&&(h(ti),r=!1),a()||l())},onTrigger:function(e,t){At(t)&&(ti={clientX:t.clientX,clientY:t.clientY}),o="focus"===t.type},onHidden:function(){e.props.followCursor&&(u(),c(),r=!0)}}}};ei.setDefaultProps({render:Kt});const ri=ei;class si{constructor(e=ie("<div>")){this.init(e)}init(e=ie("<div>")){return this.container=e instanceof si?e.container:e||ie("<div>"),this._raw=this.container.get()[0],this}raw(){return this._raw}empty(){return this.container.empty(),this}appendTo(e){return e instanceof si&&(e=e.container),e.append(this.container),this}prependTo(e){return e instanceof si&&(e=e.container),e.prepend(this.container),this}append(...e){return e.forEach((e=>{e&&(e instanceof si&&(e=e.container),this.container.append(e))})),this}prepend(e){return e instanceof si&&(e=e.container),this.container.prepend(e),this}css(e,t){return this._raw.style[e]=t,this}css2(e){return Object.assign(this._raw.style,e),this}tooltip(e){return this._raw.setAttribute("title",e),this}remove(){return this._raw.remove(),this}detach(){return this.container.detach(),this}addClass(e){return e&&this._raw.classList.add(e),this}static wrap(e){return"string"==typeof e&&(e=ie(e)),e instanceof HTMLElement&&(e=ie(e)),new si(e)}text(e){var t;return this.raw().textContent=null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:"",this}setVisible(e){return e?this.container.show():this.container.hide(),this}toggleClass(e,t=null){return this._raw.classList.toggle(e,t),this}tapRaw(e){return e(this.container),this}addTippy(e,t={}){return ri(this.raw(),{content:()=>"function"==typeof e?c("<div class='ctr-entity-tooltip'></div>").append(e()).raw():c("<div class='ctr-entity-tooltip'></div>").append(e).raw(),arrow:!0,animation:!1,delay:0,zIndex:1000001,...t}),this}html(){return this.raw().outerHTML}setInnerHtml(e){return this.raw().innerHTML=e,this}on(e,t){return this.container.on(e,t),this}setAttribute(e,t=""){return this._raw.setAttribute(e,t),this}}globalThis.c=(e="<div>")=>si.wrap(e);class ai{constructor(e){this.handler=e,this.alive=!0}remove(){this.alive=!1,this.handler=null}apply(e){return this.handler(e)}isAlive(){return this.alive}bindTo(e){return e.bind(this),this}}var li,ci,ui,hi,di;function pi(){return new ci.Real}!function(e){e.Once=class extends ai{apply(e){return this.remove(),super.apply(e)}}}(li||(li={})),function(e){class t{filtered(e){return new i(this,e)}}e.AbstractEwent=t,e.Real=class extends t{constructor(){super(...arguments),this.trigger_count=0,this.handlers=[]}clean_pass(){this.trigger_count+=1,this.trigger_count>10&&(this.handlers=this.handlers.filter((e=>e.isAlive())))}on(e){this.clean_pass();let t=new ai(e);return this.handlers.push(t),t}trigger(e){return this.clean_pass(),Promise.all(this.handlers.filter((e=>e.isAlive())).map((t=>t.apply(e))))}};class i extends t{constructor(e,t){super(),this.base=e,this.predicate=t}on(e){return this.base.on((t=>{this.predicate(t)&&e(t)}))}}e.Filtered=i,e.Derived=class extends t{constructor(e,t){super(),this.base=e,this.map=t}on(e){return this.base.on((t=>e(this.map(t))))}}}(ci||(ci={})),function(e){class t{constructor(){this._value=null,this.equality_f=(e,t)=>e==t,this.changed=pi()}trigger_changed(e){return this.changed.trigger({value:this._value,old:e})}_set(e){let t=this._value;this._value=e,this.equality_f(t,this._value)||this.trigger_changed(t)}equality(e){return this.equality_f=e,this}value(){return this._value}set(e){this._set(e)}update(e){e(this._value),this.trigger_changed(void 0)}update2(e){let t=o.cloneDeep(this._value);e(this._value),this.equality_f(t,this._value)||this.trigger_changed(t)}subscribe(e,t=!1,i=null){let n=this.changed.on((t=>e(t.value,t.old)));return i&&i(n),t&&e(this._value,void 0),this}map(t){return new e.Derived(this,t)}bindTo(e){return e.subscribe((e=>this._set(e))),this._set(e.value()),this}bind(e){return this.bindTo(e),e.bindTo(this),this}}e.AbstractObservable=t,e.Derived=class extends t{constructor(e,t){super(),e.subscribe((e=>this._set(t(e))),!0)}set(e){throw new TypeError("Set not supported on derived observable")}},e.Simple=class extends t{constructor(e){super(),this._value=e}},e.observe_combined=function(e){let t=mi({});for(let i in e)e[i].subscribe((e=>t.update((t=>t[i]=e))),!0);return t}}(ui||(ui={}));class gi extends ui.AbstractObservable{constructor(){super(),this.element_added=pi(),this.element_removed=pi(),this.element_changed=pi(),this.array_changed=pi(),this._value=[]}update(e){throw new TypeError("Operation not supported! Use setTo or other observable mutations!")}set(e){throw new TypeError("Operation not supported! Use setTo or other modifiers")}add(e){let t=new gi.ObservableArrayValue(this,e);return t.index.set(this._value.length),this._value.push(t),this.element_added.trigger(t),this.changed.trigger({value:this._value}),this.array_changed.trigger({order:!0,set:!0,data:this._value}),t}remove(e){let t=this.value().indexOf(e);if(t>=0){let[e]=this._value.splice(t,1);this.element_removed.trigger(e),this.changed.trigger({value:this._value}),this.array_changed.trigger({order:!0,set:!0,data:this._value}),e.removed.trigger(e)}}get(){return this._value}setTo(e){for(let e of this.value())e.removed.trigger(e),this.element_removed.trigger(e);return this._value=e.map(((e,t)=>{let i=new gi.ObservableArrayValue(this,e);return i.index.set(t),i})),this._value.forEach((e=>this.element_added.trigger(e))),this.changed.trigger({value:this._value}),this.array_changed.trigger({order:!0,set:!0,data:this._value}),this}move(e,t){if(e==t)return this;let[i]=this._value.splice(e,1);return this._value.splice(t,0,i),this.changed.trigger({value:this._value}),this.array_changed.trigger({order:!0,set:!1,data:this._value}),this.updateIndices(),this}updateIndices(){this._value.forEach(((e,t)=>e.index.set(t)))}}function mi(e){return new ui.Simple(e)}!function(e){class t extends ui.Simple{constructor(e,t){super(t),this._parent=e,this.removed=pi(),this.index=mi(0),this.changed.on((()=>{this._parent.element_changed.trigger(this),this._parent.changed.trigger({value:this._parent.value()})}))}parent(){return this._parent}remove(){var e;null===(e=this._parent)||void 0===e||e.remove(this)}moveTo(e){return this.parent().move(this.index.value(),e),this}move(e){return this.moveTo(this.index.value()+e)}}e.ObservableArrayValue=t}(gi||(gi={})),function(e){e.CombinedEventMap=class{constructor(){this.events={}}get(e){var t;return null!==(t=this.events[e])&&void 0!==t?t:this.events[e]=pi()}on(e,t){return this.get(e).on(t)}}}(hi||(hi={})),function(e){function t(e){return c(e)}function i(e){return t("<img>").setAttribute("src",e)}function n(e,t=!1){return c("<span class='nisl-npc'></span>").toggleClass("ctr-clickable",t).text(e)}function o(e,t=!1){return c("<span class='nisl-entity'></span>").toggleClass("ctr-clickable",t).text(e)}function r(e){return e.startsWith("Nothing")||e.startsWith("No ")?t("<span class='nisl-noitem'></span>").text(e):t("<span class='nisl-item'></span>").text(e)}function s(t){return e.div().addClass(t)}e.create=t,e.hbox=function(...e){return t("<div style='display: flex; justify-content: center'></div>").append(...e)},e.hgrid=function(...e){return s("nisl-hgrid").append(...e)},e.hboxl=function(...e){return t("<div style='display: flex'></div>").append(...e)},e.btnrow=function(...e){return t("<div style='display: flex' class='ctr-button-container'></div>").append(...e)},e.hboxc=function(...e){return t("<div style='display: flex; justify-content: center'></div>").append(...e)},e.vbox=function(...e){return t("<div></div>").append(...e)},e.centered=function(...e){return t("<div style='text-align: center'></div>").append(...e)},e.spacer=function(){return t("<div style='flex-grow: 1'></div>")},e.span=function(e=""){return t("<span></span>").text(e)},e.italic=function(e=""){return t("<span style='font-style: italic'></span>").text(e)},e.bold=function(e){return t("<span style='font-weight: bold'></span>").text(e)},e.space=function(){return t("<span>&nbsp;</span>")},e.h=function(e,i){return t(`<h${e}>${i}</h${e}>`)},e.img=i,e.inlineimg=function(e){return i(e).addClass("text-icon")},e.div=function(...e){return c().append(...e)},e.text_link=function(e,t){return c("<span class='nisl-textlink'>").text(e).on("click",(e=>{e.preventDefault(),e.stopPropagation(),t()}))},e.npc=n,e.staticentity=o,e.item=r,e.entity=function(e){switch(e.kind){case"npc":return n(e.name);case"static":return o(e.name);case"item":return r(e.name)}},e.cls=s}(di||(di={}));var fi,yi=di.hbox,vi=di.span,_i=di.spacer;function xi(e){return"string"==typeof e?e:e()}!function(e){var t=di.cls;function i(e){e&&(e.open_child&&i(e.open_child),e.tippy_instance&&(e.tippy_instance.destroy(),e.tippy_instance=null,e.root_widget.remove(),e.parent?e.parent.open_child=null:e.root.root_page=null))}function n(e){e.option_selected||e.cancelled.trigger(e),e.closed.trigger(e),i(e.root_page)}function o(e,t=null){if(null!=t&&t!=e.highlight&&s(e,t),null!=e.highlight){let t=e.underlying.children[e.highlight];"basic"==t.type?(e.root.option_selected=!0,t.handler(),n(e.root)):(l(e),s(e.open_child,0))}}function r(e,i,n){let r={root:n,parent:i,underlying:e,root_widget:t("nisl-context-menu").tapRaw((e=>e.attr("tabindex","0"))),rows:null,tippy_instance:null,highlight:null,open_child:null};i||t("nisl-context-menu-header").append(e.text?xi(e.text):"Choose Option").appendTo(r.root_widget);let a=e.children.some((e=>!!e.icon));return r.rows=e.children.map(((e,t)=>yi(a?c("<div class='nisl-context-menu-entry-icon-container'></div>").append(e.icon?"string"==typeof e.icon?c(`<img src="${e.icon}">`):e.icon():null):null,xi(e.text),_i().css("min-width","10px"),"submenu"==e.type?vi().setInnerHtml("&#x276F;"):null).addClass("nisl-context-menu-entry").tapRaw((e=>e.on("click",(e=>{e.stopPropagation(),o(r,t)})).on("mouseover",(()=>{s(r,t),l(r)})))))),r.root_widget.append(...r.rows),r}function s(e,t){t!=e.highlight&&(e.open_child&&i(e.open_child),null!=e.highlight&&(e.rows[e.highlight].toggleClass("nisl-context-menu-entry-selected",!1),e.highlight=null),null!=t&&(e.rows[t].toggleClass("nisl-context-menu-entry-selected",!0),e.highlight=t))}function a(e){let t=e.root_page;for(;null==t?void 0:t.open_child;)t=t.open_child;return t}function l(e){if(null==e.highlight)return;let t=e.underlying.children[e.highlight];"submenu"==t.type&&(i(e.open_child),e.open_child=r(t,e,e.root),u(e.open_child,e.rows[e.highlight].raw(),null))}function u(e,t,i){const o=ie(t).is(".tippy-content *");e.tippy_instance=ri(t,{placement:"right-start",trigger:"manual",interactive:!0,arrow:!1,offset:[0,0],animation:!1,interactiveBorder:20,interactiveDebounce:.5,content:e.root_widget.raw(),maxWidth:"none",zIndex:10001,appendTo:o?"parent":document.body}),e.parent||e.tippy_instance.setProps({onHidden:()=>n(e.root),onMount:()=>e.root.root_page.root_widget.raw().focus()}),i&&e.tippy_instance.setProps({getReferenceClientRect:()=>({width:0,height:0,top:i.y,bottom:i.y,left:i.x,right:i.x})}),e.tippy_instance.show()}e.init=function(t){let s={cancelled:pi(),closed:pi(),menu:t,root_page:null};return t.children.push({type:"basic",text:"Cancel",handler:()=>n(s)}),s.root_page=r(t,null,s),s.root_page.root_widget.container.on("keydown",(t=>{"Escape"==t.key&&(t.stopPropagation(),n(s));let r=a(s);"ArrowRight"==t.key&&null!=r.highlight&&"submenu"==r.underlying.children[r.highlight].type&&o(r),"ArrowLeft"==t.key&&r.parent&&i(r),"ArrowUp"==t.key&&e.highlight(r,null!=r.highlight?(r.highlight-1+r.underlying.children.length)%r.underlying.children.length:r.underlying.children.length-1),"ArrowDown"==t.key&&e.highlight(r,null!=r.highlight?(r.highlight+1)%r.underlying.children.length:0),"Enter"==t.key&&o(r)})),s},e.close=i,e.cancel=n,e.confirm=o,e.render=r,e.highlight=s,e.deepest=a,e.openSubmenu=l,e.show=u}(fi||(fi={}));class wi{constructor(e){this.menu=e,this.openMenuTree=null,this.openMenuTree&&(fi.cancel(this.openMenuTree),this.openMenuTree=null),this.openMenuTree=fi.init(this.menu)}showFromEvent(e){return this.showFromEvent2(e.originalEvent)}showFromEvent2(e){return this.show(e.target,{x:e.clientX,y:e.clientY})}show(e,t){return fi.show(this.openMenuTree.root_page,e,t),this}onCancel(e){return this.openMenuTree.cancelled.on(e),this}onClosed(e){return this.openMenuTree.closed.on(e),this}}class bi{constructor(){this.handlers=[]}bind(e){return this.handlers.push(e),this}kill(){this.handlers.forEach((e=>e.remove()))}}class ki{constructor(e){this.groups=e}getGroupIndex(e){if(null==e)return null;for(let t=0;t<this.groups.length-1;t++)if(e<this.groups[t+1].min)return t;return this.groups.length-1}get(e){return this.groups[e]}getForZoom(e){return this.groups[this.getGroupIndex(e)]}}!function(e){e.none=new e([{min:-1e3,value:null}])}(ki||(ki={}));class Ti{constructor(e){this.groups=e}getGroupIndex(e){return this.groups.findIndex((t=>t.floors.includes(e)))}get(e){return this.groups[e]}}!function(e){e.none=new e([{floors:[0,1,2,3],value:null}]),e.single=function(t,i=void 0){return new e([{floors:[t],value:i},{floors:[0,1,2,3],hidden_here:!0}])},e.special=function(t){return new e([{floors:[t],value:{correct_level:!0}},{floors:[0,1,2,3],value:{correct_level:!1}}])}}(Ti||(Ti={}));var Si=ui.observe_combined;class Ci extends a.FeatureGroup{constructor(){super([]),this.tooltip_hook=mi(null),this.interactive=!1,this.tooltip=null,this.parent=null,this.zoom_sensitivity_layers=ki.none,this.floor_sensitivity_layers=Ti.none,this.render_group=mi({floor:0,zoom:0}).equality(((e,t)=>e.floor==t.floor&&e.zoom==t.zoom)),this.highlighted=mi(!1),this.visible=mi(!0),this.opacity=mi(1),this.culled=mi(!1),this.rendering_requested=!1,this.rendered_props=null,this.desired_render_props=mi(null).equality(Ci.RenderProps.equals),this.on("mouseover",(()=>{var e;this.interactive&&(null===(e=this.parent)||void 0===e||e.updateHovering(this,!0))})),this.on("mouseout",(()=>{var e;this.interactive&&(null===(e=this.parent)||void 0===e||e.updateHovering(this,!1))})),Si({v:this.visible,c:this.culled,o:this.opacity,h:this.highlighted,g:this.render_group}).subscribe((()=>this.desired_render_props.set(this.getDesiredRenderProps())),!0),this.desired_render_props.subscribe((()=>this.requestRendering()))}setInteractive(e=!0){var t;return this.interactive=e,e||null===(t=this.parent)||void 0===t||t.updateHovering(this,!1),this}setTooltip(e){return this.tooltip=e,e&&this.setInteractive(!0),this}async renderTool(){var e;return null===(e=this.tooltip)||void 0===e?void 0:e.call(this,this)}remove(){return this.parent?this.parent.removeEntity(this):super.remove(),this}getDesiredRenderProps(){const e=this.floor_sensitivity_layers.get(this.render_group.value().floor),t=this.zoom_sensitivity_layers.get(this.render_group.value().zoom);return{render_at_all:!e.hidden_here&&!t.hidden_here&&this.visible.value()&&!this.culled.value(),opacity:this.opacity.value(),highlight:this.highlighted.value(),zoom_group_index:this.render_group.value().zoom,floor_group_index:this.render_group.value().floor}}isStillHovered(){return this.getLayers().some((e=>{var t;return(e instanceof a.Marker||e instanceof a.Path)&&(null===(t=e.getElement())||void 0===t?void 0:t.matches(":hover"))}))}isActive(){var e;return(null===(e=this.parent)||void 0===e?void 0:e.activeEntity())==this}setVisible(e){return this.visible.set(e),this}requestRendering(e=!1){!this.parent||this.rendering_requested&&!e||(this.rendering_requested=!0,this.parent.rendering.request(this))}render(e=!1){var t;const i=this.desired_render_props.value();(null===(t=this.parent)||void 0===t?void 0:t.getMap())&&(this.rendering_requested||e||!Ci.RenderProps.equals(this.rendered_props,i))&&(this.rendering_requested=!1,this.rendered_props=i,this.clearLayers(),i.render_at_all&&this.tooltip_hook.set(this.render_implementation(i)))}requestActivation(e){var t;return null===(t=this.parent)||void 0===t?void 0:t.requestEntityActivation(this,e)}async resetActivation(){var e;this.isActive()&&await(null===(e=this.parent)||void 0===e?void 0:e.requestEntityActivation(null))}async contextMenu(e){return null}setCulled(e){this.culled.set(e)}setOpacity(e){this.opacity.set(e)}setFloorAndZoom(e,t){const i=this.zoom_sensitivity_layers.getGroupIndex(t),n=this.floor_sensitivity_layers.getGroupIndex(e);this.render_group.set({floor:n,zoom:i})}}!function(e){let t;e.default_zoom_scale_layers=new ki([{min:-100,value:{scale:.25}},{min:0,value:{scale:.5}},{min:1.5,value:{scale:1}}]),e.default_local_zoom_scale_layers=new ki([{min:-100,hidden_here:!0,value:{scale:.25}},{min:0,value:{scale:.5}},{min:5,value:{scale:1}}]),function(e){e.equals=function(e,t){return null!=e&&null!=t&&(!e.render_at_all&&!t.render_at_all||e.render_at_all==t.render_at_all&&e.highlight==t.highlight&&e.opacity==t.opacity&&e.floor_group_index==t.floor_group_index&&e.zoom_group_index==t.zoom_group_index)}}(t=e.RenderProps||(e.RenderProps={}))}(Ci||(Ci={}));class Ei{constructor(e,t){this.parent=e,this.rect=t,this.elements=[],this.subdivisions=[],this.cull_rectangle=null,this.is_culled=!1,this.is_final_depth=F.width(t)<=32}propagateCulled(e,t,i=!1){this.cull_rectangle=e;const n=this.is_culled;t&&!n?(this.is_culled=t,this.elements.forEach((e=>e.setCulled(!0))),this.subdivisions.forEach((t=>t.propagateCulled(e,!0)))):t||(this.is_culled=t,i?this.elements.forEach((t=>t.setCulled(!F.overlaps(t.bounds(),e)))):this.elements.forEach((e=>e.setCulled(!1))),this.subdivisions.forEach((t=>{t.cull(e,i)})))}cull(e,t=!1){e&&this.propagateCulled(e,!F.overlaps(e,this.rect),t)}createSubdivisions(){if(F.width(this.rect)<=32)return;if(this.subdivisions.length>0)return;const e=F.center(this.rect);this.subdivisions=[F.from(this.rect.topleft,j.add(e,{x:0,y:1})),F.from(F.topRight(this.rect),j.add(e,{x:1,y:1})),F.from(this.rect.botright,j.add(e,{x:1,y:0})),F.from(F.bottomLeft(this.rect),e)].map((e=>new Ei(this,e)));const t=this.elements;this.elements=[],this.isCulled()?this.subdivisions.forEach((e=>e.propagateCulled(this.cull_rectangle,!0))):this.subdivisions.forEach((e=>e.cull(this.cull_rectangle))),t.forEach((e=>this.insert(e)))}insert(e){const t=e.bounds();let i=this;for(;;){!i.is_final_depth&&0==i.subdivisions.length&&i.elements.length>=10&&i.createSubdivisions();const n=i.subdivisions.find((e=>F.containsRect(e.rect,t)));if(!n){e.setCulled(i.is_culled),i.elements.push(e),e.spatial=i;break}i=n}}remove(...e){this.elements=this.elements.filter((t=>!e.includes(t))),e.forEach((e=>{e.spatial=null,e.setCulled(!1)}))}forEachVisible(e){this.is_culled||(this.elements.forEach(e),this.subdivisions.forEach((t=>t.forEachVisible(e))))}isLeaf(){return 0==this.subdivisions.length}bounds(){return o.cloneDeep(this.rect)}isCulled(){return this.is_culled}getChildren(){return[...this.subdivisions]}getElements(){return[...this.elements]}static init(e){return new Ei(null,e)}}var Ai=i(8350);class zi{constructor(){this._data=[],this._data=new Array(zi.CHUNK_DIMENSIONS.x*zi.CHUNK_DIMENSIONS.y)}get(e){var t;return null===(t=this._data[e.chunk_i])||void 0===t?void 0:t[e.tile_i]}set(e,t){this._data[e.chunk_i]||(this._data[e.chunk_i]=new Array(zi.CHUNK_SIZE*zi.CHUNK_SIZE)),this._data[e.chunk_i][e.tile_i]=t}}function Li(e){let t=e.length;for(;--t>=0;)e[t]=0}!function(e){e.CHUNK_SIZE=64,e.CHUNK_DIMENSIONS={x:100,y:200},e.split=function(t){let i={x:Math.floor(t.x/e.CHUNK_SIZE),y:Math.floor(t.y/e.CHUNK_SIZE)},n={x:t.x%e.CHUNK_SIZE,y:t.y%e.CHUNK_SIZE};return{coords:t,chunk:i,tile:n,chunk_i:i.y*e.CHUNK_DIMENSIONS.x+i.x,tile_i:n.y*e.CHUNK_SIZE+n.x}}}(zi||(zi={}));const Pi=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Mi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ii=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Oi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Di=new Array(576);Li(Di);const Ri=new Array(60);Li(Ri);const Bi=new Array(512);Li(Bi);const Ni=new Array(256);Li(Ni);const ji=new Array(29);Li(ji);const Fi=new Array(30);function qi(e,t,i,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}let Ui,Hi,Vi;function $i(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Li(Fi);const Wi=e=>e<256?Bi[e]:Bi[256+(e>>>7)],Zi=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Gi=(e,t,i)=>{e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,Zi(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},Ki=(e,t,i)=>{Gi(e,i[2*t],i[2*t+1])},Yi=(e,t)=>{let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1},Ji=(e,t,i)=>{const n=new Array(16);let o,r,s=0;for(o=1;o<=15;o++)s=s+i[o-1]<<1,n[o]=s;for(r=0;r<=t;r++){let t=e[2*r+1];0!==t&&(e[2*r]=Yi(n[t]++,t))}},Xi=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Qi=e=>{e.bi_valid>8?Zi(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},en=(e,t,i,n)=>{const o=2*t,r=2*i;return e[o]<e[r]||e[o]===e[r]&&n[t]<=n[i]},tn=(e,t,i)=>{const n=e.heap[i];let o=i<<1;for(;o<=e.heap_len&&(o<e.heap_len&&en(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!en(t,n,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=n},nn=(e,t,i)=>{let n,o,r,s,a=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+a++],n+=(255&e.pending_buf[e.sym_buf+a++])<<8,o=e.pending_buf[e.sym_buf+a++],0===n?Ki(e,o,t):(r=Ni[o],Ki(e,r+256+1,t),s=Pi[r],0!==s&&(o-=ji[r],Gi(e,o,s)),n--,r=Wi(n),Ki(e,r,i),s=Mi[r],0!==s&&(n-=Fi[r],Gi(e,n,s)))}while(a<e.sym_next);Ki(e,256,t)},on=(e,t)=>{const i=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,r=t.stat_desc.elems;let s,a,l,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<r;s++)0!==i[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):i[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,i[2*l]=1,e.depth[l]=0,e.opt_len--,o&&(e.static_len-=n[2*l+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)tn(e,i,s);l=r;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],tn(e,i,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,i[2*l]=i[2*s]+i[2*a],e.depth[l]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,i[2*s+1]=i[2*a+1]=l,e.heap[1]=l++,tn(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const i=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,h,d,p,g,m=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(i[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],d=i[2*i[2*u+1]+1]+1,d>l&&(d=l,m++),i[2*u+1]=d,u>n||(e.bl_count[d]++,p=0,u>=a&&(p=s[u-a]),g=i[2*u],e.opt_len+=g*(d+p),r&&(e.static_len+=g*(o[2*u+1]+p)));if(0!==m){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(d=l;0!==d;d--)for(u=e.bl_count[d];0!==u;)h=e.heap[--c],h>n||(i[2*h+1]!==d&&(e.opt_len+=(d-i[2*h+1])*i[2*h],i[2*h+1]=d),u--)}})(e,t),Ji(i,c,e.bl_count)},rn=(e,t,i)=>{let n,o,r=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)o=s,s=t[2*(n+1)+1],++a<l&&o===s||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==r&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,r=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))},sn=(e,t,i)=>{let n,o,r=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=i;n++)if(o=s,s=t[2*(n+1)+1],!(++a<l&&o===s)){if(a<c)do{Ki(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==r&&(Ki(e,o,e.bl_tree),a--),Ki(e,16,e.bl_tree),Gi(e,a-3,2)):a<=10?(Ki(e,17,e.bl_tree),Gi(e,a-3,3)):(Ki(e,18,e.bl_tree),Gi(e,a-11,7));a=0,r=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}};let an=!1;const ln=(e,t,i,n)=>{Gi(e,0+(n?1:0),3),Qi(e),Zi(e,i),Zi(e,~i),i&&e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i};var cn={_tr_init:e=>{an||((()=>{let e,t,i,n,o;const r=new Array(16);for(i=0,n=0;n<28;n++)for(ji[n]=i,e=0;e<1<<Pi[n];e++)Ni[i++]=n;for(Ni[i-1]=n,o=0,n=0;n<16;n++)for(Fi[n]=o,e=0;e<1<<Mi[n];e++)Bi[o++]=n;for(o>>=7;n<30;n++)for(Fi[n]=o<<7,e=0;e<1<<Mi[n]-7;e++)Bi[256+o++]=n;for(t=0;t<=15;t++)r[t]=0;for(e=0;e<=143;)Di[2*e+1]=8,e++,r[8]++;for(;e<=255;)Di[2*e+1]=9,e++,r[9]++;for(;e<=279;)Di[2*e+1]=7,e++,r[7]++;for(;e<=287;)Di[2*e+1]=8,e++,r[8]++;for(Ji(Di,287,r),e=0;e<30;e++)Ri[2*e+1]=5,Ri[2*e]=Yi(e,5);Ui=new qi(Di,Pi,257,286,15),Hi=new qi(Ri,Mi,0,30,15),Vi=new qi(new Array(0),Ii,0,19,7)})(),an=!0),e.l_desc=new $i(e.dyn_ltree,Ui),e.d_desc=new $i(e.dyn_dtree,Hi),e.bl_desc=new $i(e.bl_tree,Vi),e.bi_buf=0,e.bi_valid=0,Xi(e)},_tr_stored_block:ln,_tr_flush_block:(e,t,i,n)=>{let o,r,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),on(e,e.l_desc),on(e,e.d_desc),s=(e=>{let t;for(rn(e,e.dyn_ltree,e.l_desc.max_code),rn(e,e.dyn_dtree,e.d_desc.max_code),on(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Oi[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=o&&(o=r)):o=r=i+5,i+4<=o&&-1!==t?ln(e,t,i,n):4===e.strategy||r===o?(Gi(e,2+(n?1:0),3),nn(e,Di,Ri)):(Gi(e,4+(n?1:0),3),((e,t,i,n)=>{let o;for(Gi(e,t-257,5),Gi(e,i-1,5),Gi(e,n-4,4),o=0;o<n;o++)Gi(e,e.bl_tree[2*Oi[o]+1],3);sn(e,e.dyn_ltree,t-1),sn(e,e.dyn_dtree,i-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),nn(e,e.dyn_ltree,e.dyn_dtree)),Xi(e),n&&Qi(e)},_tr_tally:(e,t,i)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(Ni[i]+256+1)]++,e.dyn_dtree[2*Wi(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{Gi(e,2,3),Ki(e,256,Di),(e=>{16===e.bi_valid?(Zi(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},un=(e,t,i,n)=>{let o=65535&e,r=e>>>16&65535,s=0;for(;0!==i;){s=i>2e3?2e3:i,i-=s;do{o=o+t[n++]|0,r=r+o|0}while(--s);o%=65521,r%=65521}return o|r<<16};const hn=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var dn=(e,t,i,n)=>{const o=hn,r=n+i;e^=-1;for(let i=n;i<r;i++)e=e>>>8^o[255&(e^t[i])];return~e},pn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},gn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:mn,_tr_stored_block:fn,_tr_flush_block:yn,_tr_tally:vn,_tr_align:_n}=cn,{Z_NO_FLUSH:xn,Z_PARTIAL_FLUSH:wn,Z_FULL_FLUSH:bn,Z_FINISH:kn,Z_BLOCK:Tn,Z_OK:Sn,Z_STREAM_END:Cn,Z_STREAM_ERROR:En,Z_DATA_ERROR:An,Z_BUF_ERROR:zn,Z_DEFAULT_COMPRESSION:Ln,Z_FILTERED:Pn,Z_HUFFMAN_ONLY:Mn,Z_RLE:In,Z_FIXED:On,Z_DEFAULT_STRATEGY:Dn,Z_UNKNOWN:Rn,Z_DEFLATED:Bn}=gn,Nn=258,jn=262,Fn=42,qn=113,Un=666,Hn=(e,t)=>(e.msg=pn[t],t),Vn=e=>2*e-(e>4?9:0),$n=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Wn=e=>{let t,i,n,o=e.w_size;t=e.hash_size,n=t;do{i=e.head[--n],e.head[n]=i>=o?i-o:0}while(--t);t=o,n=t;do{i=e.prev[--n],e.prev[n]=i>=o?i-o:0}while(--t)};let Zn=(e,t,i)=>(t<<e.hash_shift^i)&e.hash_mask;const Gn=e=>{const t=e.state;let i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},Kn=(e,t)=>{yn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Gn(e.strm)},Yn=(e,t)=>{e.pending_buf[e.pending++]=t},Jn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Xn=(e,t,i,n)=>{let o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),i),1===e.state.wrap?e.adler=un(e.adler,t,o,i):2===e.state.wrap&&(e.adler=dn(e.adler,t,o,i)),e.next_in+=o,e.total_in+=o,o)},Qn=(e,t)=>{let i,n,o=e.max_chain_length,r=e.strstart,s=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-jn?e.strstart-(e.w_size-jn):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+Nn;let p=c[r+s-1],g=c[r+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(i=t,c[i+s]===g&&c[i+s-1]===p&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(n=Nn-(d-r),r=d-Nn,n>s){if(e.match_start=t,s=n,n>=a)break;p=c[r+s-1],g=c[r+s]}}}while((t=h[t&u])>l&&0!=--o);return s<=e.lookahead?s:e.lookahead},eo=e=>{const t=e.w_size;let i,n,o;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-jn)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Wn(e),n+=t),0===e.strm.avail_in)break;if(i=Xn(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=i,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Zn(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Zn(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<jn&&0!==e.strm.avail_in)},to=(e,t)=>{let i,n,o,r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(i=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,n=e.strstart-e.block_start,i>n+e.strm.avail_in&&(i=n+e.strm.avail_in),i>o&&(i=o),i<r&&(0===i&&t!==kn||t===xn||i!==n+e.strm.avail_in))break;s=t===kn&&i===n+e.strm.avail_in?1:0,fn(e,0,0,s),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,Gn(e.strm),n&&(n>i&&(n=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,i-=n),i&&(Xn(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==xn&&t!==kn&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(Xn(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,r=o>e.w_size?e.w_size:o,n=e.strstart-e.block_start,(n>=r||(n||t===kn)&&t!==xn&&0===e.strm.avail_in&&n<=o)&&(i=n>o?o:n,s=t===kn&&0===e.strm.avail_in&&i===n?1:0,fn(e,e.block_start,i,s),e.block_start+=i,Gn(e.strm)),s?3:1)},io=(e,t)=>{let i,n;for(;;){if(e.lookahead<jn){if(eo(e),e.lookahead<jn&&t===xn)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-jn&&(e.match_length=Qn(e,i)),e.match_length>=3)if(n=vn(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+1]);else n=vn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Kn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===kn?(Kn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Kn(e,!1),0===e.strm.avail_out)?1:2},no=(e,t)=>{let i,n,o;for(;;){if(e.lookahead<jn){if(eo(e),e.lookahead<jn&&t===xn)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-jn&&(e.match_length=Qn(e,i),e.match_length<=5&&(e.strategy===Pn||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,n=vn(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Kn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=vn(e,0,e.window[e.strstart-1]),n&&Kn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=vn(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===kn?(Kn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Kn(e,!1),0===e.strm.avail_out)?1:2};function oo(e,t,i,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=o}const ro=[new oo(0,0,0,0,to),new oo(4,4,8,4,io),new oo(4,5,16,8,io),new oo(4,6,32,32,io),new oo(4,4,16,16,no),new oo(8,16,32,32,no),new oo(8,16,128,128,no),new oo(8,32,128,256,no),new oo(32,128,258,1024,no),new oo(32,258,258,4096,no)];function so(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Bn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),$n(this.dyn_ltree),$n(this.dyn_dtree),$n(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),$n(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),$n(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ao=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Fn&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==qn&&t.status!==Un?1:0},lo=e=>{if(ao(e))return Hn(e,En);e.total_in=e.total_out=0,e.data_type=Rn;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Fn:qn,e.adler=2===t.wrap?0:1,t.last_flush=-2,mn(t),Sn},co=e=>{const t=lo(e);var i;return t===Sn&&((i=e.state).window_size=2*i.w_size,$n(i.head),i.max_lazy_match=ro[i.level].max_lazy,i.good_match=ro[i.level].good_length,i.nice_match=ro[i.level].nice_length,i.max_chain_length=ro[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),t},uo=(e,t,i,n,o,r)=>{if(!e)return En;let s=1;if(t===Ln&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||i!==Bn||n<8||n>15||t<0||t>9||r<0||r>On||8===n&&1!==s)return Hn(e,En);8===n&&(n=9);const a=new so;return e.state=a,a.strm=e,a.status=Fn,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=r,a.method=i,co(e)};var ho={deflateInit:(e,t)=>uo(e,t,Bn,15,8,Dn),deflateInit2:uo,deflateReset:co,deflateResetKeep:lo,deflateSetHeader:(e,t)=>ao(e)||2!==e.state.wrap?En:(e.state.gzhead=t,Sn),deflate:(e,t)=>{if(ao(e)||t>Tn||t<0)return e?Hn(e,En):En;const i=e.state;if(!e.output||0!==e.avail_in&&!e.input||i.status===Un&&t!==kn)return Hn(e,0===e.avail_out?zn:En);const n=i.last_flush;if(i.last_flush=t,0!==i.pending){if(Gn(e),0===e.avail_out)return i.last_flush=-1,Sn}else if(0===e.avail_in&&Vn(t)<=Vn(n)&&t!==kn)return Hn(e,zn);if(i.status===Un&&0!==e.avail_in)return Hn(e,zn);if(i.status===Fn&&0===i.wrap&&(i.status=qn),i.status===Fn){let t=Bn+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=Mn||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=n<<6,0!==i.strstart&&(t|=32),t+=31-t%31,Jn(i,t),0!==i.strstart&&(Jn(i,e.adler>>>16),Jn(i,65535&e.adler)),e.adler=1,i.status=qn,Gn(e),0!==i.pending)return i.last_flush=-1,Sn}if(57===i.status)if(e.adler=0,Yn(i,31),Yn(i,139),Yn(i,8),i.gzhead)Yn(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Yn(i,255&i.gzhead.time),Yn(i,i.gzhead.time>>8&255),Yn(i,i.gzhead.time>>16&255),Yn(i,i.gzhead.time>>24&255),Yn(i,9===i.level?2:i.strategy>=Mn||i.level<2?4:0),Yn(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Yn(i,255&i.gzhead.extra.length),Yn(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=dn(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Yn(i,0),Yn(i,0),Yn(i,0),Yn(i,0),Yn(i,0),Yn(i,9===i.level?2:i.strategy>=Mn||i.level<2?4:0),Yn(i,3),i.status=qn,Gn(e),0!==i.pending)return i.last_flush=-1,Sn;if(69===i.status){if(i.gzhead.extra){let t=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let o=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+o),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>t&&(e.adler=dn(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex+=o,Gn(e),0!==i.pending)return i.last_flush=-1,Sn;t=0,n-=o}let o=new Uint8Array(i.gzhead.extra);i.pending_buf.set(o.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>t&&(e.adler=dn(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=dn(e.adler,i.pending_buf,i.pending-n,n)),Gn(e),0!==i.pending)return i.last_flush=-1,Sn;n=0}t=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Yn(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=dn(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let t,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(e.adler=dn(e.adler,i.pending_buf,i.pending-n,n)),Gn(e),0!==i.pending)return i.last_flush=-1,Sn;n=0}t=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Yn(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>n&&(e.adler=dn(e.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(Gn(e),0!==i.pending))return i.last_flush=-1,Sn;Yn(i,255&e.adler),Yn(i,e.adler>>8&255),e.adler=0}if(i.status=qn,Gn(e),0!==i.pending)return i.last_flush=-1,Sn}if(0!==e.avail_in||0!==i.lookahead||t!==xn&&i.status!==Un){let n=0===i.level?to(i,t):i.strategy===Mn?((e,t)=>{let i;for(;;){if(0===e.lookahead&&(eo(e),0===e.lookahead)){if(t===xn)return 1;break}if(e.match_length=0,i=vn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(Kn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===kn?(Kn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Kn(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===In?((e,t)=>{let i,n,o,r;const s=e.window;for(;;){if(e.lookahead<=Nn){if(eo(e),e.lookahead<=Nn&&t===xn)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,n=s[o],n===s[++o]&&n===s[++o]&&n===s[++o])){r=e.strstart+Nn;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<r);e.match_length=Nn-(r-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=vn(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=vn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(Kn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===kn?(Kn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Kn(e,!1),0===e.strm.avail_out)?1:2})(i,t):ro[i.level].func(i,t);if(3!==n&&4!==n||(i.status=Un),1===n||3===n)return 0===e.avail_out&&(i.last_flush=-1),Sn;if(2===n&&(t===wn?_n(i):t!==Tn&&(fn(i,0,0,!1),t===bn&&($n(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Gn(e),0===e.avail_out))return i.last_flush=-1,Sn}return t!==kn?Sn:i.wrap<=0?Cn:(2===i.wrap?(Yn(i,255&e.adler),Yn(i,e.adler>>8&255),Yn(i,e.adler>>16&255),Yn(i,e.adler>>24&255),Yn(i,255&e.total_in),Yn(i,e.total_in>>8&255),Yn(i,e.total_in>>16&255),Yn(i,e.total_in>>24&255)):(Jn(i,e.adler>>>16),Jn(i,65535&e.adler)),Gn(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Sn:Cn)},deflateEnd:e=>{if(ao(e))return En;const t=e.state.status;return e.state=null,t===qn?Hn(e,An):Sn},deflateSetDictionary:(e,t)=>{let i=t.length;if(ao(e))return En;const n=e.state,o=n.wrap;if(2===o||1===o&&n.status!==Fn||n.lookahead)return En;if(1===o&&(e.adler=un(e.adler,t,i,0)),n.wrap=0,i>=n.w_size){0===o&&($n(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(i-n.w_size,i),0),t=e,i=n.w_size}const r=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,eo(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=Zn(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,eo(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=r,n.wrap=o,Sn},deflateInfo:"pako deflate (from Nodeca project)"};const po=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var go={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const t in i)po(i,t)&&(e[t]=i[t])}}return e},flattenChunks:e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,n=0,o=e.length;t<o;t++){let o=e[t];i.set(o,n),n+=o.length}return i}};let mo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){mo=!1}const fo=new Uint8Array(256);for(let e=0;e<256;e++)fo[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;fo[254]=fo[254]=1;var yo={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,n,o,r,s=e.length,a=0;for(o=0;o<s;o++)i=e.charCodeAt(o),55296==(64512&i)&&o+1<s&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),a+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(a),r=0,o=0;r<a;o++)i=e.charCodeAt(o),55296==(64512&i)&&o+1<s&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),i<128?t[r++]=i:i<2048?(t[r++]=192|i>>>6,t[r++]=128|63&i):i<65536?(t[r++]=224|i>>>12,t[r++]=128|i>>>6&63,t[r++]=128|63&i):(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63,t[r++]=128|i>>>6&63,t[r++]=128|63&i);return t},buf2string:(e,t)=>{const i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,o;const r=new Array(2*i);for(o=0,n=0;n<i;){let t=e[n++];if(t<128){r[o++]=t;continue}let s=fo[t];if(s>4)r[o++]=65533,n+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&n<i;)t=t<<6|63&e[n++],s--;s>1?r[o++]=65533:t<65536?r[o++]=t:(t-=65536,r[o++]=55296|t>>10&1023,r[o++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&mo)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i="";for(let n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i})(r,o)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+fo[e[i]]>t?i:t}},vo=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const _o=Object.prototype.toString,{Z_NO_FLUSH:xo,Z_SYNC_FLUSH:wo,Z_FULL_FLUSH:bo,Z_FINISH:ko,Z_OK:To,Z_STREAM_END:So,Z_DEFAULT_COMPRESSION:Co,Z_DEFAULT_STRATEGY:Eo,Z_DEFLATED:Ao}=gn;function zo(e){this.options=go.assign({level:Co,method:Ao,chunkSize:16384,windowBits:15,memLevel:8,strategy:Eo},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vo,this.strm.avail_out=0;let i=ho.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==To)throw new Error(pn[i]);if(t.header&&ho.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?yo.string2buf(t.dictionary):"[object ArrayBuffer]"===_o.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=ho.deflateSetDictionary(this.strm,e),i!==To)throw new Error(pn[i]);this._dict_set=!0}}function Lo(e,t){const i=new zo(t);if(i.push(e,!0),i.err)throw i.msg||pn[i.err];return i.result}zo.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize;let o,r;if(this.ended)return!1;for(r=t===~~t?t:!0===t?ko:xo,"string"==typeof e?i.input=yo.string2buf(e):"[object ArrayBuffer]"===_o.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(r===wo||r===bo)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(o=ho.deflate(i,r),o===So)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),o=ho.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===To;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},zo.prototype.onData=function(e){this.chunks.push(e)},zo.prototype.onEnd=function(e){e===To&&(this.result=go.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Po={Deflate:zo,deflate:Lo,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Lo(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Lo(e,t)},constants:gn};const Mo=16209;var Io=function(e,t){let i,n,o,r,s,a,l,c,u,h,d,p,g,m,f,y,v,_,x,w,b,k,T,S;const C=e.state;i=e.next_in,T=e.input,n=i+(e.avail_in-5),o=e.next_out,S=e.output,r=o-(t-e.avail_out),s=o+(e.avail_out-257),a=C.dmax,l=C.wsize,c=C.whave,u=C.wnext,h=C.window,d=C.hold,p=C.bits,g=C.lencode,m=C.distcode,f=(1<<C.lenbits)-1,y=(1<<C.distbits)-1;e:do{p<15&&(d+=T[i++]<<p,p+=8,d+=T[i++]<<p,p+=8),v=g[d&f];t:for(;;){if(_=v>>>24,d>>>=_,p-=_,_=v>>>16&255,0===_)S[o++]=65535&v;else{if(!(16&_)){if(64&_){if(32&_){C.mode=16191;break e}e.msg="invalid literal/length code",C.mode=Mo;break e}v=g[(65535&v)+(d&(1<<_)-1)];continue t}for(x=65535&v,_&=15,_&&(p<_&&(d+=T[i++]<<p,p+=8),x+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=T[i++]<<p,p+=8,d+=T[i++]<<p,p+=8),v=m[d&y];;){if(_=v>>>24,d>>>=_,p-=_,_=v>>>16&255,16&_){if(w=65535&v,_&=15,p<_&&(d+=T[i++]<<p,p+=8,p<_&&(d+=T[i++]<<p,p+=8)),w+=d&(1<<_)-1,w>a){e.msg="invalid distance too far back",C.mode=Mo;break e}if(d>>>=_,p-=_,_=o-r,w>_){if(_=w-_,_>c&&C.sane){e.msg="invalid distance too far back",C.mode=Mo;break e}if(b=0,k=h,0===u){if(b+=l-_,_<x){x-=_;do{S[o++]=h[b++]}while(--_);b=o-w,k=S}}else if(u<_){if(b+=l+u-_,_-=u,_<x){x-=_;do{S[o++]=h[b++]}while(--_);if(b=0,u<x){_=u,x-=_;do{S[o++]=h[b++]}while(--_);b=o-w,k=S}}}else if(b+=u-_,_<x){x-=_;do{S[o++]=h[b++]}while(--_);b=o-w,k=S}for(;x>2;)S[o++]=k[b++],S[o++]=k[b++],S[o++]=k[b++],x-=3;x&&(S[o++]=k[b++],x>1&&(S[o++]=k[b++]))}else{b=o-w;do{S[o++]=S[b++],S[o++]=S[b++],S[o++]=S[b++],x-=3}while(x>2);x&&(S[o++]=S[b++],x>1&&(S[o++]=S[b++]))}break}if(64&_){e.msg="invalid distance code",C.mode=Mo;break e}v=m[(65535&v)+(d&(1<<_)-1)]}}break}}while(i<n&&o<s);x=p>>3,i-=x,p-=x<<3,d&=(1<<p)-1,e.next_in=i,e.next_out=o,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=o<s?s-o+257:257-(o-s),C.hold=d,C.bits=p};const Oo=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Do=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ro=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Bo=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var No=(e,t,i,n,o,r,s,a)=>{const l=a.bits;let c,u,h,d,p,g,m=0,f=0,y=0,v=0,_=0,x=0,w=0,b=0,k=0,T=0,S=null;const C=new Uint16Array(16),E=new Uint16Array(16);let A,z,L,P=null;for(m=0;m<=15;m++)C[m]=0;for(f=0;f<n;f++)C[t[i+f]]++;for(_=l,v=15;v>=1&&0===C[v];v--);if(_>v&&(_=v),0===v)return o[r++]=20971520,o[r++]=20971520,a.bits=1,0;for(y=1;y<v&&0===C[y];y++);for(_<y&&(_=y),b=1,m=1;m<=15;m++)if(b<<=1,b-=C[m],b<0)return-1;if(b>0&&(0===e||1!==v))return-1;for(E[1]=0,m=1;m<15;m++)E[m+1]=E[m]+C[m];for(f=0;f<n;f++)0!==t[i+f]&&(s[E[t[i+f]]++]=f);if(0===e?(S=P=s,g=20):1===e?(S=Oo,P=Do,g=257):(S=Ro,P=Bo,g=0),T=0,f=0,m=y,p=r,x=_,w=0,h=-1,k=1<<_,d=k-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){A=m-w,s[f]+1<g?(z=0,L=s[f]):s[f]>=g?(z=P[s[f]-g],L=S[s[f]-g]):(z=96,L=0),c=1<<m-w,u=1<<x,y=u;do{u-=c,o[p+(T>>w)+u]=A<<24|z<<16|L}while(0!==u);for(c=1<<m-1;T&c;)c>>=1;if(0!==c?(T&=c-1,T+=c):T=0,f++,0==--C[m]){if(m===v)break;m=t[i+s[f]]}if(m>_&&(T&d)!==h){for(0===w&&(w=_),p+=y,x=m-w,b=1<<x;x+w<v&&(b-=C[x+w],!(b<=0));)x++,b<<=1;if(k+=1<<x,1===e&&k>852||2===e&&k>592)return 1;h=T&d,o[h]=_<<24|x<<16|p-r}}return 0!==T&&(o[p+T]=m-w<<24|64<<16),a.bits=_,0};const{Z_FINISH:jo,Z_BLOCK:Fo,Z_TREES:qo,Z_OK:Uo,Z_STREAM_END:Ho,Z_NEED_DICT:Vo,Z_STREAM_ERROR:$o,Z_DATA_ERROR:Wo,Z_MEM_ERROR:Zo,Z_BUF_ERROR:Go,Z_DEFLATED:Ko}=gn,Yo=16180,Jo=16190,Xo=16191,Qo=16192,er=16194,tr=16199,ir=16200,nr=16206,or=16209,rr=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function sr(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ar=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Yo||t.mode>16211?1:0},lr=e=>{if(ar(e))return $o;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Yo,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Uo},cr=e=>{if(ar(e))return $o;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,lr(e)},ur=(e,t)=>{let i;if(ar(e))return $o;const n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?$o:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,cr(e))},hr=(e,t)=>{if(!e)return $o;const i=new sr;e.state=i,i.strm=e,i.window=null,i.mode=Yo;const n=ur(e,t);return n!==Uo&&(e.state=null),n};let dr,pr,gr=!0;const mr=e=>{if(gr){dr=new Int32Array(512),pr=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(No(1,e.lens,0,288,dr,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;No(2,e.lens,0,32,pr,0,e.work,{bits:5}),gr=!1}e.lencode=dr,e.lenbits=9,e.distcode=pr,e.distbits=5},fr=(e,t,i,n)=>{let o;const r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(t.subarray(i-r.wsize,i),0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>n&&(o=n),r.window.set(t.subarray(i-n,i-n+o),r.wnext),(n-=o)?(r.window.set(t.subarray(i-n,i),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0};var yr={inflateReset:cr,inflateReset2:ur,inflateResetKeep:lr,inflateInit:e=>hr(e,15),inflateInit2:hr,inflate:(e,t)=>{let i,n,o,r,s,a,l,c,u,h,d,p,g,m,f,y,v,_,x,w,b,k,T=0;const S=new Uint8Array(4);let C,E;const A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ar(e)||!e.output||!e.input&&0!==e.avail_in)return $o;i=e.state,i.mode===Xo&&(i.mode=Qo),s=e.next_out,o=e.output,l=e.avail_out,r=e.next_in,n=e.input,a=e.avail_in,c=i.hold,u=i.bits,h=a,d=l,k=Uo;e:for(;;)switch(i.mode){case Yo:if(0===i.wrap){i.mode=Qo;break}for(;u<16;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(2&i.wrap&&35615===c){0===i.wbits&&(i.wbits=15),i.check=0,S[0]=255&c,S[1]=c>>>8&255,i.check=dn(i.check,S,2,0),c=0,u=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",i.mode=or;break}if((15&c)!==Ko){e.msg="unknown compression method",i.mode=or;break}if(c>>>=4,u-=4,b=8+(15&c),0===i.wbits&&(i.wbits=b),b>15||b>i.wbits){e.msg="invalid window size",i.mode=or;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&c?16189:Xo,c=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(i.flags=c,(255&i.flags)!==Ko){e.msg="unknown compression method",i.mode=or;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=or;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&4&i.wrap&&(S[0]=255&c,S[1]=c>>>8&255,i.check=dn(i.check,S,2,0)),c=0,u=0,i.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}i.head&&(i.head.time=c),512&i.flags&&4&i.wrap&&(S[0]=255&c,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,i.check=dn(i.check,S,4,0)),c=0,u=0,i.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&4&i.wrap&&(S[0]=255&c,S[1]=c>>>8&255,i.check=dn(i.check,S,2,0)),c=0,u=0,i.mode=16184;case 16184:if(1024&i.flags){for(;u<16;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&4&i.wrap&&(S[0]=255&c,S[1]=c>>>8&255,i.check=dn(i.check,S,2,0)),c=0,u=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(p=i.length,p>a&&(p=a),p&&(i.head&&(b=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(r,r+p),b)),512&i.flags&&4&i.wrap&&(i.check=dn(i.check,n,p,r)),a-=p,r+=p,i.length-=p),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===a)break e;p=0;do{b=n[r+p++],i.head&&b&&i.length<65536&&(i.head.name+=String.fromCharCode(b))}while(b&&p<a);if(512&i.flags&&4&i.wrap&&(i.check=dn(i.check,n,p,r)),a-=p,r+=p,b)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===a)break e;p=0;do{b=n[r+p++],i.head&&b&&i.length<65536&&(i.head.comment+=String.fromCharCode(b))}while(b&&p<a);if(512&i.flags&&4&i.wrap&&(i.check=dn(i.check,n,p,r)),a-=p,r+=p,b)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;u<16;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(4&i.wrap&&c!==(65535&i.check)){e.msg="header crc mismatch",i.mode=or;break}c=0,u=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Xo;break;case 16189:for(;u<32;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}e.adler=i.check=rr(c),c=0,u=0,i.mode=Jo;case Jo:if(0===i.havedict)return e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=a,i.hold=c,i.bits=u,Vo;e.adler=i.check=1,i.mode=Xo;case Xo:if(t===Fo||t===qo)break e;case Qo:if(i.last){c>>>=7&u,u-=7&u,i.mode=nr;break}for(;u<3;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}switch(i.last=1&c,c>>>=1,u-=1,3&c){case 0:i.mode=16193;break;case 1:if(mr(i),i.mode=tr,t===qo){c>>>=2,u-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg="invalid block type",i.mode=or}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",i.mode=or;break}if(i.length=65535&c,c=0,u=0,i.mode=er,t===qo)break e;case er:i.mode=16195;case 16195:if(p=i.length,p){if(p>a&&(p=a),p>l&&(p=l),0===p)break e;o.set(n.subarray(r,r+p),s),a-=p,r+=p,l-=p,s+=p,i.length-=p;break}i.mode=Xo;break;case 16196:for(;u<14;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(i.nlen=257+(31&c),c>>>=5,u-=5,i.ndist=1+(31&c),c>>>=5,u-=5,i.ncode=4+(15&c),c>>>=4,u-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=or;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;u<3;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}i.lens[A[i.have++]]=7&c,c>>>=3,u-=3}for(;i.have<19;)i.lens[A[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,C={bits:i.lenbits},k=No(0,i.lens,0,19,i.lencode,0,i.work,C),i.lenbits=C.bits,k){e.msg="invalid code lengths set",i.mode=or;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;T=i.lencode[c&(1<<i.lenbits)-1],f=T>>>24,y=T>>>16&255,v=65535&T,!(f<=u);){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(v<16)c>>>=f,u-=f,i.lens[i.have++]=v;else{if(16===v){for(E=f+2;u<E;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(c>>>=f,u-=f,0===i.have){e.msg="invalid bit length repeat",i.mode=or;break}b=i.lens[i.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===v){for(E=f+3;u<E;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}c>>>=f,u-=f,b=0,p=3+(7&c),c>>>=3,u-=3}else{for(E=f+7;u<E;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}c>>>=f,u-=f,b=0,p=11+(127&c),c>>>=7,u-=7}if(i.have+p>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=or;break}for(;p--;)i.lens[i.have++]=b}}if(i.mode===or)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=or;break}if(i.lenbits=9,C={bits:i.lenbits},k=No(1,i.lens,0,i.nlen,i.lencode,0,i.work,C),i.lenbits=C.bits,k){e.msg="invalid literal/lengths set",i.mode=or;break}if(i.distbits=6,i.distcode=i.distdyn,C={bits:i.distbits},k=No(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,C),i.distbits=C.bits,k){e.msg="invalid distances set",i.mode=or;break}if(i.mode=tr,t===qo)break e;case tr:i.mode=ir;case ir:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=a,i.hold=c,i.bits=u,Io(e,d),s=e.next_out,o=e.output,l=e.avail_out,r=e.next_in,n=e.input,a=e.avail_in,c=i.hold,u=i.bits,i.mode===Xo&&(i.back=-1);break}for(i.back=0;T=i.lencode[c&(1<<i.lenbits)-1],f=T>>>24,y=T>>>16&255,v=65535&T,!(f<=u);){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(y&&!(240&y)){for(_=f,x=y,w=v;T=i.lencode[w+((c&(1<<_+x)-1)>>_)],f=T>>>24,y=T>>>16&255,v=65535&T,!(_+f<=u);){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}c>>>=_,u-=_,i.back+=_}if(c>>>=f,u-=f,i.back+=f,i.length=v,0===y){i.mode=16205;break}if(32&y){i.back=-1,i.mode=Xo;break}if(64&y){e.msg="invalid literal/length code",i.mode=or;break}i.extra=15&y,i.mode=16201;case 16201:if(i.extra){for(E=i.extra;u<E;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,u-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;T=i.distcode[c&(1<<i.distbits)-1],f=T>>>24,y=T>>>16&255,v=65535&T,!(f<=u);){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(!(240&y)){for(_=f,x=y,w=v;T=i.distcode[w+((c&(1<<_+x)-1)>>_)],f=T>>>24,y=T>>>16&255,v=65535&T,!(_+f<=u);){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}c>>>=_,u-=_,i.back+=_}if(c>>>=f,u-=f,i.back+=f,64&y){e.msg="invalid distance code",i.mode=or;break}i.offset=v,i.extra=15&y,i.mode=16203;case 16203:if(i.extra){for(E=i.extra;u<E;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,u-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=or;break}i.mode=16204;case 16204:if(0===l)break e;if(p=d-l,i.offset>p){if(p=i.offset-p,p>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=or;break}p>i.wnext?(p-=i.wnext,g=i.wsize-p):g=i.wnext-p,p>i.length&&(p=i.length),m=i.window}else m=o,g=s-i.offset,p=i.length;p>l&&(p=l),l-=p,i.length-=p;do{o[s++]=m[g++]}while(--p);0===i.length&&(i.mode=ir);break;case 16205:if(0===l)break e;o[s++]=i.length,l--,i.mode=ir;break;case nr:if(i.wrap){for(;u<32;){if(0===a)break e;a--,c|=n[r++]<<u,u+=8}if(d-=l,e.total_out+=d,i.total+=d,4&i.wrap&&d&&(e.adler=i.check=i.flags?dn(i.check,o,d,s-d):un(i.check,o,d,s-d)),d=l,4&i.wrap&&(i.flags?c:rr(c))!==i.check){e.msg="incorrect data check",i.mode=or;break}c=0,u=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;u<32;){if(0===a)break e;a--,c+=n[r++]<<u,u+=8}if(4&i.wrap&&c!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=or;break}c=0,u=0}i.mode=16208;case 16208:k=Ho;break e;case or:k=Wo;break e;case 16210:return Zo;default:return $o}return e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=a,i.hold=c,i.bits=u,(i.wsize||d!==e.avail_out&&i.mode<or&&(i.mode<nr||t!==jo))&&fr(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,i.total+=d,4&i.wrap&&d&&(e.adler=i.check=i.flags?dn(i.check,o,d,e.next_out-d):un(i.check,o,d,e.next_out-d)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Xo?128:0)+(i.mode===tr||i.mode===er?256:0),(0===h&&0===d||t===jo)&&k===Uo&&(k=Go),k},inflateEnd:e=>{if(ar(e))return $o;let t=e.state;return t.window&&(t.window=null),e.state=null,Uo},inflateGetHeader:(e,t)=>{if(ar(e))return $o;const i=e.state;return 2&i.wrap?(i.head=t,t.done=!1,Uo):$o},inflateSetDictionary:(e,t)=>{const i=t.length;let n,o,r;return ar(e)?$o:(n=e.state,0!==n.wrap&&n.mode!==Jo?$o:n.mode===Jo&&(o=1,o=un(o,t,i,0),o!==n.check)?Wo:(r=fr(e,t,i,i),r?(n.mode=16210,Zo):(n.havedict=1,Uo)))},inflateInfo:"pako inflate (from Nodeca project)"},vr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const _r=Object.prototype.toString,{Z_NO_FLUSH:xr,Z_FINISH:wr,Z_OK:br,Z_STREAM_END:kr,Z_NEED_DICT:Tr,Z_STREAM_ERROR:Sr,Z_DATA_ERROR:Cr,Z_MEM_ERROR:Er}=gn;function Ar(e){this.options=go.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vo,this.strm.avail_out=0;let i=yr.inflateInit2(this.strm,t.windowBits);if(i!==br)throw new Error(pn[i]);if(this.header=new vr,yr.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=yo.string2buf(t.dictionary):"[object ArrayBuffer]"===_r.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=yr.inflateSetDictionary(this.strm,t.dictionary),i!==br)))throw new Error(pn[i])}function zr(e,t){const i=new Ar(t);if(i.push(e),i.err)throw i.msg||pn[i.err];return i.result}Ar.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let r,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?wr:xr,"[object ArrayBuffer]"===_r.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),r=yr.inflate(i,s),r===Tr&&o&&(r=yr.inflateSetDictionary(i,o),r===br?r=yr.inflate(i,s):r===Cr&&(r=Tr));i.avail_in>0&&r===kr&&i.state.wrap>0&&0!==e[i.next_in];)yr.inflateReset(i),r=yr.inflate(i,s);switch(r){case Sr:case Cr:case Tr:case Er:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===kr))if("string"===this.options.to){let e=yo.utf8border(i.output,i.next_out),t=i.next_out-e,o=yo.buf2string(i.output,e);i.next_out=t,i.avail_out=n-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(o)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==br||0!==a){if(r===kr)return r=yr.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Ar.prototype.onData=function(e){this.chunks.push(e)},Ar.prototype.onEnd=function(e){e===br&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=go.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Lr={Inflate:Ar,inflate:zr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,zr(e,t)},ungzip:zr,constants:gn};const{Deflate:Pr,deflate:Mr,deflateRaw:Ir,gzip:Or}=Po,{Inflate:Dr,inflate:Rr,inflateRaw:Br,ungzip:Nr}=Lr;var jr,Fr,qr,Ur,Hr,Vr,$r=Mr,Wr=Rr;!function(e){e.free=function(e,t){return Math.floor(e/[1,2,4,8,16,32,64,128][t-1])%2!=0}}(jr||(jr={})),function(e){e.eq=function(e,t){return W.eq2(e.tile,t.tile)&&e.direction==t.direction}}(Fr||(Fr={}));class Zr{async fetch(e,t,i){let n=await fetch(`map/collision/collision-${e}-${t}-${i}.bin`);return new Uint8Array(Wr(await n.arrayBuffer()))}constructor(){this.meta={chunks_per_file:20,chunks_x:100,chunks_z:200,chunk_size:64},this.chunks=[null,null,null,null].map((()=>Array(this.meta.chunks_x*this.meta.chunks_z/(this.meta.chunks_per_file*this.meta.chunks_per_file))))}static get(){return Zr._instance}async getTile(e){let t=e.level||0,i=Math.floor(e.x/(this.meta.chunk_size*this.meta.chunks_per_file)),n=Math.floor(e.y/(this.meta.chunk_size*this.meta.chunks_per_file)),o=n*this.meta.chunks_per_file+i;if(!this.chunks[t][o]){let e=this.fetch(i,n,t);this.chunks[t][o]=e,e.then((e=>{this.chunks[t][o]=e}))}let r=e.x%(this.meta.chunk_size*this.meta.chunks_per_file),s=e.y%(this.meta.chunk_size*this.meta.chunks_per_file)*(this.meta.chunk_size*this.meta.chunks_per_file)+r;return(await this.chunks[t][o])[s]}}function Gr(e,t){return{x:e.x+t.x,y:e.y+t.y,level:e.level}}async function Kr(e,t,i){return jr.free(await e.getTile(t),i)}Zr._instance=new Zr,function(e){e.cardinals=[1,2,3,4],e.ordinals=[5,6,7,8],e.all=[1,2,3,4,5,6,7,8];const t=[{x:0,y:0},{x:-1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:1},{x:1,y:1},{x:1,y:-1},{x:-1,y:-1}];function i(e){return t[e]}function n(e){let t=F.clampInto(e,{topleft:{x:-11,y:11},botright:{x:11,y:-11}});return[[5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,6,6,6,6,6,6],[5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,6,6,6,6,6,6,6],[5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,6,6,6,6,6,6,6,6],[5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,6,6,6,6,6,6,6,6],[5,5,5,5,5,5,5,5,5,2,2,2,2,2,6,6,6,6,6,6,6,6,6],[5,5,5,5,5,5,5,5,5,2,2,2,2,2,6,6,6,6,6,6,6,6,6],[1,5,5,5,5,5,5,5,5,2,2,2,2,2,6,6,6,6,6,6,6,6,3],[1,1,5,5,5,5,5,5,5,5,2,2,2,6,6,6,6,6,6,6,6,3,3],[1,1,1,1,5,5,5,5,5,5,2,2,2,6,6,6,6,6,6,3,3,3,3],[1,1,1,1,1,1,1,5,5,5,5,2,6,6,6,6,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,1,1,5,5,2,6,6,3,3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,1,1,1,1,0,3,3,3,3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,1,1,8,8,4,7,7,3,3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,8,8,8,8,4,7,7,7,7,3,3,3,3,3,3,3],[1,1,1,1,8,8,8,8,8,8,4,4,4,7,7,7,7,7,7,3,3,3,3],[1,1,8,8,8,8,8,8,8,8,4,4,4,7,7,7,7,7,7,7,7,3,3],[1,8,8,8,8,8,8,8,8,4,4,4,4,4,7,7,7,7,7,7,7,7,3],[8,8,8,8,8,8,8,8,8,4,4,4,4,4,7,7,7,7,7,7,7,7,7],[8,8,8,8,8,8,8,8,8,4,4,4,4,4,7,7,7,7,7,7,7,7,7],[8,8,8,8,8,8,8,8,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7],[8,8,8,8,8,8,8,8,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7],[8,8,8,8,8,8,8,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7],[8,8,8,8,8,8,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7]][11-t.y][t.x+11]}e.invert=function(e){return[0,3,4,1,2,7,8,5,6][e]},e.isCardinal=function(e){return e>=1&&e<=4},e.isOrdinal=function(e){return e>=5},e.toVector=i,e.fromDelta=function(e){return[[8,4,7],[1,0,3],[5,2,6]][e.y+1][e.x+1]},e.fromVector=n,e.toString=function(e){return["Center","West","North","East","South","North-West","North-East","South-East","South-West"][e]},e.toShortString=function(e){return["C","W","N","E","S","NW","NE","SE","SW"][e]},e.center=0,e.west=1,e.north=2,e.east=3,e.south=4,e.northwest=5,e.northeast=6,e.southeast=7,e.southwest=8,e.transform=function(e,t){return n(j.snap(j.transform(i(e),t)))},e.split=function(t){return[[e.north,e.west],[e.north,e.east],[e.south,e.east],[e.south,e.west]][t-5]},e.rotate=function(t,i){return t==e.center?e.center:(t-1+i)%4+1+4*Math.floor(t/5)},e.continuations=function(t){return[[],[e.west],[e.north],[e.east],[e.south],[e.north,e.west,e.northwest],[e.north,e.east,e.northeast],[e.south,e.east,e.southeast],[e.south,e.west,e.southwest]][t]}}(qr||(qr={})),function(e){e.init_djikstra=function(e,t=Zr.get()){let i={data:t,start:e,tiles:new zi,queue:[zi.split(e)],next:0};return i.tiles.set(i.queue[0],{parent:null}),i};const t=[qr.west,qr.east,qr.south,qr.north,qr.southwest,qr.southeast,qr.northwest,qr.northeast];function i(e,t){let i=function t(i){var n,o;let r=null===(n=e.tiles.get(i))||void 0===n?void 0:n.parent;if(null==(null===(o=e.tiles.get(i))||void 0===o?void 0:o.parent))return[i];let s=t(r);return s.push(i),s}(t).map((e=>o.clone(e.coords)));return i.forEach((t=>t.level=e.start.level)),n(i)}function n(e){let t=[],i=qr.center,n=e[0];for(let o=1;o<e.length;o++){let r=qr.fromDelta(j.sign(j.sub(e[o],n)));r!=i&&(t.push(n),n=e[o],i=r),n=e[o]}return t.push(n),t}e.find=async function(e,n){if(n.origin.level!=e.start.level)return null;if(Vr.isSingleTile(n)){let t=zi.split(n.origin);if(!qr.cardinals.some((t=>Kr(e.data,Gr(n.origin,qr.toVector(t)),qr.invert(t)))))return e.tiles.set(t,{parent:null,unreachable:!0}),null}let o=Vr.activate(n);{let t=o.size;for(let r=0;r<t.x;r++)for(let s=0;s<t.y;s++){const t={x:n.origin.x+r,y:n.origin.y+s,level:n.origin.level};if(o.query(t)){let n=zi.split(t),o=e.tiles.get(n);if(null!=o)return o.unreachable?null:i(e,n)}}}let r=await async function(e,i,n){for(;e.blocked;)await new Promise((e=>setTimeout(e,100)));function r(t,i){let n=zi.split(t);null==e.tiles.get(n)&&(e.tiles.set(n,{parent:i}),e.queue.push(n))}for(e.blocked=!0;e.queue.length<5e3&&e.next<e.queue.length;){let i=e.queue[e.next++];for(let n of t)await Kr(e.data,i.coords,n)&&r(Gr(i.coords,qr.toVector(n)),i);if(s=i.coords,o.query(s))return e.blocked=!1,i.coords}var s;return e.blocked=!1,null}(e);if(!r){let t=Vr.size(n);for(let i=0;i<t.x;i++)for(let r=0;r<t.y;r++){const t={x:n.origin.x+i,y:n.origin.y+r,level:n.origin.level};o.query(t)&&e.tiles.set(zi.split(t),{parent:null,unreachable:!0})}return null}return i(e,zi.split(r))},e.idealPath=function(e,t){if(e.level!=t.level)return null;let i=j.sub(t,e),n=j.abs(i),o=j.add(e,n.x>=n.y?{x:Math.sign(i.x)*(n.x-n.y),y:0}:{x:0,y:Math.sign(i.y)*(n.y-n.x)});return[e,W.lift(o,e.level),t]},e.cleanWaypoints=n,e.pathLength=function(e){let t=0;for(let i=0;i<e.length-1;i++)t+=W.distance(e[i],e[i+1]);return t}}(Ur||(Ur={})),function(e){async function t(e,t,i){if(t.level!=i.level)return null;let n=j.sign(j.sub(i,t)),o=F.from(t,i),r=[];for(0!=n.x&&0!=n.y&&r.push({delta:n,dir:qr.fromDelta(n)}),0!=n.x&&r.push({delta:{x:n.x,y:0},dir:qr.fromDelta({x:n.x,y:0})}),0!=n.y&&r.push({delta:{x:0,y:n.y},dir:qr.fromDelta({x:0,y:n.y})});;){if(j.eq(t,i))return{tile:t,direction:qr.fromVector(j.sub(i,t))};let n=null;for(let i of r){let r=Gr(t,i.delta);if(F.containsTile(o,r)&&await Kr(e,t,i.dir)){n=r;break}}if(!n)return null;t=n}}async function i(e,i,n,o){let r=qr.toVector(n);for(let n=o;n>0;n--){let o=await t(e,i,Gr(i,j.scale(n,r)));if(o)return o}return null}async function n(e,n,o=Zr.get()){let r=j.sub(n,e);if(j.max_axis(r)>10){let t=qr.fromVector(r);return await i(o,e,t,10)}return t(o,e,n)}async function o(e,t,i=Zr.get()){return n(e,t,i)}async function r(e,t=Zr.get()){return i(t,e.tile,e.direction,10)}async function s(e,t=Zr.get()){let n=await i(t,e.tile,qr.invert(e.direction),7);return n?{tile:n.tile,direction:e.direction}:null}e.possibility_raster=async function(e,t=[]){const i=Vr.activate(Vr.init(W.move(e,{x:-10,y:-10}),{x:21,y:21},!1));async function n(t){i.set(t.position,!0);let o=j.abs(j.sub(t.position,e)),r=o.x<10,s=o.y<10;if(qr.isCardinal(t.movement))s&&r&&await Kr(Zr.get(),t.position,t.movement)&&await n({position:W.move(t.position,qr.toVector(t.movement)),movement:t.movement});else{let[e,i]=qr.split(t.movement);r&&s&&await Kr(Zr.get(),t.position,t.movement)?(await n({position:W.move(t.position,qr.toVector(t.movement)),movement:t.movement}),await Kr(Zr.get(),t.position,e)&&await n({position:W.move(t.position,qr.toVector(e)),movement:e}),await Kr(Zr.get(),t.position,i)&&await n({position:W.move(t.position,qr.toVector(i)),movement:i})):r&&await Kr(Zr.get(),t.position,i)?(await n({position:W.move(t.position,qr.toVector(i)),movement:t.movement}),await Kr(Zr.get(),t.position,e)&&await n({position:W.move(t.position,qr.toVector(e)),movement:e})):s&&await Kr(Zr.get(),t.position,e)&&await n({position:W.move(t.position,qr.toVector(e)),movement:t.movement})}}for(let t of qr.ordinals)await n({position:e,movement:t});function o(t,n){if(0==n)return e;const r=W.move(e,j.scale(n,qr.toVector(t)));return i.query(r)?r:o(t,n-1)}return{targets:t.map((e=>({direction:e,surge:o(e,10),escape:o(qr.invert(e),7)}))),data:i}},e.dive_far_internal=i,e.dive=n,e.barge=o,e.surge=r,e.escape=s,e.generic=async function(e,t,i,a){switch(t){case"surge":return r({tile:i,direction:qr.fromVector(j.sub(a,i))},e);case"dive":return n(i,a,e);case"escape":return s({tile:i,direction:qr.fromVector(j.sub(i,a))},e);case"barge":return o(i,a,e)}},e.cooldown=function(e,t,i){switch(e){case"surge":case"dive":return t?2:i?17:34;case"escape":return i?17:34;case"barge":return 34}},e.isFarDive=async function(e,t){var n;const o=j.sub(t,e);if(0!=o.y&&0!=o.x&&Math.abs(o.x)!=Math.abs(o.y))return!1;if(10==j.max_axis(o)&&(0==o.y||0==o.x||Math.abs(o.x)==Math.abs(o.y)))return!0;const r=qr.fromVector(o),s=null===(n=await i(Zr.get(),e,r,10))||void 0===n?void 0:n.tile;return W.equals(s,t)}}(Hr||(Hr={})),function(e){var t=B.todo;class i{constructor(e){var t;this.parent=e,this.size=null!==(t=o.cloneDeep(e.size))&&void 0!==t?t:{x:1,y:1},e.data?this.data=(0,Ai.Kp)(e.data):this.data=new Uint8Array(Math.ceil(this.size.x*this.size.y/8)).fill(255),this.origin=o.cloneDeep(e.origin)}resize(e){t()}save(){const e=Z.from(this.origin,W.move(this.origin,j.sub(this.size,{x:1,y:1}))),t=(()=>{for(let t=e.topleft.x;t<=e.botright.x;t++)for(let i=e.botright.y;i<=e.topleft.y;i++)if(!this.query({x:t,y:i,level:e.level}))return!1;return!0})();return this.parent.data=t?void 0:(0,Ai.if)(this.data),1==this.size.x&&1==this.size.y?this.parent.size=void 0:this.parent.size=o.cloneDeep(this.size),this.parent.origin=o.cloneDeep(this.origin),this}disconnect(){this.parent&&(this.parent._active=null,this.parent=null)}index(e){const t=j.sub(e,this.origin),i=t.x+t.y*this.size.x;return[Math.floor(i/8),i%8]}query(e){const t=this.size;if(e.x<this.origin.x||e.y<this.origin.y||e.x>=this.origin.x+t.x||e.y>=this.origin.y+t.y)return!1;const[i,n]=this.index(e);return!!(this.data[i]>>n&1)}set(e,t){const[i,n]=this.index(e);return t?this.data[i]|=1<<n:this.data[i]&=255-(1<<n),this}add(e){return this.set(e,!0),this}remove(e){return this.set(e,!1),this}setRectangle(e,t=!0){for(let i=e.topleft.x;i<=e.botright.x;i++)for(let n=e.botright.y;n<=e.topleft.y;n++)this.set({x:i,y:n,level:e.level},t);return this}rect(){return Z.from(this.origin,W.move(this.origin,j.add(this.size,{x:-1,y:-1})))}center(e=!0){let t=[{pos:Z.center(this.rect(),e),dirs:qr.all}],i=0;for(;i<t.length&&i<50;){const e=t[i];if(this.query(e.pos))return e.pos;for(let i of e.dirs)t.push({pos:W.move(e.pos,qr.toVector(i)),dirs:qr.continuations(i)});i++}return null}getTiles(){const e=[];for(let t=0;t<this.size.x;t++)for(let i=0;i<this.size.y;i++){const n=W.move(this.origin,{x:t,y:i});this.query(n)&&e.push(n)}return e}}function n(e){var t;return e?(null===(t=e._active)||void 0===t?void 0:t.query)?e._active:e._active=new i(e):null}function r(e,t={x:1,y:1},i=!0){return{origin:e,size:t,data:i?void 0:(0,Ai.if)(new Uint8Array(Math.ceil(t.x*t.y/8)).fill(0))}}function s(e,t=!0){return r(Z.bl(e),{x:F.tileWidth(e),y:F.tileHeight(e)},t)}e.ActiveTileArea=i,e.activate=n,e.init=r,e.fromTiles=function(t){if(0==t.length)return e.init({x:0,y:0,level:0});const i=n(s(Z.from(...t),!1));for(let e of t)i.add(e);return i.save(),i.parent},e.fromRect=s,e.toRect=function(e){return Z.from(e.origin,W.move(e.origin,j.add(e.size?e.size:{x:1,y:1},{x:-1,y:-1})))},e.size=function(e){return e.size||{x:1,y:1}},e.isSingleTile=function(e){return!e.size||1==e.size.x&&1==e.size.y},e.isRectangle=function(e){return!e.data},e.transform=function(t,i){return e.fromTiles(n(t).getTiles().map((e=>W.transform(e,i))))},e.normalize=function(t){return"x"in t?e.init(t):t}}(Vr||(Vr={}));var Yr,Jr=Vr.activate,Xr=B.index;function Qr(e,t={}){return a.polygon([{x:e.x-.5,y:e.y-.5},{x:e.x-.5,y:e.y+.5},{x:e.x+.5,y:e.y+.5},{x:e.x+.5,y:e.y-.5}].map(j.toLatLong),t)}function es(e,t=[{},{}]){return[a.polygon([{x:e.x-.5,y:e.y-.5},{x:e.x-.5,y:e.y+.5},{x:e.x+.5,y:e.y+.5}].map(j.toLatLong),t[0]),a.polygon([{x:e.x-.5,y:e.y-.5},{x:e.x+.5,y:e.y+.5},{x:e.x+.5,y:e.y-.5}].map(j.toLatLong),t[1])]}function ts(e){return a.polygon([{x:e.topleft.x-.5,y:e.topleft.y+.5},{x:e.botright.x+.5,y:e.topleft.y+.5},{x:e.botright.x+.5,y:e.botright.y-.5},{x:e.topleft.x-.5,y:e.botright.y-.5}].map(j.toLatLong))}function is(e){if(!e.data&&!e.size)return Qr(e.origin);if(!e.data)return ts(Vr.toRect(e));const t=Jr(e),i=(()=>{const e=qr.northwest,t=qr.northeast,i=qr.southeast,n=qr.southwest;return[[],[[e,t]],[[t,i]],[[e,t,i]],[[i,n]],[[e,t],[i,n]],[[t,i,n]],[[e,t,i,n]],[[n,e]],[[n,e,t]],[[n,e],[t,i]],[[n,e,t,i]],[[i,n,e]],[[i,n,e,t]],[[t,i,n,e]],[[e,t,i,n,e]]].map((e=>e.map((e=>e.map((e=>j.scale(.5,qr.toVector(e))))))))})(),n=[];for(let o=0;o<e.size.x;o++)for(let r=0;r<e.size.y;r++){const s=W.move(e.origin,{x:o,y:r});if(!t.query(s))continue;const a=(t.query(W.move(s,{x:0,y:1}))?0:1)+(t.query(W.move(s,{x:1,y:0}))?0:2)+(t.query(W.move(s,{x:0,y:-1}))?0:4)+(t.query(W.move(s,{x:-1,y:0}))?0:8);n.push(...i[a].map((e=>e.map((e=>W.move(s,e))))))}const o=[];for(;n.length>0;){const[e]=n.splice(0,1);for(;n.length>0;){const t=Xr(e,-1);if(j.eq(e[0],t)){e.pop();break}const i=n.findIndex((e=>j.eq(t,e[0])));if(i<0)break;const[o]=n.splice(i,1);e.push(...o.slice(1))}o.push(e)}return a.polygon(o.map((e=>e.map(j.toLatLong))))}function ns(e){return e instanceof os||e instanceof Ci}class os extends a.FeatureGroup{constructor(){super(),this.handler_pool=new bi,this.parent=null,this.map=null,this.hovered_entity=null,this.active_entity={entity:null},this.rendering=new os.RenderingLock,this.quad_tree_debug_rendering=!1,this.debug_layer=a.featureGroup().addTo(this),this.on("layeradd",(e=>{var t;ns(e.layer)&&(e.layer.parent=this),e.layer instanceof Ci&&(null===(t=this.entity_quadtree)||void 0===t||t.insert(e.layer),this.map&&e.layer.setFloorAndZoom(this.map.floor.value(),this.map.getZoom()),e.layer.requestRendering())})),this.on("remove",(()=>{var e;(null===(e=this.activeEntity())||void 0===e?void 0:e.parent)==this&&this.requestEntityActivation(null)})),this.on("layerremove",(e=>{ns(e.layer)&&e.layer.parent==this&&(e.layer.parent=null)})),this.entity_quadtree=Ei.init({topleft:{x:0,y:16384},botright:{x:16384,y:0}})}removeEntity(e){e.spatial&&e.spatial.remove(e),e==this.activeEntity()&&this.requestEntityActivation(null),e.parent=null,this.removeLayer(e)}isRootLayer(){return null==this.parent}getRoot(){return this.isRootLayer()?this:this.parent.getRoot()}getMap(){return this.map}remove(){return this.parent?this.parent.removeLayer(this):super.remove(),this}add(e){return this.addLayer(e),this}addTo(e){return e instanceof ks?(e.addGameLayer(this),this):super.addTo(e)}onAdd(e){return this.map=e,this.eachEntity((e=>{e.setFloorAndZoom(this.map.floor.value(),this.map.getZoom()),e.requestRendering(!0)})),super.onAdd(e)}onRemove(e){return this.map=null,this.handler_pool.kill(),super.onRemove(e)}eachEntity(e){return this.eachLayer((t=>{t instanceof Ci&&e(t)})),this}async createActiveEntityTooltip(e=void 0){if(this.active_entity.entity){const t=await this.active_entity.entity.renderTool();if(t){const i=null!=e&&e,n=await this.active_entity.entity.tooltip_hook.value()||document.body;this.active_entity.tooltip_instance=ri(n,{content:c("<div class='ctr-entity-tooltip'></div>").append(t).raw(),arrow:!0,animation:!1,zIndex:10001,delay:0,followCursor:!i||"initial",plugins:[oi],interactive:i,onHide:()=>{if(this.active_entity.locked)return!1},onClickOutside:e=>{e.destroy()},hideOnClick:!1,onHidden:()=>{this.requestEntityActivation(null)},trigger:"manual",placement:"top",offset:[0,10],appendTo:document.body}),this.active_entity.tooltip_instance.show()}}}async requestEntityActivation(e,t=void 0){var i;return this.isRootLayer()?!this.active_entity.locked&&(e!=this.active_entity.entity&&(this.active_entity.entity&&(this.active_entity.entity.highlighted.set(!1),null===(i=this.active_entity.tooltip_instance)||void 0===i||i.destroy(),this.active_entity.tooltip_instance=null,this.active_entity.entity=null),e&&(this.active_entity.entity=e,e.highlighted.set(!0),await this.createActiveEntityTooltip(t))),!0):this.parent.requestEntityActivation(e)}activeEntity(){return this.getRoot().active_entity.entity}async lockEntity(e,t=!1){this.active_entity.entity&&(this.active_entity.locked=!1,await this.requestEntityActivation(null)),e&&(await this.requestEntityActivation(e,!t),this.active_entity.locked=!0)}updateHovering(e,t){this.isRootLayer()||this.getRoot().updateHovering(e,t),t?(this.hovered_entity=e,this.requestEntityActivation(e)):this.hovered_entity==e&&(this.hovered_entity=null,this.requestEntityActivation(null,!1))}getHoveredEntity(){return this.getRoot().hovered_entity}eventContextMenu(e){}eventClick(e){}eventHover(e){}eventMouseUp(e){}eventMouseDown(e){}eventKeyDown(e){}eventKeyUp(e){}eventViewChanged(e){e.onPre((()=>{if(this.rendering.lock(),this.quad_tree_debug_rendering?function(e,t){let i=(new Date).getTime();console.log(`Starting task ${e}: `);t();const n=(new Date).getTime()-i;console.log(`Task ${e} took ${n}ms\n`)}("Culling",(()=>this.entity_quadtree.cull(e.new_view.rect,!0))):this.entity_quadtree.cull(e.new_view.rect,!1),this.quad_tree_debug_rendering){function t(e){if(e.isLeaf()){e.getElements().some((e=>e.culled.value()));const t=e.getElements().some((e=>!e.getDesiredRenderProps().render_at_all));return[ts(e.bounds()).setStyle({stroke:!0,color:e.isCulled()?"red":t?"purple":"green",fillOpacity:.2})]}return e.getChildren().flatMap(t)}this.debug_layer.clearLayers(),t(this.entity_quadtree).forEach((e=>e.addTo(this.debug_layer)))}this.entity_quadtree.forEachVisible((t=>{t.setFloorAndZoom(e.new_view.rect.level,e.new_view.zoom)})),this.rendering.unlock()}))}}!function(e){e.RenderingLock=class{constructor(){this.entity_render_locked=!1,this.entity_rendering_lock_queue=[]}lock(){this.entity_render_locked=!0}unlock(){this.entity_rendering_lock_queue.forEach((e=>e.render())),this.entity_rendering_lock_queue=[],this.entity_render_locked=!1}request(e){this.entity_render_locked?this.entity_rendering_lock_queue.push(e):e.render()}}}(os||(os={}));class rs extends a.FeatureGroup{constructor(e={x:0,y:0}){super(),this.position=e,this._polygon=null,this.update()}setPosition(e){j.eq(e,this.position)||(this.position=e,this.update())}update(){this._polygon&&(this._polygon.remove(),this._polygon=null),this._polygon=Qr(this.position).setStyle({fillOpacity:.2,opacity:.8,color:"#F0780C",fillColor:"#F0780C",interactive:!1}).addTo(this)}}class ss extends os{constructor(){super(...arguments),this.tile_highlight=new rs({x:0,y:0}).addTo(this)}eventHover(e){e.onPre((()=>{this.tile_highlight.setPosition(e.tile())}))}}class as{constructor(e,t,i){this.map=e,this.leaflet=t,this.original=i,this.active_entity=null,this.propagation_state={phase:"pre",trickle_stopped_immediate:!1,trickle_stopped:!1,trigger_post_order:!0}}handleFiltered(e,t){e(this)&&t(this)}onPre(e){this.handleFiltered((e=>"pre"==e.propagation_state.phase),e)}onPost(e){this.handleFiltered((e=>"post"==e.propagation_state.phase),e)}stopAllPropagation(){this.original.stopPropagation(),this.propagation_state.trickle_stopped=!0,this.propagation_state.trickle_stopped_immediate=!0,this.propagation_state.trigger_post_order=!1}}class ls extends as{constructor(e,t,i){super(e,t,t.originalEvent),this.leaflet=t,this.coordinates=i}tile(){return W.snap(this.coordinates)}}class cs extends as{constructor(e,t){super(e,t,t.originalEvent),this.leaflet=t}}class us extends as{constructor(e,t,i){super(e,t,t.originalEvent),this.leaflet=t,this.coordinates=i,this.entries=[],this.title="",this.for_entity_entries=[]}add(...e){this.entries.push(...e)}addForEntity(...e){if(!this.active_entity)throw new TypeError("Adding entity actions for context menu without entity");this.for_entity_entries.push(...e)}tile(){return W.snap(this.coordinates)}async getMenu(){var e;const t=await(null===(e=this.active_entity)||void 0===e?void 0:e.contextMenu(this));return t&&t.children.length+this.for_entity_entries.length>0?(t.children.push(...this.for_entity_entries),0==this.entries.length?t:{type:"submenu",text:this.title,children:this.entries.concat({type:"submenu",text:t.text,children:t.children})}):{type:"submenu",text:this.title,children:this.entries}}setTitle(e){this.title=e}}class hs extends as{constructor(e,t,i){var n,o,r,s,a,l;super(e,void 0,void 0),this.old_view=t,this.new_view=i,this.floor_changed=(null===(o=null===(n=this.old_view)||void 0===n?void 0:n.rect)||void 0===o?void 0:o.level)!=(null===(s=null===(r=this.new_view)||void 0===r?void 0:r.rect)||void 0===s?void 0:s.level),this.zoom_changed=(null===(a=this.old_view)||void 0===a?void 0:a.zoom)!=(null===(l=this.new_view)||void 0===l?void 0:l.zoom)}}class ds extends os{constructor(e,t){switch(super(),this.config=e,this.content=t,this.parent=null,this.config.no_default_styling||this.content.addClass("gamemap-ui-control-default-styling"),this.config.type){case"gapless":this.content.addClass("gamemap-ui-control-gapless");break;case"floating":this.content.addClass("gamemap-ui-control-floating")}this.content.container.on("contextmenu blur change click dblclick error focus focusin focusout hover keydown keypress keyup load mousedown mouseenter mouseleave mouseout mouseover resize select submit mousewheel",(e=>e.stopPropagation()))}onAdd(e){return e.addControl(this),super.onAdd(e)}onRemove(e){return this.content.detach(),super.onRemove(e)}setContent(e){return this.content.empty().append(e),this}}class ps extends a.TileLayer{constructor(e,t){super(e[0].urls[0],t),this.zoomurls=e,this.zoomurls=e,this.on("tileerror",(e=>{let t=e.sourceTarget,i=1+(e.tile.dataset.errcount?+e.tile.dataset.errcount:0);e.tile.dataset.errcount=i+"";let n=t.getTileUrl(e.coords,i);n&&(e.tile.src=n)}))}getZoomConfig(e){return this.zoomurls.find((t=>{var i,n;return(null!==(i=t.from)&&void 0!==i?i:-1/0)<=e&&(null!==(n=t.to)&&void 0!==n?n:1/0)>=e}))}getTileUrl(e,t=0){var i;let n=this.getZoomConfig(e.z),o=null!==(i=null==n?void 0:n.urls[t])&&void 0!==i?i:"";return a.Util.template(o,{x:e.x,y:e.y,z:e.z})}}class gs extends ds{constructor(){super({position:"bottom-right",type:"floating"},c("<div style='display: flex' class='nis-map-control'>")),this.down=c("<div style='cursor: pointer'><img src='assets/icons/stairdown.png' style='width: 20px; padding: 4px'></div>").tooltip("Go down (PageDown)").tapRaw((e=>e.on("click",(e=>{e.stopPropagation(),this.goDown()})))).appendTo(this.content.container),this.current=c("<div style='border-left: 1px solid rgb(5, 56, 66); border-right: 1px solid rgb(5, 56, 66); padding-left: 4px; padding-right: 4px; line-height: 20px'>Floor 0</div>").appendTo(this.content.container),this.up=c("<div style='cursor: pointer'><img src='assets/icons/stairup.png' style='width: 20px; padding: 4px'></div>").tooltip("Go up (PageUp)").tapRaw((e=>e.on("click",(e=>{e.stopPropagation(),this.goUp()})))).appendTo(this.content.container),this.content.container.on("click",(e=>e.stopPropagation()))}goUp(){this.parent.getMap().floor.set(G.clamp(this.parent.getMap().floor.value()+1))}goDown(){this.parent.getMap().floor.set(G.clamp(this.parent.getMap().floor.value()-1))}onAdd(e){return e.floor.subscribe((e=>this.current.text(`Floor ${e}`))),super.onAdd(e)}eventKeyDown(e){e.onPre((()=>{"PageUp"==e.leaflet.originalEvent.key?this.goUp():"PageDown"==e.leaflet.originalEvent.key&&this.goDown()}))}}class ms{constructor(){this.interaction=null,this.default_layer=null}setDefaultLayer(e){return this.default_layer=e,this}set(e,t=null){return this.reset(),e&&(e._guard&&e._guard.reset(),this.interaction=e,e._guard=this,e.addTo(t||this.default_layer)),e}reset(){return this.interaction&&(this.interaction._guard=null,this.interaction.cancel()),this.interaction=null,this}}class fs extends os{constructor(){super(...arguments),this.top_control=null,this._guard=null,this.started=pi(),this.ended=pi()}onAdd(e){return super.onAdd(e),this.started.trigger(this),this.getMap().container.focus(),this}attachTopControl(e){return this.top_control&&(this.top_control.remove(),this.top_control=null),e&&(e.setCancelHandler((()=>this.cancel())).addTo(this),this.top_control=e),this}cancel(){this._guard&&this._guard.reset(),this.remove(),this.ended.trigger(this)}onEnd(e){return this.ended.on(e),this}onStart(e){return this.started.on(e),this}}!function(e){e.map_version=1710516666,e.icons={types:{anagram:"assets/icons/activeclue.png",compass:"assets/icons/arrow.png",coordinates:"assets/icons/sextant.png",cryptic:"assets/icons/activeclue.png",emote:"assets/icons/emotes.png",map:"assets/icons/map.png",scan:"assets/icons/scan.png",simple:"assets/icons/activeclue.png",skilling:"assets/icons/activeclue.png"}},e.colors={dig_spot_number:"gold",scan_area:"#00FF21"}}(Yr||(Yr={}));var ys=di.cls;const vs="assets/icons/marker_red.png",_s="assets/icons/marker_blue.png",xs="assets/icons/marker_green.png",ws="assets/icons/marker_yellow.png";function bs(e,t=1){return a.icon({iconUrl:["assets/icons/marker_red.png","assets/icons/marker_blue.png","assets/icons/marker_green.png","assets/icons/marker_yellow.png"][e],iconSize:[18*t,24*t],iconAnchor:[9*t,24*t],className:"marker-icon"})}a.icon({iconUrl:vs,iconSize:[18,24],iconAnchor:[9,24],className:"marker-icon"}),a.icon({iconUrl:_s,iconSize:[18,24],iconAnchor:[9,24],className:"marker-icon"}),a.icon({iconUrl:xs,iconSize:[18,24],iconAnchor:[9,24],className:"marker-icon"}),a.icon({iconUrl:ws,iconSize:[18,24],iconAnchor:[9,24],className:"marker-icon"});class ks extends a.Map{constructor(e){super(e,ks.gameMapOptions()),this.floor=mi(0),this.viewport=mi(null).equality(ks.View.equals),this._lastHoveredTile=null,this.container=ie(e),this.ui_container=ys("gamemap-ui-container").appendTo(this.container);for(let e in ks.position_layer_class_mapping)ys(ks.position_layer_class_mapping[e]).appendTo(this.ui_container);this.createPane("gridPane").style.zIndex="250",this.internal_root_layer=new os,this.addLayer(this.internal_root_layer),this.addGameLayer(new gs).addGameLayer(new ss),this.on("contextmenu",(async e=>{e.originalEvent.preventDefault();let t=this.event(new us(this,e,this.eventCoordinate(e)),(e=>t=>e.eventContextMenu(t)));t.active_entity&&await this.internal_root_layer.lockEntity(t.active_entity),new wi(await t.getMenu()).show(this.container.get()[0],{x:e.originalEvent.clientX,y:e.originalEvent.clientY}).onClosed((async()=>{this.container.focus(),await this.internal_root_layer.lockEntity(null)}))})),this.on("click",(e=>{e.originalEvent.preventDefault(),this.event(new ls(this,e,this.eventCoordinate(e)),(e=>t=>e.eventClick(t)))})),this.on("mousemove",(e=>{var t;let i=this.eventCoordinate(e);0==(null===(t=this.internal_root_layer.activeEntity())||void 0===t?void 0:t.isStillHovered())&&this.internal_root_layer.requestEntityActivation(null),W.eq2(i,this._lastHoveredTile)||(this._lastHoveredTile=i,this.event(new ls(this,e,i),(e=>t=>e.eventHover(t))))})),this.on("mouseup",(e=>{e.originalEvent.preventDefault(),this.event(new ls(this,e,this.eventCoordinate(e)),(e=>t=>e.eventMouseUp(t)))})),this.on("mousedown",(e=>{e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),this.event(new ls(this,e,this.eventCoordinate(e)),(e=>t=>e.eventMouseDown(t)))})),this.on("keydown",(e=>{this.event(new cs(this,e),(e=>t=>e.eventKeyDown(t)))})),this.on("keyup",(e=>{this.event(new cs(this,e),(e=>t=>e.eventKeyUp(t)))})),this.viewport.subscribe(((e,t)=>{this.event(new hs(this,t,e),(e=>t=>e.eventViewChanged(t)))})),this.on("moveend",(()=>this.updateView())),this.on("zoomend",(()=>this.updateView())),this.floor.subscribe((()=>this.updateView())),new te({intervals:[{min_zoom:-3,interval:64},{min_zoom:.5,interval:8},{min_zoom:1,interval:4},{min_zoom:2,interval:1}],lineStyle:{weight:1,color:"#111111",opacity:.25,interactive:!1},pane:"gridPane"}).addTo(this),this.updateBaseLayers(),this.floor.subscribe((()=>this.updateBaseLayers()))}updateView(){const e=this.getBounds();return this.viewport.set({rect:Z.lift(F.extend(F.from(j.fromLatLong(e.getNorthEast()),j.fromLatLong(e.getSouthWest())),1),this.floor.value()),zoom:this.getZoom()}),this}fitView(e,t={}){var i;return null!==(i=t.maxZoom)&&void 0!==i||(t.maxZoom=Math.max(this.getZoom(),4)),this.invalidateSize(),this.fitBounds(B.convert_bounds(F.toBounds(e)).pad(.1),t),this.floor.set(e.level),this}getClientPos(e){return j.add(this.latLngToContainerPoint(j.toLatLong(e)),{x:this.container.get()[0].getBoundingClientRect().left,y:this.container.get()[0].getBoundingClientRect().top})}addGameLayer(e){return this.internal_root_layer.add(e),this}addControl(e){if(e instanceof ds){let t=this;function i(e){return t.ui_container.container.children(`.${ks.position_layer_class_mapping[e]}`)}e.content.appendTo(i(e.config.position))}else super.addControl(e);return this}updateBaseLayers(){const e='<a href="https://runeapps.org/" title="Creator of Alt1 and RuneApps.org">Skillbert</a>';function t(e){return[`https://runeapps.org/s3/map4/live/${e}`,`https://runeapps.org/node/map/getnamed?mapid=4&version=${Yr.map_version}&file=${e}`]}let i=[new ps([{urls:t(`topdown-${this.floor.value()}/{z}/{x}-{y}.webp`)}],{attribution:e,tileSize:512,maxNativeZoom:5,minZoom:-5,bounds:ks.bounds()}),new ps([{to:2,urls:t(`walls-${this.floor.value()}/{z}/{x}-{y}.webp`)},{from:3,to:3,urls:t(`walls-${this.floor.value()}/{z}/{x}-{y}.svg`)}],{attribution:e,tileSize:512,maxNativeZoom:3,minZoom:-5,bounds:ks.bounds()}),new ps([{urls:t(`collision-${this.floor.value()}/{z}/{x}-{y}.png`)}],{attribution:e,tileSize:512,maxNativeZoom:3,minZoom:-5,className:"map-collisionlayer",bounds:ks.bounds()})],n=this.baseLayers;n&&n.length>0&&(n.forEach((e=>e.on("tileloadstart",(e=>e.target.src="")))),i[0].on("load",(()=>setTimeout((()=>n.forEach((e=>e.remove()))),2e3)))),this.baseLayers=i,i.forEach((e=>e.addTo(this)))}eventCoordinate(e){return{x:e.latlng.lng,y:e.latlng.lat,level:this.floor.value()}}event(e,t){var i;return e.active_entity=this.internal_root_layer.getHoveredEntity(),(null===(i=e.active_entity)||void 0===i?void 0:i.isStillHovered())||(e.active_entity=null),function i(n){n&&(e.propagation_state.phase="pre",t(n)(e),e.propagation_state.trickle_stopped||e.propagation_state.trickle_stopped_immediate||n.eachLayer((e=>{e instanceof os&&i(e)})),e.propagation_state.trigger_post_order&&(e.propagation_state.phase="post",t(n)(e)),e.propagation_state.trickle_stopped_immediate=!1)}(this.internal_root_layer),e}}!function(e){function t(){return new a.LatLngBounds([0,0],[e.size.chunks.y*e.size.chunk_size.y,e.size.chunks.x*e.size.chunk_size.x])}let i;e.size={chunks:{x:100,y:200},chunk_size:{x:64,y:64}},e.bounds=t,e.gameMapOptions=function(){return{crs:function(){let e=a.CRS.Simple;return e.transformation=a.transformation(1,16.5,-1,12783.5),e}(),minZoom:-5,maxZoom:7,zoomControl:!1,dragging:!0,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1,preferCanvas:!1,maxBounds:t(),maxBoundsViscosity:.5}},e.position_layer_class_mapping={"bottom-center":"gamemap-ui-layer-bc","bottom-left":"gamemap-ui-layer-bl","bottom-right":"gamemap-ui-layer-br","left-bottom":"gamemap-ui-layer-lb","left-center":"gamemap-ui-layer-lc","left-top":"gamemap-ui-layer-lt","right-bottom":"gamemap-ui-layer-rb","right-center":"gamemap-ui-layer-rc","right-top":"gamemap-ui-layer-rt","top-center":"gamemap-ui-layer-tc","top-left":"gamemap-ui-layer-tl","top-right":"gamemap-ui-layer-tr"},function(e){e.equals=function(e,t){return Z.equals(null==e?void 0:e.rect,null==t?void 0:t.rect)&&(null==e?void 0:e.zoom)==(null==t?void 0:t.zoom)}}(i=e.View||(e.View={}))}(ks||(ks={}));class Ts extends si{constructor(e=ie("<div>")){super(e),this.map=new ks(e.get()[0]).setView([3200,3e3],0)}}class Ss extends si{constructor(){super(),this.map=new ks(this.raw()).setView([3200,3e3],0),this.main_layer=(new os).addTo(this.map),this.interaction_guard=(new ms).setDefaultLayer(this.main_layer)}setInteraction(e){return this.interaction_guard.set(e),this}}function Cs(e,t=0){let i=3735928559^t,n=1103547991^t;for(let t,o=0;o<e.length;o++)t=e.charCodeAt(o),i=Math.imul(i^t,2654435761),n=Math.imul(n^t,1597334677);return i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(i^i>>>13,3266489909),4294967296*(2097151&n)+(i>>>0)}var Es,As,zs;!function(e){var t=B.compose,i=B.cleanedJSON;function n(e){return btoa(i(e))}e.exp=function(e=null,i=!1,r=!1){return t(e?(s=e.type,a=e.version,e=>({payload_type:"typed",type:s,version:a,value:e})):o.identity,i||r?function(e=!0,t=!0){return i=>{let n={payload_type:"envelop",value:JSON.stringify(i)};return e&&(n.value=(0,Ai.if)($r(n.value)),n.compressed=!0),t&&(n.hash=Cs(n.value)),n}}(i,r):o.identity,n);var s,a},e.imp=function(e=null){const i=e=>"string"==typeof e?function(e){return["{","["].indexOf(e.charAt(0))>=0}(e)?JSON.parse(e):JSON.parse(atob(e)):e,n=e=>{if("envelop"==(null==e?void 0:e.payload_type)){let t=e;if(null!=t.hash&&Cs(t.value)!=e.hash)throw new Error;return t.compressed?JSON.parse(Wr((0,Ai.Kp)(e.value),{to:"string"})):JSON.parse(e.value)}return e},o=t=>{if("typed"==(null==t?void 0:t.payload_type)){let i=t,n=i.version,o=i.value;for(;null==e?void 0:e.migrations;){let t=e.migrations.find((e=>e.from==n));if(!t)break;o=t.f(o),n=t.to}if(e&&i.type!=e.expected_type||n!=e.expected_version)throw new Error;return o}return t};return e=>{try{return t(i,n,o)(e)}catch(e){return console.error(e),null}}}}(Es||(Es={}));class Ls{constructor(){this.handler_pool=new bi,this._subBehaviours=[],this.started=pi(),this.stopped=pi(),this._started=!1,this._starting=!1}withSub(e){return this._subBehaviours.push(e),this._started&&e.start(),e}start(){return this._started||(this._started=!0,this._starting=!0,this.begin(),this._starting=!1,this._started&&this.started.trigger(null),this._subBehaviours.forEach((e=>e.start()))),this}stop(){this._subBehaviours.forEach((e=>e.stop())),this.handler_pool.kill(),this._started&&(this._started=!1,this.end(),this._starting||this.stopped.trigger(null))}isActive(){return this._started}onStop(e){return this.stopped.on(e),this}}class Ps extends Ls{constructor(){super(...arguments),this.behaviour=mi(null),this.content_stopped=pi()}begin(){this.behaviour.value()&&this.behaviour.value().start()}end(){this.behaviour.value()&&this.behaviour.value().stop()}get(){return this.behaviour.value()}set(e){return this.behaviour.value()&&(this.behaviour.value().isActive()&&this.behaviour.value().stop(),this.behaviour.set(null)),e&&(this.behaviour.set(e),e.stopped.on((()=>{this.behaviour.value()==e&&this.content_stopped.trigger(e)})),this.isActive()&&e.start()),this}}class Ms{constructor(){this.app=null}static instance(){return Ms._instance||(Ms._instance=new Ms),Ms._instance}}function Is(){return Ms.instance()}Ms._instance=null,function(e){let t,i,n,o;!function(e){let t;!function(e){e.transform=function(e,t){return{...j.snap(j.transform(e,t)),level:e.level}}}(t=e.Offset||(e.Offset={}))}(t=e.EntityActionMovement||(e.EntityActionMovement={})),function(e){var t=Vr.activate;let i,n;!function(e){e.isAnywhere=function(e){return"item"==e.type||"spellbook"==e.type},e.interactiveArea=function(e){var t;return null!==(t=e.interactive_area)&&void 0!==t?t:o.default_interactive_area(Vr.toRect(e.clickable_area))}}(i=e.TeleportAccess||(e.TeleportAccess={})),function(e){e.combinePrioritized=function(...e){return e.reduce(((e,t)=>{var i,n,o,r;return{img:null!==(i=null==e?void 0:e.img)&&void 0!==i?i:null==t?void 0:t.img,menu_ticks:null!==(n=null==e?void 0:e.menu_ticks)&&void 0!==n?n:null==t?void 0:t.menu_ticks,animation_ticks:null!==(o=null==e?void 0:e.animation_ticks)&&void 0!==o?o:null==t?void 0:t.animation_ticks,code:null!==(r=null==e?void 0:e.code)&&void 0!==r?r:null==t?void 0:t.code}}),{})}}(n=e.TeleportProps||(e.TeleportProps={})),e.canBeAccessedAnywhere=function(e){return e.access.some(i.isAnywhere)},e.Spot=class{constructor(e,t,i){this.group=e,this.spot=t,this.access=i,this.customization=null,this.refresh()}refresh(){var e,t,i;this.customization=Is().app.settings.active_teleport_customization.value();const o="item"==this.access.type&&this.access.can_be_in_pota?this.customization.pota_slots.find((e=>e.jewellry.group_id==this.group.id)):null;this.pota_slot=o?{img:{url:`pota_${o.pota.color}.png`},code_prefix:`${o.pota.slot},`}:null,this.props=n.combinePrioritized({img:null===(e=this.pota_slot)||void 0===e?void 0:e.img},null===(i=null===(t=this.access)||void 0===t?void 0:t.per_spot_props)||void 0===i?void 0:i[this.spot.id],this.access,this.spot,this.group,{animation_ticks:0,menu_ticks:0,code:"",img:{url:"homeport.png"}})}hover(){return this.group.name&&this.spot.name?`${this.group.name} - ${this.spot.name}`:this.group.name||this.spot.name}image(){return this.props.img}code(){var e,t;let i=this.props.code;if("fairyring"==this.group.id){const e=Is().app.settings.active_teleport_customization.value().fairy_ring_favourites.indexOf(this.spot.id);e>=0&&(i=((e+1)%10).toString())}return(null!==(t=null===(e=this.pota_slot)||void 0===e?void 0:e.code_prefix)&&void 0!==t?t:"")+i}centerOfTarget(){return t(this.spot.target).center()}targetArea(){return this.spot.target}id(){return{group:this.group.id,spot:this.spot.id}}}}(i=e.TeleportGroup||(e.TeleportGroup={})),function(e){var t=Vr.activate;e.findApplicable=function(e,i){return e.movement.find((e=>!e.valid_from||t(e.valid_from).query(i)))},e.interactiveArea=function(e,t){var i;return null!==(i=t.interactive_area)&&void 0!==i?i:o.defaultInteractiveArea(e)}}(n=e.EntityAction||(e.EntityAction={})),function(e){function t(e){const t=Z.extend(e,1);let i=Vr.activate(Vr.fromRect(t,!0));return i.set(Z.tl(t),!1),i.set(Z.tr(t),!1),i.set(Z.bl(t),!1),i.set(Z.br(t),!1),i.save(),i.parent}let i;e.default_interactive_area=t,e.defaultInteractiveArea=function(e){return t(Z.extend(e.clickable_area,-.5))},e.isLocal=function(e){return"door"==e.type||!e.actions.some((e=>e.movement.some((e=>!i.isLocal(e)))))},function(e){e.isLocal=function(e){return!(e.fixed_target&&!e.fixed_target.relative)}}(i=e.Movement||(e.Movement={}))}(o=e.EntityTransportation||(e.EntityTransportation={})),e.normalize=function(e){if("entity"==e.type)return e;const t=qr.toVector(e.direction),i=W.move(e.position,t);return{type:"entity",source_loc:e.source_loc,entity:{kind:"static",name:e.name},clickable_area:Z.extend(Z.from(W.move(e.position,j.scale(.5,t))),.5),actions:[{cursor:"open",interactive_area:Vr.fromRect(Z.from(e.position,i),!0),name:"Pass",movement:[{time:1,offset:{...t,level:0},valid_from:{origin:e.position},orientation:"bymovement"},{time:1,offset:{...qr.toVector(qr.invert(e.direction)),level:0},valid_from:{origin:i},orientation:"bymovement"}]}]}},e.bounds=function(e){switch(e.type){case"entity":return Z.lift(F.combine(e.clickable_area),e.clickable_area.level);case"door":return Z.from(e.position,W.move(e.position,qr.toVector(e.direction)))}},e.position=function(e){switch(e.type){case"entity":return Z.center(e.clickable_area);case"door":return W.move(e.position,j.scale(.5,qr.toVector(e.direction)))}},e.name=function(e){switch(e.type){case"entity":return e.entity.name;case"door":return e.name}},e.transform=function(e,i){switch(e.type){case"door":return{type:"door",source_loc:e.source_loc,name:e.name,position:W.transform(e.position,i),direction:qr.transform(e.direction,i.matrix)};case"entity":return{type:"entity",source_loc:e.source_loc,entity:e.entity,clickable_area:Z.transform(e.clickable_area,i),actions:e.actions.map((e=>({cursor:e.cursor,interactive_area:e.interactive_area?Vr.transform(e.interactive_area,i):void 0,name:e.name,movement:e.movement.map((e=>({time:e.time,valid_from:e.valid_from?Vr.transform(e.valid_from,i):void 0,offset:e.offset?t.Offset.transform(e.offset,i.matrix):void 0,fixed_target:e.fixed_target?e.fixed_target.relative?{target:Vr.transform(Vr.normalize(e.fixed_target.target),i),relative:!0}:e.fixed_target:void 0,orientation:e.orientation,forced_orientation:e.forced_orientation?e.forced_orientation.relative?{dir:qr.transform(e.forced_orientation.dir,i.matrix),relative:!0}:e.forced_orientation:void 0})))})))}}}}(As||(As={})),function(e){function t(e,t=[]){return{type:"inner",value:e,children:t}}function i(e){return{type:"leaf",value:e}}function n(e,t){let i=[e];for(let n of t){if("inner"!=e.type)break;e=e.children[n],i.push(e)}return i}e.init=function(e){return t(e,[])},e.inner=t,e.leaf=i,e.leafs=function(e){return e.map(i)},e.add=function(e,t){return e.children.push(t),t},e.index=function(e,t){return B.index(n(e,t),-1)},e.map=function e(t,n){return"leaf"==t.type?i(n(t.value)):{type:"inner",value:t.value,children:t.children.map((t=>e(t,n)))}},e.forLeafs=function e(t,i){"leaf"==t.type?i(t.value):t.children.forEach((t=>e(t,i)))},e.fixIndex=function(e,t){let i=[],n=0,o=e;for(;;){if("inner"!=(null==o?void 0:o.type))return i;{let e=n<t.length?t[n]:0;i.push(e),o=o.children[e]}n++}},e.getPath=n}(zs||(zs={}));const Os=[{type:"teleports",id:"home",name:"Lodestone Network",img:{url:"homeport.png"},animation_ticks:7,spots:[{id:"alkharid",img:{url:"lode_alkharid.png",width:28},code:"A",name:"Al Kharid",target:{origin:{x:3297,y:3184,level:0}},facing:qr.south},{id:"anachronia",name:"Anachronia",img:{url:"lode_anachronia.png",height:28},code:"Alt+D",target:{origin:{x:5431,y:2338,level:0}},facing:qr.south},{id:"ardougne",img:{url:"lode_ardougne.png",height:28},code:"Alt+A",target:{origin:{x:2634,y:3348,level:0}},facing:qr.south,name:"Ardougne"},{id:"ashdale",name:"Ashdale",img:{url:"lode_ashdale.png",height:28},code:"Shift+A",target:{origin:{x:2474,y:2708,level:2}},facing:qr.south},{id:"banditcamp",img:{url:"lode_bandit.png",width:28},code:"Alt+B",target:{origin:{x:3214,y:2954,level:0}},facing:qr.south,name:"Bandit Camp"},{id:"burthorpe",img:{url:"lode_burthorpe.png",height:28},code:"B",target:{origin:{x:2899,y:3544,level:0}},facing:qr.south,name:"Burthorpe"},{id:"canifis",img:{url:"lode_canifis.png",height:28},code:"Alt+C",target:{origin:{x:3517,y:3515,level:0}},facing:qr.south,name:"Canifis"},{id:"catherby",img:{url:"lode_catherby.png",height:28},code:"C",target:{origin:{x:2811,y:3449,level:0}},facing:qr.south,name:"Catherby"},{id:"draynor",img:{url:"lode_draynor.png",height:28},code:"D",target:{origin:{x:3105,y:3298,level:0}},facing:qr.south,name:"Draynor"},{id:"eaglespeak",img:{url:"lode_eagles.png",height:28},code:"Alt+E",target:{origin:{x:2366,y:3479,level:0}},facing:qr.south,name:"Eagles` Peak"},{id:"edgeville",img:{url:"lode_edgeville.png",height:28},code:"E",target:{origin:{x:3067,y:3505,level:0}},facing:qr.south,name:"Edgeville"},{id:"falador",img:{url:"lode_falador.png",height:28},code:"F",target:{origin:{x:2967,y:3403,level:0}},facing:qr.south,name:"Falador"},{id:"fortforinthry",img:{url:"lode_fortforinthry.png",height:28},code:"Alt+W",target:{origin:{x:3298,y:3525,level:0}},facing:qr.south,name:"Fort Forinthry"},{id:"fremmenik",img:{url:"lode_fremennik.png",height:28},code:"Alt+F",target:{origin:{x:2712,y:3677,level:0}},facing:qr.south,name:"Fremennik Province"},{id:"karamja",img:{url:"lode_karamja.png",height:28},code:"K",target:{origin:{x:2761,y:3147,level:0}},facing:qr.south,name:"Karamja"},{id:"lumbridge",img:{url:"lode_lumbridge.png",height:28},code:"L",target:{origin:{x:3233,y:3221,level:0}},facing:qr.south,name:"Lumbridge"},{id:"lunarisle",img:{url:"lode_lunar.png",height:28},code:"Alt+L",target:{origin:{x:2085,y:3914,level:0}},facing:qr.south,name:"Lunar Isle"},{id:"menaphos",img:{url:"lode_menaphos.png",height:28},code:"M",target:{origin:{x:3216,y:2716,level:0}},facing:qr.south,name:"Menaphos"},{id:"ooglog",img:{url:"lode_ooglog.png",height:28},code:"O",target:{origin:{x:2532,y:2871,level:0}},facing:qr.south,name:"Ooglog"},{id:"portsarim",img:{url:"lode_portsarim.png",height:28},code:"P",target:{origin:{x:3011,y:3215,level:0}},facing:qr.south,name:"Port Sarim"},{id:"prifddinas",img:{url:"lode_prifddinas.png",height:28},code:"Alt+P",target:{origin:{x:2208,y:3360,level:1}},facing:qr.south,name:"Prifddinas"},{id:"seersvillage",img:{url:"lode_seers.png",height:28},code:"S",target:{origin:{x:2689,y:3482,level:0}},facing:qr.south,name:"Seers Village"},{id:"taverley",img:{url:"lode_taverley.png",height:28},code:"T",target:{origin:{x:2878,y:3442,level:0}},facing:qr.south,name:"Taverley"},{id:"tirannwn",img:{url:"lode_tirannwn.png",height:28},code:"Alt+T",target:{origin:{x:2254,y:3149,level:0}},facing:qr.south,name:"Tirannwn"},{id:"varrock",img:{url:"lode_varrock.png",height:28},code:"V",target:{origin:{x:3214,y:3376,level:0}},facing:qr.south,name:"Varrock"},{id:"wilderness",img:{url:"lode_wilderness.png",height:28},code:"W",target:{origin:{x:3143,y:3635,level:0}},facing:qr.south,name:"Wilderness"},{id:"yanille",img:{url:"lode_yanille.png",height:28},code:"Y",target:{origin:{x:2529,y:3094,level:0}},facing:qr.south,name:"Yanille"},{id:"cityofum",img:{url:"lode_um.png",height:28},code:"U",target:{origin:{x:1084,y:1768,level:1}},facing:qr.east,name:"City of Um"}],access:[{id:"map",type:"spellbook",name:"Lodestone Network Map",menu_ticks:1},{id:"spellbook",type:"spellbook",name:"Any Spellbook",menu_ticks:0}]},{type:"teleports",id:"normalspellbook",name:"Normal Spellbook",img:{url:""},menu_ticks:0,animation_ticks:3,spots:[{id:"camelot",target:{origin:{x:2755,y:3476,level:0},size:{x:5,y:5},data:"/n3/AQ=="},img:{url:"tele-cam.png"},name:"Camelot"},{id:"camelot-seers",target:{origin:{x:2704,y:3481,level:0},size:{x:5,y:5}},img:{url:"tele-cam-seers.png"},name:"Camelot (Seer's Village)"},{id:"varrock",target:{origin:{x:3210,y:3432,level:0},size:{x:5,y:5}},img:{url:"tele-var.png"},name:"Varrock"},{id:"varrock-ge",target:{origin:{x:3162,y:3462,level:0},size:{x:2,y:5}},img:{url:"tele-var-ge.png"},name:"Varrock (Grand Exchange)"},{id:"varrock-church",target:{origin:{x:3245,y:3478,level:0},size:{x:4,y:5}},img:{url:"tele-var-church.png"},name:"Varrock (Church)"},{id:"watchtower",target:{origin:{x:2547,y:3111,level:2},size:{x:4,y:4},data:"88w="},img:{url:"tele-watch.png"},name:"Watchtower"},{id:"watchtower-yanille",target:{origin:{x:2573,y:3087,level:0},size:{x:5,y:5}},img:{url:"tele-watch-center.png"},name:"Watchtower (Yanille)"},{id:"lumbridge",target:{origin:{x:3217,y:3246,level:0},size:{x:5,y:5},data:"/3//AQ=="},img:{url:"tele-lum.png"},name:"Lumbridge"},{id:"falador",target:{origin:{x:2963,y:3376,level:0},size:{x:5,y:5}},img:{url:"tele-fal.png"},name:"Falador"},{id:"ardougne",target:{origin:{x:2659,y:3300,level:0},size:{x:5,y:5}},img:{url:"tele-ard.png"},name:"Ardougne"},{id:"southfeldiphills",target:{origin:{x:2411,y:2845,level:0},size:{x:5,y:5},data:"nP//AQ=="},img:{url:"tele-mob.png"},name:"South Feldip Hills"},{id:"taverley",target:{origin:{x:2910,y:3421,level:0},size:{x:5,y:5}},img:{url:"tele-taverley.png"},name:"Taverley"},{id:"godwars",target:{origin:{x:2908,y:3712,level:0},size:{x:3,y:4}},img:{url:"tele-god.png"},name:"God Wars"},{id:"trollheim",target:{origin:{x:2880,y:3666,level:0},size:{x:5,y:5},data:"//v/AQ=="},img:{url:"tele-troll.png"},name:"Trollheim"},{id:"apeatoll",target:{origin:{x:2795,y:2797,level:1},size:{x:5,y:3}},img:{url:"tele-ape.png"},name:"Ape Atoll"},{id:"mazcab",target:{origin:{x:4314,y:817,level:0},size:{x:5,y:5}},img:{url:"tele-mazcab.png"},name:"Mazcab"}],access:[{id:"spellbook",type:"spellbook",name:"Normal Spellbook"}]},{type:"teleports",id:"ancientspellook",name:"Ancient Spellbook",img:{url:""},menu_ticks:0,animation_ticks:3,spots:[{id:"paddewwa",target:{origin:{x:3096,y:9880,level:0},size:{x:5,y:5}},img:{url:"tele-paddewwa.png",width:28,height:28},name:"Paddewwa"},{id:"senntisten",target:{origin:{x:3375,y:3400,level:0},size:{x:5,y:5}},img:{url:"tele-senntisten.png"},name:"Senntisten"},{id:"kharyll",target:{origin:{x:3499,y:3482,level:0},size:{x:5,y:4},data:"/38E"},img:{url:"tele-kharyrll.png"},name:"Kharyrll"},{id:"lassar",target:{origin:{x:3002,y:3468,level:0},size:{x:5,y:5}},img:{url:"tele-lassar.png"},name:"Lassar"},{id:"dareeyak",target:{origin:{x:2966,y:3694,level:0},size:{x:5,y:5},data:"///PAA=="},img:{url:"tele-dareeyak.png"},name:"Dareeyak"},{id:"carallaner",target:{origin:{x:3220,y:3664,level:0},size:{x:5,y:5},data:"zv9zAA=="},img:{url:"tele-carrallaner.png"},name:"Carrallanger"},{id:"annakarl",target:{origin:{x:3286,y:3884,level:0},size:{x:4,y:5},data:"//cP"},img:{url:"tele-annakarl.png"},name:"Annakarl"},{id:"ghorrock",target:{origin:{x:2974,y:3870,level:0},size:{x:5,y:5}},img:{url:"tele-ghorrock.png"},name:"Ghorrock"}],access:[{id:"spellbook",type:"spellbook",name:"Ancient Spellbook"}]},{type:"teleports",id:"lunarspellbook",name:"Lunar Spellbook",menu_ticks:0,animation_ticks:3,spots:[{id:"moonclan",target:{origin:{x:2112,y:3913,level:0},size:{x:4,y:5},data:"//8G"},img:{url:"tele-moonclan.png"},name:"Moonclan"},{id:"ourania",target:{origin:{x:2465,y:3243,level:0},size:{x:5,y:5},data:"3nv/AQ=="},img:{url:"tele-ourania.png"},name:"Ourania Altar"},{id:"southfalador",target:{origin:{x:3053,y:3308,level:0},size:{x:5,y:5},data:"+f9PAQ=="},img:{url:"tele-southfalador.png"},name:"South Falador"},{id:"waterbirth",target:{origin:{x:2544,y:3754,level:0},size:{x:5,y:5}},img:{url:"tele-waterbirth.png"},name:"Waterbirth"},{id:"barbarian",target:{origin:{x:2541,y:3567,level:0},size:{x:5,y:5}},img:{url:"tele-barbarian.png"},name:"Barbarian"},{id:"northardougne",target:{origin:{x:2663,y:3373,level:0},size:{x:4,y:5},data:"ZnYP"},img:{url:"tele-northardougne.png"},name:"North Ardougne"},{id:"khazard",target:{origin:{x:2634,y:3165,level:0},size:{x:5,y:5},data:"8P//AQ=="},img:{url:"tele-khazard.png"},name:"Khazard"},{id:"fishing",target:{origin:{x:2611,y:3381,level:0},size:{x:5,y:5}},img:{url:"tele-fishing.png"},name:"Fishing Guild"},{id:"catherby",target:{origin:{x:2788,y:3450,level:0},size:{x:5,y:5},data:"/v/vAQ=="},img:{url:"tele-catherby.png"},name:"Catherby"},{id:"iceplateu",target:{origin:{x:2973,y:3936,level:0},size:{x:4,y:5}},img:{url:"tele-iceplateau.png"},name:"Ice Plateau"},{id:"trollheim",target:{origin:{x:2815,y:3674,level:0},size:{x:5,y:5}},img:{url:"tele-trollheim.png"},name:"Trollheim Farm"}],access:[{id:"spellbook",type:"spellbook",name:"Lunar Spellbook"}]},{type:"teleports",id:"greenteleport",name:"Green Teleports",spots:[{id:"monastery",target:{origin:{x:2604,y:3212,level:0},size:{x:5,y:11},data:"zjn3/yeEEA=="},img:{url:"monastery.png"},name:"Kandarin Monastery",menu_ticks:0,animation_ticks:5},{id:"wars",target:{origin:{x:3294,y:10127,level:0}},img:{url:"warsretreat.png"},facing:qr.north,name:"Wars Retreat",menu_ticks:0,animation_ticks:3},{id:"manorfarm",target:{origin:{x:2665,y:3369,level:0},size:{x:9,y:11},data:"+PDh+/cvX75///DjBw=="},img:{url:"pof.png"},name:"Manor Farm",menu_ticks:0,animation_ticks:5},{id:"maxguild",target:{origin:{x:2276,y:3313,level:1}},facing:qr.south,img:{url:"max.png"},name:"Max guild",menu_ticks:0,animation_ticks:7},{id:"maxguild-garden",target:{origin:{x:2276,y:3327,level:1}},facing:qr.south,img:{url:"max.png"},name:"Max guild",menu_ticks:0,animation_ticks:7},{id:"skelettalhorror",target:{origin:{x:3362,y:3503,level:0}},img:{url:"skhorror.png"},name:"Skeletal Horror",menu_ticks:0,animation_ticks:3}],access:[{id:"spellbook",type:"spellbook",name:"Any Spellbook"}]},{type:"teleports",id:"houseteleports",name:"House Teleports",spots:[{id:"rimmington",target:{origin:{x:2953,y:3222,level:0},size:{x:4,y:5}},name:"Rimmington",code:"1"},{id:"taverley",target:{origin:{x:2882,y:3450,level:0},size:{x:5,y:5}},name:"Taverley",code:"2"},{id:"pollnivneach",target:{origin:{x:3338,y:3003,level:0},size:{x:5,y:4}},name:"Pollnivneach",code:"3"},{id:"relekka",target:{origin:{x:2668,y:3631,level:0},size:{x:5,y:4},data:"//8H"},name:"Rellekka",code:"4"},{id:"brimhaven",target:{origin:{x:2757,y:3176,level:0},size:{x:4,y:5}},name:"Brimhaven",code:"5"},{id:"yanille",target:{origin:{x:2542,y:3093,level:0},size:{x:5,y:4}},name:"Yanille",code:"6"},{id:"trollheim",target:{origin:{x:2889,y:3672,level:0},size:{x:5,y:5},data:"zv//AQ=="},name:"Trollheim",code:"7"},{id:"prifddinas",target:{origin:{x:2166,y:3333,level:1},size:{x:5,y:5},data:"f///AQ=="},name:"Prifddinas",code:"8"},{id:"otot",target:{origin:{x:4193,y:919,level:0},size:{x:5,y:3}},name:"Otot (Mazcab)",code:"9"},{id:"menaphos",target:{origin:{x:3123,y:2633,level:0},size:{x:3,y:3},data:"vwA="},name:"Menaphos",code:"0,1"},{id:"anachronia",target:{origin:{x:5434,y:2374,level:0},size:{x:5,y:5},data:"5PyPAA=="},name:"Anachronia",code:"0,2"}],access:[{id:"spellbook",type:"spellbook",name:"Normal Spellbook",img:{url:"tele-house.png"},menu_ticks:0,animation_ticks:3},{id:"tablets",type:"item",name:{kind:"item",name:"House Teleport Tablet"},img:{url:"modhouse.png"},action_name:"Break",menu_ticks:0,animation_ticks:5}]},{type:"teleports",id:"teleportscrolls",name:"Teleport Scrolls",animation_ticks:5,spots:[{id:"grandexchange",target:{origin:{x:3159,y:3454,level:0},size:{x:4,y:5},data:"7u4D"},img:{url:"scroll-grandexchange.png"},name:"Grand Exchange",code:"1"},{id:"banditcamp",target:{origin:{x:3168,y:2980,level:0},size:{x:5,y:5}},img:{url:"scroll-banditcamp.png"},name:"Bandit Camp",code:"2"},{id:"clocktower",target:{origin:{x:2591,y:3250,level:0},size:{x:5,y:5},data:"/3/nAQ=="},img:{url:"scroll-clocktower.png"},name:"Clocktower",code:"3"},{id:"gutanoth",target:{origin:{x:2521,y:3060,level:0},size:{x:5,y:5},data:"hPz/AQ=="},img:{url:"scroll-gutanoth.png"},name:"Gu'Tanoth",code:"4"},{id:"lighthouse",target:{origin:{x:2511,y:3627,level:0},size:{x:5,y:3},data:"/x8="},img:{url:"scroll-lighthouse.png"},name:"Lighthouse",code:"5"},{id:"fortforinthry",target:{origin:{x:3301,y:3548,level:0},size:{x:5,y:5},data:"UP//AQ=="},img:{url:"scroll-fortforinthry.png"},name:"Forintry Teleport",code:"6"},{id:"miscellania",target:{origin:{x:2511,y:3858,level:0},size:{x:5,y:5},data:"//8/AQ=="},img:{url:"scroll-miscellania.png"},name:"Miscellania",code:"7"},{id:"phoenixlair",target:{origin:{x:2291,y:3620,level:0},size:{x:5,y:5},data:"/v//AA=="},img:{url:"scroll-phoenixlair.png"},name:"Phoenix Lair",code:"8"},{id:"pollnivneach",target:{origin:{x:3357,y:2967,level:0},size:{x:5,y:5},data:"//+fAQ=="},img:{url:"scroll-pollnivneach.png"},name:"Pollnivneach",code:"9"},{id:"taibwowannai",target:{origin:{x:2802,y:3084,level:0},size:{x:5,y:5},data:"5/9/AA=="},img:{url:"scroll-taibwowannai.png"},name:"Tai Bwo Wannai",code:"0"}],access:[{id:"scroll",type:"item",name:{name:"Scroll",kind:"item"},action_name:"Teleport",menu_ticks:0},{id:"globetrotter",type:"item",name:{name:"Globetrotter arm guards",kind:"item"},action_name:"Teleport",menu_ticks:1}]},{type:"teleports",id:"teleportseed",name:"Teleport Seed",img:{url:"crystal.png"},menu_ticks:1,animation_ticks:3,spots:[{id:"lletya",target:{origin:{x:2328,y:3169,level:0},size:{x:5,y:5},data:"EP+PAQ=="},name:"Lletya",code:"1"},{id:"templeoflight",target:{origin:{x:1938,y:4639,level:0},size:{x:5,y:5}},name:"Temple of Light",code:"2"},{id:"amlodd",target:{origin:{x:2153,y:3381,level:1},size:{x:5,y:5}},name:"Amlodd",code:"3"},{id:"cadarn",target:{origin:{x:2259,y:3337,level:1},size:{x:5,y:5}},name:"Cadarn",code:"4"},{id:"crwys",target:{origin:{x:2259,y:3381,level:1},size:{x:5,y:5}},name:"Crwys",code:"5"},{id:"hefin",target:{origin:{x:2184,y:3409,level:1},size:{x:5,y:5}},name:"Hefin",code:"6"},{id:"iorwerth",target:{origin:{x:2183,y:3309,level:1},size:{x:5,y:5}},name:"Iorwerth",code:"7"},{id:"Ithell",target:{origin:{x:2153,y:3337,level:1},size:{x:5,y:5},data:"///vAQ=="},name:"Ithell",code:"8"},{id:"Meilyr",target:{origin:{x:2228,y:3409,level:1},size:{x:5,y:5}},name:"Meilyr",code:"9"},{id:"Trahaearn",target:{origin:{x:2229,y:3309,level:1},size:{x:5,y:5},data:"7///AA=="},name:"Trahaearn",code:"0"}],access:[{id:"attunedseed",type:"item",name:{name:"Attuned crystal teleport seed",kind:"item"},action_name:"Activate"}]},{type:"teleports",id:"menaphostablets",name:"Menaphos Tablets",img:{url:""},menu_ticks:0,animation_ticks:5,spots:[{id:"imperial",target:{origin:{x:3174,y:2727,level:0},size:{x:4,y:5}},img:{url:"imperialdistrict.gif"},name:"Imperial district",code:"1"},{id:"merchant",target:{origin:{x:3206,y:2781,level:0},size:{x:5,y:5},data:"///3AA=="},img:{url:"merchantdistrict.gif"},name:"Merchant district",code:"2"},{id:"port",target:{origin:{x:3184,y:2652,level:0},size:{x:5,y:5},data:"/v//AQ=="},img:{url:"portdistrict.gif"},name:"Port district",code:"3"},{id:"worker",target:{origin:{x:3154,y:2794,level:0},size:{x:5,y:5},data:"GP//AQ=="},img:{url:"workerdistrict.gif"},name:"Worker district",code:"4"},{id:"sophanem",target:{origin:{x:3287,y:2706,level:0},size:{x:5,y:4},data:"/38M"},img:{url:"sophanemdungeon.gif"},name:"Sophanem Slayer Dungeon",code:"5"},{id:"shiftingtombs",target:{origin:{x:2077,y:6950,level:0},size:{x:4,y:5}},img:{url:"shiftingtombs.webp"},name:"Menaphos shifting tombs",code:"5"}],access:[{id:"tablet",type:"item",name:{name:"Tablet",kind:"item"},action_name:"Break"}]},{type:"teleports",id:"spirittree",name:"Spirit Tree",img:{url:"spirittree.png"},animation_ticks:7,spots:[{id:"village",target:{origin:{x:2542,y:3169,level:0}},name:"Tree Gnome Village",code:"1"},{id:"stronghold",target:{origin:{x:2462,y:3444,level:0}},name:"Tree Gnome Stronghold",code:"2"},{id:"battlefield",target:{origin:{x:2557,y:3259,level:0}},name:"Battlefield of Khazard",code:"3"},{id:"grandexchange",target:{origin:{x:3187,y:3507,level:0}},name:"Grand Exchange",code:"4"},{id:"feldiphills",target:{origin:{x:2416,y:2851,level:0}},name:"South Feldip Hills",code:"5"},{id:"sarim",target:{origin:{x:3058,y:3257,level:0}},name:"Port Sarim",code:"6"},{id:"etceteria",target:{origin:{x:2613,y:3855,level:0}},name:"Etceteria",code:"7"},{id:"brimhaven",target:{origin:{x:2800,y:3203,level:0}},name:"Brimhaven",code:"8"},{id:"poisonwaste",target:{origin:{x:2338,y:3109,level:0}},name:"Poison Waste",code:"9"},{id:"prifddinas",target:{origin:{x:2275,y:3371,level:1}},name:"Prifddinas",code:"0"}],access:[{id:"spirittreererooter",type:"item",name:{kind:"item",name:"Spirit tree re-rooter"},action_name:"Teleport",menu_ticks:2}]},{type:"teleports",id:"fairyring",name:"Fairy Ring",img:{url:"fairyring.png"},animation_ticks:7,spots:[{id:"AIP",target:{origin:{x:2412,y:4434,level:0}},code:"",name:"Zanaris"},{id:"AIQ",target:{origin:{x:2996,y:3114,level:0}},code:"AIQ",name:"Asgarnia: Mudskipper Point"},{id:"AIR",target:{origin:{x:2700,y:3247,level:0}},code:"AIR",name:"Islands: South of Witchhaven"},{id:"AIS",target:{origin:{x:2030,y:5982,level:0}},code:"AIS",name:"Other realms: Naragi homeworld"},{id:"AJQ",target:{origin:{x:2735,y:5221,level:0}},code:"AJQ",name:"Dungeons: Dark cave south of Dorgesh-Kaan"},{id:"AJR",target:{origin:{x:2780,y:3613,level:0}},code:"AJR",name:"Kandarin: Slayer cave south-east of Relekka"},{id:"AJS",target:{origin:{x:2500,y:3896,level:0}},code:"AJS",name:"Islands: Penguins near Miscellania"},{id:"AKQ",target:{origin:{x:2319,y:3619,level:0}},code:"AKQ",name:"Piscatoris Hunter area"},{id:"AKS",target:{origin:{x:2571,y:2956,level:0}},code:"AKS",name:"Feldip Hills: Jungle Hunter area"},{id:"ALP",target:{origin:{x:2468,y:4189,level:0}},code:"ALP",name:"Feldip Hills: Near GuTanoth"},{id:"ALQ",target:{origin:{x:3597,y:3495,level:0}},code:"ALQ",name:"Morytania: Haunted Woods east of Canifis"},{id:"ALR",target:{origin:{x:3059,y:4875,level:0}},code:"ALR",name:"Other realmms: Abyss"},{id:"ALS",target:{origin:{x:2644,y:3495,level:0}},code:"ALS",name:"Kandarin: McGrubors Wood"},{id:"BIP",target:{origin:{x:3410,y:3324,level:0}},code:"BIP",name:"Islands: Polypore Dungeon"},{id:"BIQ",target:{origin:{x:3251,y:3095,level:0}},code:"BIQ",name:"Kharidian Desert: Near Kalphite Hive"},{id:"BIR",target:{origin:{x:2455,y:4396,level:0}},code:"BIS",name:"Sparse Plane"},{id:"BIS",target:{origin:{x:2635,y:3266,level:0}},code:"BIS",name:"Kandarin: Ardougne Zoo unicorns"},{id:"BJP",target:{origin:{x:3347,y:3540,level:0}},code:"BJP",name:"Fort Forinthry"},{id:"BJQ",target:{origin:{x:1737,y:5342,level:0}},code:"BJQ",name:"Dungeons: Ancient Cavern"},{id:"BJR",target:{origin:{x:2650,y:4730,level:0}},code:"BJR",name:"Other realms: Realm of the fisher king"},{id:"BJS",target:{origin:{x:1359,y:5635,level:0}},code:"BJS",name:"The Lost Grove"},{id:"BKP",target:{origin:{x:2385,y:3035,level:0}},code:"BKP",name:"Feldip Hills: South of Castle Wars"},{id:"BKQ",target:{origin:{x:3041,y:4532,level:0}},code:"BKQ",name:"Other realms: Enchanted Valley"},{id:"BKR",target:{origin:{x:3469,y:3431,level:0}},code:"BKR",name:"Morytania: Mort Myre, south of Canifis"},{id:"BLP",target:{origin:{x:4622,y:5147,level:0}},code:"BLP",name:"Dungeons: TzHaar area"},{id:"BLR",target:{origin:{x:2740,y:3351,level:0}},code:"BLR",name:"Kandarin: Legends' Guild"},{id:"CIP",target:{origin:{x:2513,y:3884,level:0}},code:"CIP",name:"Islands: Miscellania"},{id:"CIQ",target:{origin:{x:2528,y:3127,level:0}},code:"CIQ",name:"Kandarin: North-west of Yanille"},{id:"CIS",target:{origin:{x:3419,y:4772,level:0}},code:"CIS",name:"Other realms: ScapeRune (Evil Bobs island)"},{id:"CJR",target:{origin:{x:2705,y:3576,level:0}},code:"CJR",name:"Kandarin: Sinclair Mansion (east)"},{id:"CJS",target:{origin:{x:2901,y:2930,level:0}},code:"CJS",name:"Karamja: Kharazi Jungle"},{id:"CKP",target:{origin:{x:2075,y:4848,level:0}},code:"CKP",name:"Other realms: Cosmic entitys plane"},{id:"CKQ",target:{origin:{x:3086,y:2704,level:0}},code:"CKQ",name:"Menaphos: Imperial District"},{id:"CKR",target:{origin:{x:2801,y:3003,level:0}},code:"CKR",name:"Karamja: South of Tai Bwo Wannai Village"},{id:"CKS",target:{origin:{x:3447,y:3470,level:0}},code:"CKS",name:"Morytania: Canifis"},{id:"CLP",target:{origin:{x:3082,y:3206,level:0}},code:"CLP",name:"Islands: South of Draynor Village"},{id:"CLS",target:{origin:{x:2682,y:3081,level:0}},code:"CLS",name:"Islands: Jungle spiders near Yanille"},{id:"CLR",target:{origin:{x:2735,y:2742,level:0}},code:"CLR",name:"Islands: Ape Atoll"},{id:"DIP",target:{origin:{x:3763,y:2930,level:0}},code:"DIP",name:"Islands: Mos LeHarmless"},{id:"DIR",target:{origin:{x:3038,y:5348,level:0}},code:"DIR",name:"Other realms: Gorak`s Plane"},{id:"kethsi",target:{origin:{x:4026,y:5699,level:0}},code:"DIR AKS",name:"Kethsi"},{id:"DIS",target:{origin:{x:3092,y:3137,level:0}},code:"DIS",name:"Misthalin: Wizards Tower"},{id:"DJP",target:{origin:{x:2658,y:3230,level:0}},code:"DJP",name:"Kandarin: Tower of Life"},{id:"DJR",target:{origin:{x:2676,y:3587,level:0}},code:"DJR",name:"Kandarin: Sinclair Mansion (west)"},{id:"DJS",target:{origin:{x:2130,y:3369,level:0}},code:"DJS",name:"Tirannwn: Prifddinas (Clan Amlodd)"},{id:"DKP",target:{origin:{x:2900,y:3111,level:0}},code:"DKP",name:"Karamja: South of Musa Point"},{id:"DKQ",target:{origin:{x:4183,y:5726,level:0}},code:"DKQ",name:"Dungeons: Glacor Cave"},{id:"DKR",target:{origin:{x:3129,y:3496,level:0}},code:"DKR",name:"Misthalin: Edgeville"},{id:"DKS",target:{origin:{x:2744,y:3719,level:0}},code:"DKS",name:"Kandarin: Snowy Hunter area"},{id:"DLQ",target:{origin:{x:3423,y:3016,level:0}},code:"DLQ",name:"Kharidian Desert: North of Nardah"},{id:"DLR",target:{origin:{x:2213,y:3099,level:0}},code:"DLR",name:"Islands: Poison Waste south of Isafdar"},{id:"DLS",target:{origin:{x:3501,y:9821,level:3}},name:"Dungeons: Myreque Hideout under The Hollows",code:"DLS"},{id:"resistance",target:{origin:{x:2254,y:4426,level:0}},name:"Fairy Resistance HQ"},{id:"rift",target:{origin:{x:1626,y:4176,level:0}},code:"BIR DIP CLR ALP",name:"Orks Rift"},{id:"BLQ",target:{origin:{x:2229,y:4244,level:1}},name:"Yubiusk",code:"BLQ"}],access:[{id:"portable_fairy_ring",type:"item",name:{kind:"item",name:"Portable Fairy Ring"},action_name:"Teleport",menu_ticks:2}]},{type:"teleports",id:"slayercape",name:"Slayer Cape",menu_ticks:1,animation_ticks:3,spots:[{id:"mandrith",target:{origin:{x:3050,y:3949,level:0},size:{x:5,y:5}},code:"1",name:"Mandrith"},{id:"laniakea",target:{origin:{x:5667,y:2136,level:0},size:{x:5,y:5},data:"///PAQ=="},code:"2",name:"Laniakea"},{id:"morvran",target:{origin:{x:2195,y:3327,level:1},size:{x:3,y:3},data:"TwA="},code:"3",name:"Morvran"},{id:"kuradal",target:{origin:{x:1738,y:5310,level:1},size:{x:5,y:5},data:"/v/nAA=="},code:"4",name:"Kuradal"},{id:"lapalok",target:{origin:{x:2868,y:2979,level:1},size:{x:3,y:5},data:"0nc="},code:"5",name:"Lapalok"},{id:"sumona",target:{origin:{x:3357,y:2991,level:0},size:{x:5,y:5},data:"5nxjAA=="},code:"6",name:"Sumona"},{id:"chealdar",target:{origin:{x:2443,y:4429,level:0},size:{x:5,y:5},data:"/H/KAQ=="},code:"7",name:"Chealdar"},{id:"mazchna",target:{origin:{x:3506,y:3504,level:0},size:{x:5,y:5}},code:"8",name:"Mazchna"},{id:"raptor",target:{origin:{x:3290,y:3542,level:0},size:{x:5,y:5}},code:"9",name:"The Raptor"},{id:"vannaka",target:{origin:{x:3092,y:3476,level:0},size:{x:4,y:5}},code:"0,1",name:"Vannaka",menu_ticks:2},{id:"jacquelyn",target:{origin:{x:3219,y:3222,level:0},size:{x:5,y:5},data:"//8/AQ=="},code:"0,2",name:"Jacquelyn",menu_ticks:2},{id:"spria",target:{origin:{x:2888,y:3545,level:0},size:{x:5,y:5},data:"///9AQ=="},code:"0,3",name:"Spria",menu_ticks:2}],access:[{id:"cape",type:"item",name:{name:"Slayer cape",kind:"item"},img:{url:"capeslay.png"},action_name:"Teleport"}]},{type:"teleports",id:"dungcape",name:"Dungeoneering Cape",animation_ticks:4,spots:[{id:"edgevilledungeon",target:{origin:{x:3130,y:9914,level:0},size:{x:5,y:4},data:"/z8H"},code:"1",name:"Edgeville Dungeon",menu_ticks:1},{id:"dwarvenmine",target:{origin:{x:3034,y:9769,level:0},size:{x:4,y:7},data:"4v/vDw=="},code:"2",name:"Dwarven mine",menu_ticks:1},{id:"hillgiants",target:{origin:{x:3101,y:9823,level:0},size:{x:7,y:7},data:"s9//////AQ=="},code:"3",name:"Hill giants",menu_ticks:1},{id:"karamjavolcano",target:{origin:{x:2842,y:9554,level:0},size:{x:6,y:7},data:"huA8z/YD"},code:"4",name:"Karamja volcano",menu_ticks:1},{id:"daemonheimpeninsula",target:{origin:{x:3510,y:3663,level:0},size:{x:4,y:7}},code:"5",name:"Daemonheim Peninsula",menu_ticks:1},{id:"firegiants",target:{origin:{x:2575,y:9895,level:0},size:{x:7,y:4},data:"////Bw=="},code:"6",name:"Waterfall fire giants",menu_ticks:1},{id:"miningguild",target:{origin:{x:3019,y:9738,level:0},size:{x:7,y:4},data:"Zr7/Dw=="},code:"7",name:"Mining guild",menu_ticks:1},{id:"braindeath",target:{origin:{x:2123,y:5144,level:0},size:{x:5,y:4},data:"730O"},code:"8",name:"Braindeath Island",menu_ticks:1},{id:"hellhounds",target:{origin:{x:2854,y:9838,level:0},size:{x:4,y:7},data:"7/+/Dw=="},code:"9",name:"Taverley dungeon hellhounds",menu_ticks:1},{id:"bluedragons",target:{origin:{x:2909,y:9807,level:0},size:{x:7,y:4},data:"+7+fAw=="},code:"0,1",name:"Taverley dungeon blue dragons",menu_ticks:2},{id:"varrocksewers",target:{origin:{x:3162,y:9877,level:0},size:{x:6,y:5},data:"kP/7Pg=="},code:"0,2",name:"Varrock sewers",menu_ticks:2},{id:"dragontooth",target:{origin:{x:3812,y:3528,level:0}},code:"0,3",name:"Dragontooth island",menu_ticks:2},{id:"chaostunnels",target:{origin:{x:3157,y:5521,level:0},size:{x:7,y:4},data:"vP//Dw=="},code:"0,4",name:"Chaos Tunnels",menu_ticks:2},{id:"alkharidmine",target:{origin:{x:3298,y:3304,level:0},size:{x:4,y:7},data:"7v//Dw=="},code:"0,5",name:"Al Kharid mine",menu_ticks:2},{id:"metaldragons",target:{origin:{x:2696,y:9439,level:0},size:{x:5,y:7},data:"/3vv/Qc="},code:"0,6",name:"Brimhaven metal dragons",menu_ticks:2},{id:"polypore",target:{origin:{x:4658,y:5488,level:3},size:{x:5,y:5},data:"/7/3AA=="},code:"0,7",name:"Polypore dungeon",menu_ticks:2},{id:"frostdragons",target:{origin:{x:3031,y:9596,level:0},size:{x:5,y:4},data:"3zkH"},code:"0,8",name:"Frost dragons",menu_ticks:2},{id:"kalgeriondemons",target:{origin:{x:3398,y:3662,level:0},size:{x:4,y:7},data:"d/dXAw=="},code:"0,9",name:"Daemonheim demons",menu_ticks:2},{id:"gorajohoardstalker",target:{origin:{x:2231,y:3419,level:1},size:{x:6,y:6},data:"3///jwM="},code:"0,0,1",name:"Gorajo hoardstalker",menu_ticks:3},{id:"slayertower",target:{origin:{x:3431,y:3528,level:0},size:{x:7,y:5},data:"////MwA="},code:"0,0,2",name:"Slayer tower dungeon",menu_ticks:3},{id:"edimmu",target:{origin:{x:2231,y:3393,level:1},size:{x:7,y:7},data:"j4fDj8fhAA=="},code:"0,0,3",name:"Edimmu dungeon",menu_ticks:3}],access:[{id:"cape",type:"item",name:{name:"Dungeoneering cape",kind:"item"},img:{url:"capedung.png"},action_name:"Teleport"}]},{type:"teleports",id:"questcape",name:"Quest Cape",menu_ticks:1,animation_ticks:3,spots:[{id:"guthixtemple",target:{origin:{x:2538,y:5771,level:0},size:{x:5,y:5}},code:"1",name:"Ancient Guthix Temple"},{id:"behindthescenes",target:{origin:{x:1181,y:5394,level:1},size:{x:5,y:5},data:"//8/AQ=="},code:"2",name:"Behind the scenes"},{id:"championsguild",target:{origin:{x:3188,y:3359,level:0},size:{x:4,y:4},data:"d+8="},code:"3",name:"Champion's Guild"},{id:"emptythroneroom",target:{origin:{x:2825,y:12626,level:2},size:{x:5,y:5},data:"4f9zAA=="},code:"4",name:"The empty throne room"},{id:"glacorcavern",target:{origin:{x:4194,y:5750,level:0},size:{x:5,y:5}},code:"5",name:"Glacor cavern"},{id:"heroesguild",target:{origin:{x:2918,y:9892,level:0},size:{x:5,y:5},data:"x/szAA=="},code:"6",name:"Heroes's Guild - Fountain of Heroes"},{id:"legensguild",target:{origin:{x:2726,y:3346,level:0},size:{x:5,y:4}},code:"7",name:"Legends' Guild"},{id:"tearsofguthix",target:{origin:{x:3249,y:9515,level:2},size:{x:4,y:5},data:"9/8P"},code:"8",name:"Tears of Guthix"},{id:"museum",target:{origin:{x:3252,y:3446,level:0},size:{x:5,y:5},data:"/7//AQ=="},code:"9",name:"Varrock Museum"},{id:"worldgate",target:{origin:{x:2365,y:3358,level:0},size:{x:5,y:5},data:"7v//AQ=="},code:"0",name:"The World Gate"}],access:[{id:"cape",type:"item",name:{name:"Quest cape",kind:"item"},img:{url:"capequest.png"},action_name:"Teleport"}]},{type:"teleports",id:"desertamulet",name:"Desert Amulet",menu_ticks:2,animation_ticks:6,spots:[{id:"nardah",target:{origin:{x:3427,y:2912,level:0},size:{x:11,y:11},data:"5z////3vf////////Of/AQ=="},code:"1",name:"Nardah"},{id:"uzer",target:{origin:{x:3475,y:3093,level:0},size:{x:9,y:11}},code:"2",name:"Uzer"}],access:[{id:"amulet",type:"item",name:{name:"Desert amulet",kind:"item"},img:{url:"desertamulet.png"},action_name:"Teleport"}]},{type:"teleports",id:"amuletofglory",name:"Amulet of Glory",img:{url:"jewellry_amuletofglory.png"},menu_ticks:2,animation_ticks:4,spots:[{id:"edgeville",target:{origin:{x:3087,y:3496,level:0}},code:"1",name:"Edgeville"},{id:"karamja",target:{origin:{x:2918,y:3176,level:0}},code:"2",name:"Karamja"},{id:"draynor",target:{origin:{x:3080,y:3250,level:0}},code:"3",name:"Draynor"},{id:"alkharid",target:{origin:{x:3305,y:3123,level:0}},code:"4",name:"Al Kharid"}],access:[{id:"necklace",type:"item",name:{name:"Amulet of glory",kind:"item"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"combatbracelet",name:"Combat bracelet",menu_ticks:2,animation_ticks:4,spots:[{id:"warriors",target:{origin:{x:2880,y:3542,level:0}},code:"1",name:"Warriors' Guild"},{id:"champions",target:{origin:{x:3191,y:3365,level:0}},code:"2",name:"Champions' Guild"},{id:"monastery",target:{origin:{x:3052,y:3488,level:0}},code:"3",name:"Edgeville Monastery"},{id:"ranging",target:{origin:{x:2655,y:3441,level:0}},code:"4",name:"Ranging Guild"}],access:[{id:"ring",type:"item",name:{name:"Combat bracelet",kind:"item"},img:{url:"jewellry_combatbracelet.png"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"digsitependant",name:"Dig Site pendant",menu_ticks:2,animation_ticks:4,spots:[{id:"digsite",target:{origin:{x:3358,y:3396,level:0}},code:"1",name:"Digsite"},{id:"senntisten",target:{origin:{x:3378,y:3444,level:0}},code:"2",name:"Senntisten"},{id:"exam",target:{origin:{x:3362,y:3345,level:0}},code:"3",name:"Exam Centre"}],access:[{id:"ring",type:"item",name:{name:"Dig Site pendant",kind:"item"},img:{url:"jewellry_digsitependant.png"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"enlightenedamulet",name:"Enlightened amulet",menu_ticks:2,animation_ticks:3,spots:[{id:"nexus",target:{origin:{x:3215,y:3180,level:0},size:{x:5,y:5},data:"//+/AQ=="},code:"1",name:"Nexus"},{id:"graveyard",target:{origin:{x:3231,y:3655,level:0},size:{x:4,y:5},data:"//cP"},code:"2",name:"Graveyard of Shadows"},{id:"banditcamp",target:{origin:{x:3169,y:2994,level:0},size:{x:5,y:5}},code:"3",name:"Bandit camp"}],access:[{id:"ring",type:"item",name:{name:"Enlightened amulet",kind:"item"},img:{url:"jewellry_enlightenedamulet.png"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"gamesnecklace",name:"Games necklace",img:{url:"jewellry_gamesnecklace.png"},menu_ticks:2,animation_ticks:4,spots:[{id:"trollinvasion",target:{origin:{x:2874,y:3567,level:0}},code:"1",name:"Troll invasion"},{id:"barbarianoutpost",target:{origin:{x:2520,y:3571,level:0}},code:"2",name:"Barbarian Outpost"},{id:"gamersgrotto",target:{origin:{x:2967,y:9678,level:0}},code:"3",name:"Gamer's grotto"},{id:"agoroth",target:{origin:{x:3860,y:6827,level:0}},code:"4",name:"Agoroth"},{id:"corporealbeast",target:{origin:{x:2885,y:4372,level:2}},code:"5",name:"Corporeal Beast"},{id:"burghderott",target:{origin:{x:3487,y:3237,level:0}},code:"6",name:"Burgh De Rott"},{id:"tearsofguthix",target:{origin:{x:3250,y:9517,level:2}},code:"7",name:"Tears of Guthix"}],access:[{id:"necklace",type:"item",name:{name:"Games necklace",kind:"item"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"ringofduelling",name:"Ring of duelling",img:{url:"jewellry_duelring.png"},menu_ticks:2,animation_ticks:4,spots:[{id:"hetsoasis",target:{origin:{x:3313,y:3235,level:0},size:{x:5,y:5},data:"+/v/AQ=="},code:"1",name:"Het's oasis"},{id:"castlewars",target:{origin:{x:2442,y:3088,level:0},size:{x:5,y:5},data:"7/33AA=="},code:"2",name:"Castle wars"},{id:"warforge",target:{origin:{x:2411,y:2845,level:0},size:{x:5,y:5},data:"nP//AQ=="},code:"3",name:"The Warforge"},{id:"fistofguthix",name:"Fist of Guthix",target:{origin:{x:1690,y:5598,level:0},size:{x:5,y:5}},code:"4"}],access:[{id:"ring",type:"item",name:{name:"Ring of duelling",kind:"item"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"ringofrespawn",name:"Ring of respawn",menu_ticks:2,animation_ticks:3,spots:[{id:"lumbridge",target:{origin:{x:3219,y:3217,level:0},size:{x:5,y:5},data:"7f/2AQ=="},code:"1",name:"Lumbridge"},{id:"falador",target:{origin:{x:2969,y:3337,level:0},size:{x:5,y:4},data:"//sP"},code:"2",name:"Falador"},{id:"camelot",target:{origin:{x:2756,y:3478,level:0},size:{x:5,y:5},data:"/39rAA=="},code:"3",name:"Camelot"},{id:"soulwars",target:{origin:{x:1888,y:3176,level:0},size:{x:5,y:4},data:"//8M"},code:"4",name:"Soul Wars"},{id:"burthorpe",target:{origin:{x:2887,y:3535,level:0},size:{x:3,y:4},data:"/g8="},code:"5",name:"Burthorpe"}],access:[{id:"ring",type:"item",name:{name:"Ring of respawn",kind:"item"},img:{url:"jewellry_ringofrespawn.png"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"ringofslaying",name:"Ring of slaying",menu_ticks:2,animation_ticks:4,spots:[{id:"sumona",target:{origin:{x:3359,y:2991,level:0},size:{x:4,y:5},data:"zM0M"},code:"1",name:"Sumona"},{id:"slayertower",target:{origin:{x:3419,y:3522,level:0},size:{x:3,y:4},data:"/ww="},code:"2",name:"Slayer Tower"},{id:"slayerdungeon",target:{origin:{x:2788,y:3613,level:0},size:{x:5,y:5}},code:"3",name:"Fremennik Slayer Dungeon"},{id:"tarnslair",target:{origin:{x:3183,y:4599,level:0},size:{x:5,y:3},data:"hHw="},code:"3",name:"Tarn's Lair"}],access:[{id:"ring",type:"item",name:{name:"Ring of slaying",kind:"item"},img:{url:"jewellry_ringofslaying.png"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"ringofwealth",name:"Ring of Wealth",menu_ticks:2,animation_ticks:4,spots:[{id:"miscellania",target:{origin:{x:2505,y:3858,level:1},size:{x:5,y:5}},code:"1",name:"Miscellania"},{id:"grandexchange",target:{origin:{x:3162,y:3462,level:0},size:{x:2,y:5}},code:"2",name:"Grand Exchange"}],access:[{id:"ring",type:"item",name:{name:"Ring of Wealth",kind:"item"},img:{url:"jewellry_ringofwealth.png"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"luckofthedwarves",name:"Luck of the Dwarves",menu_ticks:1,animation_ticks:4,spots:[{id:"keldagrim",target:{origin:{x:2856,y:10197,level:0},size:{x:5,y:5},data:"7v3nAA=="},code:"3",name:"Keldagrim"},{id:"outpost",target:{origin:{x:2550,y:3473,level:0},size:{x:5,y:5},data:"//+vAQ=="},code:"4",name:"Dwarven Outpost"}],access:[{id:"ring",type:"item",name:{name:"Luck of the Dwarves",kind:"item"},img:{url:"luck_of_the_dwarves.png"},action_name:"Rub"}]},{type:"teleports",id:"hazelmeressignetring",name:"Hazelmere's signet ring",menu_ticks:1,animation_ticks:4,spots:[{id:"hazelmere",target:{origin:{x:2422,y:3394,level:0},size:{x:5,y:5},data:"+v//AQ=="},code:"4",name:"Hazelmere"}],access:[{id:"ring",type:"item",name:{name:"Hazelmere's signet ring",kind:"item"},img:{url:"Hazelmeres_signet_ring.webp"},action_name:"Rub"}]},{type:"teleports",id:"skillsnecklace",name:"Skills necklace",menu_ticks:2,animation_ticks:4,spots:[{id:"fishing",target:{origin:{x:2615,y:3385,level:0}},code:"1",name:"Fishing Guild"},{id:"mining",target:{origin:{x:3016,y:3338,level:0}},code:"2",name:"Mining Guild"},{id:"crafting",target:{origin:{x:2933,y:3290,level:0}},code:"3",name:"Crafting Guild"},{id:"cooking",target:{origin:{x:3143,y:3442,level:0}},code:"4",name:"Cooking Guild"},{id:"invention",target:{origin:{x:2997,y:3437,level:0}},code:"5",name:"Invention guild"},{id:"farming",target:{origin:{x:2646,y:3355,level:0}},code:"6",name:"Farming Guild"},{id:"runecrafting",target:{origin:{x:3102,y:3152,level:3}},code:"7",name:"Runecrafting Guild"}],access:[{id:"ring",type:"item",name:{name:"Skills necklace",kind:"item"},img:{url:"jewellry_skillsnecklace.png"},action_name:"Rub",can_be_in_pota:!0}]},{type:"teleports",id:"travellersnecklace",name:"Traveller's necklace",menu_ticks:2,animation_ticks:3,spots:[{id:"wizardstower",target:{origin:{x:3101,y:3178,level:0},size:{x:5,y:5}},code:"1",name:"Wizard's Tower"},{id:"outpost",target:{origin:{x:2445,y:3343,level:0},size:{x:5,y:5}},code:"2",name:"The Outpost"},{id:"deserteagle",target:{origin:{x:3422,y:3138,level:0},size:{x:5,y:5},data:"//8fAQ=="},code:"3",name:"Desert Eagle's Eyrie"}],access:[{id:"ring",type:"item",name:{name:"Traveller's necklace",kind:"item"},img:{url:"jewellry_travellersnecklace.png"},action_name:"Rub",can_be_in_pota:!0}]},{id:"davesspellbook",type:"teleports",name:"Dave's spellbook",img:{url:"davebook.png"},spots:[{id:"watchtower",target:{origin:{x:2443,y:3180,level:0}},code:"1",name:"Watchtower"},{id:"camelot",target:{origin:{x:2794,y:3418,level:0}},code:"2",name:"Camelot"},{id:"falador",target:{origin:{x:3006,y:3319,level:0}},code:"3",name:"Falador"},{id:"ardougne",target:{origin:{x:2538,y:3306,level:0}},code:"4",name:"Ardougne"},{id:"lumbridge",target:{origin:{x:3168,y:3199,level:0}},code:"5",name:"Lumbridge"},{id:"varrock",target:{origin:{x:3254,y:3449,level:0}},code:"6",name:"Varrock"}],access:[{img:{url:"davebook.png"},id:"spellbook",type:"item",name:{kind:"item",name:"Dave's spellbook"},action_name:"Teleport",menu_ticks:2,animation_ticks:3}]},{type:"teleports",id:"drakansmedallion",name:"Drakan's medallion",img:{url:"drakmed.gif"},menu_ticks:1,animation_ticks:5,spots:[{id:"barrows",target:{origin:{x:3561,y:3311,level:0},size:{x:9,y:9},data:"EXb8+fMfPnz48AE="},code:"1",name:"Barrows"},{id:"burghderott",target:{origin:{x:3493,y:3197,level:0},size:{x:8,y:7},data:"Pz/////AwA=="},code:"2",name:"Burgh de Rott"},{id:"meiyerditch",target:{origin:{x:3625,y:9617,level:0},size:{x:4,y:8},data:"/WZm/w=="},code:"3",name:"Meiyerditch"},{id:"darkmeyer",target:{origin:{x:3624,y:3364,level:0},size:{x:8,y:2}},code:"4",name:"Darkmeyer"},{id:"laboratories",target:{origin:{x:3629,y:9691,level:0},size:{x:9,y:8},data:"wtzx4+//zx8Q"},code:"5",name:"Meiyerditch Laboratories"}],access:[{id:"medallion",type:"item",name:{kind:"item",name:"Drakan's medallion"},action_name:"Teleport"}]},{type:"teleports",id:"arcsailing",name:"",img:{url:"sail.png"},menu_ticks:1,animation_ticks:1,spots:[{id:"portsarim",target:{origin:{x:3052,y:3246,level:0}},name:"Port Sarim"},{id:"tualeit",target:{origin:{x:1761,y:12010,level:0}},name:"Tua Leit Docks"},{id:"whalesmaw",target:{origin:{x:2011,y:11782,level:0}},name:"Whale's Maw Docks"},{id:"waiko",target:{origin:{x:1810,y:11652,level:0}},name:"Waiko Docks"},{id:"turtleislands",target:{origin:{x:2242,y:11424,level:0}},name:"Turtle Islands Docks"},{id:"aminishi",target:{origin:{x:2062,y:11271,level:0}},name:"Aminishi Docks"},{id:"cyclosis",target:{origin:{x:2256,y:11180,level:0}},name:"Cyclosis Docks"},{id:"goshima",target:{origin:{x:2453,y:11591,level:0}},name:"Goshima Docks"},{id:"uncharted",target:{origin:{x:1203,y:7374,level:0}},name:"Uncharted Isle"}],access:[{type:"entity",id:"port sarim",name:{kind:"npc",name:"Quartermaster Gully (Port Sarim)"},action_name:"Travel",clickable_area:{origin:{x:3054,y:3247,level:0}}},{type:"entity",id:"menaphos",name:{kind:"npc",name:"Quartermaster Gully (Menaphos)"},action_name:"Travel",clickable_area:{origin:{x:3231,y:2664,level:0}}},{type:"entity",id:"tuaeileit",name:{kind:"npc",name:"Quartermaster Gully (Tuaei Leit)"},action_name:"Travel",clickable_area:{origin:{x:1760,y:12010,level:0}}},{type:"entity",id:"whalesmaw",name:{kind:"npc",name:"Quartermaster Gully (Whale's Maw)"},action_name:"Travel",clickable_area:{origin:{x:2012,y:11781,level:0}}},{type:"entity",id:"Waiko",name:{kind:"npc",name:"Quartermaster Gully (Waiko)"},action_name:"Travel",clickable_area:{origin:{x:1809,y:11652,level:0}}},{type:"entity",id:"Turtle Islands",name:{kind:"npc",name:"Quartermaster Gully (Turtle Islands)"},action_name:"Travel",clickable_area:{origin:{x:2245,y:11423,level:0}}},{type:"entity",id:"Aminishi",name:{kind:"npc",name:"Quartermaster Gully (Aminishi)"},action_name:"Travel",clickable_area:{origin:{x:2061,y:11270,level:0}}},{type:"entity",id:"Cyclosis",name:{kind:"npc",name:"Quartermaster Gully (Cyclosis)"},action_name:"Travel",clickable_area:{origin:{x:2251,y:11182,level:0}}},{type:"entity",id:"Goshima",name:{kind:"npc",name:"Quartermaster Gully (Goshima)"},action_name:"Travel",clickable_area:{origin:{x:2448,y:11593,level:0}}}]},{type:"teleports",id:"arctabs",name:"Arc Journal",img:{url:"arcjournal.png"},menu_ticks:1,animation_ticks:3,spots:[{id:"sarim",target:{origin:{x:3050,y:3245,level:0},size:{x:4,y:4},data:"/64="},name:"Port Sarim",code:"1"},{id:"waiko",target:{origin:{x:1820,y:11613,level:0},size:{x:5,y:5}},name:"Waiko",code:"2"},{id:"whalesmaw",target:{origin:{x:2058,y:11797,level:0},size:{x:5,y:4},data:"778P"},name:"Whale's Maw",code:"3"},{id:"aminishi",target:{origin:{x:2085,y:11273,level:0},size:{x:5,y:5},data:"//83AA=="},name:"Aminishi",code:"4"},{id:"cyclosis",target:{origin:{x:2314,y:11222,level:0},size:{x:5,y:5}},name:"Cyclosis",code:"5"},{id:"tuaileit",target:{origin:{x:1797,y:11959,level:0},size:{x:5,y:5}},name:"Tuai Leit",code:"6"},{id:"turtleislands",target:{origin:{x:2277,y:11501,level:0},size:{x:3,y:5},data:"/j8="},name:"Turtle Islands",code:"7"},{id:"goshima",target:{origin:{x:2459,y:11546,level:0},size:{x:4,y:2},data:"Lw=="},name:"Goshima",code:"8"}],access:[{id:"journal",type:"item",name:{name:"Arc journal",kind:"item"},action_name:"Teleport"}]},{type:"teleports",id:"quiver",name:"Tirannwn quiver",menu_ticks:1,animation_ticks:5,spots:[{id:"lletya",target:{origin:{x:2344,y:3169,level:0},size:{x:5,y:5},data:"5fx/AA=="},name:"Lletya",code:"1"},{id:"islwyn",target:{origin:{x:2174,y:3349,level:1},size:{x:4,y:5},data:"1/8D"},name:"Islwyn",code:"2"},{id:"tyras",target:{origin:{x:2184,y:3144,level:0},size:{x:5,y:5},data:"5P3/AQ=="},name:"Tyras Camp",code:"3"},{id:"poisonwaste",target:{origin:{x:1987,y:4172,level:0},size:{x:5,y:4}},name:"Poison Waste",code:"4"},{id:"deathaltar",target:{origin:{x:1858,y:4637,level:0},size:{x:2,y:5}},name:"Death Altar",code:"5"},{id:"elfcamp",target:{origin:{x:2201,y:3252,level:0},size:{x:4,y:5},data:"/+4O"},name:"Elf Camp",code:"6"},{id:"mushroompatch",target:{origin:{x:2225,y:3132,level:0},size:{x:5,y:5},data:"+P/3AQ=="},name:"Mushroom Patch",code:"7"},{id:"harmonypillars",target:{origin:{x:2217,y:3395,level:1},size:{x:5,y:5}},name:"Harmony Pillars",code:"8"}],access:[{id:"quiver",type:"item",img:{url:"quiver.png"},name:{name:"Tirannwn quiver",kind:"item"},action_name:"Teleport"}]},{type:"teleports",id:"sceptreofthegods",name:"Sceptre of the gods",menu_ticks:1,animation_ticks:3,spots:[{id:"pyramidpain",target:{origin:{x:1942,y:4498,level:0}},name:"Pyramid Plunder",code:"1"},{id:"agility",target:{origin:{x:3341,y:2827,level:0}},name:"Agility Pyramid",code:"2"},{id:"ancient",target:{origin:{x:3232,y:2897,level:0}},name:"Ancient Pyramid",code:"3"},{id:"palace",target:{origin:{x:3175,y:2729,level:0}},name:"Golden Palace",code:"4"}],access:[{id:"sotg",type:"item",name:{name:"Sceptre of the gods",kind:"item"},img:{url:"sotg.png"},action_name:"Teleport",menu_ticks:1}]},{type:"teleports",id:"gliders",name:"Gnome gliders",img:{url:"glider.png"},menu_ticks:2,animation_ticks:6,spots:[{id:"grandtree",target:{origin:{x:2465,y:3501,level:3}},name:"Ta Quir Priw",code:"1"},{id:"whitewolfmountain",target:{origin:{x:2850,y:3494,level:1}},name:"Sindarpos",code:"2"},{id:"digside",target:{origin:{x:3319,y:3438,level:0}},name:"Lemanto Andra",code:"3"},{id:"alkharid",target:{origin:{x:3284,y:3211,level:0}},name:"Kar-Hewo",code:"4"},{id:"karamja",target:{origin:{x:2971,y:2969,level:0}},name:"Gandius",code:"5"},{id:"feldiphills",target:{origin:{x:2549,y:2971,level:0}},name:"Lemantolly Undri",code:"6"},{id:"treegnomevillage",target:{origin:{x:2496,y:3191,level:0}},name:"Priw Gnomo Andralo",code:"7"},{id:"prifddinas",target:{origin:{x:2208,y:3445,level:1}},name:"Dylandra",code:"8"},{id:"tualeit",target:{origin:{x:1772,y:11920,level:0}},name:"Kal-Undri",code:"9"}],access:[{id:"grandtree",type:"entity",clickable_area:{origin:{x:2464,y:3502,level:3}},name:{kind:"npc",name:"Captain Errdo"},action_name:"Glider"},{id:"whitewolfmountain",type:"entity",clickable_area:{origin:{x:2850,y:3493,level:1}},name:{kind:"npc",name:"Captain Bleemadge"},action_name:"Glider"},{id:"alkharid",type:"entity",clickable_area:{origin:{x:3283,y:3212,level:0}},name:{kind:"npc",name:"Captain Dalbur"},action_name:"Glider"},{id:"karamja",type:"entity",clickable_area:{origin:{x:2970,y:2973,level:0}},name:{kind:"npc",name:"Captain Klemfoodle"},action_name:"Glider"},{id:"feldip",type:"entity",clickable_area:{origin:{x:2545,y:2972,level:0}},name:{kind:"npc",name:"Gnormadium Avlafrim"},action_name:"Glider"},{id:"gnomevillage",type:"entity",clickable_area:{origin:{x:2496,y:3190,level:0}},name:{kind:"npc",name:"Captain Belmondo"},action_name:"Glider"},{id:"prifddinas",type:"entity",clickable_area:{origin:{x:2207,y:3452,level:1}},name:{kind:"npc",name:"Captain Muggin"},action_name:"Glider"},{id:"tuaeileit",type:"entity",clickable_area:{origin:{x:1773,y:11919,level:0}},name:{kind:"npc",name:"Azalea Oakhart"},action_name:"Glider"}]},{type:"teleports",id:"wickedhood",name:"Wicked hood",menu_ticks:2,animation_ticks:3,spots:[{id:"guild",target:{origin:{x:3109,y:3156,level:3}},name:"Runecrafting Guild",menu_ticks:1},{id:"soul",target:{origin:{x:2016,y:6878,level:0}},name:"Soul",code:"Soul"},{id:"cosmic",target:{origin:{x:2405,y:4381,level:0}},name:"Cosmic",code:"Cosmic"},{id:"air",target:{origin:{x:3128,y:3407,level:0}},name:"Air",code:"Air"},{id:"body",target:{origin:{x:3050,y:3442,level:0}},name:"Body",code:"Body"},{id:"mind",target:{origin:{x:2980,y:3511,level:0}},name:"Mind",code:"Mind"},{id:"fire",target:{origin:{x:3310,y:3252,level:0}},name:"Fire",code:"Fire"},{id:"earth",target:{origin:{x:3302,y:3477,level:0}},name:"Earth",code:"Earth"},{id:"water",target:{origin:{x:3165,y:3183,level:0}},name:"Water",code:"Water"},{id:"nature",target:{origin:{x:2865,y:3022,level:0}},name:"Nature",code:"Nature"},{id:"astral",target:{origin:{x:2156,y:3866,level:0}},name:"Astral",code:"Astral"},{id:"chaos",target:{origin:{x:2269,y:4844,level:0}},name:"Chaos",code:"Chaos"},{id:"law",target:{origin:{x:2858,y:3378,level:0}},name:"Law",code:"Law"},{id:"blood",target:{origin:{x:3560,y:9779,level:0}},name:"Blood",code:"Blood"},{id:"death",target:{origin:{x:1863,y:4637,level:0}},name:"Death",code:"Death"}],access:[{id:"wickedhood",type:"item",name:{name:"Wicked hood",kind:"item"},img:{url:"wicked.png"},action_name:"Teleport"}]},{type:"teleports",id:"gote",name:"Grace of the Elves (Max Guild Portal)",img:{url:"gote.png"},animation_ticks:3,spots:[{id:"overgrownidols",target:{origin:{x:2949,y:2977,level:0}},name:"Overgrown idols"},{id:"deepseafishing",target:{origin:{x:2135,y:7107,level:0}},name:"Deep sea fishing hub"},{id:"lavaflowmine",target:{origin:{x:2177,y:5663,level:0}},name:"Lava Flow Mine"},{id:"livingrockcaverns",target:{origin:{x:3651,y:5122,level:0}},name:"Living Rock Caverns"},{id:"jadinkolair",target:{origin:{x:3034,y:9231,level:0}},name:"Jadinko Lair"}],access:[{id:"gote",type:"item",name:{name:"Grace of the elves",kind:"item"},action_name:"Max garden portal",menu_ticks:1}]},{type:"teleports",id:"spheredorgeshkaan",name:"Dorgesh-kaan sphere",img:{url:"sphere_dorgeshkaan.png"},menu_ticks:1,animation_ticks:11,spots:[{id:"north",target:{origin:{x:2710,y:5349,level:0},size:{x:20,y:6},data:"3//2/3///////z8A/wHg"},name:"North",code:"1"},{id:"south",target:{origin:{x:2721,y:5260,level:0},size:{x:4,y:8},data:"//b/bw=="},name:"South",code:"2"},{id:"east",target:{origin:{x:2734,y:5296,level:1},size:{x:3,y:19},data:"////27Zt2wA="},name:"East",code:"3"},{id:"west",target:{origin:{x:2692,y:5299,level:1},size:{x:10,y:18},data:"AAIIMMAAAwzg///7zz//+MMPMMAAAww="},name:"West",code:"4"}],access:[{type:"item",id:"sphere",name:{name:"Dorgesh-kaan sphere",kind:"item"},action_name:"Break"}]},{type:"teleports",id:"spheregoblinvillage",name:"Goblin village sphere",img:{url:"sphere_goblinvillage.png"},menu_ticks:0,animation_ticks:11,spots:[{id:"goblinvillage",name:"Goblin Village",target:{origin:{x:2953,y:3497,level:0},size:{x:8,y:6},data:"DAz/////"}}],access:[{type:"item",id:"sphere",name:{name:"Goblin village sphere",kind:"item"},action_name:"Break"}]},{type:"teleports",id:"naturessentinel",name:"Nature's sentinel outfit",animation_ticks:3,spots:[{id:"normalwestvarrock",target:{origin:{x:3135,y:3430,level:0}},code:"1,1",name:"Normal Trees - West Varrock",menu_ticks:2},{id:"normaleastvarrock",target:{origin:{x:3290,y:3475,level:0}},code:"1,2",name:"Normal Trees - East Varrock",menu_ticks:2},{id:"oakwestvarrock",target:{origin:{x:3166,y:3415,level:0}},code:"2,1",name:"Oak Trees - West Varrock",menu_ticks:2},{id:"oakeastvarrock",target:{origin:{x:3277,y:3475,level:0}},code:"2,2",name:"Oak Trees - East Varrock",menu_ticks:2},{id:"willowdraynor",target:{origin:{x:3090,y:3232,level:0}},code:"3,1",name:"Willow Trees - Draynor",menu_ticks:2},{id:"willowcathery",target:{origin:{x:2783,y:3429,level:0}},code:"3,2",name:"Willow Trees - Catherby",menu_ticks:2},{id:"willowbarbarianoutpost",target:{origin:{x:2520,y:3579,level:0}},code:"3,3",name:"Willow Trees - Barbarian Outpost",menu_ticks:2},{id:"mapleseers",target:{origin:{x:2728,y:3501,level:0}},code:"4,1",name:"Maple Trees - Seers'",menu_ticks:2},{id:"mapledaemonheim",target:{origin:{x:3500,y:3626,level:0}},code:"4,2",name:"Maple Trees - Daeomonheim Peninsula Resource Dungeon'",menu_ticks:2},{id:"yewseers",target:{origin:{x:2708,y:3463,level:0}},code:"5,1",name:"Yew Trees - Seers' Graveyard",menu_ticks:2},{id:"yewcathery",target:{origin:{x:2757,y:3431,level:0}},code:"5,2",name:"Yew Trees - West Catherby",menu_ticks:2},{id:"yewedgeville",target:{origin:{x:3087,y:3475,level:0}},code:"5,3",name:"Yew Trees - Edgeville",menu_ticks:2},{id:"yewvarrock",target:{origin:{x:3208,y:3502,level:0}},code:"5,4",name:"Yew Trees - Varrock Palace",menu_ticks:2},{id:"magicranging",target:{origin:{x:2694,y:3425,level:0}},code:"6,1",name:"Magic Trees - East Ranging Guild",menu_ticks:2},{id:"magicsorcerer",target:{origin:{x:2702,y:3397,level:0}},code:"6,2",name:"Magic Trees - Sorcerer's Tower",menu_ticks:2},{id:"magicmagetraining",target:{origin:{x:3357,y:3310,level:0}},code:"6,3",name:"Magic Trees - Mage Training Arena",menu_ticks:2},{id:"magictirannwn",target:{origin:{x:2287,y:3140,level:0}},code:"6,4",name:"Magic Trees - South Tirannwn",menu_ticks:2},{id:"magiccrwys",target:{origin:{x:2249,y:3367,level:1}},code:"6,5",name:"Magic Trees - Crwys sector",menu_ticks:2},{id:"eldersorcerer",target:{origin:{x:2734,y:3401,level:0}},code:"7,1",name:"Elder Trees - East Sorcerer's Tower",menu_ticks:2},{id:"elderyanille",target:{origin:{x:2572,y:3063,level:0}},code:"7,2",name:"Elder Trees - South Yanille",menu_ticks:2},{id:"eldergnomestronghold",target:{origin:{x:2425,y:3456,level:0}},code:"7,3",name:"Elder Trees - Tree Gnome Stronghold",menu_ticks:2},{id:"elderdraynor",target:{origin:{x:3094,y:3215,level:0}},code:"7,4",name:"Elder Trees - South Draynor",menu_ticks:2},{id:"elderfalador",target:{origin:{x:3052,y:3320,level:0}},code:"7,5",name:"Elder Trees - Falador Farm",menu_ticks:2},{id:"eldervarrock",target:{origin:{x:3259,y:3370,level:0}},code:"7,6",name:"Elder Trees - South Varrock",menu_ticks:2},{id:"elderlletya",target:{origin:{x:2294,y:3147,level:0}},code:"7,7",name:"Elder Trees - West Lletya",menu_ticks:2},{id:"elderpiscatoris",target:{origin:{x:2321,y:3598,level:0}},code:"7,8",name:"Elder Trees - Piscatoris",menu_ticks:2},{id:"elderedgeville",target:{origin:{x:3094,y:3451,level:0}},code:"7,9,1",name:"Elder Trees - South Edgeville",menu_ticks:3},{id:"elderrimmington",target:{origin:{x:2933,y:3227,level:0}},code:"7,9,2",name:"Elder Trees - North Rimmington",menu_ticks:3},{id:"elderfort",target:{origin:{x:3375,y:3545,level:0}},code:"7,9,3",name:"Elder Trees - Fort Forinthry Grove",menu_ticks:3},{id:"teaktai",target:{origin:{x:2815,y:3084,level:0}},code:"0,1,1",name:"Teak Trees - Tai Bwo Wannai",menu_ticks:3},{id:"teakape",target:{origin:{x:2774,y:2696,level:0}},code:"0,1,2",name:"Teak Trees - Ape Atoll",menu_ticks:3},{id:"teakcastlewars",target:{origin:{x:2334,y:3048,level:0}},code:"0,1,3",name:"Teak Trees - South-west Castle Wars",menu_ticks:3},{id:"mahoganyape",target:{origin:{x:2716,y:2708,level:0}},code:"0,2,2",name:"Mahogany Trees - Ape Atoll",menu_ticks:3},{id:"mahoganiharazi",target:{origin:{x:2932,y:2928,level:0}},code:"0,2,3",name:"Mahogany Trees - Kharazi Jungle",menu_ticks:3},{id:"arcticpine",target:{origin:{x:2355,y:3848,level:0}},code:"0,3",name:"Arctic Pine Trees",menu_ticks:2},{id:"acadia",target:{origin:{x:3186,y:2720,level:0}},code:"0,4",name:"Acadia Trees",menu_ticks:2},{id:"ivynorthvarrock",target:{origin:{x:3217,y:3499,level:0}},code:"0,5,1",name:"Choking Ivy - North Varrock Palace",menu_ticks:3},{id:"ivyeastvarrock",target:{origin:{x:3232,y:3460,level:0}},code:"0,5,2",name:"Choking Ivy - East Varrock Palace",menu_ticks:3},{id:"ivynorthfalador",target:{origin:{x:3015,y:3394,level:0}},code:"0,5,3",name:"Choking Ivy - North Falador",menu_ticks:3},{id:"ivysouthfalador",target:{origin:{x:3047,y:3326,level:0}},code:"0,5,4",name:"Choking Ivy - South Falador",menu_ticks:3},{id:"ivytaverley",target:{origin:{x:2938,y:3428,level:0}},code:"0,5,5",name:"Choking Ivy - South-east Taverly",menu_ticks:3},{id:"ivyardougne",target:{origin:{x:2623,y:3307,level:0}},code:"0,5,6",name:"Choking Ivy - East Ardougne Church",menu_ticks:3},{id:"ivyyanille",target:{origin:{x:2594,y:3112,level:0}},code:"0,5,7",name:"Choking Ivy - North Yanille",menu_ticks:3},{id:"ivycastlewars",target:{origin:{x:2429,y:3062,level:0}},code:"0,5,8",name:"Choking Ivy - South Castle Wars",menu_ticks:3},{id:"ivycrwys",target:{origin:{x:2241,y:3375,level:1}},code:"0,5,9",name:"Choking Ivy - Crwys sector",menu_ticks:3},{id:"idolsshipyard",target:{origin:{x:2932,y:3026,level:0}},code:"0,6,1",name:"Overgrown Idols - West of the Karamja shipyard",menu_ticks:3}],access:[{id:"outfit",type:"item",name:{name:"Nature's sentinel helm",kind:"item"},action_name:"Teleport",img:{url:"sentinel.png"}}]},{type:"teleports",id:"volcanictrapper",name:"Volcanic trapper outfit",animation_ticks:3,spots:[{id:"nettingcharming",target:{origin:{x:3367,y:3742,level:0}},code:"2,5",name:"Butterfly Netting - Charming Moth",menu_ticks:2}],access:[{id:"outfit",type:"item",name:{name:"Volcanic trapper head",kind:"item"},action_name:"Teleport",img:{url:"Volcanic_trapper_head.webp"}}]},{type:"teleports",id:"archteleport",name:"Archaeology teleport (or outfit)",menu_ticks:1,animation_ticks:3,spots:[{id:"campus",target:{origin:{x:3336,y:3378,level:0}},code:"1",name:"Archaeology Campus"},{id:"kharidet",target:{origin:{x:3345,y:3194,level:0}},code:"2",name:"Kharid-et"},{id:"infernal",target:{origin:{x:3271,y:3504,level:0}},code:"3",name:"Infernal Source"},{id:"everlight",target:{origin:{x:3697,y:3206,level:0}},code:"4",name:"Everlight"},{id:"senntisten",target:{origin:{x:1784,y:1296,level:0}},code:"5",name:"Senntisten"},{id:"stormguard",target:{origin:{x:2680,y:3403,level:0}},code:"6",name:"Stormguard Citadel"},{id:"daemonheim",target:{origin:{x:3428,y:3699,level:0}},code:"7",name:"Daemonheim"},{id:"warforge",target:{origin:{x:2409,y:2824,level:0}},code:"8",name:"Warforge"},{id:"orthen",target:{origin:{x:5457,y:2339,level:0}},code:"9",name:"Orthen"},{id:"jacques",target:{origin:{x:3254,y:3453,level:2}},code:"0,1",name:"Collectors - Art Critic Jacques",menu_ticks:2},{id:"tess",target:{origin:{x:2550,y:2853,level:0}},code:"0,2",name:"Collectors - Chief Tess",menu_ticks:2},{id:"generals",target:{origin:{x:2957,y:3510,level:0}},code:"0,3",name:"Collectors - Generals Bentnoze & Wartface",menu_ticks:2},{id:"isaura",target:{origin:{x:2921,y:9701,level:0}},code:"0,4",name:"Collectors - Isaura",menu_ticks:2},{id:"lowse",target:{origin:{x:2985,y:3268,level:0}},code:"0,5",name:"Collectors - Lowse",menu_ticks:2},{id:"sharrigan",target:{origin:{x:5456,y:2344,level:0}},code:"0,6",name:"Collectors - Sharrigan",menu_ticks:2},{id:"atcha",target:{origin:{x:2963,y:3346,level:0}},code:"0,7",name:"Collectors - Sir Atcha",menu_ticks:2},{id:"soran",target:{origin:{x:3181,y:3417,level:0}},code:"0,8",name:"Collectors - Soran",menu_ticks:2},{id:"velucia",target:{origin:{x:3342,y:3382,level:0}},code:"0,9",name:"Collectors - Velucia",menu_ticks:2},{id:"wiseoldman",target:{origin:{x:3088,y:3254,level:0}},code:"0,0,1",name:"Collectors - Wise Old Man",menu_ticks:3}],access:[{id:"scrolls",type:"item",img:{url:"archteleport.png"},name:{name:"Archaeology teleport",kind:"item"},action_name:"Teleport"}]},{type:"teleports",id:"ringofkinship",name:"Ring of Kinship",spots:[{id:"daemonheim",name:"Daemonheim",target:{origin:{x:3441,y:3694,level:0},size:{x:11,y:11},data:"9/////mPf/jDH/6ABzjAAQ=="},menu_ticks:0,animation_ticks:8}],access:[{id:"ring",type:"item",img:{url:"ringofkinship.png"},name:{name:"Ring of kinship",kind:"item"},action_name:"Teleport to Daemonheim"}]},{type:"teleports",id:"witchdoctormask",name:"Witchdoctor mask",img:{url:"witchdoctormask.png"},spots:[{id:"herblorehabitat",target:{origin:{x:2953,y:2933,level:0}},name:"Herblore Habitat",menu_ticks:1,animation_ticks:5}],access:[{id:"mask",type:"item",name:{name:"Witchdoctor mask",kind:"item"},action_name:"Teleport"}]},{type:"teleports",id:"ecctophial",name:"Ectophial",spots:[{id:"ectofunctus",name:"Ectofunctus",target:{origin:{x:3657,y:3522,level:0},size:{x:5,y:3},data:"/zc="},menu_ticks:0,animation_ticks:13}],access:[{id:"phial",type:"item",img:{url:"ectophial.png"},name:{name:"Ectophial",kind:"item"},action_name:"Empty"}]},{type:"teleports",id:"explorersring",name:"Explorer's ring",img:{url:"explorersring.png"},menu_ticks:0,animation_ticks:10,spots:[{id:"cabbagefield",target:{origin:{x:3053,y:3291,level:0}},name:"Cabbage field"}],access:[{type:"item",id:"ring",name:{name:"Explorer's ring 4",kind:"item"},action_name:"Cabbage-port"}]},{type:"teleports",id:"karamjagloves",name:"Karamja gloves",img:{url:"karamjagloves.png"},spots:[{id:"gemmine",name:"Gem Mine",target:{origin:{x:2838,y:9385,level:0},size:{x:5,y:5},data:"/3/vAQ=="},menu_ticks:1,animation_ticks:5}],access:[{id:"gloves",type:"item",name:{name:"Karamja gloves 4",kind:"item"},action_name:"Teleport"}]},{type:"teleports",id:"theheart",name:"The Heart teleport",img:{url:"The_Heart_teleport.webp"},spots:[{id:"center",name:"The Heart",target:{origin:{x:3197,y:6941,level:1},size:{x:5,y:5}},menu_ticks:0,animation_ticks:4}],access:[{type:"item",id:"tablet",name:{name:"The Heart teleport",kind:"item"},action_name:"Break"}]},{type:"teleports",id:"legendscape",name:"Legends Cape",img:{url:"legendscape.png"},spots:[{id:"legendsguild",target:{origin:{x:2728,y:3348,level:0}},name:"Legend's Guild",animation_ticks:3}],access:[{id:"cape",type:"item",action_name:"Teleport",name:{kind:"item",name:"Cape of legends"},menu_ticks:1}]},{type:"teleports",id:"skullsceptre",name:"Skull Sceptre",menu_ticks:1,animation_ticks:3,spots:[{id:"outside",target:{origin:{x:3081,y:3421,level:0}},code:"1",name:"Outside"},{id:"war",target:{origin:{x:1859,y:5240,level:0},size:{x:5,y:5},data:"+f/vAQ=="},code:"2",name:"Vault of War"},{id:"famine",target:{origin:{x:2041,y:5241,level:0},size:{x:5,y:5},data:"//+vAA=="},code:"3",name:"Catacomb of Famine"},{id:"pestillence",target:{origin:{x:2121,y:5251,level:0},size:{x:5,y:5},data:"8v//AQ=="},code:"4",name:"Pit of Pestilence"},{id:"death",target:{origin:{x:2358,y:5211,level:0},size:{x:5,y:5},data:"/v//AQ=="},code:"5",name:"Sepulchre of Death"}],access:[{type:"item",img:{url:"skullsceptre.png"},name:{kind:"item",name:"Skull sceptre"},action_name:"Teleport",id:"tablet"}]},{type:"teleports",id:"dragonkinlaboratory",name:"Dragonkin Laboratory teleport",menu_ticks:1,animation_ticks:4,spots:[{id:"spot",target:{origin:{x:3367,y:3887,level:0},size:{x:5,y:5},data:"/39CAA=="},name:"Dragonkin Laboratory"}],access:[{type:"item",img:{url:"dragonkin.png"},name:{kind:"item",name:"Dragonkin Laboratory teleport"},action_name:"Break",id:"tablet"}]},{type:"teleports",id:"wildernessobelisk",name:"Portable obelisk",menu_ticks:1,animation_ticks:3,spots:[{id:"13",target:{origin:{x:3155,y:3619,level:0},size:{x:3,y:3}},code:"1",name:"Level 13"},{id:"18",target:{origin:{x:3218,y:3655,level:0},size:{x:3,y:3}},code:"2",name:"Level 18"},{id:"27",target:{origin:{x:3034,y:3731,level:0},size:{x:3,y:3}},code:"3",name:"Level 27"},{id:"35",target:{origin:{x:3105,y:3793,level:0},size:{x:3,y:3}},code:"4",name:"Level 35"},{id:"44",target:{origin:{x:2979,y:3865,level:0},size:{x:3,y:3}},code:"5",name:"Level 44"},{id:"50",target:{origin:{x:3306,y:3915,level:0},size:{x:3,y:3}},code:"6",name:"Level 50"}],access:[{id:"obelisk",type:"item",name:{name:"Portable obelisk",kind:"item"},img:{url:"portableobelisk.png"},action_name:"Teleport"}]},{type:"teleports",id:"wildernesssword",name:"Wilderness sword",img:{url:"wildernesssword.png"},spots:[{id:"edgeville",target:{origin:{x:3083,y:3499,level:0},size:{x:7,y:7},data:"fz7/////AA=="},code:"1,1",name:"Edgeville",menu_ticks:3,animation_ticks:5},{id:"herbpatch",target:{origin:{x:3140,y:3822,level:0},size:{x:7,y:7},data:"8/n/////AQ=="},code:"1,2",name:"Herb patch",menu_ticks:3,animation_ticks:5},{id:"forinthry",target:{origin:{x:3078,y:10056,level:0},size:{x:6,y:6},data:"/P//PQ4="},code:"1,3",name:"Forinthry Dungeon",menu_ticks:3,animation_ticks:5},{id:"agility",target:{origin:{x:2995,y:3910,level:0},size:{x:7,y:6},data:"//////MA"},code:"1,5",name:"Wilderness Agility course",menu_ticks:3,animation_ticks:5}],access:[{type:"item",id:"sword",name:{name:"Wilderness Sword 4",kind:"item"},action_name:"Operate"}]},{type:"teleports",id:"lyre",name:"Enchanted lyre",menu_ticks:1,animation_ticks:6,spots:[{id:"relekka",target:{origin:{x:2651,y:3689,level:0},size:{x:5,y:5},data:"///vAQ=="},code:"1",name:"Relekka",menu_ticks:1,animation_ticks:6},{id:"waterbirth",target:{origin:{x:2525,y:3738,level:0},size:{x:5,y:5},data:"/H/OAQ=="},code:"2",name:"Waterbirth Island"},{id:"neitiznot",target:{origin:{x:2310,y:3784,level:0},size:{x:3,y:5},data:"22Y="},code:"3",name:"Neitiznot"},{id:"jatizso",target:{origin:{x:2402,y:3780,level:0},size:{x:5,y:5},data:"6//3AA=="},code:"4",name:"Jatizso"},{id:"miscellania",target:{origin:{x:2515,y:3858,level:0},size:{x:5,y:5},data:"//8/AQ=="},code:"5",name:"Miscellania"},{id:"etceteria",target:{origin:{x:2591,y:3878,level:0},size:{x:5,y:5}},code:"6",name:"Etceteria"},{id:"relekkamarket",target:{origin:{x:2641,y:3675,level:0},size:{x:5,y:5}},code:"7",name:"Relekka Market"}],access:[{id:"lyre",type:"item",name:{name:"Enchanted lyre",kind:"item"},img:{url:"enchantedlyre.png"},action_name:"Play"}]},{type:"teleports",id:"charterships",name:"Charter Ships",img:{url:"sail.png"},menu_ticks:1,animation_ticks:5,spots:[{id:"tyras",target:{origin:{x:2142,y:3122,level:0}},name:"Port Tyras"},{id:"brimhaven",target:{origin:{x:2760,y:3238,level:0}},name:"Brimhaven"},{id:"catherby",target:{origin:{x:2796,y:3406,level:0}},name:"Catherby"},{id:"khazard",target:{origin:{x:2674,y:3144,level:0}},name:"Port Khazard"},{id:"ooglog",target:{origin:{x:2623,y:2857,level:0}},name:"Oo'glog"},{id:"karamja",target:{origin:{x:2954,y:3158,level:0}},name:"Karamja"},{id:"shipyard",target:{origin:{x:3001,y:3032,level:0}},name:"Shipyard"},{id:"sarim",target:{origin:{x:3043,y:3191,level:0}},name:"Port Sarim"},{id:"phasmatys",target:{origin:{x:3702,y:3503,level:0}},name:"Port Phasmatys"},{id:"mosleharmless",target:{origin:{x:3671,y:2931,level:0}},name:"Mos Le'Harmless"},{id:"menaphos",target:{origin:{x:3140,y:2662,level:0}},name:"Menaphos"}],access:[{type:"entity",id:"sarim",name:{kind:"npc",name:"Trader Crewmember (Port Sarim)"},clickable_area:{origin:{x:3035,y:3190,level:0},size:{x:15,y:3}},action_name:"Charter"},{type:"entity",id:"catherbvy",name:{kind:"npc",name:"Trader Crewmember (Catherby)"},clickable_area:{origin:{x:2792,y:3405,level:0},size:{x:4,y:7}},action_name:"Charter"},{type:"entity",id:"tyras",name:{kind:"npc",name:"Trader Crewmember (Port Tyras)"},clickable_area:{origin:{x:2141,y:3121,level:0},size:{x:8,y:3}},action_name:"Charter"},{type:"entity",id:"brimhaven",name:{kind:"npc",name:"Trader Crewmember (Brimhaven)"},clickable_area:{origin:{x:2759,y:3237,level:0},size:{x:2,y:3}},action_name:"Charter"},{type:"entity",id:"khazard",name:{kind:"npc",name:"Trader Crewmember (Port Khazard)"},clickable_area:{origin:{x:2673,y:3144,level:0},size:{x:3,y:5}},action_name:"Charter"},{type:"entity",id:"ooglog",name:{kind:"npc",name:"Trader Crewmember (Oo'glog)"},clickable_area:{origin:{x:2619,y:2856,level:0},size:{x:5,y:2}},action_name:"Charter"},{type:"entity",id:"musa",name:{kind:"npc",name:"Trader Crewmember (Musa Point)"},clickable_area:{origin:{x:2953,y:3153,level:0},size:{x:3,y:11}},action_name:"Charter"},{type:"entity",id:"shipyard",name:{kind:"npc",name:"Trader Crewmember (Shipyard)"},clickable_area:{origin:{x:3e3,y:3028,level:0},size:{x:3,y:11}},action_name:"Charter"},{type:"entity",id:"phasmatys",name:{kind:"npc",name:"Trader Crewmember (Port Phasmatys)"},clickable_area:{origin:{x:3701,y:3499,level:0},size:{x:2,y:7}},action_name:"Charter"},{type:"entity",id:"menaphos",name:{kind:"npc",name:"Trader Crewmember (Menaphos)"},clickable_area:{origin:{x:3139,y:2661,level:0},size:{x:11,y:2}},action_name:"Charter"}]},{type:"teleports",id:"dragontrinkets",name:"Dragon Trinkets",animation_ticks:3,spots:[{id:"green",target:{origin:{x:3303,y:5468,level:0}},name:"Green Dragons",code:"1,1",menu_ticks:4},{id:"brutalgreen",target:{origin:{x:2512,y:3511,level:0}},name:"Brutal Green Dragons",code:"1,2",menu_ticks:4},{id:"blue",target:{origin:{x:2891,y:9769,level:0}},name:"Blue Dragons",code:"2",menu_ticks:3},{id:"red",target:{origin:{x:2731,y:9529,level:0}},name:"Red Dragons",code:"3",menu_ticks:3},{id:"black",target:{origin:{x:1565,y:4356,level:0}},name:"Black Dragons",code:"4,1",menu_ticks:4},{id:"kbd",target:{origin:{x:3051,y:3519,level:0}},name:"King Black Dragon",code:"4,2",menu_ticks:4},{id:"qbd",target:{origin:{x:1198,y:6499,level:0}},name:"Queen Black Dragon",code:"4,2",menu_ticks:4}],access:[{id:"trinkets",type:"item",name:{name:"Dragon trinkets",kind:"item"},img:{url:"dragontrinkets.png"},action_name:"Teleport"}]},{type:"teleports",id:"metallicdragontrinkets",name:"Metallic Dragon Trinkets",animation_ticks:3,spots:[{id:"bronze",target:{origin:{x:2723,y:9486,level:0}},name:"Bronze Dragons",code:"1",menu_ticks:3},{id:"iron",target:{origin:{x:2694,y:9443,level:0}},name:"Iron Dragons",code:"2",menu_ticks:3},{id:"steel",target:{origin:{x:2708,y:9468,level:0}},name:"Steel Dragons",code:"3",menu_ticks:3},{id:"mithril",target:{origin:{x:1778,y:5346,level:0}},name:"Mithril Dragons",code:"4",menu_ticks:3},{id:"adamant",target:{origin:{x:4516,y:6046,level:0}},name:"Adamant Dragons",code:"5,1",menu_ticks:4},{id:"rune",target:{origin:{x:2367,y:3358,level:0}},name:"Rune Dragons",code:"5,2",menu_ticks:4}],access:[{id:"trinkets",type:"item",name:{name:"Metallic dragon trinkets",kind:"item"},img:{url:"metallicdragontrinkets.png"},action_name:"Teleport"}]},{type:"teleports",id:"amuletofnature",name:"Amulet of Nature",menu_ticks:0,animation_ticks:3,spots:[{id:"draynornightshade",target:{origin:{x:3084,y:3353,level:0},size:{x:4,y:4},data:"j+g="},name:"Nightshade Patch"},{id:"herblorehabitat",target:{origin:{x:2946,y:2904,level:0},size:{x:4,y:4},data:"nPk="},name:"Vine Bush Patch"},{id:"faladortree",target:{origin:{x:3002,y:3371,level:0},size:{x:5,y:5},data:"P8b4AQ=="},name:"Falador Tree Patch"},{id:"harmonyallotment",target:{origin:{x:3795,y:2833,level:0},size:{x:1,y:6}},name:"Harmony Island Allotment Patch"},{id:"grandtreetreepatch",target:{origin:{x:2434,y:3413,level:0},size:{x:5,y:5},data:"LsboAA=="},name:"Tree Gnome Stronghold Tree Patch"}],access:[{id:"cape",type:"item",action_name:"Teleport",img:{url:"amuletofnature.png"},name:{kind:"item",name:"Amulet of nature"}}]},{type:"teleports",id:"tokkulzo",name:"TokKul-Zo",img:{url:"tokkulzo.png"},menu_ticks:2,animation_ticks:5,spots:[{id:"plaza",target:{origin:{x:4669,y:5150,level:0},size:{x:8,y:8}},name:"Main Plaza",code:"1"},{id:"pit",target:{origin:{x:4596,y:5059,level:0},size:{x:8,y:7},data:"fv/+////7g=="},name:"Fight Pit",code:"2"},{id:"cave",target:{origin:{x:4607,y:5125,level:0},size:{x:6,y:8},data:"OM7////z"},name:"Fight Cave",code:"3"},{id:"kiln",target:{origin:{x:4741,y:5167,level:0},size:{x:6,y:8},data:"nvf9/+97"},name:"Fight Kiln",code:"4"},{id:"cauldron",target:{origin:{x:4783,y:5125,level:0},size:{x:8,y:6},data:"////fn5+"},name:"Fight Cauldron",code:"5"}],access:[{id:"ring",type:"item",name:{kind:"item",name:"TokKul-Zo"},action_name:"Teleport"}]},{type:"teleports",id:"grandseedpod",name:"Grand seed pod",menu_ticks:1,animation_ticks:4,spots:[{id:"grandtree",target:{origin:{x:2465,y:3495,level:0}},name:"Grand Tree"}],access:[{type:"item",id:"pod",name:{name:"Grand seed pod",kind:"item"},img:{url:"Grand_seed_pod.png"},action_name:"Squash"}]},{type:"teleports",id:"sandseed",name:"Mystical sand seed",menu_ticks:1,animation_ticks:7,spots:[{id:"garden",target:{origin:{x:3320,y:3307,level:0}},name:"Garden of Kharid"}],access:[{type:"item",id:"seed",name:{name:"Mystical sand seed",kind:"item"},img:{url:"Mystical_sand_seed.png"},action_name:"Plant"}]},{type:"teleports",id:"passingbracelet",name:"Passing bracelet",menu_ticks:1,animation_ticks:4,spots:[{id:"gardens",target:{origin:{x:1169,y:1787,level:1}},name:"City of Um: Hanging Gardens",code:"1",facing:qr.south},{id:"haunt",target:{origin:{x:1164,y:1838,level:1}},name:"City of Um: Haunt on the Hill",code:"2",facing:qr.north},{id:"reflection",target:{origin:{x:1134,y:1723,level:1}},name:"City of Um: Reflection Pool",code:"3",facing:qr.north}],access:[{type:"item",id:"bracelet",name:{name:"Passing bracelet",kind:"item"},img:{url:"Passing_bracelet.png"},action_name:"Rub"}]},{type:"teleports",id:"tomeofum",name:"Tome of Um",menu_ticks:1,animation_ticks:4,spots:[{id:"smithy",target:{origin:{x:1145,y:1805,level:1},size:{x:5,y:5},data:"//v/AA=="},name:"Um Smithy",code:"1,1"},{id:"ritualsite",target:{origin:{x:1038,y:1760,level:1}},name:"Um Ritual Site",code:"1,2"}],access:[{type:"item",id:"tome",name:{name:"Tome of Um",kind:"item"},img:{url:"Tome_of_Um_2.webp"},action_name:"Operate"}]},{type:"teleports",id:"camulet",name:"Camulet",menu_ticks:1,animation_ticks:3,spots:[{id:"temple",target:{origin:{x:3194,y:2926,level:0}},name:"Enakhra's Temple"}],access:[{id:"amulet",type:"item",name:{name:"Camulet",kind:"item"},img:{url:"Camulet.png"},action_name:"Rub"}]},{type:"teleports",id:"diskofreturning",name:"Disk of returning",menu_ticks:1,spots:[{id:"return",target:{origin:{x:2982,y:9804,level:0}},name:"Return",animation_ticks:1},{id:"lifealtar",target:{origin:{x:1065,y:5544,level:0}},name:"Return",animation_ticks:4}],access:[{id:"disk",type:"item",name:{name:"Disk of returning",kind:"item"},img:{url:"Disk_of_returning_(Gower_Quest).png"},action_name:"Scan"}]},{type:"teleports",id:"magicwhistle",name:"Magic whistle",menu_ticks:1,spots:[{id:"return",target:{origin:{x:2741,y:3235,level:0}},name:"Return",animation_ticks:2}],access:[{id:"whistle",type:"item",name:{name:"Magic whistle",kind:"item"},img:{url:"Magic_whistle.webp"},action_name:"Blow",area_restriction:{origin:{x:2624,y:4672,level:0},size:{x:64,y:64}}}]},{type:"teleports",id:"warsbossportal",name:"Boss portal",menu_ticks:0,animation_ticks:3,spots:[{id:"gregorovic",name:"Gregorovic",img:{url:"Gregorovic_(boss_portal)_texture.webp",width:40},target:{origin:{x:3277,y:7053,level:1}}},{id:"helwyr",name:"Helwyr",img:{url:"Helwyr_(boss_portal)_texture.webp",width:40},target:{origin:{x:3270,y:6905,level:1}}},{id:"twinfuries",name:"The Twin Furies",img:{url:"Twin_Furies_(boss_portal)_texture.png",width:40},target:{origin:{x:3128,y:7047,level:1}}},{id:"vindicta",name:"Vindicta & Gorvek",img:{url:"Vindicta_and_Gorvek_(boss_portal)_texture.png",width:40},target:{origin:{x:3119,y:6903,level:1}}},{id:"ed1",name:"Temple of Aminishi",img:{url:"Seiryu_the_Azure_Serpent_(boss_portal)_texture.png",width:40},target:{origin:{x:2094,y:11352,level:0}}},{id:"ed3",name:"Shadow Reef",img:{url:"180px-The_Ambassador_(boss_portal)_texture.webp",width:40},target:{origin:{x:3511,y:3692,level:0}}},{id:"ed4",name:"Zamorakian Undercity",img:{url:"The_Zamorakian_Undercity_(boss_portal)_texture.png",width:40},target:{origin:{x:1759,y:1341,level:0}}}],access:[{id:"left",type:"entity",name:{name:"Boss portal",kind:"static"},action_name:"Teleport",clickable_area:{origin:{x:3289,y:10154,level:0},size:{x:3,y:1}}},{id:"right",type:"entity",name:{name:"Boss portal",kind:"static"},action_name:"Teleport",clickable_area:{origin:{x:3296,y:10154,level:0},size:{x:4,y:1},data:"Cw=="}}]}];var Ds,Rs;!function(e){var t=As.TeleportGroup;const i={};async function n(){return i.cache_extracted||(i.cache_extracted=await(await fetch("map/cache_transportation.json",{cache:"no-store"})).json()),i.cache_extracted}e.teleports=Os,e.getCacheTransports=n,e.getAll=async function(){return i.all_transports||(i.all_transports=[].concat(await n(),e.teleports)),i.all_transports};let o=null;e.getTeleportGroup=function(t){return e.teleports.find((e=>e.id==t))},e.getAllTeleportSpots=function(){return o||(o=e.teleports.filter(t.canBeAccessedAnywhere).flatMap((e=>e.spots.map((t=>new As.TeleportGroup.Spot(e,t,e.access[0])))))),o},e.resolveTeleport=function(t){var i,n;const o=e.teleports.find((e=>e.id==t.group)),r=null===(i=null==o?void 0:o.spots)||void 0===i?void 0:i.find((e=>e.id==t.spot)),s=t.access?null===(n=null==o?void 0:o.access)||void 0===n?void 0:n.find((e=>e.id==t.access)):null==o?void 0:o.access[0];if(o&&r&&s)return new As.TeleportGroup.Spot(o,r,s)}}(Ds||(Ds={})),function(e){var t=Ds.resolveTeleport,i=B.index,n=B.minIndex,r=Hr.cooldown,s=B.capitalize,a=Vr.activate,l=As.EntityTransportation.defaultInteractiveArea;let c,u,h,d,p;function g(e){var n;for(let o=e.length-1;o>=0;o--){let r=e[o];switch(r.type){case"cheat":return r.target;case"ability":return r.to;case"run":return i(r.waypoints,-1);case"teleport":return r.spot?r.spot:t(r.id).centerOfTarget();case"transport":let e=r.assumed_start,o=r.internal.actions[0];const s=null!==(n=As.EntityAction.findApplicable(o,e))&&void 0!==n?n:o.movement[0];if(s.offset){let t=W.move(e,s.offset);return t.level+=s.offset.level,t}if(s.fixed_target)return a(Vr.normalize(s.fixed_target.target)).center()}}return null}function m(e){return 0==e.length?0:d.level(e[e.length-1])}e.COSMETIC_DEFAULT_COLORS={arrow:"#6970d9",area:"#6970d9"},function(e){function t(e,t){return Math.max(0,Math.min(...t)-e.tick)}e.start=function(e){return{tick:0,cooldowns:{escape:e.double_escape?[0,0]:[0],surge:e.double_surge?[0,0]:[0],barge:0,dive:0},acceleration_activation_tick:-1e3,position:{tile:null,direction:null},targeted_entity:null,assumptions:e}},e.surge_cooldown=function(e){return t(e,e.cooldowns.surge)},e.escape_cooldown=function(e){return t(e,e.cooldowns.escape)},e.barge_cooldown=function(e){return t(e,[e.cooldowns.barge])},e.dive_cooldown=function(e){return t(e,[e.cooldowns.dive])}}(c=e.movement_state||(e.movement_state={})),function(t){function i(t){const i=F.combine(e.Step.bounds(t.raw),F.from(t.pre_state.position.tile,t.post_state.position.tile));return i?Z.lift(i,e.Step.level(t.raw)):null}t.step_bounds=i,t.bounds=function(e){return F.combine(...e.steps.map(i))},t.getState=function(e,t){return t>=e.steps.length?e.post_state:t<0?e.pre_state:(e.steps[t],e.steps[t].pre_state)}}(u=e.augmented||(e.augmented={})),function(e){e.error=0,e.warning=1,e.weak_warning=2}(h=e.issue_level||(e.issue_level={})),e.ends_up=g,e.endsUpArea=function(e){var n;for(let o=e.length-1;o>=0;o--){let r=e[o];switch(r.type){case"cheat":return Vr.init(r.target);case"ability":return Vr.init(r.to);case"run":return Vr.init(i(r.waypoints,-1));case"teleport":return t(r.id).targetArea();case"transport":let e=r.assumed_start,o=r.internal.actions[0];const s=null!==(n=As.EntityAction.findApplicable(o,e))&&void 0!==n?n:o.movement[0];if(s.offset){let t=W.move(e,s.offset);return t.level+=s.offset.level,Vr.init(t)}if(s.fixed_target)return Vr.normalize(s.fixed_target.target)}}return null},e.augment=async function(e,s=c.start({}),u=null){var h,d,p,g;let m=[];s||(s=c.start({}));let f=o.cloneDeep(s);f.position||(f.position={tile:null,direction:null});for(let s=0;s<e.length;s++){let c=e[s],u={pre_state:o.cloneDeep(f),post_state:null,issues:[],section:0,raw:c};switch(c.type){case"cheat":f.position.tile=c.target,c.orientation&&(f.position.direction=c.orientation),f.tick+=c.ticks;break;case"orientation":s>0&&u.issues.push({level:0,message:"Orientation steps should only be used as the first step!"}),f.tick+=1,f.targeted_entity=null,f.position.direction=c.direction;break;case"run":f.position.tile&&!W.eq(f.position.tile,c.waypoints[0])&&u.issues.push({level:0,message:"Running does not start where the previous step ends!"}),f.position={tile:i(c.waypoints,-1),direction:qr.fromVector(f.targeted_entity?j.sub(f.targeted_entity,i(c.waypoints,-1)):j.sub(i(c.waypoints,-1),i(c.waypoints,-2)))},f.tick+=Math.ceil(Ur.pathLength(c.waypoints)/2),f.targeted_entity=null;break;case"ability":if(f.position)if(f.position.tile&&!W.eq(f.position.tile,c.from))u.issues.push({level:0,message:"Ability does not start where the previous step ends!"});else{let e=f.position;switch(e.tile||(e.tile=c.from),null==e.direction&&(e.direction=qr.fromVector(j.sub(c.to,c.from)),"escape"==c.ability&&(e.direction=qr.invert(e.direction))),c.ability){case"surge":{let t=await Hr.surge(e);t&&W.eq(c.to,t.tile)||u.issues.push({level:0,message:"Surge target does not match where it would end up!"});break}case"escape":{let t=await Hr.escape(e);t&&W.eq(c.to,t.tile)||u.issues.push({level:0,message:"Escape target does not match where it would end up!"});break}case"dive":{let t=await Hr.dive(e.tile,c.to);t&&W.eq(c.to,t.tile)||u.issues.push({level:0,message:"Dive target can't be reached!"});break}case"barge":{let t=await Hr.barge(e.tile,c.to);t&&W.eq(c.to,t.tile)||u.issues.push({level:0,message:"Barge target can't be reached!"});break}}}const o=()=>f.tick-f.acceleration_activation_tick<=10;switch(c.ability){case"surge":{let e=n(f.cooldowns.surge),t=f.cooldowns.surge[e]-f.tick;t>0&&(f.assumptions.double_surge&&t<=2&&f.cooldowns.surge[1-e]>=r("surge",o(),f.assumptions.mobile_perk)-2?u.issues.push({level:1,message:`Antispam delay. Delaying for ${t} ticks.`}):u.issues.push({level:t>=4?0:1,message:`All surge charges are still on cooldown for ${t} ticks!`}),f.tick=f.cooldowns.surge[e]),f.cooldowns.surge[e]=f.tick+r("surge",o(),f.assumptions.mobile_perk);for(let e=0;e<f.cooldowns.surge.length;e++)f.cooldowns.surge[e]=Math.max(f.tick+(o()?1:2),f.cooldowns.surge[e]);f.cooldowns.escape.fill(f.tick+r("escape",o(),f.assumptions.mobile_perk));break}case"escape":{let e=n(f.cooldowns.escape),t=f.cooldowns.escape[e]-f.tick;t>0&&(f.assumptions.double_escape&&t<=2&&f.cooldowns.escape[1-e]>=r("escape",o(),f.assumptions.mobile_perk)-2?u.issues.push({level:1,message:`Antispam delay. Delaying for ${t} ticks.`}):u.issues.push({level:t>=4?0:1,message:`All escape charges are still on cooldown for ${t} ticks!`}),f.tick=f.cooldowns.escape[e]),f.cooldowns.escape[e]=f.tick+r("escape",o(),f.assumptions.mobile_perk);for(let e=0;e<f.cooldowns.escape.length;e++)f.cooldowns.escape[e]=Math.max(f.tick+2,f.cooldowns.escape[e]);f.cooldowns.surge.fill(f.tick+r("surge",o(),f.assumptions.mobile_perk));break}case"dive":{let e=f.cooldowns.dive-f.tick;e>0&&(u.issues.push({level:e>=4?0:1,message:`Dive is still on cooldown for ${e} ticks!`}),f.tick=f.cooldowns.dive),f.cooldowns.dive=f.tick+r("dive",o(),f.assumptions.mobile_perk);break}case"barge":{let e=f.cooldowns.barge-f.tick;e>0&&(u.issues.push({level:e>=4?0:1,message:`Barge is still on cooldown for ${e} ticks!`}),f.tick=f.cooldowns.barge),f.cooldowns.barge=f.tick+r("barge",o(),f.assumptions.mobile_perk);break}}switch(f.position={tile:c.to,direction:qr.fromVector(j.sub(c.to,c.from))},"escape"==c.ability&&(f.position.direction=qr.invert(f.position.direction)),c.ability){case"surge":case"dive":case"escape":break;case"barge":f.tick+=1}f.targeted_entity=null;break;case"teleport":let g=t(c.id);if(a(g.targetArea()).query(c.spot)||u.issues.push({level:0,message:"Teleport destination tile is outside of the teleport area."}),c.spot?f.position.tile=c.spot:f.position.tile=g.centerOfTarget(),"entity"==(null===(h=g.access)||void 0===h?void 0:h.type))switch(null!==(d=g.access.orientation)&&void 0!==d?d:"toentitybefore"){case"bymovement":u.pre_state.position.tile&&(f.position.direction=qr.fromVector(j.sub(f.position.tile,u.pre_state.position.tile)));break;case"toentitybefore":u.pre_state.position.tile&&(f.position.direction=qr.fromVector(j.sub(g.access.clickable_area.origin,u.pre_state.position.tile)));break;case"toentityafter":f.position.direction=qr.fromVector(j.sub(g.access.clickable_area.origin,f.position.tile))}null!=g.spot.facing&&(f.position.direction=g.spot.facing),f.tick+=g.props.menu_ticks,f.tick+=g.props.animation_ticks,f.targeted_entity=null;break;case"transport":let m=c.internal,y=m.actions[0];!f.position.tile||a(y.interactive_area||l(m)).query(f.position.tile)||u.issues.push({level:0,message:"Player is not in the interactive area for this shortcut!"}),f.position.tile&&!W.eq2(f.position.tile,c.assumed_start)&&u.issues.push({level:0,message:"Ability does not start where the previous step ends!"});let v=c.assumed_start,_=As.EntityAction.findApplicable(y,v);switch(_||(u.issues.push({level:0,message:"No applicable movement option from this tile"}),_=y.movement[0]),_.offset?(f.position.tile=W.move(v,_.offset),f.position.tile.level+=_.offset.level):_.fixed_target&&(f.position.tile=a(Vr.normalize(_.fixed_target.target)).center()),null!==(p=_.orientation)&&void 0!==p?p:"toentityafter"){case"bymovement":f.position.direction=qr.fromVector(j.sub(f.position.tile,v));break;case"forced":f.position.direction=_.forced_orientation.dir;break;case"toentitybefore":f.position.direction=qr.fromVector(j.sub(Z.center(m.clickable_area),v));break;case"toentityafter":f.position.direction=qr.fromVector(j.sub(Z.center(m.clickable_area),f.position.tile))}f.tick+=_.time;break;case"redclick":let x=e[s+1];"run"!=(null==x?void 0:x.type)?u.issues.push({level:0,message:"Redclicking is not followed by a run"}):x&&qr.fromVector(j.sub(i(x.waypoints,-1),i(x.waypoints,-2)))==qr.fromVector(j.sub(c.where,i(x.waypoints,-1)))&&u.issues.push({level:1,message:"Redclicking orientation is the same as natural orientation."}),f.targeted_entity=c.where;break;case"powerburst":f.position.tile&&!W.eq(f.position.tile,c.where)&&(u.issues.push({level:0,message:"Position of powerburst does not match where the player is at that point."}),f.position.tile=c.where),f.tick-f.acceleration_activation_tick<120&&(u.issues.push({level:1,message:`Powerburst of acceleration still on cooldown for ${f.acceleration_activation_tick+120-f.tick} ticks!`}),f.tick=f.acceleration_activation_tick+120),f.cooldowns.surge=f.assumptions.double_surge?[f.tick,f.tick]:[f.tick],f.cooldowns.escape=f.assumptions.double_surge?[f.tick,f.tick]:[f.tick],f.cooldowns.dive=f.tick,f.acceleration_activation_tick=f.tick}u.post_state=o.cloneDeep(f),m.push(u)}let y=(null===(g=i(m,-1))||void 0===g?void 0:g.post_state)||s,v=[];return!u||f.position.tile&&u.query(f.position.tile)||v.push({level:0,message:"Path does not end in target area"}),{pre_state:s,post_state:y,raw:e,steps:m,issues:v,target:u}},e.title=function(e){switch(e.type){case"orientation":return`Face ${qr.toString(e.direction)}`;case"ability":return`${s(e.ability)}`;case"run":return`Run ${Ur.pathLength(e.waypoints)} tiles`;case"teleport":return"Teleport";case"transport":return"Use entity";case"redclick":return"Redclick";case"powerburst":return"Use Powerburst";case"cheat":return"Custom Movement";case"cosmetic":return"Note"}return"MISSING"},e.collect_issues=function(e){let t=[];for(let i of e.steps)for(let e of i.issues)t.push({...e,step:i});return t=t.concat(e.issues.map((t=>({...t,path:e})))),t},e.export_path=function(e){return Es.exp({type:"path",version:1},!0,!0)(e)},e.import_path=function(e){return Es.imp({expected_type:"path",expected_version:1,migrations:[{from:0,to:1,f:e=>e.steps}]})(e)},e.bounds=function(e,t=!0){return Z.lift(F.combine(...e.map(((e,i)=>{const n=!!t&&(0==i?"start":"end");return d.bounds(e,n)}))),m(e))},e.level=m,function(i){i.bounds=function(i,n=!1){switch(i.type){case"ability":return F.from(i.from,i.to);case"run":return F.from(...i.waypoints);case"teleport":return i.spot?F.from(i.spot):F.from(t(i.id).centerOfTarget());case"redclick":case"powerburst":return F.from(i.where);case"cheat":return i.assumed_start?n&&j.max_axis(j.sub(i.target,i.assumed_start))>64?"start"==n?F.from(i.target):F.from(i.assumed_start):F.from(i.assumed_start,i.target):F.from(i.target);case"transport":let o=i.internal.clickable_area;const r=e.ends_up([i]);return n&&(!i.assumed_start||j.max_axis(j.sub(r,i.assumed_start))>=64)?"start"==n?o=F.extendTo(o,r):i.assumed_start&&(o=F.extendTo(o,i.assumed_start)):(o=F.extendTo(o,r),i.assumed_start&&(o=F.extendTo(o,i.assumed_start))),o;case"orientation":return F.from({x:0,y:0});case"cosmetic":return F.from(i.position);default:return null}},i.level=function(e){switch(e.type){case"orientation":return 0;case"ability":return e.to.level;case"run":return e.waypoints[0].level;case"teleport":return t(e.id).centerOfTarget().level;case"redclick":case"powerburst":return e.where.level;case"transport":return e.internal.clickable_area.level;case"cheat":return e.target.level;case"cosmetic":return e.position.level}},i.name=function(e){return"ability"===e.type?o.capitalize(e.ability):o.capitalize(e.type.toUpperCase())}}(d=e.Step||(e.Step={})),function(e){e.split_into_sections=function(e,t="root"){let n=[];const o=e=>{e>0&&(0==n.length||i(n,-1)!=e)&&n.push(e)};let r=null;for(let t=0;t<e.length;t++){let i=e[t],n=g([i]);"teleport"==i.type?t>=1&&"orientation"==e[t-1].type?o(t-1):o(t):"transport"!=i.type&&"cheat"!=i.type||!r||(j.max_axis(j.sub(n,r))>64||n.level!=(null==r?void 0:r.level))&&o(t+1),n&&(r=n)}o(e.length);let s=zs.init({name:t});return n.forEach(((t,i)=>{let o=zs.add(s,zs.inner({name:`Section ${i+1}`})),r=0==i?0:n[i-1];o.children=zs.leafs(e.slice(r,t))})),s}}(p=e.Section||(e.Section={}))}(Rs||(Rs={}));var Bs=di.spacer,Ns=ui.observe_combined;class js extends si{constructor(e,t=null){super(c("<div class='ctr-map-control-header'></div>")),this.name=mi(e),this.close_handler=mi(t),Ns({name:this.name,close_handle:this.close_handler}).subscribe((({name:e,close_handle:t})=>{this.empty(),this.append(c().text(e)).append(Bs().css("min-width","20px")),t&&this.append(c("<div class='ctr-map-control-header-close'>&times;</div>").tooltip("Close (Esc)").tapRaw((e=>e.on("click",(()=>t())))))}),!0)}}class Fs extends si{constructor(e,t=null){super(),this.header=new js(e,t).appendTo(this),this.body=c("<div class='ctr-map-control-body'></div>").appendTo(this)}setContent(e){return this.body.empty().append(e),this}}class qs extends ds{constructor(e={}){super({type:"gapless",position:"top-center"},new Fs(`Active interaction: ${e.name||"Interaction"}`,e.cancel_handler)),this._config=e,this.content.addClass("ctr-interaction-control")}setCancelHandler(e){return this._config.cancel_handler=e,this.content.header.close_handler.set(e),this}setName(e){return this.content.header.name.set(e),this}setContent(e){return this.content.setContent(e),this}setText(e){return this.setContent(c().text(e))}eventKeyDown(e){this._config.cancel_handler&&e.onPre((()=>{"Escape"==e.original.key&&(e.stopAllPropagation(),this._config.cancel_handler())}))}}class Us extends fs{constructor(e={}){super(),this.config=e,this._preview=null,this.value=mi({value:null,committed:!1}),this.setPreviewFunction(e.preview_render),e.preview_render&&this.onPreview((e=>{var t,i;this._preview&&this._preview.remove(),null!=e&&(this._preview=null===(i=null===(t=this.previewFunction)||void 0===t?void 0:t.call(this,e))||void 0===i?void 0:i.addTo(this))}))}setPreviewFunction(e){return this.previewFunction=e,this.preview(this.value.value().value),this}cancel(){this.value.value().committed||this.value.set({value:null,committed:!0}),super.cancel()}commit(e){this.value.set({value:e,committed:!0}),this.cancel()}preview(e){return this.value.set({value:e,committed:!1}),this}onChange(e){return this.value.subscribe(e),this}onPreview(e){return this.value.subscribe((t=>{t.committed||e(t.value)})),this}onCommit(e){return this.value.subscribe((t=>{t.committed&&t.value&&e(t.value)})),this}onDiscarded(e){return this.value.subscribe((t=>{t.committed&&!t.value&&e()})),this}}var Hs=di.cls,Vs=di.hgrid;class $s extends si{constructor(){super(),this.addClass("nisl-properties")}header(e,t="center",i=0){return c("<div class='nisl-property-header nisl-property-row'></div>").addClass(`nisl-property-header-${i}`).css("text-align",t).append(e).appendTo(this),this}paragraph(...e){return this.row(Hs("nisl-property-paragraph").append(...e)),this}row(e){return c("<div class='nisl-property-row'></div>").append(e).appendTo(this),this}named(e,t){return c("<div class='nisl-property-name'>").append(e).appendTo(this),c("<div class='nisl-property-content'></div>").append(t).appendTo(this),this}divider(){return c("<div class='nisl-property-hline'></div>").appendTo(this),this}}class Ws extends si{constructor(e,t=2){super(Vs()),e.forEach((e=>{this.append(e.content)}));const i=Math.ceil(e.length/t);for(let n=0;n<t;n++){const t=new $s;for(let o=0;o<i;o++){const r=e[n*i+o];t.named(r.name,r.content)}n>0&&t.css("margin-left","5px"),this.append(t)}}}var Zs,Gs,Ks,Ys,Js=di.div,Xs=di.img;class Qs extends si{constructor(e){super(),this.tooltip(e.hover()),this.addClass("ctr-teleport-icon"),this.append(Xs(`assets/icons/teleports/${e.image().url}`),Js().text(e.code()))}}!function(e){e.all=function(){return[{type:"generic",icon_url:"assets/icons/cursor_generic.png",description:"Click",short_icon:"cursor_generic"},{type:"chop",icon_url:"assets/icons/cursor_chop.png",description:"Chop",short_icon:"cursor_chop"},{type:"talk",icon_url:"assets/icons/cursor_talk.png",description:"Talk to",short_icon:"cursor_talk"},{type:"open",icon_url:"assets/icons/cursor_open.png",description:"Open",short_icon:"cursor_open"},{type:"enter",icon_url:"assets/icons/cursor_enter.png",description:"Enter",short_icon:"cursor_enter"},{type:"spellonentity",icon_url:"assets/icons/cursor_alchemy.png",description:"Use spell",short_icon:"cursor_spell"},{type:"agility",icon_url:"assets/icons/cursor_agility.png",description:"Use",short_icon:"cursor_agility"},{type:"ladderdown",icon_url:"assets/icons/cursor_ladderdown.png",description:"Climb down ladder",short_icon:"cursor_ladderdown"},{type:"ladderup",icon_url:"assets/icons/cursor_ladderup.png",description:"Climb up ladder",short_icon:"cursor_ladderup"},{type:"read",icon_url:"assets/icons/cursor_read.png",description:"Read",short_icon:"cursor_read"},{type:"fish",icon_url:"assets/icons/cursor_fish.png",description:"Fish",short_icon:"cursor_fish"},{type:"search",icon_url:"assets/icons/cursor_search.png",description:"Search",short_icon:"cursor_search"},{type:"attack",icon_url:"assets/icons/cursor_attack.png",description:"Attack",short_icon:"cursor_attack"},{type:"craft",icon_url:"assets/icons/cursor_craft.png",description:"Craft at",short_icon:"cursor_craft"},{type:"build",icon_url:"assets/icons/cursor_build.png",description:"Build",short_icon:"cursor_build"},{type:"mine",icon_url:"assets/icons/cursor_mine.png",description:"Mine",short_icon:"cursor_mine"},{type:"trade",icon_url:"assets/icons/cursor_trade.png",description:"Trade",short_icon:"cursor_trade"},{type:"use",icon_url:"assets/icons/cursor_use.png",description:"Use",short_icon:"cursor_use"},{type:"cook",icon_url:"assets/icons/cursor_cook.png",description:"Cook",short_icon:"cursor_cook"},{type:"divine",icon_url:"assets/icons/cursor_divine.png",description:"Divine",short_icon:"cursor_divine"},{type:"loot",icon_url:"assets/icons/cursor_loot.png",description:"Loot",short_icon:"cursor_loot"},{type:"picklock",icon_url:"assets/icons/cursor_picklock.png",description:"Pick Lock",short_icon:"cursor_picklock"},{type:"shovel",icon_url:"assets/icons/cursor_shovel.png",description:"Shovel",short_icon:"cursor_shovel"},{type:"equip",icon_url:"assets/icons/cursor_equip.png",description:"Equip",short_icon:"cursor_equip"},{type:"discover",icon_url:"assets/icons/cursor_discover.png",description:"Discover",short_icon:"cursor_discover"},{type:"smith",icon_url:"assets/icons/cursor_smith.png",description:"Smith",short_icon:"cursor_smith"},{type:"herblore",icon_url:"assets/icons/cursor_herblore.png",description:"Herblore",short_icon:"cursor_herblore"},{type:"hunt",icon_url:"assets/icons/cursor_hunt.png",description:"Hunt",short_icon:"cursor_hunt"},{type:"burn",icon_url:"assets/icons/cursor_burn.png",description:"Burn",short_icon:"cursor_burn"},{type:"pray",icon_url:"assets/icons/cursor_pray.png",description:"Pray",short_icon:"cursor_pray"},{type:"runecraft",icon_url:"assets/icons/cursor_runecraft.png",description:"Runecraft",short_icon:"cursor_runecraft"},{type:"thieve",icon_url:"assets/icons/cursor_thieve.png",description:"Thieve",short_icon:"cursor_thieve"},{type:"disassemble",icon_url:"assets/icons/cursor_invention.png",description:"Disassemble",short_icon:"cursor_invention"},{type:"farm",icon_url:"assets/icons/cursor_farm.png",description:"Forage",short_icon:"cursor_farm"},{type:"jump",icon_url:"assets/icons/cursor_jump.png",description:"Jump",short_icon:"cursor_jump"}]},e.meta=function(e){return[{type:"generic",icon_url:"assets/icons/cursor_generic.png",description:"Click",short_icon:"cursor_generic"},{type:"chop",icon_url:"assets/icons/cursor_chop.png",description:"Chop",short_icon:"cursor_chop"},{type:"talk",icon_url:"assets/icons/cursor_talk.png",description:"Talk to",short_icon:"cursor_talk"},{type:"open",icon_url:"assets/icons/cursor_open.png",description:"Open",short_icon:"cursor_open"},{type:"enter",icon_url:"assets/icons/cursor_enter.png",description:"Enter",short_icon:"cursor_enter"},{type:"spellonentity",icon_url:"assets/icons/cursor_alchemy.png",description:"Use spell",short_icon:"cursor_spell"},{type:"agility",icon_url:"assets/icons/cursor_agility.png",description:"Use",short_icon:"cursor_agility"},{type:"ladderdown",icon_url:"assets/icons/cursor_ladderdown.png",description:"Climb down ladder",short_icon:"cursor_ladderdown"},{type:"ladderup",icon_url:"assets/icons/cursor_ladderup.png",description:"Climb up ladder",short_icon:"cursor_ladderup"},{type:"read",icon_url:"assets/icons/cursor_read.png",description:"Read",short_icon:"cursor_read"},{type:"fish",icon_url:"assets/icons/cursor_fish.png",description:"Fish",short_icon:"cursor_fish"},{type:"search",icon_url:"assets/icons/cursor_search.png",description:"Search",short_icon:"cursor_search"},{type:"attack",icon_url:"assets/icons/cursor_attack.png",description:"Attack",short_icon:"cursor_attack"},{type:"craft",icon_url:"assets/icons/cursor_craft.png",description:"Craft at",short_icon:"cursor_craft"},{type:"build",icon_url:"assets/icons/cursor_build.png",description:"Build",short_icon:"cursor_build"},{type:"mine",icon_url:"assets/icons/cursor_mine.png",description:"Mine",short_icon:"cursor_mine"},{type:"trade",icon_url:"assets/icons/cursor_trade.png",description:"Trade",short_icon:"cursor_trade"},{type:"use",icon_url:"assets/icons/cursor_use.png",description:"Use",short_icon:"cursor_use"},{type:"cook",icon_url:"assets/icons/cursor_cook.png",description:"Cook",short_icon:"cursor_cook"},{type:"divine",icon_url:"assets/icons/cursor_divine.png",description:"Divine",short_icon:"cursor_divine"},{type:"loot",icon_url:"assets/icons/cursor_loot.png",description:"Loot",short_icon:"cursor_loot"},{type:"picklock",icon_url:"assets/icons/cursor_picklock.png",description:"Pick Lock",short_icon:"cursor_picklock"},{type:"shovel",icon_url:"assets/icons/cursor_shovel.png",description:"Shovel",short_icon:"cursor_shovel"},{type:"equip",icon_url:"assets/icons/cursor_equip.png",description:"Equip",short_icon:"cursor_equip"},{type:"discover",icon_url:"assets/icons/cursor_discover.png",description:"Discover",short_icon:"cursor_discover"},{type:"smith",icon_url:"assets/icons/cursor_smith.png",description:"Smith",short_icon:"cursor_smith"},{type:"herblore",icon_url:"assets/icons/cursor_herblore.png",description:"Herblore",short_icon:"cursor_herblore"},{type:"hunt",icon_url:"assets/icons/cursor_hunt.png",description:"Hunt",short_icon:"cursor_hunt"},{type:"burn",icon_url:"assets/icons/cursor_burn.png",description:"Burn",short_icon:"cursor_burn"},{type:"pray",icon_url:"assets/icons/cursor_pray.png",description:"Pray",short_icon:"cursor_pray"},{type:"runecraft",icon_url:"assets/icons/cursor_runecraft.png",description:"Runecraft",short_icon:"cursor_runecraft"},{type:"thieve",icon_url:"assets/icons/cursor_thieve.png",description:"Thieve",short_icon:"cursor_thieve"},{type:"disassemble",icon_url:"assets/icons/cursor_invention.png",description:"Disassemble",short_icon:"cursor_invention"},{type:"farm",icon_url:"assets/icons/cursor_farm.png",description:"Forage",short_icon:"cursor_farm"},{type:"jump",icon_url:"assets/icons/cursor_jump.png",description:"Jump",short_icon:"cursor_jump"}].find((t=>t.type==e))},e.defaultEntity=function(e){switch(e){case"generic":case"spellonentity":case"craft":case"build":case"use":case"cook":case"divine":case"picklock":case"shovel":case"hunt":case"discover":case"smith":case"herblore":case"burn":case"pray":case"runecraft":return{kind:"static",name:"Entity"};case"chop":return{kind:"static",name:"Tree"};case"talk":case"trade":case"thieve":return{kind:"npc",name:"NPC"};case"attack":return{kind:"npc",name:"Monster"};case"open":return{kind:"static",name:"Door"};case"enter":return{kind:"static",name:"Cave"};case"agility":return{kind:"static",name:"Shortcut"};case"ladderdown":case"ladderup":return{kind:"static",name:"Stairs"};case"read":return{kind:"static",name:"Book"};case"fish":return{kind:"static",name:"Fishing Spot"};case"search":return{kind:"static",name:"Chest"};case"mine":return{kind:"static",name:"Rock"};case"loot":case"equip":return{kind:"item",name:"Item"}}},e.getIcon=function(t){const i=e.meta(t);return{file_name:`${i.short_icon}.png`,id:"",name:i.description,size_on_map:{x:28,y:31},map_anchor:{x:4,y:1}}},e.fromCacheCursor=function(e){return{0:"generic",5:"trade",42:"attack",44:"talk",46:"use",49:"open",52:"ladderup",53:"ladderdown",55:"jump",56:"search",58:"mine",59:"chop",60:"fish",61:"pray",63:"smith",64:"cook",171:"farm",173:"shovel",181:"agility",200:"divine",208:"discover"}[null!=e?e:0]||"generic"},e.iconSize=function(e=1){return[28*e,31*e]},e.iconAnchor=function(e=1,t=!1){return t?[14*e,16*e]:[3*e,0]}}(Zs||(Zs={})),function(e){e.all=[{id:"ability-surge",name:"Surge",file_name:"surge.png",size_on_map:{x:20,y:20}},{id:"ability-escape",name:"Escape",file_name:"escape.png",size_on_map:{x:20,y:20}},{id:"ability-barge",name:"Barge",file_name:"barge.png",size_on_map:{x:20,y:20}},{id:"ability-dive-combined",name:"(Bladed) Dive",file_name:"dive.png",size_on_map:{x:20,y:20}},{id:"notes",name:"Note",file_name:"notes.png",size_on_map:{x:20,y:20}},{id:"run",name:"Run",file_name:"run.png",size_on_map:{x:20,y:20}},{id:"item/fetch-casket",name:"Fetch Casket",file_name:"fetch_casket.png",size_on_map:{x:20,y:20}},{id:"item/meerkats",name:"Meerkats Pouch",file_name:"Meerkats_pouch.png",size_on_map:{x:20,y:20}},{id:"item/spade",name:"Spade",file_name:"spade.webp",size_on_map:{x:20,y:20}},{id:"item/powerburst-of-acceleration",name:"Powerburst of Acceleration",file_name:"accel.png",size_on_map:{x:18,y:24}},{id:"item/rotten-potato",name:"Rotten Potato",file_name:"Rotten_potato.png",size_on_map:{x:20,y:20}},{id:"item/decorated_fire_urn",name:"Decorated Fire Urn",file_name:"decorated_fire_urn.png",size_on_map:{x:20,y:19}},{id:"item/sara_brew",name:"Saradomin brew (3)",file_name:"sara_brew.png",size_on_map:{x:14,y:20}},{id:"item/zammy_brew",name:"Zamorak brew (3)",file_name:"zammy_brew.png",size_on_map:{x:14,y:20}},{id:"item/magic_logs",name:"Magic Logs",file_name:"magic_logs.png",size_on_map:{x:22,y:18}},{id:"item/elder_logs",name:"Elder Logs",file_name:"elder_logs.png",size_on_map:{x:22,y:18}},{id:"spell/bake_pie",name:"Bake Pie",file_name:"bake_pie.webp",size_on_map:{x:20,y:20}},{id:"item/black_dhide_body",name:"Black dragonhide body",file_name:"black_dhide_body.webp",size_on_map:{x:20,y:19}},{id:"item/combatdummymk2",name:"Combat dummy MKII",file_name:"Combat_dummy_MKII.webp",size_on_map:{x:22,y:31}},...Zs.all().map((e=>({id:`cursor/${e.type}`,name:e.description,file_name:`${e.short_icon}.png`,size_on_map:{x:28,y:31}})))];const t=Object.fromEntries(e.all.map((e=>[e.id,e])));e.search_term=function(e){const t=[];return t.push(e.file_name.split(".")[0]),t.push(e.id),e.search_term&&t.push(e.search_term),t.join("")},e.url=function(e){return`assets/icons/${e.file_name}`},e.get=function(e){return t[e]}}(Gs||(Gs={})),function(e){var t=di.span,i=di.inlineimg,n=Ds.resolveTeleport;let o;function r(e){switch(e){case"surge":return"assets/icons/surge.png";case"escape":return"assets/icons/escape.png";case"barge":return"assets/icons/barge.png";case"dive":return"assets/icons/dive.png"}}!function(e){var t=di.inlineimg,i=di.cls;e.asSpan=function(e){var n;return c("<span style='position: relative'>").tooltip(e.hover()).append(t(`assets/icons/teleports/${e.image().url}`),i("tele-icon-code-overlay").append(null!==(n=e.code())&&void 0!==n?n:""))}}(o=e.Teleport||(e.Teleport={})),e.ability_icon=r,e.asSpan=function(o){switch(o.type){case"orientation":return t().append(i("assets/icons/compass.png"),qr.toShortString(o.direction));case"ability":return i(r(o.ability));case"run":return t().append(i("assets/icons/run.png"),(o.waypoints.length-1).toString());case"teleport":let s=n(o.id);return s?e.Teleport.asSpan(s):i("assets/teleports/homeport.png");case"transport":return i(Zs.meta(o.internal.actions[0].cursor).icon_url);case"redclick":return i("assets/icons/redclick.png");case"powerburst":return i("assets/icons/accel.png");case"cheat":return i("assets/icons/Rotten_potato.png")}},e.createX=function(e,t,i=16,n=void 0,o=void 0){return a.marker(j.toLatLong(e),{icon:a.icon({iconUrl:{red:"assets/icons/redclick.png",yellow:"assets/icons/yellowclick.png"}[t],iconSize:[i,i],iconAnchor:[i/2,i/2],className:n?`\n      no-antialiasing ${n}`:"no-antialiasing"}),interactive:!1,opacity:o})},e.arrow=function(e,t,i={type:"tip",arm_length:.5}){let n=j.sub(e,t);if(j.lengthSquared(n)<1)return a.polyline([]);const o=[];switch(i.type){case"tip":{let r=j.scale(i.arm_length,j.rotate(j.normalize(n),Math.PI/4)),s=j.scale(i.arm_length,j.rotate(j.normalize(n),-Math.PI/4));o.push([e,t],[j.add(t,r),t,j.add(t,s)]);break}case"bar":{let r=j.scale(i.arm_length,j.rotate(j.normalize(n),Math.PI/2)),s=j.scale(i.arm_length,j.rotate(j.normalize(n),-Math.PI/2));o.push([e,t],[j.add(t,r),j.add(t,s)]);break}case"x":{let r=[{x:-i.arm_length,y:-i.arm_length},{x:-i.arm_length,y:i.arm_length},{x:i.arm_length,y:i.arm_length},{x:i.arm_length,y:-i.arm_length}];if(!i.ignore_rotation){const e=j.angle(n,{x:0,y:1});r=r.map((t=>j.rotate(t,-e)))}o.push([e,t],[j.add(t,r[0]),j.add(t,r[2])],[j.add(t,r[1]),j.add(t,r[3])]);break}case"none":o.push([e,t])}return a.polyline(o.map((e=>e.map(j.toLatLong)))).setStyle({interactive:!0})},e.arrowHead=function(e,t,i){if("arrow"===e){let e=j.scale(.7,j.rotate(i,Math.PI/4)),n=j.scale(.7,j.rotate(i,-Math.PI/4));return a.polyline([[j.toLatLong(t),j.toLatLong(j.add(t,e))],[j.toLatLong(t),j.toLatLong(j.add(t,n))]])}}}(Ks||(Ks={})),function(e){e.templateString=function(e){switch(e.type){case"orientation":return`Face ${qr.toString(e.direction)}`;case"run":return"{{icon run}}";case"ability":return`{{${e.ability}}}`;case"teleport":return`{{teleport ${e.id.group} ${e.id.spot}}}`;case"powerburst":return"{{icon accel}}";case"redclick":return`{{icon ${Zs.meta(e.how).short_icon}}}`;case"transport":return`{{icon ${Zs.meta(e.internal.actions[0].cursor).short_icon}}}`;case"cheat":return"{{icon Rotten_potato}}"}},e.getIcon=function(e){switch(e.type){case"orientation":return c("<img class='text-icon' src='assets/icons/compass.png'>");case"run":return c("<img class='text-icon' src='assets/icons/run.png'>");case"ability":switch(e.ability){case"surge":return c("<img class='text-icon' src='assets/icons/surge.png'>");case"escape":return c("<img class='text-icon' src='assets/icons/escape.png'>");case"barge":return c("<img class='text-icon' src='assets/icons/barge.png'>");case"dive":return c("<img class='text-icon' src='assets/icons/dive.png'>")}break;case"teleport":return c("<img class='text-icon' src='assets/icons/teleports/homeport.png'>");case"redclick":return c("<img class='text-icon' src='assets/icons/redclick.png'>");case"powerburst":return c("<img class='text-icon' src='assets/icons/accel.png'>");case"cheat":return c("<img class='text-icon' src='assets/icons/Rotten_potato.png'>")}}}(Ys||(Ys={}));var ea=di.hboxl;class ta extends si{constructor(e){super();const{icon:t,content:i}=ta.renderTextAndIconSeparately(e);ea(t,i).addClass("ctr-neosolving-path-legend").appendTo(this)}}!function(e){var t=di.cls,i=di.div,n=di.img,r=di.bold,s=Ks.ability_icon,a=di.entity,l=Ds.resolveTeleport,c=B.plural;e.renderTextAndIconSeparately=function(e){let u=t("ctr-neosolving-path-stepicon"),h=i();switch(e.type){case"orientation":u.append(n("assets/icons/compass.png")),h.append("Face ",r(qr.toString(e.direction)));break;case"ability":u.append(n(s(e.ability))),"dive"==e.ability?e.is_far_dive?h.append("Far Dive "):h.append("Precise Dive "):h.append((0,o.capitalize)(e.ability)," "),e.target?(h.append("on ",a(e.target)),e.target_text&&h.append(", ",e.target_text)):e.target_text?h.append(e.target_text," "):h.append(r(qr.toString(qr.fromVector(j.sub(e.to,e.from)))));break;case"run":u.append(n("assets/icons/run.png")),h.append("Run "),e.to_text?h.append(e.to_text):h.append(`${c(Ur.pathLength(e.waypoints),"tile")}`);break;case"teleport":let t=l(e.id);u.append(new Qs(t).css2({display:"inline-block",height:"20px"})),h.append("Teleport to ",r(t.spot.name));break;case"redclick":u.append(n(Zs.meta(e.how).icon_url)),h.append("Target ",a(e.target));break;case"powerburst":u.append(n("assets/icons/accel.png").tooltip("Powerburst of Acceleration")),h.append("Drink ",a({kind:"item",name:"Powerburst of Acceleration"}));break;case"transport":let i=e.internal,d=i.actions[0];u.append(n(Zs.meta(e.internal.actions[0].cursor).icon_url)),h.append(d.name," ",a(i.entity));break;case"cheat":u.append(n("assets/icons/Rotten_potato.png")),h.append("Cheat Step");break;case"cosmetic":u.append(n(Gs.url(Gs.get(e.icon)))),h.append("Note")}return{icon:u,content:h}}}(ta||(ta={}));var ia=di.inlineimg,na=di.cls;class oa extends $s{constructor(e,t){super(),this.step=e,this.template_resolver=t,this.render()}info(e){return this.row(na("ctr-step-properties-explanation").append(ia("assets/icons/info.png")," ",e))}render(){switch(this.header(new ta(this.step)),this.step.type){case"orientation":this.info("Manual orientation is useful when you want to surge directly after teleporting.");break;case"redclick":this.info("Targeting an entity (sometimes referred to as 'redclicking') and then clicking a tile to run somewhere causes your character to turn towards that entity when arriving at that tile. This is useful to line up surges that would otherwise not be possible or require additional walking.");break;case"ability":this.step.is_far_dive&&this.info("This is a far dive, so you can just click anywhere more than 10 tiles away in that direction to execute it.");break;case"cheat":this.info("Cheat steps are used in place of transports like cave entrances or shortcuts that aren't available in the dataset of the path editor yet.")}this.step.description?this.paragraph(...this.template_resolver.resolve(this.step.description)):"cosmetic"==this.step.type&&this.paragraph(di.italic("The author of this path has not added any further explanation."))}}var ra=i(2880),sa=di.vbox,aa=di.entity;class la extends Ci{constructor(e){super(),this.teleport=e,this.zoom_sensitivity_layers=Ci.default_zoom_scale_layers,this.zoom_sensitivity_layers=new ki([{min:-100,value:{scale:.5}},{min:1.5,value:{scale:1}}]),this.floor_sensitivity_layers=new Ti([{floors:[e.targetArea().origin.level],value:{correct_level:!0}},{floors:G.all,value:{correct_level:!1}}]),this.setTooltip((()=>{let e=new $s;const t=this.teleport;return e.header(`${t.group.name} - ${t.spot.name}`),e.named("Time",`${t.props.menu_ticks+t.props.animation_ticks} (${t.props.menu_ticks} menu + ${t.props.animation_ticks} animation)`),e.named("Static",t.spot.target.size?"No":"Yes"),null!=t.spot.facing&&e.named("Orientation",qr.toString(t.spot.facing)),e.named("Access",sa(...t.group.access.map((e=>{switch(e.type){case"spellbook":return di.div().text(e.name);case"item":case"entity":return c().append(aa(e.name))}})))),e}))}bounds(){return Vr.toRect(this.teleport.targetArea())}async render_implementation(e){const t=this.floor_sensitivity_layers.get(e.floor_group_index),i=e.highlight?1.5:this.zoom_sensitivity_layers.get(e.zoom_group_index).value.scale,n=a.marker(j.toLatLong(this.teleport.centerOfTarget()),{icon:new la.TeleportMapIcon(this.teleport,i,(e=>(t.value.correct_level||e.css("filter","grayscale(1) brightness(0.5)"),e))),riseOnHover:!0,interactive:!0,bubblingMouseEvents:!0}).addTo(this);return e.highlight&&is(this.teleport.targetArea()).setStyle({fillColor:"lightgreen",color:"lightgreen",stroke:!0}).addTo(this),n.getElement()}async contextMenu(e){const t=this.teleport,i=t.group.access.filter((e=>"entity"==e.type));return i.length>0&&e.addForEntity({type:"submenu",text:"Jump to Access",children:i.map((e=>(ra("entity"==e.type),{type:"basic",text:()=>aa(e.name),handler:()=>{var t,i;null===(i=null===(t=this.parent)||void 0===t?void 0:t.getMap())||void 0===i||i.fitView(Vr.toRect(e.clickable_area))}})))}),{type:"submenu",icon:`assets/icons/teleports/${t.image().url}`,text:t.hover(),children:[]}}}!function(e){class t extends a.DivIcon{createIcon(e){var t;const i=this.scale,n=this.tele;return this.transformer(di.div(null!==(t=this.tele.code())&&void 0!==t?t:"").css2({"background-image":`url("./assets/icons/teleports/${n.image().url}")`,color:"white",width:30*i+"px",height:30*i+"px","line-height":30*i+"px",margin:`-${30*i/2}px`,"font-size":12*i+"px"}).addClass("marktele")).raw()}constructor(e,t=1,i=o.identity){super({iconSize:[0,0],iconAnchor:[0,0]}),this.tele=e,this.scale=t,this.transformer=i}}e.TeleportMapIcon=t,e.accessNameAsWidget=function(e){switch(e.type){case"spellbook":return c().text(e.name);case"item":case"entity":return aa(e.name)}}}(la||(la={}));class ca extends a.Marker{constructor(e,t){var i,n,o;const r=j.scale(null!==(i=t.scale)&&void 0!==i?i:1,null!==(n=t.override_base_size)&&void 0!==n?n:t.icon.size_on_map),s=t.centered_anchor||!t.icon.map_anchor?j.scale(.5,r):j.scale(null!==(o=t.scale)&&void 0!==o?o:1,t.icon.map_anchor);super(j.toLatLong(e),{icon:a.icon({iconUrl:`assets/icons/${t.icon.file_name}`,iconSize:j.asTuple(r),iconAnchor:j.asTuple(s),className:t.cls}),opacity:t.opacity})}}var ua=Ks.arrow,ha=Ks.createX;class da extends Ci{constructor(e){super(),this.step=e,this.floor_sensitivity_layers=new Ti([{floors:[Rs.Step.level(e)],value:{correct_level:!0}},{floors:G.all,value:{correct_level:!1}}]),this.setTooltip((()=>new oa(this.step,Ms.instance().app.template_resolver)))}bounds(){return Rs.Step.bounds(this.step,!1)}async render_implementation(e){const t=this.step,i=this.floor_sensitivity_layers.get(e.floor_group_index).value.correct_level?"ctr-step-graphics":"ctr-step-graphics-dl",n=e.highlight?1.5:1,o=3*n,r=e.opacity,s=(()=>{var s,l,c,u;switch(t.type){case"orientation":return null;case"ability":{t.target_area&&is(t.target_area).setStyle({color:da.ability_rendering[t.ability].color,weight:1*n,opacity:.3*r,fillOpacity:.2*r,interactive:!1,className:i}).addTo(this);const e=t.is_far_dive||"dive"!=t.ability?{type:"tip",arm_length:.5}:{type:"x",arm_length:.25};return ua(t.from,t.to,e).setStyle({color:da.ability_rendering[t.ability].color,weight:o,interactive:!0,className:i,opacity:r}).addTo(this).getElement()}case"run":return t.target_area&&is(t.target_area).setStyle({color:da.run_rendering_area_color,weight:1*n,interactive:!1,opacity:.6*r,fillOpacity:.2*r,className:i}).addTo(this),a.polyline(t.waypoints.map(j.toLatLong),{color:"#b4b4b4",weight:o,className:i,opacity:r}).addTo(this),ha(t.waypoints[t.waypoints.length-1],"yellow",16*n,i,r).addTo(this).getElement();case"teleport":{let o=Ds.resolveTeleport(t.id);const l=a.marker(j.toLatLong(null!==(s=t.spot)&&void 0!==s?s:o.centerOfTarget()),{icon:new la.TeleportMapIcon(o,n,(e=>e.addClass(i))),riseOnHover:!0,zIndexOffset:1,opacity:r}).addTo(this);return e.highlight&&is(o.targetArea()).setStyle({fillColor:"lightgreen",color:"lightgreen",stroke:!0,opacity:r}).addTo(this),l.getElement()}case"redclick":return ha(t.where,"red",20*n,"ctr-step-graphics",r).addTo(this),new ca(t.where,{icon:Zs.getIcon(t.how),scale:n,cls:i,opacity:r}).addTo(this).getElement();case"powerburst":return new ca(t.where,{icon:Gs.get("item/powerburst-of-acceleration"),scale:n,cls:i,opacity:r}).addTo(this).getElement();case"transport":{let e=t.internal,s=e.actions[0];const a=null!==(l=As.EntityAction.findApplicable(s,t.assumed_start))&&void 0!==l?l:s.movement[0],c=a.fixed_target&&!a.fixed_target.relative;let u=Rs.ends_up([t]);const h=Z.center(e.clickable_area,!1);return ua(t.assumed_start,c?h:u).setStyle({color:"#069334",weight:o,dashArray:"10, 10",className:i,opacity:r}).addTo(this),new ca(h,{icon:Zs.getIcon(s.cursor),scale:n,cls:i,opacity:r}).addTo(this).getElement()}case"cheat":{const e=t.assumed_start?F.center(F.from(t.assumed_start,t.target),!1):t.target;return t.assumed_start&&ua(t.assumed_start,t.target).setStyle({color:"#069334",weight:o,dashArray:"10, 10",className:i,opacity:r}).addTo(this),new ca(e,{icon:Gs.get("item/rotten-potato"),cls:i,scale:n,opacity:r}).addTo(this).getElement()}case"cosmetic":{const s=new ca(t.position,{icon:Gs.get(t.icon),scale:e.highlight?1.5:1,cls:i,opacity:r}).addTo(this);return!e.highlight&&t.hide_when_not_hovered||(t.area&&is(t.area).setStyle({color:null!==(c=t.area_color)&&void 0!==c?c:Rs.COSMETIC_DEFAULT_COLORS.area,weight:1*n,opacity:.3*r,fillOpacity:.2*r,interactive:!1,className:i}).addTo(this),t.arrow&&ua(t.arrow[0],t.arrow[1]).setStyle({color:null!==(u=t.arrow_color)&&void 0!==u?u:Rs.COSMETIC_DEFAULT_COLORS.arrow,weight:o,opacity:.6*r,fillOpacity:.2*r,className:i}).addTo(this)),s.getElement()}}})();return this.setStyle({interactive:!0,className:"ctr-step-graphics",opacity:r}),s}async contextMenu(e){return{type:"submenu",text:Rs.Step.name(this.step),children:[]}}}!function(e){e.ability_rendering={barge:{color:"#a97104",icon:"ability-barge"},dive:{color:"#e7d82c",icon:"ability-dive-combined"},escape:{color:"#56ba0f",icon:"ability-escape"},surge:{color:"#0091f2",icon:"ability-surge"}},e.run_rendering_area_color="#6970d9",e.renderPath=function(t){let i=new os;for(let n of t)new e(n).addTo(i);return i}}(da||(da={}));class pa extends si{constructor(e=null){super(e),this.v=mi({committed:!1,value:null})}setValue(e){return this.commit(e),this.render(),this}get(){return this.v.value().value}render(){}commit(e,t=!1){this.v.set({value:e,committed:!0}),t&&this.render()}preview(e){return this.v.set({value:e,committed:!1}),this}onChange(e){return this.v.subscribe(e),this}onPreview(e){return this.v.subscribe((t=>{t.committed||e(t.value)})),this}onCommit(e){return this.v.subscribe((t=>{t.committed&&null!=t.value&&e(t.value)})),this}}var ga=di.cls;class ma extends pa{constructor(e="",t="checkbox"){super(ga("nisl-checkbox")),this.label=e,this.enabled=mi(!0),this.type=mi(t),this.type.subscribe((e=>{this.new_box.toggleClass("nisl-checkbox-radio","radio"==e)})),this.new_box=c("<div class='nisl-checkbox-box'>").on("click",(()=>{this.commit(!this.get(),!0)})).appendTo(this.container),ga("nisl-checkbox-checkmark").appendTo(this.new_box),this.new_box.toggleClass("nisl-checkbox-radio","radio"==this.type.value()),this.label&&ga("nisl-checkbox-label").append(this.label).appendTo(this),this.setValue(!1),this.enabled.subscribe((e=>{this.toggleClass("nisl-checkbox-disabled",!e)}))}render(){this.new_box.toggleClass("checked",this.get())}setEnabled(e){return this.enabled.set(e),this}}!function(e){e.Group=class{constructor(e,t=!1){this.buttons=e,this.value=mi(null),e.forEach((e=>{e.button.type.set("radio"),e.button.onCommit((i=>{i?this.value.set(e.value):i||this.value.value()!=e.value||(t?this.value.set(null):e.button.setValue(!0))}))})),this.value.subscribe((e=>{this.buttons.forEach((t=>{t.button.setValue(t.value==e)}))})),t?this.value.set(null):e[0].button.setValue(!0)}get(){return this.value.value()}setValue(e){return this.value.set(e),this}onChange(e){return this.value.subscribe(e),this}checkboxes(){return this.buttons.map((e=>e.button))}}}(ma||(ma={}));var fa=Hr.possibility_raster,ya=ui.observe_combined,va=B.eqWithNull;class _a extends a.FeatureGroup{constructor(e,t=[]){super(),this.tile=e,this.surge_escape_for=t,this.render()}async render(){let e=await fa(this.tile,this.surge_escape_for);function t(e){return{fillOpacity:.2,stroke:!1,fillColor:e}}const i=[];for(let n=0;n<e.data.size.x;n++)for(let o=0;o<e.data.size.y;o++){const r=W.move(e.data.origin,{x:n,y:o});if(e.data.query(r))if(this.surge_escape_for.length>0){const n=e.targets.some((e=>j.eq(r,e.surge))),o=e.targets.some((e=>j.eq(r,e.escape)));if(n&&o){const[e,n]=es(r,[t("#426896"),t("#234709")]);i.push(e,n)}else n?i.push(Qr(r,t("#426896"))):o?i.push(Qr(r,t("#234709"))):i.push(Qr(r,t("#e2c40c")))}else i.push(Qr(r,t("#e2c40c")));else i.push(Qr(r,t("red")))}i.forEach((e=>e.addTo(this)))}}class xa extends os{constructor(e){super(),this.active_lens=null,this.enabled1=mi(!0),this.enabled2=mi(!0),this.static=mi(!0),this.render_for_state=mi(null).equality(va(Fr.eq)),e.cursor_state.subscribe((e=>{var t;this.static.value()&&this.render_for_state.set(null===(t=null==e?void 0:e.state)||void 0===t?void 0:t.position)}),!0),this.static.subscribe((t=>{var i,n;t&&this.render_for_state.set(null===(n=null===(i=e.cursor_state.value())||void 0===i?void 0:i.state)||void 0===n?void 0:n.position)})),ya({enabled1:this.enabled1,enabled2:this.enabled2,state:this.render_for_state}).subscribe((({enabled1:e,enabled2:t,state:i})=>{const n=e&&t&&(null==i?void 0:i.tile);this.render(n?i:void 0)}),!0)}render(e){this.active_lens&&(this.active_lens.remove(),this.active_lens=null),(null==e?void 0:e.tile)&&(this.active_lens=new _a(e.tile,e.direction?[e.direction]:qr.all).addTo(this))}eventHover(e){e.onPre((()=>{this.static.value()||this.render_for_state.set({tile:e.tile(),direction:0})}))}}class wa extends ds{constructor(e){super({position:"top-right",type:"floating"},c()),this.lens_layer=new xa(e.value).addTo(this),this.lens_layer.enabled1.set(!1),this.setContent(new Fs("Path Tools").append(this.lens_checkbox=new ma("Show Ability Lens").onCommit((e=>{this.lens_layer.enabled1.set(e),this.lens_static_checkbox.setEnabled(e),this.lens_dynamic_checkbox.setEnabled(e)})),this.lens_static_checkbox=new ma("Static","radio").css("margin-left","10px").setValue(!0).setEnabled(!1),this.lens_dynamic_checkbox=new ma("Follow Mouse","radio").css("margin-left","10px").setValue(!1).setEnabled(!1))),new ma.Group([{button:this.lens_dynamic_checkbox,value:!1},{button:this.lens_static_checkbox,value:!0}]).onChange((e=>this.lens_layer.static.set(e))).setValue(!0)}}var ba=ui.observe_combined,ka=Ks.arrow,Ta=Hr.isFarDive;class Sa extends Us{constructor(e){super({}),this.ability=e,this._possibility_overlay=null,this._preview_arrow=null,this.start_position=mi(null).equality(W.eq2),this.current_target=mi(null).equality(((e,t)=>W.eq2(null==e?void 0:e.tile,null==t?void 0:t.tile)&&(null==e?void 0:e.forced)==(null==t?void 0:t.forced))),this.overlay_tile=mi(null).equality(W.eq2),this.attachTopControl((new qs).setName(`Drawing ${e}`)),ba({start:this.start_position,target:this.current_target}).subscribe((({start:e,target:t})=>{this.overlay_tile.set(e||(null==t?void 0:t.tile)),this.updateArrow(e,null==t?void 0:t.tile,null==t?void 0:t.forced)})),this.overlay_tile.subscribe((e=>this.updateDiveOverlay(e))),this.start_position.subscribe((()=>this.updateInstructions()),!0)}updateInstructions(){this.start_position.value()?this.top_control.setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Click] valid target tile to confirm.")).append(c().text("[Shift + Click] to force any target tile.")).append(c().text("[Backspace] to reset start tile."))):this.top_control.setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Click] the origin tile of the ability.")))}setStartPosition(e){return this.start_position.set(e),this}async updateDiveOverlay(e){"barge"!=this.ability&&"dive"!=this.ability||(this._possibility_overlay&&(this._possibility_overlay.remove(),this._possibility_overlay=null),null!=e&&(this._possibility_overlay=new _a(e),this._possibility_overlay.addTo(this)))}async updateArrow(e,t,i){let n=await(async()=>{if(!e||!t)return null;if(i)return{from:e,to:t,okay:!0};{let i=await Hr.generic(Zr.get(),this.ability,e,t);return{from:e,to:(null==i?void 0:i.tile)||t,okay:!!i}}})();if(this._preview_arrow&&(this._preview_arrow.remove(),this._preview_arrow=null),n){let{from:e,to:t,okay:i}=n;this._preview_arrow=(i?new da({type:"ability",ability:this.ability,is_far_dive:"dive"==this.ability&&await Ta(e,t),from:e,to:t}).setInteractive(!1):ka(e,t).setStyle({weight:3,color:"red"})).addTo(this)}}eventClick(e){e.onPost((async()=>{e.stopAllPropagation();let t=e.tile();if(this.start_position.value())if(e.original.shiftKey){const e="dive"==this.ability&&await Ta(this.start_position.value(),t);this.commit({type:"ability",ability:this.ability,is_far_dive:!!e||void 0,from:this.start_position.value(),to:t})}else{let e=await Hr.generic(Zr.get(),this.ability,this.start_position.value(),t);const i="dive"==this.ability&&await Ta(this.start_position.value(),e.tile);e&&this.commit({type:"ability",ability:this.ability,is_far_dive:!!i||void 0,from:this.start_position.value(),to:e.tile})}else this.start_position.set(t)}))}eventHover(e){e.onPre((()=>{this.current_target.set({tile:e.tile(),forced:e.original.shiftKey})}))}eventKeyDown(e){e.onPre((()=>{null!=this.start_position.value()&&"Backspace"==e.original.key&&(e.stopAllPropagation(),this.start_position.set(null))})),e.onPost((()=>{"Shift"==e.original.key&&this.current_target.update((e=>{e&&(e.forced=!0)}))}))}eventKeyUp(e){e.onPost((()=>{"Shift"==e.original.key&&this.current_target.update((e=>{e&&(e.forced=!1)}))}))}}var Ca=B.index,Ea=ui.observe_combined,Aa=Ks.arrow,za=Ks.createX;class La extends Us{constructor(){super({preview_render:e=>{if(e){const t=a.featureGroup();return e.no_path_to?(Aa(Ca(e.path,-1),e.no_path_to).setStyle({color:"red"}).addTo(t),za(e.no_path_to,"yellow",16).addTo(t).bindTooltip(a.tooltip({content:"No path",className:"run-drawing-tile-count",offset:[0,20],permanent:!0,direction:"center"}))):(a.polyline(e.path.map(j.toLatLong),{color:"#b4b4b4",weight:3}).addTo(t),za(Ca(e.path,-1),"yellow",16).addTo(t).bindTooltip(a.tooltip({content:`${Ur.pathLength(e.path)} tiles`,className:"run-drawing-tile-count",offset:[0,20],permanent:!0,direction:"center"}))),t}}}),this.segments=mi([]),this.path=this.segments.map((e=>e.flatMap(((e,t)=>0==t?e.tiles:e.tiles.slice(1))))),this.last_position=this.path.map((e=>Ca(e,-1))).equality(W.eq2),this.has_start_position=this.last_position.map((e=>!!e)),this.cached_pathfinding_state=this.last_position.map((e=>e?Ur.init_djikstra(e):null)),this.previewed_segment=mi(null),this.attachTopControl(new qs({name:"Drawing Run-Path"})),this.has_start_position.subscribe((e=>{e?this.top_control.setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Click] valid target tile to confirm.")).append(c().text("[Shift + Click] to place a forced waypoint.")).append(c().text("[Ctrl] to ignore all obstacles.")).append(c().text("[Backspace] to remove last waypoint."))):this.top_control.setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Click] any tile to start.")))}),!0),Ea({segments:this.segments,previewed_segment:this.previewed_segment}).subscribe((({segments:e,previewed_segment:t})=>{let i=e.map((e=>e.tiles));t&&!t.broken&&i.push(t.tiles);let n=i.flat();n.length>0?this.preview({path:n,no_path_to:(null==t?void 0:t.broken)?t.target:null}):this.preview(null)}))}setStartPosition(e){return e?this.segments.set([{tiles:[e]}]):this.segments.set([]),this}getPathFindingState(){return this.cached_pathfinding_state.value()}eventClick(e){e.onPost((async()=>{if(e.stopAllPropagation(),0==this.segments.value().length)this.setStartPosition(e.tile());else{let t=await(e.original.ctrlKey?Ur.idealPath(this.last_position.value(),e.tile()):Ur.find(this.getPathFindingState(),Vr.init(e.tile())));t&&(this.segments.update((e=>e.push({tiles:t}))),this.previewed_segment.set(null),e.original.shiftKey||this.commit({path:this.path.value(),no_path_to:null}))}}))}eventHover(e){e.onPost((async()=>{this.updatePreview(e.tile(),e.original.ctrlKey)}))}async updatePreview(e,t){if(this.last_position.value()){let i=await(t?Ur.idealPath(this.last_position.value(),e):Ur.find(this.getPathFindingState(),Vr.init(e)));this.previewed_segment.set({target:e,forced:t,broken:!i,tiles:i})}else this.previewed_segment.set(null)}eventKeyDown(e){e.onPost((()=>{"Control"==e.original.key&&this.previewed_segment.value()&&(e.stopAllPropagation(),this.updatePreview(this.previewed_segment.value().target,!0)),"Backspace"==e.original.key&&(e.stopAllPropagation(),this.segments.update((e=>e.splice(e.length-1,1))),this.previewed_segment.value()&&this.updatePreview(this.previewed_segment.value().target,this.previewed_segment.value().forced),this.previewed_segment.update((()=>{})))}))}eventKeyUp(e){e.onPost((()=>{"Control"==e.original.key&&this.previewed_segment.value()&&(e.stopAllPropagation(),this.updatePreview(this.previewed_segment.value().target,!1))}))}}class Pa extends Us{constructor(){super(),this.internal=(new La).onCommit((e=>{this.commit({type:"run",waypoints:e.path})})).onDiscarded((()=>this.cancel())).addTo(this)}setStartPosition(e){return this.internal.setStartPosition(e),this}}class Ma extends Us{constructor(e={},t={snap:1,shift_snap:1}){super(e),this.config=e,this.conf=t}coordinatesOfEvent(e){var t,i;const n=e.original.shiftKey?null!==(t=this.conf.shift_snap)&&void 0!==t?t:1:null!==(i=this.conf.snap)&&void 0!==i?i:1;return W.snap(e.coordinates,n)}eventHover(e){super.eventHover(e),e.onPre((()=>{this.preview(this.coordinatesOfEvent(e))}))}eventClick(e){e.onPre((()=>{e.stopAllPropagation(),this.commit(this.coordinatesOfEvent(e))}))}}!function(e){e.Standalone=class extends e{constructor(e={},t="never"){switch(super(e,{always:{snap:0,shift_snap:0},never:{snap:1,shift_snap:1},optional:{snap:1,shift_snap:0}}[t]),this.off_tile=t,this.off_tile){case"never":this.attachTopControl(new qs({name:"Select Tile"}).setText("Click a tile to select it."));break;case"optional":this.attachTopControl(new qs({name:"Select Tile"}).setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("Hold [Shift] to disable snapping"))));break;case"always":this.attachTopControl(new qs({name:"Select Coordinates"}).setText("Click the map to select coordinates."))}}}}(Ma||(Ma={}));class Ia extends Us{constructor(){super({preview_render:e=>new da(e).setInteractive(!1)}),(new Ma).onCommit((e=>this.commit({type:"powerburst",where:e}))).onPreview((e=>this.preview({type:"powerburst",where:e}))).addTo(this),new qs({name:"Placing Powerburst",cancel_handler:()=>this.cancel()}).addTo(this).content.append(c().text("Click any tile to place the powerburst activation."))}}class Oa extends si{constructor(e=ie("<div>")){super(e),this.clicked=pi(),this.enabled=mi(!0),this.toggled=mi(!1),this.isToggleable=mi(!1),this.addClass("lcss-button"),this.container.on("click",(e=>{e.stopPropagation(),this.container.hasClass("enabled")&&(this.isToggleable.value()&&this.toggled.set(!this.toggled.value()),this.clicked.trigger(e))})),this.enabled.subscribe((e=>{this.toggleClass("enabled",e)}),!0),this.toggled.subscribe((e=>{this.toggleClass("toggled",e)})),this.isToggleable.subscribe((e=>{e||this.toggled.set(!1)})),this.setEnabled(!0)}setEnabled(e){return this.enabled.set(e),e||this.toggled.set(!1),this}onClick(e,t=null){let i=this.clicked.on(e);return null==t||t.bind(i),this}onToggle(e){return this.toggled.subscribe(e),this}setToggleable(e){return this.isToggleable.set(e),this}setToggled(e){return this.toggled.set(e),this}click(){return this.raw().click()}}class Da extends si{constructor(e){super(),this.addClass("ctr-actionbar"),this.append(...e)}}!function(e){var t=ui.observe_combined,i=di.cls;e.ActionBarButton=class extends Oa{constructor(e,i){super(),this.icon=e,this.activation=i,this._activeInteraction=mi(null),this.cooldown=mi(0),this.hotkey=mi(""),this._activeInteraction.subscribe((e=>{this.render(),e&&e.onEnd((()=>this._activeInteraction.set(null)))})),this.onClick((async e=>{this._activeInteraction.value()?this._activeInteraction.value().cancel():this.trigger(e)})),t({cd:this.cooldown,hk:this.hotkey}).subscribe((()=>{this.render()}),!0)}async trigger(e=void 0){if(!this._activeInteraction.value()){let t=await this.activation(e);t instanceof fs&&this._activeInteraction.set(t)}}render(){this.empty(),this.addClass("ctr-action-bar-button").append(ie(`<img src='${this.icon}'>`)).css("position","relative"),(0!=this.cooldown.value()||this._activeInteraction.value())&&(c("<div class='ctr-cooldown-overlay-shadow'></div>").appendTo(this),this.cooldown.value()>0&&i("ctr-cooldown-overlay").text(this.cooldown.value()+"t").appendTo(this)),""!=this.hotkey.value()&&i("ctr-hotkey-overlay").text(this.hotkey.value()).appendTo(this),this._activeInteraction.value()&&i("ctr-cooldown-overlay-cancel").text("X").appendTo(this)}setHotKey(e){return this.hotkey.set(e),this}}}(Da||(Da={}));class Ra extends Us{constructor(e=null){super({preview_render:e=>new da(e).setInteractive(!1)}),this.interaction_type=e,new Ma({},{snap:.5,shift_snap:0}).onCommit((e=>{if(null!=this.interaction_type)this.commit({type:"redclick",target:Zs.defaultEntity(this.interaction_type),where:e,how:this.interaction_type});else{let t={type:"submenu",text:"",children:Zs.all().map((t=>({type:"basic",text:t.description,icon:t.icon_url,handler:()=>{this.commit({type:"redclick",target:Zs.defaultEntity(t.type),where:e,how:t.type})}})))};new wi(t).show(this.getMap().container.get()[0],this.getMap().getClientPos(e)).onCancel((()=>this.cancel()))}})).onPreview((e=>this.preview({type:"redclick",target:{kind:"static",name:"Entity"},where:e,how:"generic"}))).addTo(this),new qs({name:"Placing Redclick",cancel_handler:()=>this.cancel()}).addTo(this).content.append(c().text("Click any tile to place the redclick activation."))}}class Ba extends Us{constructor(e){super({preview_render:e=>new da(e).setInteractive(!1)}),this.start_from=e,this.attachTopControl((new qs).setName("Drawing Cheat step").setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Click] tile to confirm target."))))}eventClick(e){e.onPost((async()=>{e.stopAllPropagation();let t=e.tile();const i=this.start_from?qr.fromVector(j.sub(t,this.start_from)):void 0;this.commit({type:"cheat",assumed_start:this.start_from,target:t,ticks:0,orientation:i})}))}eventHover(e){this.preview({type:"cheat",assumed_start:this.start_from,target:e.tile(),ticks:0})}}class Na extends Us{constructor(e={type:"cosmetic",icon:"notes",position:{x:0,y:0,level:0}}){super({preview_render:e=>new da({...e,hide_when_not_hovered:!1}).setInteractive(!1)}),this.prototype=e,this.attachTopControl(new qs({name:"Place Path Annotation"}).setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("Hold [Shift] to disable tile-snapping")))),new Ma({},{snap:.5,shift_snap:0}).addTo(this).onChange((e=>{const t={...this.prototype,position:e.value};e.committed?this.commit(t):this.preview(t)}))}}var ja=Rs.movement_state,Fa=Da.ActionBarButton,qa=Rs.movement_state.surge_cooldown,Ua=Rs.movement_state.escape_cooldown,Ha=Rs.movement_state.barge_cooldown,Va=Rs.movement_state.dive_cooldown;class $a extends ds{constructor(e,t){super({position:"bottom-center",type:"gapless"},new Fs("Path Editor")),this.editor=e,this.interaction_guard=t,this.state=mi(ja.start({}));{let i=this;function n(e){return i.interaction_guard.set(e.onStart((()=>i.editor.overlay_control.lens_layer.enabled2.set(!1))).onEnd((()=>i.editor.overlay_control.lens_layer.enabled2.set(!0))),i)}async function o(e){var t,o,r,s;if(e.predictor&&null!=(null===(t=i.state.value().position)||void 0===t?void 0:t.tile)&&null!=(null===(o=i.state.value().position)||void 0===o?void 0:o.direction)){let t=await e.predictor(i.state.value().position);if(t)return void i.editor.value.add({type:"ability",ability:e.ability,from:null===(r=i.state.value().position)||void 0===r?void 0:r.tile,to:t.tile})}return n(new Sa(e.ability).onCommit((e=>i.editor.value.add(e))).setStartPosition(null===(s=i.state.value().position)||void 0===s?void 0:s.tile))}this.buttons={surge:new Fa("assets/icons/surge.png",(()=>o({ability:"surge",predictor:Hr.surge}))).tooltip("Surge").setHotKey("s-W"),escape:new Fa("assets/icons/escape.png",(()=>o({ability:"escape",predictor:Hr.escape}))).tooltip("Escape").setHotKey("s-S"),dive:new Fa("assets/icons/dive.png",(()=>o({ability:"dive"}))).tooltip("Dive").setHotKey("D"),barge:new Fa("assets/icons/barge.png",(()=>o({ability:"barge"}))).tooltip("Barge").setHotKey("s-D"),run:new Fa("assets/icons/run.png",(()=>{var e;return n((new Pa).onCommit((e=>i.editor.value.add(e))).setStartPosition(null===(e=i.state.value().position)||void 0===e?void 0:e.tile))})).tooltip("Run").setHotKey("s-R"),redclick:new Fa("assets/icons/cursor_redclick.png",(()=>n((new Ra).onCommit((e=>i.editor.value.add(e)))))).tooltip("Redclick").setHotKey("s-C"),powerburst:new Fa("assets/icons/accel.png",(()=>{var e;if(!(null===(e=i.state.value().position)||void 0===e?void 0:e.tile))return n((new Ia).onCommit((e=>i.editor.value.add(e))));this.editor.value.add({type:"powerburst",where:i.state.value().position.tile})})).tooltip("Powerburst of Acceleration").setHotKey("s-P"),cheat:new Fa("assets/icons/Rotten_potato.png",(e=>{var t;return n(new Ba(null===(t=i.state.value().position)||void 0===t?void 0:t.tile).onCommit((e=>i.editor.value.add(e))))})).tooltip("Cheat"),cosmetic:new Fa("assets/icons/notes.png",(e=>n((new Na).onCommit((e=>i.editor.value.add(e)))))).tooltip("Cosmetic")},this.bar=new Da([this.buttons.surge,this.buttons.escape,this.buttons.dive,this.buttons.barge,this.buttons.run,this.buttons.redclick,this.buttons.powerburst,this.buttons.cheat,this.buttons.cosmetic]).appendTo(this.content.body)}this.state.subscribe((e=>this.render(e)),!0)}render(e){this.buttons.surge.cooldown.set(qa(e)),this.buttons.escape.cooldown.set(Ua(e)),this.buttons.barge.cooldown.set(Ha(e)),this.buttons.dive.cooldown.set(Va(e)),this.buttons.powerburst.cooldown.set(Math.max(e.acceleration_activation_tick+120-e.tick,0))}eventKeyDown(e){e.onPre((()=>{const t=e.original;(()=>t.shiftKey&&"w"==t.key.toLowerCase()?(this.editor.action_bar.buttons.surge.trigger(),!0):t.shiftKey&&"s"==t.key.toLowerCase()?(this.editor.action_bar.buttons.escape.trigger(),!0):t.shiftKey&&"d"==t.key.toLowerCase()?(this.editor.action_bar.buttons.barge.trigger(),!0):"d"==t.key.toLowerCase()?(this.editor.action_bar.buttons.dive.trigger(),!0):t.shiftKey&&"r"==t.key.toLowerCase()?(this.editor.action_bar.buttons.run.trigger(),!0):t.shiftKey&&"c"==t.key.toLowerCase()?(this.editor.action_bar.buttons.redclick.trigger(),!0):t.shiftKey&&"p"==t.key.toLowerCase()?(this.editor.action_bar.buttons.powerburst.trigger(),!0):void 0)()&&(e.stopAllPropagation(),t.preventDefault())}))}}class Wa extends a.FeatureGroup{constructor(){super(),this.children=[],this.options.opacity=1}setOpacity(e){var t;return this.options.opacity=e,null===(t=this.getTooltip())||void 0===t||t.setOpacity(e),this.children.forEach((function(t){var i;t.layer instanceof Wa||t.layer instanceof a.Marker||t.layer instanceof a.Tooltip?t.layer.setOpacity(e*t.baseline.stroke):t.layer instanceof a.Polyline&&t.layer.setStyle(Object.assign(t.layer.options,{opacity:e*t.baseline.stroke,fillOpacity:e*t.baseline.fill})),null===(i=t.layer.getTooltip())||void 0===i||i.setOpacity(e*t.baseline.stroke)})),this}addLayer(e){return super.addLayer(e),this.children.push({layer:e,baseline:e instanceof Wa||e instanceof a.Marker||e instanceof a.Tooltip?{stroke:e.options.opacity}:e instanceof a.Polyline?{stroke:e.options.opacity,fill:e.options.fillOpacity}:{stroke:1}}),this}removeLayer(e){return super.removeLayer(e),this.children.splice(this.children.findIndex((t=>t.layer==e))),this}}class Za extends Wa{constructor(e,t){super(),this.active_opacity=e,this.inactive_opacity=t,this.active=!0}setActive(e){return this.active=e,this.setOpacity(e?this.active_opacity:this.inactive_opacity),this}isActive(){return this.active}}var Ga=As.EntityTransportation,Ka=di.entity,Ya=As.EntityTransportation.Movement.isLocal,Ja=Vr.activate,Xa=Ks.arrow,Qa=As.EntityTransportation.defaultInteractiveArea;class el extends Ci{constructor(e){super(),this.shortcut=e,this.normalized_shortcut=As.normalize(this.shortcut),this.zoom_sensitivity_layers=Ci.default_local_zoom_scale_layers,this.floor_sensitivity_layers=new Ti([{floors:[this.normalized_shortcut.clickable_area.level],value:{}},{floors:G.all,hidden_here:!0,value:{}}]),this.setTooltip((()=>{const e=new $s,t=this.shortcut;switch(t.type){case"entity":e.header(di.entity(t.entity));break;case"door":e.header(di.staticentity(t.name))}return t.source_loc&&e.named("Object ID",t.source_loc.toString()),"door"==t.type&&(e.named("Position",W.toString(t.position)),e.named("Direction",qr.toString(t.direction))),e}))}bounds(){return As.bounds(this.shortcut)}async contextMenu(e){var t;const i=this.normalized_shortcut,n=i.actions.flatMap((e=>e.movement.flatMap((e=>Ya(e)?[]:[Vr.normalize(e.fixed_target.target)]))));if(n.length>0){const t=n[0];e.addForEntity({type:"basic",text:"Jump to Target",handler:()=>{var e,i;null===(i=null===(e=this.parent)||void 0===e?void 0:e.getMap())||void 0===i||i.fitView(Vr.toRect(t))}})}return{type:"submenu",icon:Zs.meta(null!==(t=i.actions[0].cursor)&&void 0!==t?t:"generic").icon_url,text:()=>Ka(i.entity),children:[]}}async render_implementation(e){var t,i;const n=this.normalized_shortcut,o="#72bb46",r="#cca927",s="#00ffff";function l(e,t,i){let n=(new Wa).addLayer(Xa(e,t).setStyle({color:r,weight:4})).setStyle({interactive:!0});return 0!=i&&a.marker(j.toLatLong(t),{icon:a.icon({iconUrl:i<0?"assets/icons/down.png":"assets/icons/up.png",iconSize:[14,16]}),interactive:!0}).addTo(n),n}const c=e.highlight?1.5:this.zoom_sensitivity_layers.get(e.zoom_group_index).value.scale,u=a.marker(j.toLatLong(F.center(n.clickable_area,!1)),{icon:a.icon({iconUrl:Zs.meta(null!==(i=null===(t=n.actions[0])||void 0===t?void 0:t.cursor)&&void 0!==i?i:"generic").icon_url,iconSize:Zs.iconSize(c),iconAnchor:Zs.iconAnchor(c,!0)}),riseOnHover:!0,interactive:!0}).addTo(this);if(e.highlight){a.polygon((h=n.clickable_area,[h.topleft,{x:h.botright.x,y:h.topleft.y},h.botright,{x:h.topleft.x,y:h.botright.y}].map(j.toLatLong)),{color:s,fillColor:s,fillOpacity:.1,opacity:.5,interactive:!0}).addTo(this);for(let e of n.actions)e.interactive_area&&is(e.interactive_area).setStyle({color:o,fillColor:o,interactive:!0,fillOpacity:.1,weight:2}).addTo(this),e.movement.forEach((t=>{var i,o;if(t.offset){let i=Ja(t.valid_from||e.interactive_area||Qa(n)).center();l(i,j.add(i,t.offset),t.offset.level).addTo(this)}else if(t.fixed_target&&!t.fixed_target.relative){const s=Vr.normalize(t.fixed_target.target);s.origin.level==this.parent.getMap().floor.value()&&a.circle(j.toLatLong(Ja(s).center()),{color:r,weight:2,radius:.4,fillOpacity:.1}).addTo(this);const c=Vr.activate(null!==(o=null!==(i=t.valid_from)&&void 0!==i?i:e.interactive_area)&&void 0!==o?o:Qa(n)).center(),u=Vr.normalize(t.fixed_target.target);l(c,Ja(u).center(),u.origin.level-c.level).addTo(this)}}));n.actions.some((e=>!!e.interactive_area))||is(Ga.defaultInteractiveArea(n)).setStyle({color:o,fillColor:o,interactive:!0,fillOpacity:.1,weight:2}).addTo(this)}var h;return u.getElement()}}var tl=Vr.activate;class il extends os{constructor(e,t=!1){super(),this.data=e,this.simplified=t,e.element_added.on((e=>{new il.ShortcutPolygon(e,{type:"regular",draw_arrows:!0,viewed_floor:this.getMap().floor.value()}).addTo(this)}))}onAdd(e){return e.floor.subscribe((e=>{this.eachLayer((t=>{t.style.update2((t=>t.viewed_floor=e))}))}),!1,(e=>this.handler_pool.bind(e))),super.onAdd(e),this.renderAll(),this}eventHover(e){this.eachLayer((t=>{t.style.update2((i=>{let n=t.data.value();i.draw_arrows="entity"==n.type&&(Z.containsCoords(n.clickable_area,e.tile())||n.actions.some((t=>tl(t.interactive_area).query(e.tile()))))}))}))}renderAll(){this.clearLayers(),this.data.value().map((e=>new il.ShortcutPolygon(e,{type:this.simplified?"simplified":"regular",draw_arrows:!1,viewed_floor:this.getMap().floor.value()}).addTo(this)))}getView(e){return this.getLayers().find((t=>t instanceof il.ShortcutPolygon&&t.data==e))}center(e){return this.getMap().fitView(As.bounds(e),{maxZoom:5}),this}}!function(e){var t=Ks.arrow;e.COLORS={interactive_area:"#72bb46",target_area:"#cca927",clickable_area:"#00ffff"},e.ShortcutPolygon=class extends Wa{constructor(e,t={type:"regular",draw_arrows:!0,viewed_floor:null}){super(),this.data=e,this.style=mi(null).equality(((e,t)=>(null==e?void 0:e.type)==(null==t?void 0:t.type)&&(null==e?void 0:e.draw_arrows)==(null==t?void 0:t.draw_arrows)&&(null==e?void 0:e.viewed_floor)==(null==t?void 0:t.viewed_floor))),e.subscribe((()=>this.render())),e instanceof gi.ObservableArrayValue&&e.removed.on((()=>this.remove())),this.style.set(t),this.style.subscribe((e=>{this.render()}),!0),this.setStyle({interactive:!0})}render(){this.clearLayers()}},e.render_transport_arrow=function(i,n,o){let r=(new Wa).addLayer(t(i,n).setStyle({color:e.COLORS.target_area,weight:4})).setStyle({interactive:!0});return 0!=o&&a.marker(j.toLatLong(n),{icon:a.icon({iconUrl:o<0?"assets/icons/down.png":"assets/icons/up.png",iconSize:[14,16]}),interactive:!0}).addTo(r),r}}(il||(il={}));var nl=di.entity,ol=il.COLORS,rl=As.TeleportGroup,sl=di.vbox;class al extends Ci{bounds(){return Vr.toRect(this.access.clickable_area)}async render_implementation(e){var t;this.teleport;const i=this.access,n=e.highlight?1.5:this.zoom_sensitivity_layers.get(e.zoom_group_index).value.scale,o=a.marker(j.toLatLong(F.center(Vr.toRect(i.clickable_area),!0)),{icon:a.icon({iconUrl:Zs.meta(null!==(t=i.cursor)&&void 0!==t?t:"generic").icon_url,iconSize:Zs.iconSize(n),iconAnchor:Zs.iconAnchor(n,!0)}),riseOnHover:!0,interactive:!0}).addTo(this);return e.highlight&&is(rl.TeleportAccess.interactiveArea(i)).setStyle({color:ol.interactive_area,fillColor:ol.interactive_area,interactive:!0,fillOpacity:.1,weight:2}).addTo(this),o.getElement()}constructor(e,t){super(),this.teleport=e,this.access=t,this.zoom_sensitivity_layers=Ci.default_zoom_scale_layers,this.zoom_sensitivity_layers=Ci.default_local_zoom_scale_layers,this.floor_sensitivity_layers=new Ti([{floors:[t.clickable_area.origin.level],value:{correct_level:!0}},{floors:G.all,hidden_here:!0,value:{correct_level:!1}}]),this.setTooltip((()=>{let e=new $s;const t=this.teleport,i=this.access;return e.header(c().append(`Access to ${t.name} via `,nl(i.name))),e.named("Targets",sl(...t.spots.map((e=>c().text(e.name))))),e}))}async contextMenu(e){var t;const i=this.teleport,n=this.access;return e.addForEntity({type:"submenu",text:"Move map to",children:i.spots.map((e=>{const t=new rl.Spot(i,e,n);return{type:"basic",icon:`assets/icons/teleports/${t.image().url}`,text:t.code()?`${e.code}: ${e.name}`:e.name,handler:()=>{var t,i;null===(i=null===(t=this.parent)||void 0===t?void 0:t.getMap())||void 0===i||i.fitView(Vr.toRect(e.target))}}}))}),{type:"submenu",icon:Zs.meta(null!==(t=n.cursor)&&void 0!==t?t:"generic").icon_url,text:()=>nl(n.name),children:[]}}}var ll=il.COLORS,cl=di.entity,ul=Vr.activate;class hl extends Ci{constructor(e,t,i){super(),this.transport=e,this.action=t,this.movement=i,this.zoom_sensitivity_layers=Ci.default_zoom_scale_layers,i.fixed_target,this.zoom_sensitivity_layers=new ki([{min:-100,value:{scale:.5}},{min:1.5,value:{scale:1}}]),this.floor_sensitivity_layers=new Ti([{floors:[Vr.normalize(i.fixed_target.target).origin.level],value:{correct_level:!0}},{floors:G.all,hidden_here:!0,value:{correct_level:!1}}]),this.setTooltip((()=>{let e=new $s;return e.header(c().append("Target of ",cl(this.transport.entity))),e}))}bounds(){return Vr.toRect(Vr.normalize(this.movement.fixed_target.target))}async render_implementation(e){const t=e.highlight?1.5:this.zoom_sensitivity_layers.get(e.zoom_group_index).value.scale;return a.circle(j.toLatLong(ul(Vr.normalize(this.movement.fixed_target.target)).center()),{color:ll.target_area,weight:2,radius:.4*t,fillOpacity:.1}).addTo(this).getElement()}async contextMenu(e){var t;return e.addForEntity({type:"basic",text:"Jump to Origin",handler:()=>{var e,t;null===(t=null===(e=this.parent)||void 0===e?void 0:e.getMap())||void 0===t||t.fitView(this.transport.clickable_area)}}),{type:"submenu",icon:Zs.meta(null!==(t=this.action.cursor)&&void 0!==t?t:"generic").icon_url,text:()=>c().append("Target of ",cl(this.transport.entity)),children:[]}}}var dl=As.TeleportGroup,pl=As.EntityTransportation;class gl extends os{constructor(e,t={teleport_policy:"all",transport_policy:"all"}){super(),"none"!=t.teleport_policy&&Is().app.settings.active_teleport_customization.subscribe((e=>{this.eachEntity((e=>{e instanceof la&&(e.teleport.refresh(),e.render(!0))}))}),!1,(e=>this.handler_pool.bind(e))),Ds.getAll().then((i=>i.forEach((i=>{switch(i.type){case"entity":case"door":if("all"!=t.transport_policy)break;new el(i).setInteractive(e).addTo(this),"entity"==i.type&&i.actions.forEach((t=>{t.movement.forEach((n=>{pl.Movement.isLocal(n)||new hl(i,t,n).setInteractive(e).addTo(this)}))}));break;case"teleports":if("none"==t.teleport_policy)break;i.spots.forEach((t=>{new la(new dl.Spot(i,t,i.access[0])).setInteractive(e).addTo(this)})),"target_only"!=t.teleport_policy&&i.access.forEach((t=>{"entity"==t.type&&new al(i,t).setInteractive(e).addTo(this)}))}"entity"==i.type||"door"==i.type||i.type})))),this.quad_tree_debug_rendering=!1}}class ml extends si{constructor(e){super(),this.value=e,this.addClass("ctr-buff-view"),this.render()}render(){c(`<img src='${this.value.icon}' alt="">`).appendTo(this),"buff"==this.value.kind&&this.addClass("ctr-buff-view-buff"),"debuff"==this.value.kind&&this.addClass("ctr-buff-view-debuff"),this.value.on_cooldown&&this.addClass("ctr-buff-view-cooldown"),this.value.time_left>0&&c(`<div>${this.value.time_left}t</div>`).appendTo(this)}}class fl extends si{constructor(e){super(),this.value=e,this.render()}setValue(e){this.value=e,this.render()}render(){this.empty();let e=(new $s).appendTo(this);e.named("Tick",c().text(this.value.tick)),this.value.position.tile&&e.named("Tile",c().text(W.toString(this.value.position.tile))),this.value.position.direction&&e.named("Facing",c().text(qr.toString(this.value.position.direction))),this.value.targeted_entity&&e.named("Targeting",c().text(W.toString(this.value.targeted_entity)));let t=c("<div class='ctr-movement-state-view-cooldowns'></div>"),i=c("<div class='ctr-movement-state-view-cooldowns'></div>");e.named("Powerburst",t),e.named("Cooldowns",i),this.value.acceleration_activation_tick+200>this.value.tick?(this.value.acceleration_activation_tick+10>this.value.tick&&new ml({icon:"assets/icons/accel.png",on_cooldown:!1,kind:"buff",time_left:this.value.acceleration_activation_tick+10-this.value.tick}).appendTo(t),new ml({icon:"assets/icons/accel.png",on_cooldown:!0,kind:"debuff",time_left:this.value.acceleration_activation_tick+200-this.value.tick}).appendTo(t)):c().text("Ready").appendTo(t);for(let e of this.value.cooldowns.surge)new ml({icon:"assets/icons/surge.png",on_cooldown:e>this.value.tick,time_left:e-this.value.tick}).appendTo(i);for(let e of this.value.cooldowns.escape)new ml({icon:"assets/icons/escape.png",on_cooldown:e>this.value.tick,time_left:e-this.value.tick}).appendTo(i);new ml({icon:"assets/icons/dive.png",on_cooldown:this.value.cooldowns.dive>this.value.tick,time_left:this.value.cooldowns.dive-this.value.tick}).appendTo(i),new ml({icon:"assets/icons/barge.png",on_cooldown:this.value.cooldowns.barge>this.value.tick,time_left:this.value.cooldowns.barge-this.value.tick}).appendTo(i)}}class yl extends Oa{constructor(e="Button",t="round"){super(),"round"==t&&this.addClass("ctr-lightbutton-round"),this.addClass("ctr-lightbutton").append(e)}setText(e){return this.text(e),this}}var vl=di.vbox,_l=di.spacer;class xl extends si{constructor(e){super(),this.addClass("ctr-step-issue").setAttribute("level",e.level.toString()),this.append(xl.icon(e.level)," ",e.message)}}!function(e){var t=di.cls;e.icon=function(e){return t(`ctr-step-issue-icon-${e}`)}}(xl||(xl={}));class wl extends si{constructor(e){super(),this.issues=e,this.css2({display:"flex"}),o.sortBy(Object.entries(o.groupBy(e,(e=>e.level))),(e=>e[0])).forEach((([e,t])=>{this.append(xl.icon(t[0].level),t.length.toString())})),this.addTippy(vl(...e.map((e=>new xl(e)))))}}class bl extends si{constructor(e){super(),this.editor=e,this.step_rows=[],this.inbetween_rows=[],this.addClass("path-edit-control"),this.steps_container=vl().appendTo(this).css2({"max-height":"800px","overflow-y":"auto"}).addClass("ctr-path-edit-overview"),e.value.committed_value.subscribe((e=>this.render(e))),e.value.cursor_state.subscribe((()=>{this.inbetween_rows.forEach((e=>e.render()))}))}setDragTarget(e){this.inbetween_rows.forEach(((t,i)=>{t.is_dragged_over.set(i==e)}))}render(e){if(e){this.step_rows=[],this.inbetween_rows=[],this.steps_container.empty();for(let t=0;t<=e.steps.length;++t)this.inbetween_rows.push(new bl.InbetweenSteps(this,e,t).appendTo(this.steps_container)),t<e.steps.length&&this.step_rows.push(new bl.Step(this,e.steps[t]).appendTo(this.steps_container));return e.path.issues.length>0&&vl(...e.path.issues.map((e=>new xl(e)))).appendTo(this.steps_container),this}}}!function(e){var t=di.span,i=di.hboxl;e.InbetweenSteps=class extends si{constructor(e,t,i){super(),this.parent=e,this.va=t,this.index=i,this.is_dragged_over=mi(!1),this.value=Rs.augmented.getState(this.va.path,this.index),this.addTippy(new fl(this.value),{delay:[300,0]}),this.addClass("ctr-path-edit-overview-inbetween"),this.on("click",(()=>{this.va.builder.setCursor(this.index)})),this.on("drop",(e=>{e.preventDefault();const t=JSON.parse(e.originalEvent.dataTransfer.getData("text/plain"));this.is_dragged_over.set(!1),this.va.builder.move(t.step_index,this.index)})),this.on("dragover",(e=>{e.preventDefault(),this.parent.setDragTarget(this.index),e.originalEvent.dataTransfer.dropEffect="move"})),this.on("dragleave",(()=>{this.is_dragged_over.set(!1)})),this.on("contextmenu",(e=>{e.preventDefault();const t=[{type:"basic",text:"Select",handler:()=>{this.va.builder.setCursor(this.index)}}];this.value.position.tile&&t.push({type:"basic",text:"Show on map",handler:()=>{this.parent.editor.game_layer.getMap().fitView(Z.from(this.value.position.tile))}}),new wi({type:"submenu",text:"",children:t}).showFromEvent(e)})),this.on("dblclick",(()=>{this.value.position.tile&&this.parent.editor.game_layer.getMap().fitView(Z.from(this.value.position.tile))})),this.is_dragged_over.subscribe((()=>this.render())),this.render()}render(){const e=this.va.builder.cursor_state.value();if(!e)return;this.empty();const n=i().appendTo(this);t(`T${this.value.tick}`).addClass("ctr-path-edit-overview-row-first").addClass("nisl-textlink").appendTo(n),this.toggleClass("ctr-path-edit-overview-inbetween-dragged-over",this.is_dragged_over.value()),this.is_dragged_over.value()?n.append("Drop to move step here"):this.index==e.cursor&&(n.append(di.inlineimg("assets/icons/youarehere.png").css2({"margin-right":"3px"}),"You are here"),0!=this.index||this.value.position.tile||this.value.position.direction||n.append(new yl("Assume starting orientation").css("margin-left","5px").onClick((e=>{const t={type:"submenu",text:"",children:qr.all.map((e=>({type:"basic",text:qr.toString(e),handler:()=>{this.va.builder.add({type:"orientation",direction:e})}})))};new wi(t).showFromEvent(e)}))))}},e.Step=class extends si{constructor(e,t){super(),this.parent=e,this.value=t,this.setAttribute("draggable","true");const{icon:n,content:o}=ta.renderTextAndIconSeparately(t.step.raw);this.addClass("ctr-path-edit-overview-step").append(i(c("<div>&#x2630;</div>").addClass("ctr-path-edit-overview-step-grab-indicator").addClass("ctr-path-edit-overview-row-first"),n.css("margin-left","0"),o,_l(),new wl(t.step.issues),c().setInnerHtml("&#x22EE;").addClass("ctr-clickable").addClass("ctr-path-edit-overview-step-options").on("click",(e=>{this.contextMenu(e.originalEvent)})))),this.on("dblclick",(e=>{e.preventDefault(),this.parent.editor.editStepDetails(t)})),this.on("contextmenu",(e=>{e.preventDefault(),this.contextMenu(e.originalEvent)})),this.on("dragstart",(e=>{e.originalEvent.dataTransfer.setData("text/plain",JSON.stringify({step_index:this.value.index}))})),this.on("dragover",(e=>{e.preventDefault();const t=e.pageY-this.raw().getBoundingClientRect().top<this.raw().offsetHeight/2;this.parent.setDragTarget(t?this.value.index:this.value.index+1),e.originalEvent.dataTransfer.dropEffect="move"})),this.on("drop",(e=>{e.preventDefault();const t=JSON.parse(e.originalEvent.dataTransfer.getData("text/plain")),i=e.pageY-this.raw().getBoundingClientRect().top<this.raw().offsetHeight/2;this.parent.inbetween_rows[this.value.index].is_dragged_over.set(!1),this.parent.inbetween_rows[this.value.index+1].is_dragged_over.set(!1),this.value.parent.move(t.step_index,i?this.value.index:this.value.index+1)}))}contextMenu(e){new wi(this.parent.editor.contextMenu(this.value)).showFromEvent2(e)}}}(bl||(bl={}));class kl{constructor(){this.canUndo=mi(!1),this.canRedo=mi(!1),this.state={current_state:void 0,undo:[],redo:[]}}update(){this.canUndo.set(this.state.undo.length>0),this.canRedo.set(this.state.redo.length>0)}pushState(e){void 0!==this.state.current_state&&this.state.undo.push(this.state.current_state),this.state.current_state=e,this.state.redo=[],this.update()}undo(){if(this.state.undo.length>0)return this.state.redo.push(this.state.current_state),this.state.current_state=this.state.undo.pop(),this.update(),this.state.current_state}redo(){if(this.state.redo.length>0)return this.state.undo.push(this.state.current_state),this.state.current_state=this.state.redo.pop(),this.update(),this.state.current_state}reset(){this.state.undo=[],this.state.redo=[],this.state.current_state=void 0,this.update()}}class Tl{constructor(e){this.apply_state=e,this.stack=new kl,this.canUndo=this.stack.canUndo.map(o.identity),this.canRedo=this.stack.canRedo.map(o.identity)}undo(){if(this.stack.canUndo.value())return this.apply_state(this.stack.undo())}redo(){if(this.stack.canRedo.value())return this.apply_state(this.stack.redo())}}var Sl=B.copyUpdate;class Cl{constructor(e={},t=[]){this.meta=e,this.commit_lock=Promise.resolve(),this.cursor=0,this.committed_value=mi(null),this.cursor_state=mi(null),this.path=[],this.undoredo=new Tl((e=>this.setState(e))),this.preview_layer=new os,this.commit(t.length,t)}async commit(e,t,i=!0){await this.commit_lock,this.commit_lock=(async()=>{const n=void 0!==t?t.length:this.path.length;if(this.cursor=Math.max(0,Math.min(n,null!=e?e:this.cursor)),void 0!==t){this.path=t;const e=await Rs.augment(this.path,this.meta.start_state,this.meta.target),i=e.steps.map(((e,t)=>new Cl.Step(this,t,e)));{const e=new os;i.forEach((t=>{t.associated_preview=new da(t.step.raw).setInteractive().addTo(e)})),this.preview_layer.clearLayers().add(e)}this.committed_value.set({builder:this,path:e,steps:i})}i&&this.saveState(),this.cursor_state.set({state:Rs.augmented.getState(this.committed_value.value().path,this.cursor),value:this.committed_value.value(),cursor:this.cursor})})()}setCursor(e){return this.commit(e,void 0,!1),this}add(...e){return this.commit(this.cursor+e.length,Sl(this.path,(t=>{t.splice(this.cursor,0,...e)}))),this}move(e,t){if(e==t||e+1==t)return;let i=0;return e>=this.cursor&&t<this.cursor&&(i=1),e<this.cursor&&t>this.cursor&&(i=-1),this.commit(this.cursor+i,Sl(this.path,(i=>{const[n]=i.splice(e,1);e<=t&&(t-=1),i.splice(t,0,n)}))),this}delete(e){if(e<0||e>=this.path.length)return this;const t=e<this.cursor;return this.commit(t?this.cursor-1:this.cursor,Sl(this.path,(t=>{t.splice(e,1)}))),this}updateCopy(e,t){const i=o.cloneDeep(this.path[e]);return t(i),this.update(e,i)}update(e,t){return this.commit(void 0,Sl(this.path,(i=>{i[e]=o.cloneDeep(t)}))),this}async set(e,t=!1,i=void 0){return await this.commit_lock,t&&this.undoredo.stack.reset(),this.commit(null!=i?i:e.length,e),this}copyState(){return{cursor:this.cursor,path:o.cloneDeep(this.path)}}saveState(){this.undoredo.stack.pushState(this.copyState())}async setState(e){this.commit(e.cursor,e.path,!1)}get(){return this.path}}!function(e){e.Step=class{constructor(e,t,i){this.parent=e,this.index=t,this.step=i,this.associated_preview=null}update(e){this.parent.updateCopy(this.index,e)}delete(){this.parent.delete(this.index)}}}(Cl||(Cl={}));var El=di.cls;class Al{constructor(e={}){this.options=e,this.state=mi("unmounted"),this.shown=pi(),this.hiding=pi(),this.hidden=pi(),this.should_hide=!1,this.state.subscribe((e=>{switch(e){case"shown":this.should_hide&&this.hide(),this.shown.trigger(this);break;case"hiding":this.hiding.trigger(this);break;case"hidden":this.hidden.trigger(this)}}))}mount(){var e;switch(this._container=El("ctr-modal-container").css("z-index",1e4+Al.open_count).on("click",(()=>{this.options.fixed||this.hide()})),this.options.no_backdrop||(this._backdrop=El("ctr-modal-backdrop").appendTo(this._container)),this._modal=c("<div class='modal ctr-modal' tabindex='-1'></div>").appendTo(this._container),this._dialog=c("<div class='modal-dialog'></div>").appendTo(this._modal).on("click",(e=>e.stopPropagation())),this._content=c("<div class='modal-content'></div>").appendTo(this._dialog),this.options.no_fade||(this._modal.addClass("fade"),this._backdrop.addClass("fade")),null!==(e=this.options.size)&&void 0!==e?e:"medium"){case"small":this._dialog.addClass("modal-sm");break;case"large":this._dialog.addClass("modal-lg");break;case"fullscreen":this._dialog.addClass("ctr-modal-fullscreen")}this._container.appendTo(ie(document.body)),this._modal.raw().addEventListener("hidden.bs.modal",(()=>{if(this.hidden.trigger(this),this.state.set("hidden"),Al.open_count--,0==Al.open_count){const e=document.getElementsByClassName("modal-backdrop");for(let t=0;t<e.length;t++)e[t].remove()}}))}async show(){let e=new Promise((e=>{this.hidden.on((()=>e(this)))}));return this.mount(),Al.open_count++,setTimeout((()=>{this.state.set("showing"),this._modal.addClass("show").css("display","block"),this._backdrop.addClass("show"),setTimeout((()=>{"showing"==this.state.value()&&this.state.set("shown")}),.15)}),.1),await this.render(),e}hide(){"shown"==this.state.value()?(this.state.set("hiding"),this._modal.toggleClass("show",!1).css("display",void 0),this._backdrop.toggleClass("show",!1),setTimeout((()=>{"hiding"==this.state.value()&&(this.state.set("hidden"),Al.open_count--,this._container.remove())}),.15)):this.should_hide=!0}remove(){this.hide()}content(){return this._content}}!function(e){e.open_count=0}(Al||(Al={}));var zl=di.spacer;class Ll extends si{constructor(e={}){var t;super(),this.customization=e,this.css2({display:"flex","justify-content":null!==(t=e.align)&&void 0!==t?t:"center"})}buttons(...e){return(e=e.filter((e=>!!e))).forEach((e=>e.css("flex-basis",this.customization.sizing||"100%"))),this.empty(),e.length%2==0&&this.customization.max_center_spacer_width?(this.append(...e.slice(0,e.length/2)),this.append(zl().css("max-width",this.customization.max_center_spacer_width)),this.append(...e.slice(e.length/2))):this.append(...e),this}}var Pl=di.cls;class Ml extends Al{constructor(e={}){super(e),this.options=e,this.title=mi(""),this.title.subscribe((e=>{var t;null===(t=this.title_widget)||void 0===t||t.text(e)}))}render(){this._content.addClass("nisl-modal"),this.header=c("<div class='nisl-modal-header'></div>").appendTo(this._content),this.body=c("<div class='nisl-modal-body'></div>").appendTo(this._content);const e=this.getButtons();(this.options.force_footer||e.length>0)&&(this.footer=c("<div class='nisl-modal-footer'></div>").appendTo(this._content),e.length>0&&this.footer.append(new Ll({align:"center",sizing:"100px",max_center_spacer_width:"100px"}).buttons(...e))),this.title_widget=c("<h1 class='nisl-modal-title'></h1>").text(this.title.value()).appendTo(this.header),this.options.disable_close_button||Pl("nisl-modal-exit").on("click",(()=>this.onClose())).appendTo(this.header)}onClose(){this.remove()}setTitle(e){return this.title.set(e),this}getButtons(){return[]}}Ml||(Ml={});class Il extends Ml{constructor(e={}){super(e),this.options=e,this.resolver=null,this.hidden.on((()=>this.cancel()))}confirm(e){this.resolver&&!this.resolver.resolved&&(this.resolver.resolved=!0,this.resolver.handler(e)),this.remove()}getValueForCancel(){return null}cancel(){this.confirm(this.getValueForCancel())}do(){return new Promise((e=>{this.resolver={handler:e,resolved:!1},this.show()}))}}var Ol=di.cls;class Dl extends Oa{constructor(e,t){super(),this.content_container=c().text(e).addClass("content").appendTo(this),Ol("background").appendTo(this),this.addClass("nisl-big-button"),this.addClass(`nisl-big-button-${t}`)}setContent(e){return this.content_container.empty().append(e),this}}class Rl extends Oa{constructor(e=null){super(e),e||(this.container.addClass("nissmallimagebutton"),this.append(c("<img>")))}setEnabled(e){return super.setEnabled(e),e?this.container.removeClass("disabled"):this.container.addClass("disabled"),this}setIcon(e){return this.container.children("img").attr("src",e),this}static new(e){return(new Rl).setIcon(e)}}class Bl extends Rl{constructor(){super(),this.value=mi(!1),this.addClass("nisl-small-image-toggle"),this.onClick((()=>{this.value.set(!this.value.value())})),this.value.subscribe((e=>{this.toggleClass("active",e)}))}setState(e){return this.value.set(e),this}}!function(e){e.sibut=function(t,i){let n=(new e).setIcon(t);return i&&n.onClick(i),n},e.sitog=function(e,t){let i=(new Bl).setIcon(e);return t&&i.value.subscribe(t),i}}(Rl||(Rl={}));class Nl extends pa{constructor(e={}){super(ie("<textarea class='nisl-textinput'>")),this.raw().readOnly=!!e.readonly,this.raw().placeholder=e.placeholder||"",this.on("input",(()=>{this.preview(this.container.val())})).on("change",(()=>{this.commit(this.container.val())}))}setEnabled(e){return this.container.prop("disabled",!e),this}setPlaceholder(e){return this.container.attr("placeholder",e),this}render(){this.container.val(this.get())}}var jl=di.vbox;class Fl extends pa{constructor(e){super(),this.options=e,this.edit_mode=!1,this.main_row=null,this.instruction_input=null,this.generate_button=null,this.edit_button=null,this.container.on("mouseover",(()=>{this.edit_mode||(this.generate_button&&this.generate_button.setVisible(!0),this.edit_button&&this.edit_button.setVisible(!0))})),this.container.on("mouseleave",(()=>{this.edit_mode||(this.generate_button&&this.generate_button.setVisible(!1),this.edit_button&&this.edit_button.setVisible(!1))})),this.onChange((()=>this.renderPreview())),this.addClass("ctr-template-string-edit"),this.render()}render(){this.empty(),this.instruction_input=null,this.preview_container=null,this.options.fullsize?(this.instruction_input=new Nl({placeholder:"Enter text"}).setValue(this.get()).onPreview((e=>{this.preview(e)})).onCommit((e=>{this.commit(e)})).css("height","80px"),this.append(jl(this.instruction_input,this.preview_container=c()).css2({display:"flex","flex-direction":"column"}))):(this.main_row=c("<div class='ctr-template-string-edit-input-row'></div>"),this.generate_button=Rl.new("assets/icons/regenerate.png").css("margin-left","2px").tooltip("Auto generate").setEnabled(!!this.options.generator).onClick((()=>{this.commit(this.options.generator())})).setVisible(this.edit_mode),this.edit_mode?(this.instruction_input=c("<input type='text' class='nisinput'>").tapRaw((e=>e.val(this.get()).on("input",(()=>{this.preview(this.instruction_input.container.val())})).on("change",(()=>{this.commit(this.instruction_input.container.val())})).on("keyup",(e=>{"Enter"===e.key&&this.instruction_input.raw().blur()})).on("focusout",(()=>{this.edit_mode=!1,this.render()})))),this.main_row.append(this.instruction_input).append(this.generate_button).appendTo(this),this.preview_container=c().appendTo(this)):(this.edit_button=Rl.new("assets/icons/edit.png").css("margin-left","2px").tooltip("Edit").onClick((()=>{this.startEdit()})).setVisible(!1),this.preview_container=c("<span style='cursor: pointer; flex-grow: 1'> </span>").tooltip("Edit").tapRaw((e=>e.on("click",(()=>{this.startEdit()})))),this.main_row.append(this.preview_container).append(this.edit_button).append(this.generate_button).appendTo(this)),this.instruction_input&&this.instruction_input.container.val(this.get())),this.renderPreview()}setResolver(e){return this.options.resolver=e,this.renderPreview(),this}renderPreview(){this.preview_container.empty().append(...this.options.resolver.resolve(this.get()||""))}startEdit(){this.edit_mode=!0,this.render(),this.instruction_input.container.focus()}}var ql=di.inlineimg;class Ul extends si{constructor(e,t){super(c("<div class='nisl-selectdropdown'>")),this.options=e,this.dropdown=null,this.selected=pi(),this.enabled=mi(!0),this._list_constructor=async()=>[],this.selection=mi(t),this.input_container=c().appendTo(this),this.selection.subscribe((e=>{this.renderInput()}),!0),this.enabled.subscribe((e=>{var t;null===(t=this.input)||void 0===t||t.toggleClass("disabled",!e)})),this.setItems([t])}renderInput(){this.input=c("<div class='nisl-textinput nisl-selectdropdown-input' tabindex='-1'>").css("padding-right","13px").on("click",(e=>{this.openDropdown()})).append(this.construct(this.selection.value()),ql("assets/nis/dropdown.png").addClass("nisl-selectdropdown-arrow")).appendTo(this.input_container.empty())}construct(e){var t;return(null===(t=this.options.type_class)||void 0===t?void 0:t.toHTML)?this.options.type_class.toHTML(e):c(`<div>${e}</div>`)}setItems(e){return Array.isArray(e)?this._list_constructor=()=>Promise.resolve(e):this._list_constructor=e,this.dropdown&&(async()=>{this.dropdown.setItems(await this._list_constructor())})(),this}async openDropdown(){if(!this.enabled.value())return;const e=this.onOpen();this.dropdown=new Ul.DropDown({dropdownClass:"nisl-selectdropdown-options",renderItem:e=>c().append(this.construct(e))}).setItems(await this._list_constructor()).setHighlighted(this.selection.value()).onClosed((()=>{this.dropdown=null,this.renderInput()})).onSelected((e=>{this.selection.set(e),this.selected.trigger(e)})).open(this,e),this.dropdown}onOpen(){return this.input_container}setValue(e){return this.selection.set(e),this}onSelection(e,t=!1){return this.selected.on(e),t&&e(this.selection.value()),this}setEnabled(e){return this.enabled.set(e),this}}!function(e){var t=B.positiveMod;e.DropDown=class{constructor(e){this.options=e,this.selectable_items=mi([]),this.highlight_index=mi(null),this.selected=pi(),this.closed=pi(),e.renderItem||(e.renderItem=e=>c().text(JSON.stringify(e))),this.selectable_items.subscribe(((e,t)=>{this.highlight_index.set(0),this.renderItems()})),this.highlight_index.subscribe(((e,t)=>{var i,n,o,r;this.rows&&(null!=t&&(null===(i=this.rows[t])||void 0===i||i.toggleClass("selected",!1)),null!=e&&(null===(r=null===(o=null===(n=this.rows[e])||void 0===n?void 0:n.toggleClass("selected",!0))||void 0===o?void 0:o.raw())||void 0===r||r.scrollIntoView({block:"nearest",inline:"nearest"})))}))}select(e){this.selected.trigger(e),this.close()}setItems(e){return this.selectable_items.set(e),this}renderItems(){this.container&&(this.container.empty(),this.rows=this.selectable_items.value().map(((e,t)=>this.options.renderItem(e).toggleClass("selected",this.highlight_index.value()==t).on("click",(t=>{t.stopPropagation(),this.select(e)})).on("mousemove",(()=>{this.highlight_index.set(t)})).appendTo(this.container))),0==this.selectable_items.value().length&&this.container.append(c().text("No matches").css("font-style","italic")))}open(e,i){return this.container=c("<div style='z-index: 1000000' tabindex='0'></div>").addClass("nisl-abstract-dropdown"),i&&(null==i.raw().getAttribute("tabindex")&&i.setAttribute("tabindex","-1"),this.focus_widget=i,i.on("keydown",this.input_handler=e=>{var i,n;if("Escape"==e.key&&(e.stopPropagation(),this.focus_widget.raw().blur()),"ArrowUp"==e.key&&this.highlight_index.set(t((null!==(i=this.highlight_index.value())&&void 0!==i?i:this.selectable_items.value().length)-1,this.selectable_items.value().length)),"ArrowDown"==e.key&&this.highlight_index.set(t((null!==(n=this.highlight_index.value())&&void 0!==n?n:this.selectable_items.value().length-1)+1,this.selectable_items.value().length)),"Enter"==e.key){let e=this.highlight_index.value();null!=e&&e>=0&&e<this.selectable_items.value().length&&this.select(this.selectable_items.value()[e])}}).on("focusout",(e=>{e.originalEvent.relatedTarget instanceof HTMLElement&&(this.container.container.is(e.originalEvent.relatedTarget)||0!=this.container.container.has(e.originalEvent.relatedTarget).length)||this.close()})).raw().focus()),this.container.addClass(this.options.dropdownClass||"nisl-abstract-dropdown-default-styling"),this.renderItems(),this.instance=ht(e.raw(),this.container.appendTo(n()).raw(),{placement:"bottom-start",modifiers:[{name:"flip",enabled:!0},{name:"preventOverflow",enabled:!0,options:{boundary:"viewport",rootBoundary:"viewport"}},{name:"widthSync",enabled:!0,phase:"beforeWrite",fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`,e.styles.popper.maxWidth=`${e.rects.reference.width}px`}}]}),this}close(){this.instance&&(this.instance.destroy(),this.instance=null,this.container.remove(),this.closed.trigger(void 0)),this.focus_widget&&(this.focus_widget.container.off("keydown",this.input_handler),this.focus_widget=null,this.input_handler=null)}onSelected(e){return this.selected.on(e),this}onClosed(e){return this.closed.on(e),this}setHighlighted(e){let t=this.selectable_items.value().indexOf(e);return t>=0&&this.highlight_index.set(t),this}};let i=null;function n(){return i||(i=c("<div style='position: absolute; top: 0; left: 0; overflow: visible; max-width: 100%; max-height: 100%'>").appendTo(ie("body"))),i}e.getDropdownPane=n}(Ul||(Ul={}));class Hl extends Ul{constructor(e,t){super(e,t[0]),this.setItems(t)}setItems(e){return super.setItems(e),this}}class Vl extends Hl{constructor(){super({type_class:{toHTML:e=>null!=e?c().text((0,o.capitalize)(qr.toString(e))):c().text("none")}},qr.all.concat(null))}}class $l extends pa{constructor(e,t=null){super(),this.interaction_f=t,this.container.css("min-width","0"),this.css("display","flex"),this.x=c("<input type='text' inputmode='numeric' class='nisinput' min='0' style='text-align: right'>").appendTo(this),this.x.container.on("change",(()=>{this.commit((0,o.tap)(o.clone(this.get()),(e=>e.x=Number(this.x.container.val()))))})),c("<div> | </div>").appendTo(this),this.y=c("<input type='text' inputmode='numeric' class='nisinput' min='0'>").appendTo(this),this.y.container.on("change",(()=>{this.commit((0,o.tap)(o.clone(this.get()),(e=>e.y=Number(this.y.container.val()))))})),c("<div> | </div>").appendTo(this),this.floor=c("<input type='number' class='nisinput' min='0' max='3' style='min-width: 45px; max-width: 45px;'>").appendTo(this),this.floor.container.on("change",(()=>{this.commit((0,o.tap)(o.clone(this.get()),(e=>e.level=Number(this.floor.container.val()))))})),e&&(this.x.container.val(e.x),this.y.container.val(e.y),this.floor.container.val(e.level)),this.interaction_f&&Rl.new("assets/icons/marker.png").appendTo(this).onClick((()=>this.interaction_f(this.get()).onCommit((e=>{this.commit(e,!0)})))).css("margin-left","3px"),this.setValue(o.clone(e))}render(){let e=this.get();this.x.container.val(e.x),this.y.container.val(e.y),this.floor.container.val(e.level)}}class Wl extends Hl{constructor(){super({type_class:{toHTML:e=>{let t=Zs.meta(e);return c(`<div><img style="height: 18px; object-fit: contain; margin-right: 3px" src="${t.icon_url}" alt="${t.description}">${t.description}</div>`)}}},Zs.all().map((e=>e.type)))}}class Zl extends pa{constructor(){super(ie("<input type='text' class='nisl-textinput'>")),this.container.val(this.get()).on("input",(()=>{this.preview(this.container.val())})).on("change",(()=>{this.commit(this.container.val())}))}setEnabled(e){return this.container.prop("disabled",!e),this}setPlaceholder(e){return this.container.attr("placeholder",e),this}render(){this.container.val(this.get())}}var Gl=di.vbox,Kl=di.hbox;class Yl extends pa{constructor(e=["npc","static"]){super(Gl().container),this.kinds=e}render(){var e,t;this.empty();const i=Kl();if(this.kinds.length>1){const t=this.kinds.map((e=>({value:e,button:new ma({npc:"NPC",static:"Object",item:"Item"}[e],"radio")}))),n=new ma.Group(t,!1).setValue((null===(e=this.get())||void 0===e?void 0:e.kind)||"static").onChange((e=>{const t=o.cloneDeep(this.get());t&&(t.kind=e,this.commit(t))}));i.append(...n.buttons.map((e=>e.button)))}const n=(new Zl).css("width","100%").setValue((null===(t=this.get())||void 0===t?void 0:t.name)||"").onCommit((e=>{if(e){let t=o.cloneDeep(this.get());t||(t={name:"",kind:t.kind}),t.name=e,this.commit(t)}else this.commit(null)}));this.append(n,i)}}class Jl extends pa{constructor(e,t){super(ie(`<input type='number' class='nisl-textinput' min='${e}' max="${t}">`)),this.min=e,this.max=t,this.container.on("input",(()=>{this.commit(Number(this.container.val()))}))}render(){this.container.val(this.get())}}var Xl=i(2599);class Ql extends Ul{constructor(e,t){super(e,t[0]),this.options=e,this.items=t,this.prepared_items=t.map((e=>({item:e,term:Xl.prepare(this.options.search_term(e))}))),this.setItems([])}onOpen(){let e=(new Zl).setValue("").css("width","100%").onPreview((e=>{let t=Xl.go(e,this.prepared_items,{key:"term",all:!0,threshold:-1e4});this.setItems(Array.from(t).map((e=>e.obj.item)))})).appendTo(this.input_container.empty());return this.setItems(this.items),e}}var ec=di.cls;class tc extends pa{constructor(){super(ec("nisl-color-input")),this.input=c("<input type='color'>").on("change",(e=>{this.commit(this.input.container.val())})).appendTo(this)}render(){this.input.raw().value=this.get()}}var ic=B.copyUpdate,nc=di.hboxl,oc=di.inlineimg;class rc extends pa{constructor(){super()}render(){var e,t,i,n;const o=this.get();if(!o)return;const r=new $s;switch(this.append(r),r.header("Description"),r.row(new Fl({fullsize:!0,resolver:Is().app.template_resolver}).setValue(o.description).onCommit((e=>this.commit(ic(this.get(),(t=>t.description=e)))))),o.type){case"orientation":r.named("Facing",(new Vl).setValue(o.direction).onSelection((e=>{this.commit(ic(this.get(),(t=>t.direction=e)))})));break;case"ability":r.named("From",new $l(o.from).onCommit((e=>this.commit(ic(this.get(),(t=>t.from=e)))))),r.named("To",new $l(o.to).onCommit((e=>this.commit(ic(this.get(),(t=>t.to=e)))))),"barge"==o.ability&&r.named("Target",new Yl(["npc"]).setValue(null!==(e=o.target)&&void 0!==e?e:{name:"",kind:"npc"}).onCommit((e=>{this.commit(ic(this.get(),(t=>t.target=e.name?e:void 0)))}))),"dive"==o.ability&&(r.named("Target Text",(new Zl).setPlaceholder("Text like 'on top of the flower' or 'next to the rock'.").setValue(o.target_text).onCommit((e=>{this.commit(ic(this.get(),(t=>t.target_text=e)))}))),r.named("Is Far Dive?",(new ma).setValue(o.is_far_dive).onCommit((e=>{this.commit(ic(this.get(),(t=>t.is_far_dive=e)))}))));break;case"redclick":r.named("Type",(new Wl).setValue(o.how).onSelection((e=>this.commit(ic(this.get(),(t=>t.how=e)))))),r.named("Where",new $l(o.where).onCommit((e=>this.commit(ic(this.get(),(t=>t.where=e)))))),r.named("Target",new Yl(["npc","static"]).setValue(null!==(t=o.target)&&void 0!==t?t:{name:"",kind:"static"}).onCommit((e=>{this.commit(ic(this.get(),(t=>t.target=e.name?e:void 0)))})));break;case"run":r.named("Target Text",(new Zl).setPlaceholder("Text like 'on top of the flower' or 'next to the rock'.").setValue(o.to_text).onCommit((e=>{this.commit(ic(this.get(),(t=>t.to_text=e)))})));break;case"teleport":r.named("Spot",new $l(o.spot).onCommit((e=>this.commit(ic(this.get(),(t=>t.spot=e))))));break;case"powerburst":r.named("Where",new $l(o.where).onCommit((e=>this.commit(ic(this.get(),(t=>t.where=e))))));break;case"transport":break;case"cheat":r.named("Target",new $l(o.target).onCommit((e=>this.commit(ic(this.get(),(t=>t.target=e)))))),r.named("Facing",(new Vl).setValue(o.orientation).onSelection((e=>{this.commit(ic(this.get(),(t=>t.orientation=e)))}))),r.named("Ticks",new Jl(0,100).setValue(o.ticks).onCommit((e=>{this.commit(ic(this.get(),(t=>t.ticks=e)))})));break;case"cosmetic":r.named("Icon",new Ql({type_class:{toHTML:e=>nc(oc(Gs.url(e)),di.space(),e.name)},search_term:Gs.search_term},Gs.all).setValue(Gs.get(o.icon)).onSelection((e=>{this.commit(ic(this.get(),(t=>t.icon=e.id)))}))),r.row(new ma("Hide when not hovered?").setValue(!!o.hide_when_not_hovered).onCommit((e=>this.commit(ic(this.get(),(t=>t.hide_when_not_hovered=e)))))),r.named("Area Color",(new tc).setValue(null!==(i=o.area_color)&&void 0!==i?i:Rs.COSMETIC_DEFAULT_COLORS.area).onCommit((e=>{this.commit(ic(this.get(),(t=>t.area_color=e)))}))),r.named("Arrow Color",(new tc).setValue(null!==(n=o.arrow_color)&&void 0!==n?n:Rs.COSMETIC_DEFAULT_COLORS.arrow).onCommit((e=>{this.commit(ic(this.get(),(t=>t.arrow_color=e)))})))}}}class sc extends Il{constructor(e){super({size:"small"}),this.value=e,this.title.set("Edit Step Details")}render(){super.render(),this.edit=(new rc).setValue(ic(this.value,(()=>{}))).appendTo(this.body)}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.cancel())),new Dl("Save","confirm").onClick((()=>this.confirm({new_version:this.edit.get()})))]}getValueForCancel(){return{new_version:null}}}class ac extends Il{constructor(e){super({size:"small"}),this.config=e}render(){super.render(),this.title.set(this.config.title||"Confirmation"),this.explanation=c("<p></p>").text(this.config.body).appendTo(this.body)}getButtons(){return[...this.config.options.map((e=>new Dl(e.text,e.kind).onClick((()=>this.confirm(e.value)))))]}getValueForCancel(){var e;return null===(e=this.config.options.find((e=>e.is_cancel)))||void 0===e?void 0:e.value}}!function(e){e.simple=function(t,i,n,o){return new e({title:t,body:i,options:[{kind:"neutral",text:n,value:!1,is_cancel:!0},{kind:"cancel",text:o,value:!0}]})}}(ac||(ac={}));class lc{constructor(){this.temporary_bookmarks=[]}create(e){switch(e.type){case"persistent":lc.persistance.map((t=>{t.push(e)}));break;case"temporary":this.temporary_bookmarks.push(e)}}delete(e){switch(e.type){case"persistent":lc.persistance.map((t=>{t.splice(t.indexOf(e),1)}));break;case"temporary":this.temporary_bookmarks.splice(this.temporary_bookmarks.indexOf(e),1)}}getAll(){return[].concat(lc.persistance.get(),this.temporary_bookmarks)}}!function(t){t.persistance=new e.Variable("patheditor/bookmarks",(()=>[]));class i extends Il{constructor(e,t){super({size:"small"}),this.start_name=e,this.value=t,this.title.set("Create Bookmark"),this.bookmark={name:e,value:t,type:"temporary"}}render(){super.render();const e=(new $s).appendTo(this.body);e.named("Bookmark name",(new Zl).setValue(this.start_name).setPlaceholder("Name...").onCommit((e=>this.bookmark.name=e))),e.row(new ma("Save for future use?").setValue("persistent"==this.bookmark.type).onCommit((e=>this.bookmark.type=e?"persistent":"temporary")))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.cancel())),new Dl("Save","confirm").onClick((()=>this.confirm(this.bookmark)))]}getValueForCancel(){return null}}t.getContextMenu=function(e,t){return{type:"submenu",text:"",children:[...t.getAll().map((i=>{const n={text:i.name,type:"submenu",children:[]};return n.children.push({type:"basic",text:"Load",handler:()=>{e.set(i.value.path,!1,i.value.cursor)}}),n.children.push({type:"basic",text:"Insert",handler:()=>{e.add(...i.value.path)}}),"temporary"==i.type&&n.children.push({type:"basic",text:"Make persistent",handler:()=>{t.delete(i),i.type="persistent",t.create(i)}}),n.children.push({type:"basic",text:"Delete",handler:async()=>{("temporary"==i.type||await new ac({options:[{text:"Cancel",kind:"cancel",value:!1},{text:"Delete",kind:"cancel",value:!0}],title:"Remove Bookmark?",body:"Do you really want to remove this persistent path bookmark? There is no way to undo this and you will have to recreate it manually."}).do())&&t.delete(i)}}),n})),{type:"basic",text:"Create Bookmark",handler:async()=>{const n=function e(i){const n=`Bookmark ${i}`;return t.getAll().some((e=>e.name==n))?e(i+1):n}(1),o=await new i(n,e.copyState()).do();o&&t.create(o)}}]}}}(lc||(lc={}));var cc=di.cls;class uc{constructor(){this._type="information",this._duration=3e3,this.hasDismiss=!0,this.options=[],this._content=c()}show(e=void 0){e||(e=dc.instance()),e.do(this)}render(e){var t;const i=cc("ctr-notification");i.addClass(`ctr-notification-${null!==(t=this._type)&&void 0!==t?t:"information"}`);const n=cc("ctr-notification-content").append(this._content).appendTo(i);for(let t of this.options){const i="string"==typeof t.content?cc("ctr-notification-link").append(t.content):t.content;n.append(cc("ctr-notification-spacer"),i.on("click",(()=>{t.handler(e)})))}return this.hasDismiss&&n.append(cc("ctr-notification-spacer"),c("<div class='ctr-notification-dismiss'>&times;</div>").tooltip("Dismiss").on("click",(()=>e.dismiss()))),i}setType(e){return this._type=e,this}addButton(e,t=(()=>{})){return this.options.push({content:e,handler:t}),this}setDuration(e){return this._duration=e,this}setContent(e){return this._content=e,this}}class hc{constructor(e,t){this.original=e,this.bar=t,this.widget=e.render(this)}dismiss(e=!1){e?this.widget.container.fadeOut(300,(()=>this.widget.remove())):this.widget.remove()}}!function(e){e.notification=function(t,i="information"){return(new e).setContent(t).setType(i)}}(uc||(uc={}));class dc extends si{constructor(){super(),this.addClass("ctr-notification-bar")}do(e){const t=new hc(e,this);return t.widget.css("display","none").appendTo(this).container.animate({height:"toggle"},300),null!=e._duration&&setTimeout((()=>{t.dismiss(!0)}),e._duration),this}static instance(){return this._instance||(this._instance=new dc),this._instance}}dc._instance=null;var pc=uc.notification,gc=B.downloadTextFile;class mc extends Ml{constructor(e,t="",i=void 0){super({force_footer:!0}),this.string=e,this.explanation=t,this.file_name=i}render(){super.render(),this.title.set("Export"),c("<p></p>").text(this.explanation).appendTo(this.body),this.textarea=new Nl({readonly:!0}).setValue(this.string).css2({resize:"none",width:"100%",height:"20em"}).on("click",(()=>this.textarea.raw().select())).appendTo(this.body)}getButtons(){const e=[new Dl("Cancel","cancel").onClick((()=>this.remove())),new Dl("Copy","confirm").onClick((async()=>{try{await navigator.clipboard.writeText(this.string),pc("String copied to clipboard!").show()}catch(e){pc("Copying failed!","error").show()}}))];return this.file_name&&this.file_name.length>0&&e.push(new Dl("Save File","confirm").onClick((async()=>{try{gc(this.file_name,this.string)}catch(e){pc("Saving failed!","error").show()}}))),e}static do(e,t="",i=void 0){return new mc(e,t,i).show()}}var fc=uc.notification;class yc extends Il{constructor(e){super(),this.parser=e}render(){super.render(),this.title.set("Import"),this.textarea=new Nl({placeholder:"Paste the shareable string here."}).css2({resize:"none",width:"100%",height:"20em"}).appendTo(this.body),this.textarea.onChange((e=>{this.import_button.setEnabled(!!e.value)}))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.confirm(null))),this.import_button=new Dl("Import","confirm").setEnabled(!1).onClick((()=>{try{let e=this.parser(this.textarea.get());if(null==e)return void fc("Invalid input").setType("error").show();this.confirm({imported:e})}catch(e){alert(`Invalid input: ${e.toString()}`)}}))]}}var vc=B.cleanedJSON;class _c extends si{constructor(e){super(),this.editor=e,this.addClass("ctr-menurow");{const e=new yl("Undo","rectangle").onClick((()=>this.editor.value.undoredo.undo())),t=new yl("Redo","rectangle").onClick((()=>this.editor.value.undoredo.redo()));e.enabled.bindTo(this.editor.value.undoredo.canUndo),t.enabled.bindTo(this.editor.value.undoredo.canRedo),this.append(e,t,new yl("Bookmarks","rectangle").onClick((e=>{new wi(lc.getContextMenu(this.editor.value,this.editor.bookmarks)).showFromEvent(e)})),new yl("Save","rectangle").onClick((()=>{this.editor.options.commit_handler(this.editor.value.get())})).setEnabled(!!this.editor.options.commit_handler),new yl("Close","rectangle").setEnabled(!!this.editor.options.discard_handler).onClick((()=>{this.editor.discard()})),new yl("","rectangle").setInnerHtml("&#x2630;").onClick((e=>{const t=[];this.editor.options.target&&t.push({type:"basic",text:"Focus target",handler:()=>{this.editor.game_layer.getMap().fitView(Vr.toRect(this.editor.options.target.parent))}}),t.push({type:"basic",text:"Export",handler:()=>{new mc(Rs.export_path(this.editor.value.get())).show()}},{type:"basic",text:"Show JSON",handler:()=>{new mc(vc(this.editor.value.get())).show()}},{type:"basic",text:"Import",handler:async()=>{const e=await new yc((e=>Rs.import_path(e))).do();(null==e?void 0:e.imported)&&this.editor.value.set(e.imported)}}),new wi({type:"submenu",text:"",children:t}).showFromEvent(e)})))}}}var xc=Ks.arrow,wc=ui.observe_combined;class bc extends Us{constructor(e){super({preview_render:([e,t])=>xc(e,t).setStyle({weight:3,color:"gold"})}),this.allow_off_grid=e,this.start_position=mi(null).equality(W.eq2),this.previewed_target_position=mi(null).equality(W.eq2),this.snap_target_position=mi(!0),wc({start:this.start_position,target:this.previewed_target_position,snap:this.snap_target_position}).subscribe((({start:e,target:t,snap:i})=>{e&&t&&(i?this.preview([e,W.snap(t)]):this.preview([e,t]))})),this.attachTopControl((new qs).setName("Drawing arrow")),this.start_position.subscribe((()=>this.updateInstructions()),!0)}updateInstructions(){this.top_control&&(this.start_position.value()?this.top_control.setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Click] target tile to confirm.")).append(this.allow_off_grid?c().text("[Shift] to disable tile snapping."):void 0).append(c().text("[Backspace] to reset start tile."))):this.top_control.setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Click] tile to set start position.")).append(this.allow_off_grid?c().text("[Shift] to disable tile snapping."):void 0)))}setStartPosition(e){return this.start_position.set(e),this}eventClick(e){e.onPost((async()=>{e.stopAllPropagation(),this.start_position.value()?this.snap_target_position.value()?this.commit([this.start_position.value(),e.tile()]):this.commit([this.start_position.value(),e.coordinates]):this.start_position.set(e.coordinates)}))}eventHover(e){e.onPost((()=>{this.start_position.value()&&this.previewed_target_position.set(e.coordinates)}))}eventKeyDown(e){e.onPre((()=>{null!=this.start_position.value()&&"Backspace"==e.original.key&&(e.stopAllPropagation(),this.start_position.set(null))})),this.allow_off_grid&&e.onPost((()=>{"Shift"==e.original.key&&this.snap_target_position.set(!1)}))}eventKeyUp(e){this.allow_off_grid&&e.onPost((()=>{"Shift"==e.original.key&&this.snap_target_position.set(!0)}))}}var kc=B.cleanedJSON,Tc=uc.notification,Sc=Vr.activate;class Cc extends Us{constructor(e=[],t=!1){super({preview_render:e=>a.featureGroup(e.map((e=>Qr(e).setStyle({color:"blue",fillOpacity:.4,stroke:!1}))))}),this.show_commands=t,this.tiles=[],this.tiles=e,this.preview(this.tiles),this.attachTopControl(new qs({name:"Draw Tile Area"}).setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Shift + Mouse] add tiles")).append(c().text("[Alt + Mouse] remove tiles")).append(c().text("Hold [Ctrl] to draw rectangles")).append(this.show_commands?(new Ll).buttons(new yl("Commit").onClick((()=>{this.commit(this.tiles)})),new yl("Copy").onClick((()=>{this.tiles.length>0?(navigator.clipboard.writeText(kc(Vr.fromTiles(this.tiles))),Tc("Copied").show()):Tc("No tiles","error")})),new yl("Copy Array").onClick((()=>{this.tiles.length>0?(navigator.clipboard.writeText(kc(this.tiles)),Tc("Copied").show()):Tc("No tiles","error")})),new yl("Reset").onClick((()=>{this.tiles=[],this.preview(this.tiles)}))):void 0)))}onAdd(e){return super.onAdd(e),e.dragging.disable(),this}onRemove(e){return super.onRemove(e),e.dragging.enable(),this}set(e,...t){let i=!1;t.forEach((t=>{const n=this.tiles.findIndex((e=>W.eq2(e,t)));e!==n>=0&&(e?this.tiles.push(t):this.tiles.splice(n,1),i=!0)})),i&&this.preview(this.tiles)}toggle(e){const t=this.tiles.findIndex((t=>W.eq2(t,e))),i=t>=0;return i?this.tiles.splice(t,1):this.tiles.push(e),this.preview(this.tiles),!i}eventMouseDown(e){super.eventMouseDown(e),e.onPost((()=>{if(e.original.shiftKey||e.original.altKey){e.original.preventDefault();const t=e.original.shiftKey;this.getMap().dragging.disable(),e.original.ctrlKey?this.activeRectangleDrawing||(this.activeRectangleDrawing=new bc(!1).attachTopControl(null).setStartPosition(e.tile()).setPreviewFunction((([e,i])=>ts(F.from(e,i)).setStyle({color:t?"green":"red",stroke:!0}))).onCommit((([e,i])=>{this.activeRectangleDrawing&&(this.activeRectangleDrawing.remove(),this.activeRectangleDrawing=null);const n=Z.from(e,i);this.set(t,...Sc(Vr.fromRect(n)).getTiles())})).addTo(this)):(this.drawing={additive:e.original.shiftKey},this.set(t,e.tile()))}}))}eventMouseUp(e){e.onPost((()=>{this.drawing=null,this.getMap().dragging.enable()}))}eventHover(e){super.eventHover(e),e.onPost((()=>{this.drawing&&e.onPost((()=>{this.set(this.drawing.additive,e.tile())}))}))}}var Ec,Ac,zc,Lc,Pc,Mc,Ic,Oc=B.index,Dc=Vr.activate,Rc=di.vbox,Bc=As.TeleportGroup,Nc=Ds.resolveTeleport,jc=As.EntityAction.interactiveArea,Fc=(As.EntityAction,As.TeleportGroup.TeleportAccess),qc=uc.notification,Uc=Ks.arrow;class Hc extends os{constructor(e,t){super(),this.editor=e,t&&new gl(!0).addTo(this)}eventContextMenu(e){e.onPost((()=>{var t,i,n;if(this.editor.isActive())if(e.setTitle(`${e.tile().x} | ${e.tile().y} | ${e.tile().level}`),e.active_entity){if(e.active_entity instanceof la){const t=e.active_entity.teleport;if(1==t.group.access.length){const i=t.group.access[0];e.addForEntity({type:"basic",text:()=>c().append("Use via ",la.accessNameAsWidget(i)),handler:()=>{this.editor.value.add({type:"teleport",spot:t.centerOfTarget(),id:{...t.id(),access:i.id}})}})}else e.addForEntity({type:"submenu",text:"Use via",children:t.group.access.map((e=>({type:"basic",text:()=>c().append(la.accessNameAsWidget(e)),handler:()=>{this.editor.value.add({type:"teleport",spot:t.centerOfTarget(),id:{...t.id(),access:e.id}})}})))})}else if(e.active_entity instanceof al){const t=e.active_entity.access,i=e.active_entity.teleport;e.addForEntity({type:"submenu",text:`Use action '${t.action_name}'`,children:e.active_entity.teleport.spots.map((e=>{const n=new Bc.Spot(i,e,t);return{type:"basic",icon:`assets/icons/teleports/${n.image().url}`,text:n.code()?`${e.code}: ${e.name}`:e.name,handler:async()=>{var e,i;const o=null===(i=null===(e=this.editor.value.cursor_state.value().state)||void 0===e?void 0:e.position)||void 0===i?void 0:i.tile;let r=o;const s=Fc.interactiveArea(t),a=[];if(o&&!Dc(s).query(o)){const e=await Ur.find(Ur.init_djikstra(o),s);e&&e.length>1?(r&&(r=Oc(e,-1)),a.push({type:"run",waypoints:e})):qc("No path to transportation found.","error").show()}a.push({type:"teleport",spot:n.centerOfTarget(),id:{...n.id(),access:t.id}}),this.editor.value.add(...a)}}}))})}else if(e.active_entity instanceof el){let t=As.normalize(e.active_entity.shortcut);t.actions.forEach((i=>{e.addForEntity({type:"basic",text:`Use action '${i.name}'`,icon:Zs.meta(i.cursor).icon_url,handler:async()=>{var e,n;const r=null===(n=null===(e=this.editor.value.cursor_state.value().state)||void 0===e?void 0:e.position)||void 0===n?void 0:n.tile;let s=r;const a=jc(t,i),l=[];if(r&&!Dc(a).query(r)){const e=await Ur.find(Ur.init_djikstra(r),a);e&&e.length>1?(s&&(s=Oc(e,-1)),l.push({type:"run",waypoints:e})):qc("No path to transportation found.").show()}null!=s||(s=r?Z.clampInto(r,Vr.toRect(a)):Dc(a).center());let c=o.cloneDeep(t);c.actions=[o.cloneDeep(i)],this.editor.value.add(...l,{type:"transport",assumed_start:s,internal:c})}})}))}else if(e.active_entity instanceof hl);else if(e.active_entity instanceof da){const t=this.editor.value.committed_value.value().steps.find((t=>t.associated_preview==e.active_entity));t&&e.addForEntity(...this.editor.contextMenu(t).children)}}else{const o=null===(n=null===(i=null===(t=this.editor.value.cursor_state.value())||void 0===t?void 0:t.state)||void 0===i?void 0:i.position)||void 0===n?void 0:n.tile,r=e.tile();o&&!W.eq2(o,r)&&e.add({type:"basic",text:"Walk here",icon:"assets/icons/yellowclick.png",handler:async()=>{const e=await Ur.find(Ur.init_djikstra(this.editor.value.cursor_state.value().state.position.tile),Vr.init(r));e&&e.length>1?this.editor.value.add({type:"run",waypoints:e}):qc("No path found.","error").show()}}),e.add({type:"submenu",text:"Redclick",icon:"assets/icons/cursor_redclick.png",children:Zs.all().map((t=>({type:"basic",text:t.description,icon:t.icon_url,handler:()=>{this.editor.value.add({type:"redclick",target:Zs.defaultEntity(t.type),where:e.tile(),how:t.type})}})))})}}))}eventKeyDown(e){e.onPost((()=>{const t=e.original;(()=>t.ctrlKey&&"z"==t.key.toLowerCase()?(t.shiftKey?this.editor.value.undoredo.redo():this.editor.value.undoredo.undo(),!0):t.ctrlKey&&"y"==t.key.toLowerCase()?(this.editor.value.undoredo.redo(),!0):t.ctrlKey&&"s"==t.key.toLowerCase()?(this.editor.commit(),!0):"Backspace"==t.key?(this.editor.value.delete(this.editor.value.cursor-1),!0):"Delete"==t.key&&(this.editor.value.delete(this.editor.value.cursor),!0))()&&(e.stopAllPropagation(),t.preventDefault())}))}}class Vc extends Ls{constructor(e,t,i,n){super(),this.game_layer=e,this.template_resolver=t,this.options=i,this.control=null,this.handler_layer=null,this.overlay_control=null,this.you_are_here_marker=null,this.bookmarks=new lc,this.handler_layer=new Hc(this,n),this.value=new Cl({target:this.options.target,start_state:this.options.start_state},i.initial),this.handler_layer.add(this.value.preview_layer),this.value.cursor_state.subscribe((({state:e})=>{this.action_bar&&this.action_bar.state.set(e),this.you_are_here_marker&&(this.you_are_here_marker.remove(),this.you_are_here_marker=null),e.position.tile&&(this.you_are_here_marker=a.marker(j.toLatLong(e.position.tile),{icon:a.icon({iconUrl:"assets/icons/youarehere.png",iconSize:[25,25],iconAnchor:[13,13]})}).addTo(this.handler_layer))})),new ds({position:"left-top",type:"floating"},Rc(new _c(this),this.control=new bl(this))).addTo(this.handler_layer),this.overlay_control=new wa(this).addTo(this.handler_layer),this.interaction_guard=(new ms).setDefaultLayer(this.handler_layer),this.action_bar=new $a(this,this.interaction_guard).addTo(this.handler_layer)}begin(){this.handler_layer.addTo(this.game_layer),this.game_layer.getMap().container.focus(),this.options.target&&is(this.options.target.parent).addTo(this.handler_layer)}end(){this.handler_layer.remove()}discard(){this.options.discard_handler&&(this.options.discard_handler(),this.stop())}commit(){var e,t;null===(t=(e=this.options).commit_handler)||void 0===t||t.call(e,this.value.get())}close(){this.discard(),this.stop()}editStep(e,t,i=!0){this.interaction_guard.set(t.onStart((()=>{var t;i&&(null===(t=e.associated_preview)||void 0===t||t.setVisible(!1)),this.overlay_control.lens_layer.enabled2.set(!1)})).onEnd((()=>{var t,n;i?null===(t=e.associated_preview)||void 0===t||t.setVisible(!0):null===(n=e.associated_preview)||void 0===n||n.render(!0),this.overlay_control.lens_layer.enabled2.set(!0)})))}async editStepDetails(e){const t=await new sc(e.step.raw).do();t.new_version&&this.value.update(e.index,t.new_version)}redrawAbility(e){const t=e.step.raw;"ability"==t.type?this.editStep(e,new Sa(t.ability).setStartPosition(t.from).onCommit((t=>e.update((e=>Object.assign(e,t)))))):"run"==t.type?this.editStep(e,(new Pa).setStartPosition(t.waypoints[0]).onCommit((t=>e.update((e=>Object.assign(e,t)))))):"cheat"==t.type&&this.editStep(e,new Ba(t.assumed_start).onCommit((t=>e.update((e=>Object.assign(e,t))))))}moveStep(e){const t=e.step;if("redclick"==t.raw.type)this.editStep(e,new Ra(t.raw.how).onCommit((t=>e.update((e=>{e.where=t.where})))));else if("powerburst"==t.raw.type)this.editStep(e,new Ma({preview_render:e=>new da({type:"powerburst",where:e})}).onCommit((t=>e.update((e=>{e.where=t})))).attachTopControl((new qs).setName("Selecting tile").setText("Select the location of the powerburst by clicking the tile.")));else if("teleport"==t.raw.type){const i=Nc(t.raw.id);this.editStep(e,new Ma({preview_render:e=>(ra("teleport"==t.raw.type),Dc(i.targetArea()).query(e)?new da({type:"teleport",id:t.raw.id,spot:e}):Qr(e).setStyle({fillColor:"red",color:"red",stroke:!0}))}).addLayer(is(i.targetArea()).setStyle({fillColor:"lightgreen",color:"lightgreen",stroke:!0})).onCommit((t=>e.update((e=>{e.spot=t})))).attachTopControl((new qs).setName("Selecting tile").setText("Select the specific target of the teleport by clicking the tile.")))}else"cosmetic"==t.raw.type&&this.editStep(e,new Na(t.raw).onCommit((t=>e.update((e=>{Object.assign(e,t)})))))}contextMenu(e){const t=[],i=e.step.raw;if(t.push({type:"basic",icon:"assets/icons/edit.png",text:"Edit",handler:()=>this.editStepDetails(e)}),t.push({type:"basic",icon:"assets/icons/delete.png",text:"Remove",handler:()=>e.delete()}),"ability"!=e.step.raw.type&&"run"!=e.step.raw.type&&"cheat"!=e.step.raw.type||t.push({type:"basic",icon:"assets/icons/edit.png",text:"Redraw on map",handler:()=>this.redrawAbility(e)}),"powerburst"!=e.step.raw.type&&"redclick"!=e.step.raw.type&&"teleport"!=e.step.raw.type&&"cosmetic"!=e.step.raw.type||t.push({type:"basic",icon:"assets/icons/move.png",text:"Move on map",handler:()=>this.moveStep(e)}),"orientation"==e.step.raw.type&&t.push({type:"submenu",icon:"assets/icons/compass.png",text:"Choose Direction",children:qr.all.map((t=>({type:"basic",text:qr.toString(t),handler:()=>{e.update((e=>e.direction=t))}})))}),"cheat"==e.step.raw.type&&t.push({type:"submenu",icon:"assets/icons/Rotten_potato.png",text:"Choose Orientation",children:[void 0].concat(qr.all).map((t=>{var i;return{type:"basic",text:null!==(i=qr.toString(t))&&void 0!==i?i:"None",handler:()=>{e.update((e=>e.orientation=t))}}}))}),"redclick"==e.step.raw.type&&t.push({type:"submenu",icon:"assets/icons/cursor_redclick.png",text:"Choose Cursor",children:Zs.all().map((t=>({type:"basic",text:t.description,icon:t.icon_url,handler:()=>{e.update((e=>e.how=t.type))}})))}),"ability"==i.type&&("dive"==i.ability||"barge"==i.ability)||"run"==i.type){const n="ability"==i.type?da.ability_rendering[i.ability].color:da.run_rendering_area_color;t.push({type:"basic",text:"Edit target area",handler:()=>{this.editStep(e,new Cc(i.target_area?Dc(i.target_area).getTiles():[]).setPreviewFunction((e=>a.featureGroup(e.map((e=>Qr(e).setStyle({color:n,fillOpacity:.4,stroke:!1})))))).onPreview((e=>{i.target_area=e.length>0?Vr.fromTiles(e):void 0})),!1)}})}if("cosmetic"==e.step.raw.type){const i=e.step.raw;t.push({type:"basic",text:"Edit area",handler:()=>{this.editStep(e,new Cc(i.area?Dc(i.area).getTiles():[]).setPreviewFunction((e=>a.featureGroup(e.map((e=>{var t;return Qr(e).setStyle({color:null!==(t=i.arrow_color)&&void 0!==t?t:Rs.COSMETIC_DEFAULT_COLORS.area,fillOpacity:.4,stroke:!1})}))))).onPreview((e=>{i.area=e.length>0?Vr.fromTiles(e):void 0})))}}),t.push({type:"basic",text:"Edit arrow",handler:()=>{this.editStep(e,new bc(!0).setPreviewFunction((([e,t])=>{var n;return Uc(e,t).setStyle({weight:4,color:null!==(n=i.arrow_color)&&void 0!==n?n:Rs.COSMETIC_DEFAULT_COLORS.arrow})})).onCommit((e=>{i.arrow=e})))}})}return{type:"submenu",text:"",children:t}}}!function(e){var t=Hr.isFarDive;e.normalizeFarDive=async function(e){return"ability"!=e.type||"dive"!=e.ability?e:{...e,is_far_dive:await t(e.from,e.to)}}}(Vc||(Vc={}));class $c extends si{constructor(e){super(),this.addClass("ctr-map-sidebar"),this.header=new js(e).appendTo(this),this.body=c("<div style='flex-grow: 1; overflow-y: auto; overflow-x: hidden'></div>").appendTo(this)}}!function(e){e.values=["easy","medium","hard","elite","master","tetracompass","sandy"]}(Ec||(Ec={})),function(e){e.meta=function(e){return{easy:{icon_url:"assets/icons/sealedeasy.png",name:"Easy"},medium:{icon_url:"assets/icons/sealedmedium.png",name:"Medium"},hard:{icon_url:"assets/icons/sealedhard.png",name:"Hard"},elite:{icon_url:"assets/icons/sealedelite.png",name:"Elite"},master:{icon_url:"assets/icons/sealedmaster.png",name:"Master"},tetracompass:{icon_url:"assets/icons/tetracompass.png",name:"Tetracompass"},sandy:{icon_url:"assets/icons/sandcastle.png",name:"Sandy"},anagram:{icon_url:"assets/icons/activeclue.png",name:"Anagram"},compass:{icon_url:"assets/icons/arrow.png",name:"Compass"},coordinates:{icon_url:"assets/icons/sextant.png",name:"Coordinate"},cryptic:{icon_url:"assets/icons/activeclue.png",name:"Cryptic"},emote:{icon_url:"assets/icons/emotes.png",name:"Emote"},map:{icon_url:"assets/icons/map.png",name:"Map"},scan:{icon_url:"assets/icons/scan.png",name:"Scan"},simple:{icon_url:"assets/icons/activeclue.png",name:"Simple"},skilling:{icon_url:"assets/icons/skills.webp",name:"Skilling"}}[e]},e.pretty=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""},e.all=["simple","cryptic","emote","map","anagram","coordinates","compass","scan","skilling"]}(Ac||(Ac={})),function(e){let t,i;function n(e){return Vr.fromRect(o(e))}function o(e){return{topleft:{x:e.x-1,y:e.y+1},botright:{x:e.x+1,y:e.y-1},level:e.level}}!function(e){e.solution=function(e){return e.solution?e.solution:"coordinates"==e.type?{type:"dig",spot:s.toCoords(e.coordinates),description:null}:null},e.shortString=function(e,t=0){let i=Math.max(0,Math.min(e.text.length-1,t));switch(e.type){case"anagram":return`Anagram: ${e.anagram[i]}`;case"map":return`Map: ${e.text[i]}`;case"coordinates":return s.toString(e.coordinates);case"scan":return`Scan ${e.scantext} (${e.range} tiles)`;default:return e.text[i]}}}(t=e.Step||(e.Step={})),function(i){var o=As.EntityTransportation.default_interactive_area;let r;!function(e){e.equals=function(e,t){return(null==e?void 0:e.clue)==(null==t?void 0:t.clue)&&((null==e?void 0:e.spot)==(null==t?void 0:t.spot)||W.eq2(null==e?void 0:e.spot,null==t?void 0:t.spot))}}(r=i.Id||(i.Id={})),i.shortString=function(e,i=0){return"compass"==e.clue.type?`Compass spot ${j.toString(e.spot)}`:t.shortString(e.clue,i)},i.targetArea=function(t){if(t.spot)return n(t.spot);const i=e.Step.solution(t.clue);if(i)switch(i.type){case"search":return o(i.spot);case"dig":return n(i.spot);case"talkto":return i.spots[0].range}return"emote"==t.clue.type?t.clue.area:"scan"==t.clue.type?Vr.fromRect(Z.from(...t.clue.spots)):void 0},i.toId=function(e){return{clue:e.clue.id,spot:e.spot}}}(i=e.ClueSpot||(e.ClueSpot={})),e.digSpotArea=n,e.digSpotRect=o,e.requiresKey=function(e){return e.solution&&"search"==e.solution.type&&!!e.solution.key}}(zc||(zc={})),function(e){function t(e,t){return j.max_axis(j.sub(e,t))}let i;function n(e){return{x:e.x,y:(e.y+6400)%12800,level:e.level}}e.get_pulse=function(e,i,o){let r=t(e,i),s=3-Math.min(2,Math.floor(Math.max(0,r-1)/o));return ra(s>=1&&s<=3),{pulse:s,different_level:e.level!=i.level||t(n(e),i)<=o+15}},e.distance=t,function(e){var t=B.Order.natural_order,i=B.Order;function n(e){return e.pulse-1+(e.different_level?3:0)}function o(e,t){return e.different_level?t.some((t=>t.pulse==e.pulse&&!t.different_level))?1==B.count(t,(e=>e.different_level))?{type:null,text:"DL"}:{type:e.pulse,text:"DL"}:{type:e.pulse,text:null}:B.count(t,(e=>e.different_level))==t.length-1?{type:null,text:"TF"}:{type:e.pulse,text:null}}e.hash=n,e.unhash=function(e){return{pulse:e%3+1,different_level:e>=3}},e.equals=function(e,t){return e.pulse==t.pulse&&e.different_level==t.different_level},e.all=[{pulse:1,different_level:!1},{pulse:2,different_level:!1},{pulse:3,different_level:!1},{pulse:1,different_level:!0},{pulse:2,different_level:!0},{pulse:3,different_level:!0}],e.meta=function(e){let t=["Single","Double","Triple"][e.pulse-1];return e.different_level?{pretty:1==e.pulse?"Different Level":t+" (DL)",short:1==e.pulse?"DL":"DL"+e.pulse,shorted:1==e.pulse?'"DL"':'"DL"'+e.pulse}:{pretty:t,short:e.pulse.toString(),shorted:e.pulse.toString()}},e.simplify_with_context=o,e.pretty_with_context=function(e,t){let{type:i,text:n}=o(e,t);if(null==i)switch(n){case"DL":return"Different level";case"TF":return"Too far";case null:return"NULL"}else{let e=["Single","Double","Triple"][i-1];switch(n){case"DL":return`Different Level (${e})`;case"TF":return"NULL";case null:return e}}},e.compare=function(e,i){return t(n(e),n(i))},e.comp=i.comap(t,n)}(i=e.Pulse||(e.Pulse={})),e.complementSpot=n}(Lc||(Lc={})),function(e){var t=Lc.Pulse,i=Lc.get_pulse,n=Vr.activate,r=Lc.complementSpot,s=Lc.distance;let a;function l(e,a,l){if(!a.data){const t=Vr.toRect(a);let n,c=i(e,Z.clampInto(e,t),l).pulse;if(1==c){n=[];let i=r(e);(e.level!=t.level||s(i,F.clampInto(i,t))<=l+15)&&n.push({pulse:1,different_level:!0}),(s(i,t.topleft)>l+15||s(i,t.botright)>l+15)&&e.level==t.level&&n.push({pulse:1,different_level:!1})}else{let r=Math.min(i(e,Z.tl(t),l).pulse,i(e,Z.br(t),l).pulse);n=(0,o.rangeRight)(r,c+1,1).map((i=>({pulse:i,different_level:e.level!=t.level})))}return n}const c=[];return n(a).getTiles().forEach((n=>{c.push(t.hash(i(e,n,l)))})),[...new Set(c).values()].map(t.unhash)}function c(e,i,n){return e.filter((e=>l(e,i.area,n).some((e=>t.equals(i,e)))))}!function(e){e.equals=function(e,i){return t.equals(e,i)&&!(3==e.pulse&&3==i.pulse&&!W.eq2(null==e?void 0:e.spot,i.spot))}}(a=e.PulseInformation||(e.PulseInformation={})),e.spot_narrowing=function(e,i,n){return t.all.flatMap((t=>{let o=c(e,{area:i,pulse:t.pulse,different_level:t.different_level},n);return 3==t.pulse?o.map((e=>({pulse:{pulse:3,different_level:t.different_level,spot:e},narrowed_candidates:[e]}))):[{pulse:t,narrowed_candidates:o}]}))},e.area_pulse=l,e.narrow_down=c}(Pc||(Pc={})),function(e){var t=Rs.movement_state,i=zc.digSpotArea,n=Pc.PulseInformation,r=Pc.spot_narrowing;let s;function a(e,t){return e.ordered_spots.findIndex((e=>j.eq(e,t)))+1}function l(e){var t;return(e.raw.path.length>0?e.raw.path.filter((e=>"cosmetic"!=e.type)).map(Ys.templateString).join(" - "):"Go")+(0==e.raw.path.length||(null===(t=e.raw.region)||void 0===t?void 0:t.name)||1==e.remaining_candidates.length?" to {{target}}":"")}!function(e){var s=B.avg,l=Rs.ends_up,c=Vr.activate;async function u(e,n){return e.state.paths_augmented||(await async function e(t,n){var r;if(t.path=await Rs.augment(t.raw.path,n,1==t.remaining_candidates.length?c(i(t.remaining_candidates[0])):(null===(r=t.region)||void 0===r?void 0:r.area)?c(t.region.area):null),t.children.length>0){let i=o.cloneDeep(t.path.post_state);i.tick+=1,await Promise.all(t.children.map((t=>e(t.value,i))))}}(e.root_node,t.start(n)),e.state.paths_augmented=!0),e}function h(e,t){let i={raw:e,clue:t,root_node:null,state:{paths_augmented:!1,completeness_analyzed:!1,correctness_analyzed:!1,timing_analysis:null}};return i.root_node=function t(o,s,a,l,c){var u,h,d;let p={root:i,parent:s,region:{area:(null===(u=o.region)||void 0===u?void 0:u.area)||Rs.endsUpArea(o.path)||c,name:null!==(d=null===(h=o.region)||void 0===h?void 0:h.name)&&void 0!==d?d:""},raw:o,depth:a,remaining_candidates:l,children:[]};if(o.children.length>0){let i=r(l,p.region.area,e.assumed_range);p.children=o.children.map((e=>({key:e.key,value:t(e?e.value:null,{node:p,key:e.key},a+1,i.find((t=>n.equals(t.pulse,e.key))).narrowed_candidates,p.region.area)})))}return p}(e.root,null,0,e.ordered_spots,null),i}function d(e){if(!e.state.paths_augmented)throw new TypeError("Trying to analyze a decision tree for correctness without augmented paths!");return e.state.correctness_analyzed||(function e(t){t.children.forEach((t=>e(t.value)));let i=t.children.map((e=>e.value)),n=Rs.collect_issues(t.path);n.some((e=>0==e.level))?t.correctness="error":i.some((e=>"error"==e.correctness||"error_in_children"==e.correctness))?t.correctness="error_in_children":n.some((e=>1==e.level))||i.some((e=>"correct_with_warnings"==e.correctness))?t.correctness="correct_with_warnings":t.correctness="correct"}(e.root_node),e.state.correctness_analyzed=!0),e}function p(e){return e.state.completeness_analyzed||(function e(t){t.children.forEach((t=>e(t.value)));let n=t.children.map((e=>e.value));if(t.completeness="complete",t.remaining_candidates.length>1&&0==n.length)t.completeness="incomplete";else if(n.some((e=>"incomplete"==e.completeness||"incomplete_children"==e.completeness)))t.completeness="incomplete_children";else if(1==t.remaining_candidates.length){const e=l(t.raw.path);e&&c(i(t.remaining_candidates[0])).query(e)||(t.completeness="incomplete")}}(e.root_node),e.state.completeness_analyzed=!0),e}function g(e){let t=e.raw.ordered_spots.map((e=>({spot:e,timings:[],average:0})));return m.traverse(e.root_node,(e=>{if(0==e.children.length){let i="complete"==e.completeness;e.remaining_candidates.forEach((n=>{t.find((e=>W.eq2(e.spot,n))).timings.push({ticks:e.path.post_state.tick,incomplete:!i})}))}})),t.forEach((e=>e.average=s(...e.timings.map((e=>e.ticks))))),e.state.timing_analysis={spots:t,average:s(...t.map((e=>e.average)))},e}let m;e.completeness_meta=function(e){return{complete:{char:"",cls:"ctr-correct",desc:"This branch is complete."},correct:{char:"",cls:"ctr-correct",desc:"All paths are correct."},correct_with_warnings:{char:"",cls:"ctr-semicorrect",desc:"All paths are correct, but some have warnings."},error:{char:"!",cls:"ctr-incorrect",desc:"There is an error in this path."},error_in_children:{char:"!",cls:"ctr-semiincorrect",desc:"A child path has errors."},incomplete:{char:"?",cls:"ctr-incorrect",desc:"This branch is incomplete."},incomplete_children:{char:"?",cls:"ctr-semiincorrect",desc:"Branch has incomplete children."}}[e]},e.path_augmentation=u,e.basic_augmentation=h,e.analyze_correctness=d,e.analyze_completeness=p,e.analyze_timing=g,e.augment=async function(e,t,i){let n=h(t,i);return e.augment_paths&&await u(n,e.path_assumptions),e.analyze_correctness&&d(n),e.analyze_completeness&&p(n),e.analyze_timing&&g(n),n},function(e){e.decision_string=function(e){let t=(()=>{var t;if(e.parent){let i=(null===(t=e.parent.node.region)||void 0===t?void 0:t.name)||"",n=e.parent.key,o=e.parent.node.children.map((e=>e.key));return n.different_level?o.some((e=>e.pulse==n.pulse&&!e.different_level))?1==B.count(o,(e=>e.different_level))?i.length>0?`${i},DL`:"DL":`${i}${n.pulse}DL`:n.pulse.toString():B.count(o,(e=>e.different_level))==o.length-1?i.length>0?`${i},Far`:"Far":`${i}${n.pulse.toString()}`}return"Start"})();return 1==e.remaining_candidates.length?`${t}: Sp. ${a(e.root.raw,e.remaining_candidates[0])}`:t},e.collect_parents=function e(t,i=!0){var n;if(!t)return[];let o=e(null===(n=t.parent)||void 0===n?void 0:n.node,!0);return i&&o.push(t),o},e.traverse=function e(t,i,n=!0){n&&t&&i(t),t.children.forEach((t=>e(t.value,i,!0)))}}(m=e.AugmentedScanTree||(e.AugmentedScanTree={}))}(s=e.Augmentation||(e.Augmentation={})),e.traverse=function e(t,i){t&&i(t),t.children.forEach((t=>e(t.value,i)))},e.init=function(e){return{assumed_range:e.range,ordered_spots:e.spots,root:{children:[],directions:"",path:[]}}},e.init_leaf=function(){return{children:[],directions:"",path:[]}},e.normalize=function(e){return e.root||(e.root={children:[],directions:"",path:[]}),function t(i,o){var s;let a=(null===(s=i.region)||void 0===s?void 0:s.area)||Rs.endsUpArea(i.path),l=a?r(o,a,e.assumed_range).filter((e=>e.narrowed_candidates.length>0)).map((({pulse:e,narrowed_candidates:t})=>({child:i.children.find((t=>n.equals(e,t.key)))||{key:e,value:{children:[],directions:"",path:[]}},candidates:t}))):[];1==l.length&&(l=[]),i.children=l.map((e=>e.child)),l.forEach((({child:e,candidates:i})=>{t(e.value,i)}))}(e.root,e.ordered_spots),e},e.spotNumber=a,e.defaultScanTreeInstructions=l,e.getInstruction=function(e){return e.raw.directions||l(e)},e.getTargetRegion=function(e){var t,i,n,o;return 1==e.remaining_candidates.length?null:{area:null!==(i=null===(t=e.raw.region)||void 0===t?void 0:t.area)&&void 0!==i?i:Rs.endsUpArea(e.raw.path),name:null!==(o=null===(n=e.region)||void 0===n?void 0:n.name)&&void 0!==o?o:""}}}(Mc||(Mc={})),function(e){var t=B.timestamp,i=B.uuid;let n,r;!function(e){let t;e.init=function(){return{double_escape:!0,double_surge:!0,full_globetrotter:!0,meerkats_active:!0,mobile_perk:!0,way_of_the_footshaped_key:!0}},e.filterWithRelevance=function(e,t){const i=o.cloneDeep(e);for(let e of Object.keys(i))t.includes(e)||(i[e]=void 0);return i},function(e){e.all=["double_escape","double_surge","mobile_perk","way_of_the_footshaped_key","full_globetrotter","meerkats_active"],e.forSpot=function(e){const t=["double_escape","double_surge","mobile_perk"];return e.clue.solution&&"search"==e.clue.solution.type&&e.clue.solution.key&&t.push("way_of_the_footshaped_key"),"emote"==e.clue.type&&e.clue.hidey_hole&&t.push("full_globetrotter"),"scan"==e.clue.type&&t.push("meerkats_active"),t}}(t=e.Relevance||(e.Relevance={}))}(n=e.ClueAssumptions||(e.ClueAssumptions={})),function(e){e.meta=function(e){return{name:e.name,description:e.description,assumptions:e.assumptions}},e.setMeta=function(e,t){return e.name=t.name,e.description=t.description,e.assumptions=o.cloneDeep(t.assumptions),e},e.allPaths=function(e){const t=(()=>{switch(e.type){case"general_path":return[e.pre_path,e.main_path,e.post_path];case"scantree":function t(e,i){return e.push(i.path),i.children.forEach((i=>t(e,i.value))),e}return t([],e.tree.root)}})();return t.filter((e=>e&&e.length>0)),t.flat()}}(r=e.Method||(e.Method={})),e.init=function(e){var o;return"scan"==e.clue.type?{id:i(),type:"scantree",timestamp:t(),name:"",description:"",assumptions:n.init(),for:{clue:e.clue.id},tree:Mc.init(e.clue)}:{id:i(),type:"general_path",timestamp:t(),name:"",description:"",assumptions:n.init(),for:{clue:e.clue.id,spot:null!==(o=e.spot)&&void 0!==o?o:void 0},post_path:[],pre_path:[],main_path:[]}},e.clone=function(e){const t=o.cloneDeep(e);return t.id=i(),t}}(Ic||(Ic={}));var Wc,Zc,Gc=Ic.ClueAssumptions,Kc=di.vbox;class Yc extends pa{constructor(){super(),this.relevant_assumptions=Gc.Relevance.all}render(){var e;this.empty();const t=this.relevant_assumptions,i=null!==(e=this.get())&&void 0!==e?e:{};Kc(t.includes("meerkats_active")?new ma("Using Meerkats Familiar").setValue(!!i.meerkats_active).onCommit((e=>this.updateAssumptions((t=>t.meerkats_active=e)))):void 0,t.includes("full_globetrotter")?new ma("Full Globetrotter").setValue(!!i.full_globetrotter).onCommit((e=>this.updateAssumptions((t=>t.full_globetrotter=e)))):void 0,t.includes("way_of_the_footshaped_key")?new ma("Way of the foot-shaped key").setValue(!!i.way_of_the_footshaped_key).onCommit((e=>this.updateAssumptions((t=>t.way_of_the_footshaped_key=e)))):void 0,t.includes("double_surge")?new ma("Double Surge").setValue(!!i.double_surge).onCommit((e=>this.updateAssumptions((t=>t.double_surge=e)))):void 0,t.includes("double_escape")?new ma("Double Escape").setValue(!!i.double_escape).onCommit((e=>this.updateAssumptions((t=>t.double_escape=e)))):void 0,t.includes("mobile_perk")?new ma("Mobile Perk").setValue(!!i.mobile_perk).onCommit((e=>this.updateAssumptions((t=>t.mobile_perk=e)))):void 0).appendTo(this)}setRelevantAssumptions(e=Gc.Relevance.all){return this.relevant_assumptions=e,this.setValue(Gc.filterWithRelevance(this.get(),e)),this.render(),this}updateAssumptions(e){const t=o.cloneDeep(this.get());e(t),this.commit(t)}}!function(e){e.icons=function(e){let t=[];const i=e=>di.img(e).addClass("ctr-assumption-icon");return e.double_escape&&t.push(i("assets/icons/doubleescape.png").tooltip("Assumes Double Escape")),e.double_surge&&t.push(i("assets/icons/doublesurge.png").tooltip("Assumes Double Surge")),e.mobile_perk&&t.push(i("assets/icons/mobile.png").tooltip("Assumes Mobile Perk")),e.full_globetrotter&&t.push(i("assets/icons/Globetrotter_jacket.png").tooltip("Assumes Full Globetrotter")),e.meerkats_active&&t.push(i("assets/icons/Meerkats_pouch.png").tooltip("Assumes using Meerkats")),e.way_of_the_footshaped_key&&t.push(i("assets/icons/Key_(Treasure_Trails).png").tooltip("Assumes 'Way of the footshaped key' is unlocked")),t.forEach((e=>e.css("margin-left","3px"))),t}}(Yc||(Yc={}));class Jc{constructor(e,t){this.store=e,this.key=t}get(){return this.store.get(this.key)}set(e){return this.store.set(this.key,e)}}class Xc{constructor(e){this.name=e,this.db=new Promise(((t,i)=>{if(!(null===window||void 0===window?void 0:window.indexedDB))return void i("indexedDB not supported");const n=window.indexedDB.open(e,1);n.onsuccess=()=>t(n.result),n.onerror=()=>i("error"),n.onupgradeneeded=()=>{const e=n.result.createObjectStore("kv-store",{keyPath:"k"});e.transaction.oncomplete=()=>e.transaction.db}}))}async getStore(e){return(await this.db).transaction("kv-store",e).objectStore("kv-store")}get(e){return new Promise((async(t,i)=>{const n=(await this.getStore("readonly")).get(e);n.onerror=i,n.onsuccess=()=>{var e;return t(null===(e=n.result)||void 0===e?void 0:e.v)}}))}set(e,t){return new Promise((async(i,n)=>{const o=(await this.getStore("readwrite")).put({k:e,v:t});o.onsuccess=()=>i(),o.onerror=n}))}variable(e){return new Jc(this,e)}async clear(){(await this.getStore("readwrite")).clear()}static get(e){return Xc._instances[e]||(Xc._instances[e]=new Xc(e)),Xc._instances[e]}static instance(){return this.get("key-value-store")}}Xc._instances={};class Qc{constructor(e){this.data=e}get(e){return this.data[e]}filtered(){return this.data.filter((e=>!!e))}static simple(e){let t=Array(Math.max(...e.map((e=>e.id))));return e.forEach((e=>{t[e.id]={clue:e}})),new Qc(t)}with(e){return new Qc(this.data.map((t=>t?{...t,...e()}:null)))}}class eu{constructor(e){this._index=e}static simple(e){return new eu(e.data.map((e=>{let t={clue:e.clue,value:{for:{clue:e.clue}},spot_index:"compass"==e.clue.type?[]:void 0};if("compass"==e.clue.type){t.spot_index=new Array(eu.BUCKETS);for(let e=0;e<t.spot_index.length;e++)t.spot_index[e]=[];e.clue.spots.forEach((i=>{let n=j.hash(i,eu.BUCKETS);t.spot_index[n].push({spot:i,value:{for:{clue:e.clue,spot:i}}})}))}return t})))}with(e){return new eu(this._index.map((t=>({clue:t.clue,value:{...t.value,...e()},spot_index:t.spot_index?t.spot_index.map((t=>t.map((t=>({spot:t.spot,value:{...t.value,...e()}}))))):void 0}))))}get(e){var t;let i=this._index[e.clue];return e.spot||i.spot_index?e.spot&&i.spot_index?null===(t=i.spot_index[j.hash(e.spot,eu.BUCKETS)].find((t=>W.eq2(t.spot,e.spot))))||void 0===t?void 0:t.value:null:i.value}flat(){let e=[];return this.forEach((t=>e.push(t))),e}forEach(e){this._index.forEach((t=>{t&&(t.spot_index?t.spot_index.forEach((t=>{t.forEach((t=>e(t.value)))})):e(t.value))}))}}eu.BUCKETS=64,function(e){e.gielinor_compass={id:399,type:"compass",tier:"elite",text:["The compass shows where you need to go."],challenge:[{type:"wizard"},{type:"slider"},{type:"celticknot"}],spots:[{x:2413,y:2818,level:0},{x:2398,y:2862,level:0},{x:2476,y:2845,level:0},{x:2493,y:2875,level:0},{x:2546,y:2872,level:0},{x:2547,y:2826,level:0},{x:2617,y:2876,level:0},{x:2598,y:2838,level:0},{x:2445,y:2917,level:0},{x:2458,y:2893,level:0},{x:2541,y:2926,level:0},{x:2511,y:2936,level:0},{x:2578,y:2930,level:0},{x:2589,y:2898,level:0},{x:2482,y:2977,level:0},{x:2490,y:2949,level:0},{x:2511,y:2980,level:0},{x:2535,y:2958,level:0},{x:2590,y:2994,level:0},{x:2592,y:2956,level:0},{x:2640,y:2987,level:0},{x:2638,y:2948,level:0},{x:2330,y:3057,level:0},{x:2355,y:3038,level:0},{x:2393,y:3046,level:0},{x:2418,y:3040,level:0},{x:2481,y:3011,level:0},{x:2439,y:3057,level:0},{x:2564,y:3041,level:0},{x:2590,y:3063,level:0},{x:2629,y:3123,level:0},{x:2671,y:3109,level:0},{x:2579,y:3130,level:0},{x:2610,y:3076,level:0},{x:2519,y:3115,level:0},{x:2559,y:3102,level:0},{x:2449,y:3110,level:0},{x:2486,y:3134,level:0},{x:2433,y:3144,level:0},{x:2468,y:3177,level:0},{x:2498,y:3175,level:0},{x:2557,y:3164,level:0},{x:2619,y:3153,level:0},{x:2595,y:3192,level:0},{x:2651,y:3148,level:0},{x:2627,y:3172,level:0},{x:2457,y:3221,level:0},{x:2478,y:3254,level:0},{x:2543,y:3211,level:0},{x:2502,y:3249,level:0},{x:2583,y:3223,level:0},{x:2592,y:3251,level:0},{x:2634,y:3208,level:0},{x:2646,y:3251,level:0},{x:2492,y:3270,level:0},{x:2451,y:3283,level:0},{x:2506,y:3276,level:0},{x:2582,y:3266,level:0},{x:2582,y:3314,level:0},{x:2665,y:3266,level:0},{x:2650,y:3302,level:0},{x:2723,y:3277,level:0},{x:2700,y:3311,level:0},{x:2381,y:3388,level:0},{x:2410,y:3388,level:0},{x:2457,y:3331,level:0},{x:2485,y:3377,level:0},{x:2541,y:3389,level:0},{x:2513,y:3351,level:0},{x:2581,y:3340,level:0},{x:2576,y:3370,level:0},{x:2651,y:3351,level:0},{x:2662,y:3338,level:0},{x:2724,y:3360,level:0},{x:2739,y:3388,level:0},{x:2359,y:3448,level:0},{x:2392,y:3398,level:0},{x:2410,y:3419,level:0},{x:2438,y:3398,level:0},{x:2470,y:3404,level:0},{x:2522,y:3429,level:0},{x:2531,y:3405,level:0},{x:2583,y:3449,level:0},{x:2565,y:3395,level:0},{x:2677,y:3400,level:0},{x:2657,y:3451,level:0},{x:2726,y:3399,level:0},{x:2705,y:3418,level:0},{x:2765,y:3445,level:0},{x:2797,y:3428,level:0},{x:2835,y:3423,level:0},{x:2834,y:3451,level:0},{x:2926,y:3402,level:0},{x:2908,y:3431,level:0},{x:2950,y:3406,level:0},{x:2995,y:3429,level:0},{x:3055,y:3396,level:0},{x:3027,y:3454,level:0},{x:3089,y:3409,level:0},{x:3134,y:3423,level:0},{x:3158,y:3439,level:0},{x:3176,y:3400,level:0},{x:3228,y:3409,level:0},{x:3233,y:3446,level:0},{x:3276,y:3444,level:0},{x:3318,y:3426,level:0},{x:3390,y:3421,level:0},{x:3362,y:3403,level:0},{x:3411,y:3410,level:0},{x:3439,y:3454,level:0},{x:3473,y:3401,level:0},{x:3461,y:3432,level:0},{x:3538,y:3449,level:0},{x:3563,y:3408,level:0},{x:2356,y:3498,level:0},{x:2325,y:3510,level:0},{x:2394,y:3513,level:0},{x:2401,y:3458,level:0},{x:2489,y:3487,level:0},{x:2457,y:3511,level:0},{x:2504,y:3484,level:0},{x:2550,y:3475,level:0},{x:2588,y:3506,level:0},{x:2609,y:3470,level:0},{x:2649,y:3473,level:0},{x:2683,y:3491,level:0},{x:2707,y:3475,level:0},{x:2733,y:3502,level:0},{x:2777,y:3501,level:0},{x:2808,y:3474,level:0},{x:2832,y:3473,level:0},{x:2859,y:3508,level:0},{x:2937,y:3511,level:0},{x:2900,y:3501,level:0},{x:2956,y:3505,level:0},{x:2983,y:3473,level:0},{x:3035,y:3490,level:0},{x:3021,y:3470,level:0},{x:3103,y:3488,level:0},{x:3127,y:3469,level:0},{x:3145,y:3510,level:0},{x:3190,y:3464,level:0},{x:3254,y:3505,level:0},{x:3260,y:3460,level:0},{x:3317,y:3507,level:0},{x:3288,y:3460,level:0},{x:3329,y:3518,level:0},{x:3373,y:3483,level:0},{x:3420,y:3479,level:0},{x:3452,y:3476,level:0},{x:3487,y:3492,level:0},{x:3516,y:3473,level:0},{x:3529,y:3501,level:0},{x:3576,y:3481,level:0},{x:3598,y:3509,level:0},{x:3619,y:3485,level:0},{x:3649,y:3475,level:0},{x:3678,y:3518,level:0},{x:2336,y:3540,level:0},{x:2351,y:3572,level:0},{x:2418,y:3525,level:0},{x:2394,y:3574,level:0},{x:2491,y:3529,level:0},{x:2542,y:3562,level:0},{x:2677,y:3539,level:0},{x:2653,y:3578,level:0},{x:2699,y:3537,level:0},{x:2721,y:3577,level:0},{x:2757,y:3548,level:0},{x:2757,y:3581,level:0},{x:2878,y:3529,level:0},{x:2860,y:3575,level:0},{x:2928,y:3573,level:0},{x:2919,y:3535,level:0},{x:2979,y:3546,level:0},{x:2986,y:3583,level:0},{x:3052,y:3548,level:0},{x:3030,y:3520,level:0},{x:3096,y:3534,level:0},{x:3125,y:3578,level:0},{x:3153,y:3545,level:0},{x:3184,y:3559,level:0},{x:3229,y:3541,level:0},{x:3255,y:3576,level:0},{x:3289,y:3528,level:0},{x:3292,y:3574,level:0},{x:3376,y:3567,level:0},{x:3339,y:3572,level:0},{x:3418,y:3544,level:0},{x:3432,y:3544,level:0},{x:3460,y:3553,level:0},{x:3510,y:3530,level:0},{x:3571,y:3534,level:0},{x:3547,y:3524,level:0},{x:3624,y:3524,level:0},{x:3596,y:3541,level:0},{x:3655,y:3537,level:0},{x:2262,y:3605,level:0},{x:2295,y:3639,level:0},{x:2332,y:3610,level:0},{x:2347,y:3594,level:0},{x:2392,y:3599,level:0},{x:2374,y:3630,level:0},{x:2509,y:3634,level:0},{x:2559,y:3619,level:0},{x:2606,y:3635,level:0},{x:2586,y:3605,level:0},{x:2684,y:3612,level:0},{x:2669,y:3637,level:0},{x:2708,y:3589,level:0},{x:2737,y:3626,level:0},{x:2779,y:3594,level:0},{x:2780,y:3635,level:0},{x:2999,y:3606,level:0},{x:2965,y:3632,level:0},{x:3059,y:3620,level:0},{x:3028,y:3632,level:0},{x:3092,y:3605,level:0},{x:3127,y:3597,level:0},{x:3179,y:3612,level:0},{x:3146,y:3642,level:0},{x:3254,y:3624,level:0},{x:3247,y:3597,level:0},{x:3304,y:3605,level:0},{x:3278,y:3615,level:0},{x:3338,y:3638,level:0},{x:3342,y:3591,level:0},{x:3433,y:3639,level:0},{x:3403,y:3640,level:0},{x:2309,y:3669,level:0},{x:2332,y:3659,level:0},{x:2612,y:3658,level:0},{x:2643,y:3679,level:0},{x:2680,y:3676,level:0},{x:2712,y:3653,level:0},{x:2696,y:3695,level:0},{x:2756,y:3651,level:0},{x:2972,y:3682,level:0},{x:2999,y:3671,level:0},{x:2956,y:3705,level:0},{x:2965,y:3740,level:0},{x:3088,y:3678,level:0},{x:3107,y:3653,level:0},{x:3187,y:3661,level:0},{x:3142,y:3656,level:0},{x:3220,y:3667,level:0},{x:3210,y:3695,level:0},{x:3280,y:3664,level:0},{x:3315,y:3704,level:0},{x:3353,y:3664,level:0},{x:3378,y:3699,level:0},{x:3437,y:3682,level:0},{x:3423,y:3706,level:0},{x:3511,y:3670,level:0},{x:3470,y:3710,level:0},{x:2666,y:3717,level:0},{x:2686,y:3727,level:0},{x:2725,y:3751,level:0},{x:2744,y:3735,level:0},{x:2975,y:3762,level:0},{x:2985,y:3715,level:0},{x:3060,y:3767,level:0},{x:3046,y:3752,level:0},{x:3104,y:3745,level:0},{x:3116,y:3769,level:0},{x:3153,y:3744,level:0},{x:3193,y:3739,level:0},{x:3213,y:3756,level:0},{x:3255,y:3740,level:0},{x:3342,y:3732,level:0},{x:3367,y:3766,level:0},{x:3432,y:3754,level:0},{x:3430,y:3717,level:0},{x:3506,y:3734,level:0},{x:2737,y:3796,level:0},{x:2185,y:3637,level:0},{x:2960,y:3824,level:0},{x:2999,y:3791,level:0},{x:3059,y:3833,level:0},{x:3051,y:3804,level:0},{x:3101,y:3783,level:0},{x:3128,y:3822,level:0},{x:3151,y:3795,level:0},{x:3193,y:3783,level:0},{x:3250,y:3821,level:0},{x:3208,y:3792,level:0},{x:3363,y:3807,level:0},{x:3349,y:3823,level:0},{x:2958,y:3858,level:0},{x:2990,y:3883,level:0},{x:3037,y:3870,level:0},{x:3055,y:3895,level:0},{x:3088,y:3891,level:0},{x:3127,y:3891,level:0},{x:3157,y:3865,level:0},{x:3195,y:3877,level:0},{x:3250,y:3843,level:0},{x:3252,y:3887,level:0},{x:3294,y:3865,level:0},{x:3317,y:3896,level:0},{x:3383,y:3893,level:0},{x:3336,y:3898,level:0},{x:2971,y:3929,level:0},{x:2990,y:3948,level:0},{x:3055,y:3915,level:0},{x:3060,y:3941,level:0},{x:3128,y:3913,level:0},{x:3110,y:3954,level:0},{x:3155,y:3924,level:0},{x:3181,y:3944,level:0},{x:3244,y:3907,level:0},{x:3242,y:3956,level:0},{x:3306,y:3947,level:0},{x:3275,y:3915,level:0},{x:3388,y:3930,level:0},{x:3429,y:3924,level:0},{x:2901,y:3356,level:0},{x:2915,y:3335,level:0},{x:2972,y:3342,level:0},{x:2976,y:3386,level:0},{x:3027,y:3365,level:0},{x:3050,y:3348,level:0},{x:3125,y:3371,level:0},{x:3081,y:3363,level:0},{x:3158,y:3376,level:0},{x:3140,y:3343,level:0},{x:3243,y:3378,level:0},{x:3240,y:3351,level:0},{x:3312,y:3376,level:0},{x:3304,y:3335,level:0},{x:3352,y:3381,level:0},{x:3358,y:3353,level:0},{x:3438,y:3349,level:0},{x:3408,y:3390,level:0},{x:3474,y:3385,level:0},{x:3485,y:3362,level:0},{x:2915,y:3302,level:0},{x:2917,y:3271,level:0},{x:2976,y:3274,level:0},{x:2976,y:3316,level:0},{x:3033,y:3286,level:0},{x:3066,y:3322,level:0},{x:3128,y:3310,level:0},{x:3129,y:3268,level:0},{x:3188,y:3317,level:0},{x:3146,y:3312,level:0},{x:3210,y:3305,level:0},{x:3242,y:3268,level:0},{x:3265,y:3300,level:0},{x:3309,y:3298,level:0},{x:3347,y:3273,level:0},{x:3349,y:3312,level:0},{x:3450,y:3276,level:0},{x:3422,y:3302,level:0},{x:3488,y:3270,level:0},{x:3478,y:3292,level:0},{x:3538,y:3311,level:0},{x:3582,y:3312,level:0},{x:2920,y:3249,level:0},{x:2932,y:3216,level:0},{x:2982,y:3203,level:0},{x:2997,y:3241,level:0},{x:3042,y:3251,level:0},{x:3019,y:3242,level:0},{x:3091,y:3258,level:0},{x:3122,y:3227,level:0},{x:3137,y:3212,level:0},{x:3135,y:3257,level:0},{x:3210,y:3205,level:0},{x:3263,y:3253,level:0},{x:3271,y:3204,level:0},{x:3323,y:3225,level:0},{x:3486,y:3245,level:0},{x:3519,y:3246,level:0},{x:2986,y:3191,level:0},{x:2997,y:3149,level:0},{x:3028,y:3171,level:0},{x:3011,y:3195,level:0},{x:3119,y:3167,level:0},{x:3083,y:3155,level:0},{x:3146,y:3170,level:0},{x:3195,y:3163,level:0},{x:3240,y:3161,level:0},{x:3236,y:3193,level:0},{x:3272,y:3156,level:0},{x:3293,y:3183,level:0},{x:3391,y:3180,level:0},{x:3350,y:3162,level:0},{x:3418,y:3164,level:0},{x:3394,y:3149,level:0},{x:3465,y:3140,level:0},{x:3210,y:3092,level:0},{x:3257,y:3117,level:0},{x:3304,y:3126,level:0},{x:3303,y:3077,level:0},{x:3378,y:3078,level:0},{x:3344,y:3112,level:0},{x:3429,y:3106,level:0},{x:3410,y:3079,level:0},{x:3483,y:3108,level:0},{x:3509,y:3088,level:0},{x:3171,y:3028,level:0},{x:3189,y:3047,level:0},{x:3235,y:3048,level:0},{x:3215,y:3020,level:0},{x:3303,y:3050,level:0},{x:3320,y:3013,level:0},{x:3355,y:3044,level:0},{x:3383,y:3019,level:0},{x:3419,y:3017,level:0},{x:3422,y:3046,level:0},{x:3468,y:3044,level:0},{x:3509,y:3025,level:0},{x:3170,y:2982,level:0},{x:3142,y:3003,level:0},{x:3225,y:2986,level:0},{x:3256,y:2953,level:0},{x:3289,y:2957,level:0},{x:3319,y:2990,level:0},{x:3376,y:2988,level:0},{x:3346,y:2958,level:0},{x:3404,y:2992,level:0},{x:3442,y:2955,level:0},{x:3170,y:2914,level:0},{x:3177,y:2888,level:0},{x:3245,y:2935,level:0},{x:3205,y:2895,level:0},{x:3296,y:2891,level:0},{x:3316,y:2930,level:0},{x:3361,y:2921,level:0},{x:3373,y:2898,level:0},{x:3423,y:2916,level:0},{x:3434,y:2888,level:0},{x:3218,y:2843,level:0},{x:3247,y:2866,level:0},{x:3290,y:2840,level:0},{x:3321,y:2848,level:0},{x:3390,y:2841,level:0},{x:3341,y:2836,level:0},{x:3376,y:2790,level:0},{x:3351,y:2781,level:0},{x:3401,y:2758,level:0},{x:3359,y:2753,level:0},{x:2703,y:3204,level:0},{x:2746,y:3232,level:0},{x:2772,y:3217,level:0},{x:2805,y:3204,level:0},{x:2743,y:3174,level:0},{x:2734,y:3144,level:0},{x:2802,y:3156,level:0},{x:2762,y:3172,level:0},{x:2843,y:3153,level:0},{x:2874,y:3173,level:0},{x:2912,y:3168,level:0},{x:2906,y:3141,level:0},{x:2763,y:3125,level:0},{x:2786,y:3075,level:0},{x:2846,y:3078,level:0},{x:2831,y:3119,level:0},{x:2912,y:3116,level:0},{x:2881,y:3073,level:0},{x:2761,y:3057,level:0},{x:2779,y:3023,level:0},{x:2869,y:3026,level:0},{x:2835,y:3025,level:0},{x:2930,y:3029,level:0},{x:2901,y:3031,level:0},{x:2791,y:2969,level:0},{x:2757,y:2949,level:0},{x:2916,y:2992,level:0},{x:2881,y:2968,level:0},{x:2970,y:2979,level:0},{x:2958,y:2996,level:0},{x:2804,y:2924,level:0},{x:2793,y:2893,level:0},{x:2858,y:2890,level:0},{x:2841,y:2934,level:0},{x:2920,y:2888,level:0},{x:2932,y:2933,level:0},{x:2960,y:2928,level:0},{x:2964,y:2908,level:0},{x:3082,y:3475,level:0},{x:2778,y:3583,level:0},{x:3265,y:3270,level:0},{x:3508,y:3673,level:0},{x:2864,y:3589,level:0}],valid_area:{topleft:{x:1922,y:4092},botright:{x:3902,y:2500},level:0}},e.arc_compass={id:400,type:"compass",tier:"master",text:["The compass shows where you need to go on the arc."],challenge:[{type:"wizard"},{type:"lockbox"},{type:"towers"}],spots:[{x:1868,y:11649,level:0},{x:1904,y:11604,level:0},{x:1879,y:11559,level:0},{x:1812,y:11620,level:0},{x:2349,y:11182,level:0},{x:2283,y:11163,level:0},{x:2265,y:11223,level:0},{x:2323,y:11222,level:0},{x:2106,y:11279,level:0},{x:2069,y:11338,level:0},{x:2093,y:11354,level:0},{x:2117,y:11313,level:0},{x:2091,y:11296,level:0},{x:2449,y:11564,level:0},{x:2506,y:11593,level:0},{x:2508,y:11605,level:0},{x:2494,y:11553,level:0},{x:1779,y:11993,level:0},{x:1759,y:11986,level:0},{x:1759,y:11966,level:0},{x:1771,y:11919,level:0},{x:2040,y:11800,level:0},{x:2073,y:11813,level:0},{x:2035,y:11823,level:0},{x:2004,y:11801,level:0},{x:1966,y:11814,level:0},{x:1939,y:11801,level:0},{x:2278,y:11503,level:0},{x:2282,y:11464,level:0},{x:2193,y:11480,level:0},{x:2089,y:11432,level:0}],valid_area:{topleft:{x:1600,y:12159},botright:{x:2751,y:11008},level:0}},e.tetracompass={id:470,type:"compass",tier:"tetracompass",text:["The compass shows where you need to dig up the casket."],valid_area:{topleft:{x:1922,y:4092},botright:{x:3902,y:2500},level:0},spots:[{x:2935,y:3489,level:0},{x:2946,y:3462,level:0},{x:2945,y:3274,level:0},{x:2896,y:3550,level:0},{x:2595,y:2932,level:0},{x:2623,y:3001,level:0},{x:2462,y:2897,level:0},{x:2573,y:2922,level:0},{x:2606,y:2956,level:0},{x:2600,y:2934,level:0},{x:2553,y:2985,level:0},{x:2614,y:3624,level:0},{x:2713,y:3628,level:0},{x:2674,y:3710,level:0},{x:2729,y:3606,level:0},{x:2590,y:3263,level:0},{x:2680,y:3370,level:0},{x:2468,y:3278,level:0},{x:2557,y:3370,level:0},{x:2752,y:3394,level:0},{x:2482,y:3357,level:0},{x:2609,y:3383,level:0},{x:2554,y:3467,level:0},{x:2546,y:3522,level:0},{x:2534,y:3430,level:0},{x:2425,y:3187,level:0},{x:2460,y:3198,level:0},{x:2305,y:3544,level:0},{x:2322,y:3548,level:0},{x:2269,y:3537,level:0},{x:2363,y:3574,level:0},{x:2357,y:3551,level:0},{x:2365,y:3545,level:0},{x:2315,y:3548,level:0},{x:2720,y:3468,level:0},{x:2704,y:3453,level:0},{x:2708,y:3449,level:0},{x:2722,y:3577,level:0},{x:2632,y:3489,level:0},{x:2764,y:3478,level:0},{x:2450,y:3516,level:0},{x:2453,y:3554,level:0},{x:2358,y:3483,level:0},{x:2419,y:3395,level:0},{x:2516,y:3187,level:0},{x:2504,y:3205,level:0},{x:2579,y:3118,level:0},{x:2578,y:3139,level:0},{x:2587,y:3076,level:0},{x:2857,y:2970,level:0},{x:2779,y:3100,level:0},{x:2910,y:3075,level:0},{x:2705,y:3157,level:0},{x:2726,y:3223,level:0},{x:2835,y:2924,level:0},{x:3256,y:3195,level:0},{x:3142,y:3251,level:0},{x:3356,y:3396,level:0},{x:3200,y:3200,level:0},{x:3731,y:3165,level:0},{x:2196,y:3101,level:0},{x:2255,y:3119,level:0},{x:2207,y:3156,level:0},{x:2168,y:3083,level:0},{x:2281,y:3190,level:0},{x:2893,y:3656,level:0},{x:2860,y:3662,level:0},{x:3162,y:3542,level:0},{x:3430,y:3649,level:0},{x:2961,y:3821,level:0},{x:3236,y:3665,level:0},{x:2992,y:3686,level:0},{x:2965,y:3746,level:0}]},e.compass=[e.gielinor_compass,e.arc_compass,e.tetracompass],e.simple=[{id:0,type:"simple",tier:"easy",text:["Search the drawers of Hild and Penda's house in Burthorpe."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2914,y:3521},botright:{x:2914,y:3521}}}},{id:2,type:"simple",tier:"easy",text:["Search the drawers found upstairs in the Westernmost Inn of East Ardougne."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:2575,y:3326},botright:{x:2575,y:3326}}}},{id:65,type:"simple",tier:"easy",text:["Search the crates outside the bank in the north of east-ardougne"],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2620,y:3336},botright:{x:2620,y:3336}}}},{id:66,type:"simple",tier:"easy",text:["Search the drawers in a house in Catherby."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2830,y:3448},botright:{x:2830,y:3448}}}},{id:67,type:"simple",tier:"easy",text:["Search the crates in the chicken coop in the farm north of Port Sarim."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3018,y:3287},botright:{x:3018,y:3287}}}},{id:68,type:"simple",tier:"easy",text:["Speak to Hans to solve the clue."],solution:{type:"talkto",spots:[{range:{origin:{x:3202,y:3205,level:0},size:{x:20,y:28}},description:"at Lumbridge Castle"}],npc:"Hans"}},{id:69,type:"simple",tier:"easy",text:["Search the drawers above the shops in Varrock."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:3206,y:3419},botright:{x:3206,y:3419}}}},{id:71,type:"simple",tier:"easy",text:["Search chests found in the upstairs of shops in Port Sarim."],solution:{type:"search",entity:"Chest",spot:{level:1,topleft:{x:3016,y:3205},botright:{x:3016,y:3205}}}},{id:72,type:"simple",tier:"easy",text:["Search the drawers on the first floor of a building overlooking Ardougne market."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:2655,y:3323},botright:{x:2655,y:3323}}}},{id:73,type:"simple",tier:"easy",text:["Search the drawers in Ivy's house in Taverley."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2914,y:3448},botright:{x:2914,y:3448}}}},{id:74,type:"simple",tier:"easy",text:["Search the crates in Canifis."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3509,y:3497},botright:{x:3509,y:3497}}}},{id:75,type:"simple",tier:"easy",text:["Search for a crate on the ground floor of a house in Seers' Village."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2699,y:3470},botright:{x:2699,y:3470}}}},{id:76,type:"simple",tier:"easy",text:["Search through chests found in the upstairs of houses in eastern Falador."],solution:{type:"search",entity:"Closed Chest",spot:{level:1,topleft:{x:3041,y:3364},botright:{x:3041,y:3364}}}},{id:78,type:"simple",tier:"easy",text:["Search the chests in the Dwarven Mine."],solution:{type:"search",entity:"Chest",spot:{level:0,topleft:{x:3e3,y:9798},botright:{x:3e3,y:9798}}}},{id:79,type:"simple",tier:"easy",text:["Search the drawers in a house in Draynor Village."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:3097,y:3277},botright:{x:3097,y:3277}}}},{id:80,type:"simple",tier:"easy",text:["Search for a crate in Varrock Palace."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3224,y:3492},botright:{x:3224,y:3492}}}},{id:81,type:"simple",tier:"easy",text:["Search the boxes in the house in Al Kharid with racks of silk."],solution:{type:"search",entity:"Boxes",spot:{level:0,topleft:{x:3289,y:3202},botright:{x:3289,y:3202}}}},{id:82,type:"simple",tier:"easy",text:["Search the boxes in the house near the south entrance of Varrock."],solution:{type:"search",entity:"Boxes",spot:{level:0,topleft:{x:3203,y:3384},botright:{x:3203,y:3384}}}},{id:83,type:"simple",tier:"easy",text:["Search the crates near a cart in Varrock."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3226,y:3452},botright:{x:3226,y:3452}}}},{id:84,type:"simple",tier:"easy",text:["Look in the ground floor crates of houses in Falador."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3029,y:3355},botright:{x:3029,y:3355}}}},{id:85,type:"simple",tier:"easy",text:["Search the crates in Draynor Manor."],solution:{type:"search",entity:"Crate",spot:{level:2,topleft:{x:3106,y:3369},botright:{x:3106,y:3369}}}},{id:86,type:"simple",tier:"easy",text:["Search for a crate in a building in Hemenster."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2636,y:3453},botright:{x:2636,y:3453}}}},{id:87,type:"simple",tier:"easy",text:["Search the crates in yard of Citharede Abbey."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3415,y:3158},botright:{x:3415,y:3158}}}},{id:88,type:"simple",tier:"easy",text:["Speak to the staff of Sinclair Mansion."],solution:{type:"talkto",spots:[{range:{origin:{x:2736,y:3574,level:0},size:{x:2,y:7}},description:"in Sinclair Mansion"}],npc:"Louisa"}},{id:89,type:"simple",tier:"easy",text:["Search in the south-east corner of the Artisan Dwarves' workshop in Falador."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3060,y:3334},botright:{x:3060,y:3334}}}},{id:90,type:"simple",tier:"easy",text:["Search through some drawers in the upstairs of a house in Rimmington."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:2970,y:3213},botright:{x:2970,y:3213}}}},{id:91,type:"simple",tier:"easy",text:["Search upstairs in the houses of Seers' Village for some drawers."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:2716,y:3471},botright:{x:2716,y:3471}}}},{id:92,type:"simple",tier:"easy",text:["Search the crates in a house in Yanille that has a piano."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2598,y:3105},botright:{x:2598,y:3105}}}},{id:93,type:"simple",tier:"easy",text:["Search the drawers in the ground floor of a shop in Yanille."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2570,y:3085},botright:{x:2570,y:3085}}}},{id:95,type:"simple",tier:"easy",text:["Search the boxes in one of the tents in Al Kharid."],solution:{type:"search",entity:"Boxes",spot:{level:0,topleft:{x:3308,y:3206},botright:{x:3308,y:3206}}}},{id:96,type:"simple",tier:"easy",text:["Search the crate near a cart in Port Khazard."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2660,y:3149},botright:{x:2660,y:3149}}}},{id:99,type:"simple",tier:"easy",text:["Dig near some giant mushrooms behind the Grand Tree."],solution:{type:"dig",spot:{x:2459,y:3505,level:0},description:"behind the giant mushrooms"}},{id:100,type:"simple",tier:"easy",text:["Search a barrel outside the Pick and Lute inn, in Taverley."],solution:{type:"search",entity:"Barrel",spot:{level:0,topleft:{x:2886,y:3449},botright:{x:2886,y:3449}}}},{id:101,type:"simple",tier:"easy",text:["Search the crates in the house at the north end of the East Ardougne Market."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2658,y:3323},botright:{x:2658,y:3323}}}},{id:102,type:"simple",tier:"easy",text:["Search a barrel outside the mill, in Taverley."],solution:{type:"search",entity:"Barrel",spot:{level:0,topleft:{x:2894,y:3418},botright:{x:2894,y:3418}}}},{id:103,type:"simple",tier:"easy",text:["Speak to Gaius in Burthorpe."],solution:{type:"talkto",npc:"Gaius",spots:[{range:{origin:{x:2926,y:3546,level:0},size:{x:6,y:7}},description:"in Burthorpe"}]}},{id:105,type:"simple",tier:"easy",text:["Search a barrel east of Challenge Mistress Fara, in Burthorpe."],solution:{type:"search",entity:"Barrel",spot:{level:0,topleft:{x:2912,y:3530},botright:{x:2912,y:3530}}}},{id:106,type:"simple",tier:"easy",text:["Speak to Arhein in Catherby."],solution:{type:"talkto",npc:"Arhein",spots:[{range:{origin:{x:2802,y:3425,level:0},size:{x:3,y:3}},description:"in Catherby"}]}},{id:107,type:"simple",tier:"easy",text:["Talk to the bartender of the Rusty Anchor in Port Sarim."],solution:{type:"talkto",npc:"Bartender",spots:[{range:{origin:{x:3044,y:3255,level:0},size:{x:3,y:4}},description:"in Port Sarim"}]}},{id:108,type:"simple",tier:"easy",text:["Search the crates in Horvik's armoury."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3228,y:3433},botright:{x:3228,y:3433}}}},{id:110,type:"simple",tier:"easy",text:["Search the boxes in the Goblin house near Lumbridge."],solution:{type:"search",entity:"Boxes",spot:{level:0,topleft:{x:3247,y:3244},botright:{x:3247,y:3244}}}},{id:111,type:"simple",tier:"easy",text:["Search the drawers in Falador's chainmail shop."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2969,y:3311},botright:{x:2969,y:3311}}}},{id:112,type:"simple",tier:"easy",text:["Search the chests in Al Kharid palace."],solution:{type:"search",entity:"Ornate chest",spot:{level:0,topleft:{x:3301,y:3164},botright:{x:3301,y:3164}}}},{id:113,type:"simple",tier:"easy",text:["Search the crates just outside the armour shop in East Ardougne."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2654,y:3299},botright:{x:2654,y:3299}}}},{id:115,type:"simple",tier:"easy",text:["Search the crates in East Ardougne's general store."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2615,y:3291},botright:{x:2615,y:3291}}}},{id:116,type:"simple",tier:"easy",text:["Speak to Ellis in Al Kharid."],solution:{type:"talkto",npc:"Ellis",spots:[{range:{origin:{x:3270,y:3193,level:0},size:{x:7,y:6}},description:"in Al Kharid"}]}},{id:117,type:"simple",tier:"easy",text:["Search the chest in the left-hand tower of Camelot Castle."],solution:{type:"search",entity:"Closed Chest",spot:{level:2,topleft:{x:2748,y:3495},botright:{x:2748,y:3495}}}},{id:118,type:"simple",tier:"easy",text:["Search the chest in the Duke of Lumbridge's bedroom."],solution:{type:"search",entity:"Closed Chest",spot:{level:1,topleft:{x:3209,y:3218},botright:{x:3209,y:3218}}}},{id:119,type:"simple",tier:"easy",text:["Search the crates near the Lumbridge Market."],solution:{type:"search",entity:"Crates",spot:{level:0,topleft:{x:3192,y:3257},botright:{x:3192,y:3257}}}},{id:121,type:"simple",tier:"easy",text:["Speak to Doric, who lives north of Falador."],solution:{type:"talkto",npc:"Doric",spots:[{range:{origin:{x:2955,y:3435,level:0},size:{x:9,y:9}},description:"north of Falador"}]}},{id:123,type:"simple",tier:"easy",text:["Search the drawers upstairs in the bank to the East of Varrock."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:3250,y:3420},botright:{x:3250,y:3420}}}},{id:124,type:"simple",tier:"easy",text:["Talk to Zeke in Al Kharid."],solution:{type:"talkto",npc:"Zeke",spots:[{range:{origin:{x:3284,y:3186,level:0},size:{x:6,y:7}},description:"in Al Kharid"}]}},{id:125,type:"simple",tier:"easy",text:["Speak to the bartender of the Blue Moon Inn in Varrock."],solution:{type:"talkto",npc:"Bartender",spots:[{range:{origin:{x:3223,y:3396,level:0},size:{x:4,y:7}},description:"in the Blue Moon Inn"}]}},{id:126,type:"simple",tier:"easy",text:["Search the crate in the left-hand tower of Lumbridge castle."],solution:{type:"search",entity:"Crate",spot:{level:1,topleft:{x:3228,y:3212},botright:{x:3228,y:3212}}}},{id:127,type:"simple",tier:"easy",text:["Search the drawers in one of Gertrude's bedrooms."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:3156,y:3406},botright:{x:3156,y:3406}}}},{id:130,type:"simple",tier:"easy",text:["Search the drawers in Catherby's Archery Shop."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2828,y:3457},botright:{x:2828,y:3457}}}},{id:131,type:"simple",tier:"easy",text:["Search the drawers upstairs in Falador's shield shop."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:2971,y:3386},botright:{x:2971,y:3386}}}},{id:132,type:"simple",tier:"easy",text:["Talk to the Squire in the White Knights' castle in Falador."],solution:{type:"talkto",npc:"Squire Asrol",spots:[{range:{origin:{x:2970,y:3339,level:0},size:{x:8,y:8}},description:"in the couryard of the White Knight's castle"}]}},{id:133,type:"simple",tier:"easy",text:["Search the crates of Falador's general store."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2955,y:3390},botright:{x:2955,y:3390}}}},{id:134,type:"simple",tier:"easy",text:["Search the crates in the Barbarian Village helmet shop."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3073,y:3430},botright:{x:3073,y:3430}}}},{id:135,type:"simple",tier:"easy",text:["Search the crates in the Port Sarim fishing shop."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3012,y:3222},botright:{x:3012,y:3222}}}},{id:136,type:"simple",tier:"easy",text:["Speak to Sir Kay in Camelot Castle."],solution:{type:"talkto",npc:"Sir Kay",spots:[{range:{origin:{x:2752,y:3493,level:0},size:{x:13,y:11}},description:"in the courtyard of Camelot Castle"}]}},{id:137,type:"simple",tier:"easy",text:["Speak to Ned in Draynor Village."],solution:{type:"talkto",npc:"Ned",spots:[{range:{origin:{x:3097,y:3255,level:0},size:{x:6,y:6}},description:"in Draynor"}]}},{id:138,type:"simple",tier:"easy",text:["Speak to the Challenge Mistress in Burthorpe."],solution:{type:"talkto",npc:"Mission Mistress Fara",spots:[{range:{origin:{x:2887,y:3529,level:0},size:{x:3,y:3}},description:"in Burthorpe"}]}},{id:94,type:"simple",tier:"medium",text:["Speak to Donovan, the family handyman."],solution:{type:"talkto",spots:[{range:{origin:{x:2740,y:3577,level:1},size:{x:5,y:6}},description:"at Sinclair Mansion"}],npc:"Donovan the Family Handyman"}},{id:97,type:"simple",tier:"medium",text:["Speak to Brimstail."],challenge:[{type:"challengescroll",question:"What is 19 to the power of 3?",answers:[{answer:6859}]}],solution:{type:"talkto",spots:[{range:{origin:{x:2405,y:9815,level:0},size:{x:9,y:8}},description:"in Brimstail's cave"}],npc:"Brimstail"}},{id:98,type:"simple",tier:"medium",text:["Speak to Roavar."],solution:{type:"talkto",npc:"Roavar",spots:[{range:{origin:{x:3489,y:3471,level:0},size:{x:7,y:5}},description:"in Canifis' bar"}]}},{id:109,type:"simple",tier:"medium",text:["Speak to Ulizius."],solution:{type:"talkto",npc:"Ulizius",spots:[{range:{origin:{x:3440,y:3458,level:0},size:{x:7,y:7}},description:"near the Swamp Gate"}]}},{id:114,type:"simple",tier:"medium",text:["Speak to Hajedy."],solution:{type:"talkto",npc:"Hajedy",spots:[{range:{origin:{x:2779,y:3210,level:0},size:{x:4,y:4}},description:"in Brimhaven"}]}},{id:120,type:"simple",tier:"medium",text:["Speak to Kangai Mau."],solution:{type:"talkto",npc:"Kangai Mau",spots:[{range:{origin:{x:2790,y:3181,level:0},size:{x:6,y:5}},description:"in Brimhaven"}]}},{id:122,type:"simple",tier:"medium",text:["Speak to a referee."],challenge:[{type:"challengescroll",question:"What is 57 x 89 + 23?",answers:[{answer:5096}]}],solution:{type:"talkto",npc:"Gnome ball referee",spots:[{range:{origin:{x:2384,y:3487,level:0},size:{x:3,y:3}},description:"at the gate of the Gnomeball Field"}]}},{id:128,type:"simple",tier:"medium",text:["Speak to Hazelmere."],challenge:[{type:"challengescroll",question:"What is 19 to the power of 3?",answers:[{answer:6859}]}],solution:{type:"talkto",npc:"Hazelmere",spots:[{range:{origin:{x:2675,y:3085,level:1},size:{x:5,y:5}},description:"east of Yanille"}]}}],e.cryptic=[{id:472,type:"cryptic",tier:"sandy",text:["He's got a rebuildathon going on, and an endless stream of important visitors."],solution:{type:"talkto",npc:"Foreman George",spots:[{range:{origin:{x:3154,y:3239,level:0},size:{x:3,y:3},data:"ugA="},description:"near the sandcastles"}]}},{id:473,type:"cryptic",tier:"sandy",text:["He's got one hat, two hat, three hat, many hats!"],solution:{type:"talkto",npc:"Sheldon",spots:[{range:{origin:{x:3168,y:3253,level:0},size:{x:3,y:3},data:"ugA="},description:"at the northern entrance"}]}},{id:474,type:"cryptic",tier:"sandy",text:["He's named after a boot, and carrying nets on his shoulder."],solution:{type:"talkto",npc:"Wellington",spots:[{range:{origin:{x:3184,y:3231,level:0},size:{x:3,y:3},data:"ugA="},description:"at the fishing spots"}]}},{id:475,type:"cryptic",tier:"sandy",text:["She can be trusted, she isn't shy and she likes ducks."],solution:{type:"talkto",npc:"Sarah",spots:[{range:{origin:{x:3169,y:3214,level:0},size:{x:3,y:3},data:"ugA="},description:"at the southern entrance"}]}},{id:476,type:"cryptic",tier:"sandy",text:["She doesn't sell sea shells, but does share common ground with the feather of fletching."],solution:{type:"talkto",npc:"Flo",spots:[{range:{origin:{x:3163,y:3213,level:0},size:{x:3,y:3},data:"ugA="},description:"at the southern entrance"}]}},{id:477,type:"cryptic",tier:"sandy",text:["Some say he guards their life, others say he sits around watching beach balls roll around."],solution:{type:"talkto",npc:"Lifeguard",spots:[{range:{origin:{x:3165,y:3255,level:0},size:{x:3,y:3},data:"ugA="},description:"at the northern entrance"}]}},{id:478,type:"cryptic",tier:"sandy",text:["Some say he's got the beach in the palm of his hand. Others think he's just excited about coconuts."],solution:{type:"talkto",npc:"Palmer",spots:[{range:{origin:{x:3142,y:3227,level:0},size:{x:3,y:3},data:"ugA="},description:"at the western entrance"}]}},{id:179,type:"cryptic",tier:"easy",text:["A crate found in the tower of a church is your next location.","A crate in the tower of a church is your next location."],solution:{type:"search",entity:"Crate",spot:{level:1,topleft:{x:2612,y:3306},botright:{x:2612,y:3306}}}},{id:180,type:"cryptic",tier:"easy",text:["One of the sailors in Port Sarim is your next destination."],solution:{type:"talkto",npc:"Captain Tobias.",spots:[{range:{origin:{x:3025,y:3215,level:0},size:{x:4,y:7}},description:"at Port Sarim"}]}},{id:182,type:"cryptic",tier:"easy",text:["Someone watching Het's Oasis is your next destination."],solution:{type:"talkto",spots:[{range:{origin:{x:3371,y:3271,level:0},size:{x:8,y:8}},description:"north of Het's Oasis"}],npc:"Jeed"}},{id:181,type:"cryptic",tier:"medium",text:["You'll need to look for a city with a central fountain. Look for a locked chest in the city's chapel."],solution:{type:"search",spot:{level:0,topleft:{x:3256,y:3487},botright:{x:3256,y:3487}},entity:"Closed Chest",key:{instructions:"The chest is locked! An inscription on the chest says: Property of Clock Tower Monastery.",answer:"Kill a monk in the Kandarin Monastery.",area:{origin:{x:2591,y:3204,level:0},size:{x:31,y:15}}}}},{id:183,type:"cryptic",tier:"medium",text:["The socks in these drawers are holier than thine, according to the tonsured owners."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:3056,y:3497},botright:{x:3056,y:3497}},key:{instructions:"The chest has a crude note on top. It reads 'You'll never get these drawers open now! - Zamorak Monk.'",answer:"Kill a Monk of Zamorak in the Chaos Temple near the Goblin Village.",area:{origin:{x:2946,y:3473,level:0},size:{x:9,y:6}}}}},{id:184,type:"cryptic",tier:"medium",text:["Probably filled with wizards' socks."],solution:{type:"search",entity:"Cupboard",spot:{level:2,topleft:{x:3113,y:3153},botright:{x:3113,y:3153}},key:{instructions:"This cupboard is locked! One of the Spellwisps might have stolen the key. ",answer:"Kill a Spellwisp north west of the tower.",area:{origin:{x:3066,y:3168,level:0},size:{x:16,y:16}}}}},{id:185,type:"cryptic",tier:"medium",text:["In a village made of bamboo, look for some crates under one of the houses."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2800,y:3074},botright:{x:2800,y:3074}}}},{id:186,type:"cryptic",tier:"medium",text:["The owner of this crate has a hunch that he put more than fish inside."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2770,y:3172},botright:{x:2770,y:3172}}}},{id:187,type:"cryptic",tier:"medium",text:["In a town where the guards are armed with maces, search the upstairs rooms of the public house."],solution:{type:"search",spot:{level:1,topleft:{x:2575,y:3326},botright:{x:2575,y:3326}},entity:"Drawers",key:{instructions:"The drawers are locked! A note left on the drawers reads: Beware of dog!",answer:"Kill a guard dog.",area:{origin:{x:2623,y:3307,level:0},size:{x:25,y:24}}}}},{id:188,type:"cryptic",tier:"medium",text:["Try not to step on any aquatic nasties while searching this crate."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2764,y:3273},botright:{x:2764,y:3273}}}},{id:189,type:"cryptic",tier:"medium",text:["After a hard day of spraying back the vegetation, you mite want to pop to the nearby forge and search the crates."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2399,y:4471},botright:{x:2399,y:4471}}}},{id:190,type:"cryptic",tier:"medium",text:["For any aspiring mage, I'm sure searching this bookcase will be a rewarding experience."],solution:{type:"search",entity:"Bookcase",spot:{level:1,topleft:{x:3366,y:3319},botright:{x:3366,y:3319}}}},{id:191,type:"cryptic",tier:"medium",text:["A town with a different sort of night-life is your destination. Search for some crates in one of the houses."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3498,y:3507},botright:{x:3498,y:3507}}}},{id:192,type:"cryptic",tier:"medium",text:["Hay! Stop for a bit and admire the scenery, just like the tourism promoter says."],solution:{type:"search",entity:"Hay bales",spot:{level:0,topleft:{x:2524,y:3438},botright:{x:2524,y:3438}}}},{id:193,type:"cryptic",tier:"medium",text:["North of the best monkey restaurant on Karamja, look for the centre of the triangle of boats and search there."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2905,y:3189},botright:{x:2905,y:3189}}}},{id:194,type:"cryptic",tier:"medium",text:["Go to the village being attacked by trolls and search the drawers in one of the houses."],solution:{type:"search",spot:{level:0,topleft:{x:2928,y:3552},botright:{x:2928,y:3552}},entity:"Drawers",key:{instructions:"The drawers are locked! A note on the top of the drawer reads: Wait till I get my hands on Penda; he's nicked the key again!",answer:"Pickpocket Penda in the hour north of Heroes's Guild.",area:{origin:{x:2912,y:3521,level:0},size:{x:5,y:6}}}}},{id:195,type:"cryptic",tier:"medium",text:["In a town where everyone has perfect vision, seek some locked drawers in a house that sits opposite a workshop."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2709,y:3478},botright:{x:2709,y:3478}},key:{instructions:"Don't forget to feed the chickens",answer:"Kill a chicken.",area:{origin:{x:2729,y:3555,level:0},size:{x:11,y:10}}}}},{id:196,type:"cryptic",tier:"medium",text:["Being this far north has meant that these crates have escaped being battled over."],solution:{type:"search",spot:{level:0,topleft:{x:2519,y:3259},botright:{x:2519,y:3259}},entity:"Crates"}},{id:197,type:"cryptic",tier:"medium",text:["After trawling for bars, go to the nearest place to smith them and dig by the door."],solution:{type:"dig",spot:{x:2656,y:3160,level:0},description:"in front of the door"}},{id:198,type:"cryptic",tier:"medium",text:["Sophind yourself some treasure by searching these boxes."],solution:{type:"search",spot:{level:0,topleft:{x:3280,y:2787},botright:{x:3280,y:2787}},entity:"Crate"}},{id:199,type:"cryptic",tier:"medium",text:["Dig here if you are not feeling too well after travelling through the desert. Ali heartily recommends it."],solution:{type:"dig",spot:{x:3358,y:2971,level:0},description:"next to the well"}},{id:200,type:"cryptic",tier:"medium",text:["You'll need to have Doug Deep into the distant past to get to these sacks"],solution:{type:"search",spot:{level:0,topleft:{x:3155,y:5727},botright:{x:3155,y:5727}},entity:"Sacks"}},{id:201,type:"cryptic",tier:"medium",text:["This crate holds a better reward than a broken arrow."],solution:{type:"search",spot:{level:0,topleft:{x:2671,y:3437},botright:{x:2671,y:3437}},entity:"Crate"}},{id:202,type:"cryptic",tier:"medium",text:["The rock cakes to the south are definitely more edible than the two rocks I buried the treasure between."],solution:{type:"dig",spot:{x:2513,y:3041,level:0},description:"between the rocks"}},{id:203,type:"cryptic",tier:"medium",text:["Search the upstairs drawers of a house in a village where pirates are known to have a good time."],solution:{type:"search",spot:{level:1,topleft:{x:2809,y:3165},botright:{x:2809,y:3165}},entity:"Drawers",key:{instructions:"Shiver me timbers!",answer:"Kill a pirate in Brimhaven",area:{origin:{x:2766,y:3167,level:0},size:{x:45,y:35}}}}},{id:204,type:"cryptic",tier:"medium",text:["Don't skip here, it's too muddy. You'll feel like a star if you dig here, though."],solution:{type:"dig",spot:{x:3e3,y:3110,level:0},description:"on top of the shellfish"}},{id:205,type:"cryptic",tier:"medium",text:["This crate is mine, all mine, even if it is in the middle of the desert."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3289,y:3022},botright:{x:3289,y:3022}}}},{id:206,type:"cryptic",tier:"medium",text:["The treasure is buried in a small building full of bones. Here's a Hint: It's not near a graveyard."],solution:{type:"dig",spot:{x:3356,y:3507,level:0},description:"in the western shed"}},{id:207,type:"cryptic",tier:"medium",text:["By the town of the dead, walk south down a rickety bridge, then dig near the spotted fungus."],solution:{type:"dig",spot:{x:3644,y:3494,level:0},description:"next to the mushroom"}},{id:208,type:"cryptic",tier:"medium",text:["This cupboard has treasure, pirate pots and corsair cutlery!"],solution:{type:"search",entity:"Cupboard",spot:{level:0,topleft:{x:2811,y:3160},botright:{x:2811,y:3160}}}},{id:209,type:"cryptic",tier:"medium",text:["The dead, red dragon watches over this chest. He must really dig the view."],solution:{type:"search",spot:{level:0,topleft:{x:3354,y:3349},botright:{x:3354,y:3349}},entity:"Closed chest",key:{instructions:"The chest is locked!  Crude graffiti on the chest reads: 'Barbarians rule, okay!'",answer:"Kill a Barbarian in Barbarian Village.",area:{origin:{x:3073,y:3412,level:0},size:{x:22,y:23}}}}},{id:210,type:"cryptic",tier:"medium",text:["This crate clearly marks the end of the line for coal."],solution:{type:"search",spot:{level:0,topleft:{x:2691,y:3508},botright:{x:2691,y:3508}},entity:"Crate"}},{id:211,type:"cryptic",tier:"medium",text:["Go to this building to be illuminated, and check the drawers while you are there."],solution:{type:"search",spot:{level:1,topleft:{x:2512,y:3641},botright:{x:2512,y:3641}},entity:"Drawers",key:{instructions:"The drawers are locked! A note on the top says 'I'm guarding the key at the market'.",answer:"Kill a Fremennik market guard in Relekka.",area:{origin:{x:2635,y:3669,level:0},size:{x:18,y:18}}}}},{id:212,type:"cryptic",tier:"medium",text:["Find a crate close to the monks that like to paaarty!"],solution:{type:"search",spot:{level:0,topleft:{x:2614,y:3204},botright:{x:2614,y:3204}},entity:"Crate"}},{id:213,type:"cryptic",tier:"medium",text:["In a town where wizards are known to gather, search upstairs in a large house to the north."],solution:{type:"search",entity:"Closed chest",spot:{level:1,topleft:{x:2593,y:3108},botright:{x:2593,y:3108}},key:{instructions:"Stand by your man.",answer:"Kill the man downstairs.",area:{origin:{x:2590,y:3103,level:0},size:{x:9,y:6}}}}},{id:214,type:"cryptic",tier:"medium",text:["This temple is rather sluggish. The chest just inside the entrance, however, is filled with goodies."],solution:{type:"search",spot:{level:0,topleft:{x:2698,y:9684},botright:{x:2698,y:9684}},entity:"Chest"}},{id:215,type:"cryptic",tier:"medium",text:["The gnomes' nearby cart must have collapsed under the weight of all the treasure in these boxes!"],solution:{type:"search",spot:{level:0,topleft:{x:2397,y:3355},botright:{x:2397,y:3355}},entity:"Gnome crates"}},{id:217,type:"cryptic",tier:"medium",text:["Brush off the sand and dig in the quarry. There is a wheely handy barrow to the east. Don't worry, it's coal to dig there - in fact, it's all oclay."],solution:{type:"dig",spot:{x:3176,y:2916,level:0},description:"west of the cart"}},{id:218,type:"cryptic",tier:"medium",text:["Observe: In the crate just North of the stairs leading down, you will find the answer."],solution:{type:"search",spot:{level:0,topleft:{x:2438,y:3165},botright:{x:2438,y:3165}},entity:"Crate"}},{id:220,type:"cryptic",tier:"medium",text:["In a town where thieves steal from stalls, search for some drawers in the upstairs of a house near the bank."],solution:{type:"search",spot:{level:1,topleft:{x:2610,y:3324},botright:{x:2610,y:3324}},entity:"Drawers",key:{instructions:"It's a guard's life",answer:"Kill an ardougne guard."}}},{id:222,type:"cryptic",tier:"medium",text:["While a sea view is nice, it seems this church has not seen visitors in a while. Dig outside the rim of the round window for a reward."],solution:{type:"dig",spot:{x:2992,y:3178,level:0},description:"west of the church near Port Sarim"}},{id:28,type:"cryptic",tier:"hard",text:["Covered in shadows, the centre of the circle is where you will find the answer."],solution:{type:"dig",spot:{x:3488,y:3287,level:0},description:"at the centre of Mort'ton"}},{id:30,type:"cryptic",tier:"hard",text:["Generally speaking, his nose was very bent"],solution:{type:"talkto",npc:"General Bentnoze",spots:[{range:{origin:{x:2954,y:3512,level:0},size:{x:7,y:4}},description:"in Goblin Village"}]},challenge:[{type:"slider"}]},{id:32,type:"cryptic",tier:"hard",text:["If you look closely enough, it seems that the archers have lost more than their needles."],solution:{type:"search",entity:"Haystack",spot:{level:0,topleft:{x:2671,y:3416},botright:{x:2671,y:3416}}}},{id:39,type:"cryptic",tier:"hard",text:["There is no 'worthier' lord."],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{id:"default",range:{origin:{x:2185,y:3283,level:1},size:{x:3,y:3}},note:"After 'Plague's End'",description:"in Prifddinas"},{id:"after-plagues-end",range:{origin:{x:2198,y:3247,level:0},size:{x:12,y:12}},note:"Before 'Plague's End'",description:"at Iorwerth Camp"}],npc:"Lord Iorwerth"}},{id:139,type:"cryptic",tier:"hard",text:["I am head of the abbey with a cold breeze from the west.","'A bag belt only?' he asked his balding brothers"],solution:{type:"talkto",spots:[{range:{origin:{x:3055,y:3482,level:0},size:{x:5,y:6}},description:"at the Edgeville Monastery"}],npc:"Abbot Langley"}},{id:140,type:"cryptic",tier:"hard",text:["My name's a tirade, fishing is my trade, by the docks is where my fortune is made.","If a man carried my burden, he would break his back. I am not rich, but leave silver in my track. Speak to the keeper of my trail."],solution:{type:"talkto",spots:[{range:{origin:{x:3011,y:3223,level:0},size:{x:7,y:7}},description:"in the fishing shop in Port Sarim"}],npc:"Gerrant"}},{id:141,type:"cryptic",tier:"hard",text:["Often sought out by scholars of histories past, find me where words of wisdom speak volumes."],challenge:[{type:"slider"}],solution:{type:"talkto",npc:"Examiner",spots:[{range:{origin:{x:3351,y:3342,level:0},size:{x:9,y:8}},description:"in the Exam Centre"}]}},{id:142,type:"cryptic",tier:"hard",text:["A great view: watch the rapidly drying hides get splashed. Check the box you are sitting on."],solution:{type:"search",spot:{level:1,topleft:{x:2523,y:3493},botright:{x:2523,y:3493}},entity:"Boxes"}},{id:143,type:"cryptic",tier:"hard",text:["You will need to wash the old ash off of your spade when you dig here, but the only water nearby is stagnant."],solution:{type:"dig",spot:{x:2134,y:5162,level:0},description:"next to the puddle on top of the mountain on Braindeath Island"}},{id:144,type:"cryptic",tier:"hard",text:["Identify the back of this over-acting brother. (He's a long way from home.)"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3131,y:2800,level:0},size:{x:5,y:5}},description:"on the beach in Menaphos Worker District"}],npc:"Hamid"}},{id:145,type:"cryptic",tier:"hard",text:["As you desert this town, keep an eye out for a set of spines that could ruin nearby rugs: dig carefully around the greenery."],solution:{type:"dig",spot:{x:3396,y:2918,level:0},description:"next to the cacti west of Nardaah"}},{id:146,type:"cryptic",tier:"hard",text:["'Small Shoe.' Often found with rod on mushroom."],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2467,y:3426,level:0},size:{x:11,y:15}},description:"at the Gnome Agility Course"}],npc:"Gnome trainer"}},{id:147,type:"cryptic",tier:"hard",text:["It seems to have reached the end of the line, and it's still empty."],solution:{type:"search",spot:{level:0,topleft:{x:3041,y:9820},botright:{x:3041,y:9820}},entity:"Mine Cart"}},{id:148,type:"cryptic",tier:"hard",text:["Read 'How to Breed Scorpions' By O.W. Thathurt."],solution:{type:"search",spot:{level:1,topleft:{x:2702,y:3409},botright:{x:2702,y:3409}},entity:"Bookcase"}},{id:149,type:"cryptic",tier:"hard",text:["Probably filled with books on magic."],solution:{type:"search",spot:{level:0,topleft:{x:3094,y:3153},botright:{x:3095,y:3152}},entity:"Bookcase"}},{id:150,type:"cryptic",tier:"hard",text:["Citric cellar."],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2487,y:3487,level:1},size:{x:7,y:3}},description:"in the south-east corner on the first floor of the Grand Tree"}],npc:"Heckel Funch"}},{id:151,type:"cryptic",tier:"hard",text:["I'm sure they will let ya buy some things here, as long as you are in good 'ealth."],solution:{type:"search",spot:{level:0,topleft:{x:2340,y:3187},botright:{x:2340,y:3187}},entity:"Crate"}},{id:152,type:"cryptic",tier:"hard",text:["Mine was the strangest birth under the sun. I left the crimson sack. Yet life had not begun. Entered the world and yet was seen by none."],solution:{type:"dig",spot:{x:2832,y:9586,level:0},description:"on top of the Red spider's eggs spawn"}},{id:153,type:"cryptic",tier:"hard",text:["His head might be hollow, but the crates nearby are filled with surprises."],solution:{type:"search",spot:{level:0,topleft:{x:3478,y:3091},botright:{x:3478,y:3091}},entity:"Crate"}},{id:154,type:"cryptic",tier:"hard",text:["My giant guardians below the market streets would be fans of rock and roll, if only they could grab hold of it. Dig near my purple smoke!"],solution:{type:"dig",spot:{x:3161,y:9905,level:0},description:"next to the cauldron"}},{id:155,type:"cryptic",tier:"hard",text:["You can cook food on me, but don't cook any foodles - That would just be wrong."],solution:{type:"dig",spot:{x:2969,y:2975,level:0},description:"by the fire next to Captain Klemfoodle"}},{id:156,type:"cryptic",tier:"hard",text:["The beasts to my east snap claws and tails. The rest to my west can slide and eat fish. The force to my north will jump and they'll wail, Come dig by my fire and make a wish."],solution:{type:"dig",spot:{x:2598,y:3267,level:0},description:"next to the torch in Ardougne Zoo"}},{id:157,type:"cryptic",tier:"hard",text:["You don't need to go hopping mad - or take steps - to get to this treasure: just be totally shellfish."],solution:{type:"dig",spot:{x:2519,y:3594,level:0},description:"on top of the shell"}},{id:158,type:"cryptic",tier:"hard",text:["When you get tired of fighting, go deep, deep down until you need an antidote."],solution:{type:"search",spot:{level:0,topleft:{x:2576,y:9583},botright:{x:2576,y:9583}},entity:"Crate"}},{id:159,type:"cryptic",tier:"hard",text:["'Throat mage seeks companionship. Seek answers inside my furniture if interested.'"],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:2666,y:3238},botright:{x:2666,y:3238}}}},{id:160,type:"cryptic",tier:"hard",text:["Must be full of railings"],solution:{type:"search",entity:"Boxes",spot:{level:0,topleft:{x:2576,y:3464},botright:{x:2576,y:3464}}}},{id:161,type:"cryptic",tier:"hard",text:["You will need to under-cook to solve this one."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3219,y:9617},botright:{x:3219,y:9617}}}},{id:162,type:"cryptic",tier:"hard",text:["The cheapest water for miles around, but they react badly to religious icons."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3178,y:2987},botright:{x:3178,y:2987}}}},{id:163,type:"cryptic",tier:"hard",text:["You have all of the elements available to solve this clue. Fortunately you do not have to go as far as to stand in a draft."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2723,y:9891},botright:{x:2723,y:9891}}}},{id:164,type:"cryptic",tier:"hard",text:["Try not to let yourself be dazzled when you search these drawers."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2561,y:3323},botright:{x:2561,y:3323}}}},{id:165,type:"cryptic",tier:"hard",text:["Aggie I see, Lonely and southern I feel, I am neither inside nor outside the house, yet no house would be complete without me. The treasure lies beneath me!"],solution:{type:"dig",spot:{x:3083,y:3257,level:0},description:"in front of the window"}},{id:166,type:"cryptic",tier:"hard",text:["I am a token of the greatest love. I have no beginning or end. My eye is red, I can fit like a glove. Go to the place where it's money they lend, And dig by the gate to be my friend."],solution:{type:"dig",spot:{x:3191,y:9825,level:0},description:"in front of the gate"}},{id:167,type:"cryptic",tier:"hard",text:["Navigating to this crate will be a trial."],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2648,y:3662},botright:{x:2648,y:3662}}}},{id:168,type:"cryptic",tier:"hard",text:["This aviator is at the peak of his profession."],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2849,y:3492,level:1},size:{x:3,y:3}},description:"at the top of White Wolf Mountain"}],npc:"Captain Bleemadge"}},{id:169,type:"cryptic",tier:"hard",text:["Snah? I feel all confused, like one of those cakes."],solution:{type:"talkto",spots:[{range:{origin:{x:3202,y:3205,level:0},size:{x:20,y:28}},description:"at Lumbridge Castle"}],npc:"Hans"}},{id:170,type:"cryptic",tier:"hard",text:["My home is grey, and made of stone, A castle with a search for a meal. Hidden in some drawers I am, across from a wooden wheel."],solution:{type:"search",entity:"Drawers",spot:{level:1,topleft:{x:3213,y:3216},botright:{x:3213,y:3216}}}},{id:171,type:"cryptic",tier:"hard",text:["Surprising? I bet he is...","I bet he is..."],solution:{type:"talkto",spots:[{range:{origin:{x:3202,y:3470,level:0},size:{x:5,y:5}},description:"in Varrock Castle"}],npc:"Sir Prysin"}},{id:173,type:"cryptic",tier:"hard",text:["Four blades I have, yet draw no blood, Still I turn my prey to powder. If you are brave, come search my roof, It is there my blades are louder."],solution:{type:"search",entity:"Crate",spot:{level:2,topleft:{x:3166,y:3309},botright:{x:3166,y:3309}}}},{id:174,type:"cryptic",tier:"hard",text:["My name is like a tree, yet it is spelt with a 'g'. Come see the fur which is right near me."],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3219,y:3434,level:0},size:{x:5,y:5}},description:"near Varrock's fountain"}],npc:"Wilough"}},{id:175,type:"cryptic",tier:"hard",text:["A strange little man who sells armour only to those who've proven themselves to be unafraid of dragons."],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3066,y:3514,level:0},size:{x:5,y:5}},description:"in Edgeville"}],npc:"Oziach"}},{id:176,type:"cryptic",tier:"hard",text:["Come to the evil ledge, Yew know yew want to. Try not to get stung.","Come to the Try not to get stung."],solution:{type:"dig",spot:{x:3088,y:3469,level:0},description:"next to the yew tree"}},{id:178,type:"cryptic",tier:"hard",text:["When no weapons are at hand, then is the time to reflect. In Saradomin's name, redemption draws closer."],solution:{type:"search",entity:"Drawers",spot:{level:0,topleft:{x:2818,y:3351},botright:{x:2818,y:3351}}}},{id:216,type:"cryptic",tier:"hard",text:["46 is my number. My body is the colour of burnt orange and crawls among those with eight. Three mouths I have, yet I cannot eat. My blinking blue eye hides my grave."],solution:{type:"dig",spot:{x:3169,y:3887,level:0},description:"on top of the sapphire spawn"}},{id:219,type:"cryptic",tier:"hard",text:["If you didn't want to be here and in danger, you should lever things well enough alone."],solution:{type:"dig",spot:{x:3154,y:3923,level:0},description:"in front of the lever in deep wilderness"}},{id:221,type:"cryptic",tier:"hard",text:["I lie lonely and forgotten in mid wilderness, Where the dead rise from their beds. Feel free to quarrel and wind me up, and dig while you shoot their heads."],solution:{type:"dig",spot:{x:3235,y:3673,level:0},description:"on top of the crossbow in the Graveyard of Shadows"}},{id:223,type:"cryptic",tier:"hard",text:["And so on, and so on, and so on. Walking from the land of many unimportant things leads to a choice of paths."],solution:{type:"dig",spot:{x:2591,y:3879,level:0},description:"at the crossoads on Etceteria"}},{id:224,type:"cryptic",tier:"hard",text:["This village has a problem with cartloads of the undead. Try checking the bookcase to find the answer."],solution:{type:"search",entity:"Bookcase",spot:{level:0,topleft:{x:2833,y:2992},botright:{x:2833,y:2992}}}}],e.emote=[{id:8,type:"emote",tier:"easy",text:["Dance in the shack in Lumbridge Swamp. Equip a bronze dagger, iron full helm and a gold ring."],area:{origin:{x:3202,y:3167,level:0},size:{x:4,y:4}},items:["Bronze Dagger","Iron full helm","Gold ring"],emotes:["Dance"],double_agent:!1,hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:3204,y:3169},botright:{x:3204,y:3169},level:0}}},{id:259,type:"emote",tier:"easy",text:["Think in the middle of the wheat field by the Lumbridge mill. Equip a sapphire necklace, polar camo legs and an oak shortbow."],area:{origin:{x:3155,y:3295,level:0},size:{x:6,y:9}},items:["Sapphire necklace","Polar camo legs","Oak shortbow"],emotes:["Think"],double_agent:!1,hidey_hole:{name:"Sack of items (hidey-hole)",location:{topleft:{x:3165,y:3302},botright:{x:3165,y:3302},level:0}}},{id:260,type:"emote",tier:"easy",text:["Laugh at the crossroads south of Sinclair Mansion. Equip a leather cowl, amulet of strength and iron scimitar."],area:{origin:{x:2737,y:3534,level:0},size:{x:8,y:8}},items:["Leather cowl","Amulet of strength","Iron scimitar"],emotes:["Laugh"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2731,y:3534},botright:{x:2731,y:3534},level:0}}},{id:261,type:"emote",tier:"easy",text:["Panic in the limestone mine. Equip bronze platelegs, a steel pickaxe and a steel helmet."],area:{origin:{x:3365,y:3497,level:0},size:{x:12,y:8}},items:["Bronze platelegs","Steel pickaxe","Steel helm"],emotes:["Panic"],double_agent:!1,hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:3376,y:3500},botright:{x:3376,y:3500},level:0}}},{id:262,type:"emote",tier:"easy",text:["Panic on the pier where you catch the Fishing Trawler. Have nothing equipped at all when you do."],area:{origin:{x:2676,y:3163,level:0},size:{x:1,y:12}},items:["Nothing"],emotes:["Panic"],double_agent:!1,hidey_hole:null},{id:263,type:"emote",tier:"easy",text:["Blow a raspberry at the monkey cage in Ardougne Zoo. Equip a studded leather body, bronze platelegs and a mud pie."],area:{origin:{x:2597,y:3273,level:0},size:{x:11,y:11}},items:["Studded leather body","Bronze platelegs","Mud pie"],emotes:["Raspberry"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2599,y:3280},botright:{x:2599,y:3280},level:0}}},{id:264,type:"emote",tier:"easy",text:["Clap on the causeway to the Wizards' Tower. Equip an iron helmet, emerald ring and leather gloves."],area:{origin:{x:3101,y:3187,level:0},size:{x:4,y:23}},items:["Iron helmet","Emerald ring","Leather gloves"],emotes:["Clap"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:3099,y:3189},botright:{x:3099,y:3188},level:0}}},{id:265,type:"emote",tier:"easy",text:["Twirl at the crossroads north of Rimmington. Equip a Sapphire ring, yellow flowers and leather chaps."],area:{origin:{x:2953,y:3238,level:0},size:{x:4,y:6}},items:["Sapphire ring","Yellow flowers","Leather chaps"],emotes:["Twirl"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2959,y:3241},botright:{x:2960,y:3240},level:0}}},{id:266,type:"emote",tier:"easy",text:["Blow raspberries outside the entrance to Keep Le Faye. Equip a studded leather coif, iron platebody and leather gloves."],area:{origin:{x:2757,y:3398,level:0},size:{x:7,y:8}},items:["Studded leather coif","Iron platebody","Leather gloves"],emotes:["Raspberry"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2756,y:3404},botright:{x:2756,y:3404},level:0}}},{id:267,type:"emote",tier:"easy",text:["Cheer for the monks at Port Sarim. Equip a studded leather coif, steel plateskirt and a sapphire necklace."],area:{origin:{x:3044,y:3234,level:0},size:{x:6,y:4}},items:["Studded Leather coif","Steel plateskirt","Sapphire necklace"],emotes:["Cheer"],double_agent:!1,hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:3042,y:3234},botright:{x:3042,y:3234},level:0}}},{id:268,type:"emote",tier:"easy",text:["Wave on Mudskipper Point. Equip a gold ring, leather chaps and a steel mace."],area:{origin:{x:2981,y:3106,level:0},size:{x:25,y:25}},items:["Gold ring","Leather chaps","Steel mace"],emotes:["Wave"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:3004,y:3123},botright:{x:3004,y:3123},level:0}}},{id:269,type:"emote",tier:"easy",text:["Shrug in the mine near Rimmington. Equip a gold necklace, gold ring and a bronze spear."],area:{origin:{x:2970,y:3230,level:0},size:{x:12,y:14}},items:["Gold necklace","Gold ring","Bronze spear"],emotes:["Shrug"],double_agent:!1,hidey_hole:{name:"Cart (hidey-hole)",location:{topleft:{x:2972,y:3237},botright:{x:2973,y:3235},level:0}}},{id:270,type:"emote",tier:"easy",text:["Clap in the main exam room of the Exam Centre. Equip a ruby amulet, blue flowers and leather gloves."],area:{origin:{x:3351,y:3342,level:0},size:{x:9,y:8}},items:["Ruby amulet","Blue flowers","Leather gloves"],emotes:["Clap"],double_agent:!1,hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:3351,y:3348},botright:{x:3351,y:3348},level:0}}},{id:271,type:"emote",tier:"easy",text:["Yawn in Varrock Palace library. Equip a holy symbol, leather vambraces and an iron warhammer."],area:{origin:{x:3207,y:3490,level:0},size:{x:11,y:8}},items:["Holy symbol","Leather vamraces","Iron warhammer"],emotes:["Yawn"],double_agent:!1,hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:3217,y:3494},botright:{x:3217,y:3494},level:0}}},{id:272,type:"emote",tier:"easy",text:["Dance in the Party Room. Equip a steel full helmet, steel platebody and an iron plateskirt."],area:{origin:{x:3036,y:3371,level:0},size:{x:20,y:15}},items:["Steel full helmet","Steel platebody","Iron plateskirt"],emotes:["Dance"],double_agent:!1,hidey_hole:{name:"Potted plant (hidey-hole)",location:{topleft:{x:3041,y:3372},botright:{x:3041,y:3372},level:0}}},{id:273,type:"emote",tier:"easy",text:["Twirl in Draynor Manor by the fountain. Equip an iron platebody, studded chaps and a bronze full helm."],area:{origin:{x:3086,y:3333,level:0},size:{x:5,y:5}},items:["Iron platebody","Studden chaps","Bronze full helm"],emotes:["Twirl"],double_agent:!1,hidey_hole:{name:"Dead tree (hidey-hole)",location:{topleft:{x:3090,y:3341},botright:{x:3092,y:3340},level:0}}},{id:274,type:"emote",tier:"easy",text:["Jump for joy at the beehives. Equip iron boots, an unholy symbol and a steel hatchet."],area:{origin:{x:2752,y:3437,level:0},size:{x:15,y:14}},items:["Iron boots","Unholy smybol","Steel hatchet"],emotes:["Jump for Joy"],double_agent:!1,hidey_hole:{name:"Beehive (hidey-hole)",location:{topleft:{x:2762,y:3447},botright:{x:2762,y:3447},level:0}}},{id:275,type:"emote",tier:"easy",text:["Headbang in the mine north of Al-kharid. Equip a Polar Camo Top, Leather Gloves and Leather Boots."],area:{origin:{x:3296,y:3291,level:0},size:{x:8,y:26}},items:["Polar Camo Top","Leather Gloves","Leather Boots"],emotes:["Headbang"],double_agent:!1,hidey_hole:{name:"Rocks (hidey-hole)",location:{topleft:{x:3295,y:3282},botright:{x:3295,y:3282},level:0}}},{id:276,type:"emote",tier:"easy",text:["Bow or curtsy outside the entrance to the Legends' Guild. Equip iron platelegs, an emerald amulet and an oak shieldbow."],area:{origin:{x:2726,y:3346,level:0},size:{x:6,y:4}},items:["Iron platelegs","Emerald Amulet","Oak Shieldbow"],emotes:["Bow or Curtsy"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2732,y:3352},botright:{x:2732,y:3352},level:0}}},{id:277,type:"emote",tier:"easy",text:["Cheer in the centre of the Burthorpe Games Room. Have nothing equipped at all when you do."],area:{origin:{x:2194,y:4946,level:0},size:{x:28,y:28}},items:["Nothing"],emotes:["Cheer"],double_agent:!1,hidey_hole:null},{id:278,type:"emote",tier:"easy",text:["Dance at the crossroads north of Draynor. Equip an iron chainbody, sapphire ring and a shieldbow."],area:{origin:{x:3108,y:3293,level:0},size:{x:4,y:4}},items:["Iron Chainbody","Sapphire Ring","Shieldbow"],emotes:["Dance"],double_agent:!1,hidey_hole:{location:{topleft:{x:3112,y:3292},botright:{x:3112,y:3292},level:0},name:"Rock (hidey-hole)"}},{id:279,type:"emote",tier:"easy",text:["Dance a jig by the entrance to the Fishing Guild. Equip an emerald ring, sapphire amulet, and a bronze chainbody."],area:{origin:{x:2611,y:3384,level:0},size:{x:5,y:3}},items:["Emerald Ring","Sapphire Amulet","Bronze Chainbody"],emotes:["Jig"],double_agent:!1,hidey_hole:{location:{topleft:{x:2619,y:3388},botright:{x:2619,y:3388},level:0},name:"Rock (hidey-hole)"}},{id:280,type:"emote",tier:"easy",text:["Bow or curtsy at the entrance to Het's Oasis. Equip an iron chainbody, leather chaps and a studded leather coif."],area:{origin:{x:3318,y:3225,level:0},size:{x:9,y:17}},items:["Iron Chainbody","Leather Chaps","Leather Coif"],emotes:["Bow or Curtsy"],double_agent:!1,hidey_hole:{name:"Sack (hidey-hole)",location:{topleft:{x:3323,y:3236},botright:{x:3323,y:3236},level:0}}},{id:281,type:"emote",tier:"easy",text:["Cry outside the south gates of Fort Forinthry. Equip a hard leather body, leather chaps and a bronze hatchet."],area:{origin:{x:3296,y:3520,level:0},size:{x:16,y:9}},items:["Hard Leather Body","Leather Chaps","Bronze Hatchet"],emotes:["Cry"],double_agent:!1,hidey_hole:{location:{topleft:{x:3299,y:3521},botright:{x:3299,y:3521},level:0},name:"Tree stump (hidey-hole)"}},{id:282,type:"emote",tier:"easy",text:["Clap on the top level of the mill north of East Ardougne. Equip an emerald ring, wood camo top and an unenchanted tiara."],area:{origin:{x:2630,y:3381,level:2},size:{x:6,y:6}},items:["Emerald Ring","Wood Camo Top","Unenchanted Tiara"],emotes:["Clap"],double_agent:!1,hidey_hole:{location:{topleft:{x:2635,y:3383},botright:{x:2635,y:3383},level:2},name:"Crate (hidey-hole)"}},{id:283,type:"emote",tier:"easy",text:["Yawn in Draynor Marketplace. Equip an iron kiteshield, steel longsword and studded leather chaps."],area:{origin:{x:3074,y:3246,level:0},size:{x:13,y:10}},items:["Iron Kiteshield","Steel Longsword","Studded Leather Chaps"],emotes:["Yawn"],double_agent:!1,hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:3078,y:3246},botright:{x:3078,y:3246},level:0}}},{id:284,type:"emote",tier:"easy",text:["Cheer at the Druids' Circle. Equip an air tiara, bronze two-handed sword and a gold amulet."],area:{origin:{x:2918,y:3478,level:0},size:{x:8,y:8}},items:["Air Tiara","Bronze 2h Sword","Gold Amulet"],emotes:["Cheer"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2922,y:3476},botright:{x:2922,y:3476},level:0}}},{id:7,type:"emote",tier:"medium",text:["Beckon at the Digsite, near the eastern winch. Bow or curtsy before you talk to me. Equip a pointed red and black snelm, snakeskin boots, and an iron pickaxe."],area:{origin:{x:3375,y:3440,level:0},size:{x:7,y:7}},items:["Pointed Red and Black Snelm","Snakeskin Boots","Iron Pickaxe"],emotes:["Beckon","Bow or Curtsy"],double_agent:!1,hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:3379,y:3445},botright:{x:3379,y:3445},level:0}}},{id:247,type:"emote",tier:"medium",text:["Panic by the mausoleum in Morytania. Wave before you speak to me. Equip a mithril plateskirt, a maple shieldbow and no boots."],area:{origin:{x:3490,y:3565,level:0},size:{x:25,y:17}},items:["Mithril Plateskirt","Maple Shieldbow","No boots"],emotes:["Panic","Wave"],double_agent:!1,hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:3506,y:3574},botright:{x:3506,y:3574},level:0}}},{id:248,type:"emote",tier:"medium",text:["Dance a jig under Shantay's Awning. Bow or curtsy before you talk to me. Equip a pointed blue snail helmet and an air staff."],area:{origin:{x:3303,y:3121,level:0},size:{x:4,y:4}},items:["Pointed Blue Snelm","Air Staff"],emotes:["Jig","Bow or Curtsy"],double_agent:!1,hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:3302,y:3130},botright:{x:3302,y:3130},level:0}}},{id:249,type:"emote",tier:"medium",text:["Think under the lens in the Observatory. Twirl before you talk to me. Equip a mithril chainbody, green dragonhide chaps and a ruby amulet."],area:{origin:{x:2439,y:3164,level:1},size:{x:3,y:3}},items:["Mithril Chainbody","Green Dragonhide Chaps","Ruby Amulet"],emotes:["Think","Twirl"],double_agent:!1,hidey_hole:{location:{topleft:{x:2445,y:3161},botright:{x:2445,y:3161},level:1},name:"Crate (hidey-hole)"}},{id:250,type:"emote",tier:"medium",text:["Twirl on the bridge by Barbarian Village. Salute before you talk to me. Equip an iron hatchet, steel kiteshield and a mithril full helmet."],area:{origin:{x:3102,y:3420,level:0},size:{x:7,y:2}},items:["Iron Hatchet","Steel Kiteshield","Mithril Full Helm"],emotes:["Twirl","Salute"],double_agent:!1,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:3114,y:3418},botright:{x:3115,y:3417},level:0}}},{id:251,type:"emote",tier:"medium",text:["Jump for joy in Yanille bank. Dance a jig before you talk to me. Equip an iron crossbow, adamant helmet and snakeskin chaps."],area:{origin:{x:2609,y:3088,level:0},size:{x:5,y:10}},items:["Iron Crossbow","Adamant Med Helmet","Snakeskin Chaps"],emotes:["Jump for Joy","Jig"],double_agent:!1,hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:2613,y:3088},botright:{x:2613,y:3088},level:0}}},{id:252,type:"emote",tier:"medium",text:["Dance in the centre of Canifis. Bow or curtsy before you talk to me. Equip a spiny helmet, mithril platelegs and an iron two-handed sword."],area:{origin:{x:3485,y:3480,level:0},size:{x:19,y:17}},items:["Spine Helm","Mithril Platelegs","Iron two-handed sword"],emotes:["Dance","Bow or Curtsy"],double_agent:!1,hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:3491,y:3480},botright:{x:3491,y:3480},level:0}}},{id:253,type:"emote",tier:"medium",text:["Cheer in the Barbarian Agility Arena. Headbang before you talk to me. Equip a steel platebody, maple shortbow and bronze boots."],area:{origin:{x:2528,y:3542,level:0},size:{x:28,y:18}},items:["Steel Platebody","Maple Shortbow","Bronze Boots"],emotes:["Cheer","Headbang"],double_agent:!1,hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:2545,y:3556},botright:{x:2545,y:3556},level:0}}},{id:254,type:"emote",tier:"medium",text:["Cry on the platform of the south-west tree in the Gnome Agility Arena. Indicate 'no' before you talk to me. Equip a steel kiteshield, ring of forging and green dragonhide chaps."],area:{origin:{x:2472,y:3418,level:2},size:{x:6,y:4}},items:["Green Dragonhide Chaps","Steel Kiteshield","Ring of Forging"],emotes:["Cry","No"],double_agent:!1,hidey_hole:{name:"Tree stump (hidey-hole)",location:{topleft:{x:2473,y:3418},botright:{x:2473,y:3418},level:2}}},{id:255,type:"emote",tier:"medium",text:["Beckon in Tai Bwo Wannai. Clap before you talk to me. Equip green dragonhide chaps, a ring of duelling and a mithril helmet."],items:["Green dragonhide chaps","Ring of duelling","Mithril helm"],emotes:["Beckon","Clap"],double_agent:!1,area:{origin:{x:2778,y:3057,level:0},size:{x:33,y:17}},hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:2793,y:3073},botright:{x:2793,y:3073},level:0}}},{id:256,type:"emote",tier:"medium",text:["Cheer in the Ogre Pen in the Training Camp. Show you are angry before you talk to me. Equip a green dragonhide body and chaps, and a steel squareshield."],items:["Green dragonhide body","Green dragonhide chaps","Steel square shield"],emotes:["Cheer","Angry"],double_agent:!1,area:{origin:{x:2523,y:3373,level:0},size:{x:11,y:5}},hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:2521,y:3377},botright:{x:2521,y:3377},level:0}}},{id:257,type:"emote",tier:"medium",text:["Cry in the Catherby archery shop. Bow or curtsy before you talk to me. Equip a round red and black snelm, a hard leather body and an unblessed silver sickle."],items:["Round red and black snelm","Hard leather body","Unblessed silver sickle"],emotes:["Cry","Bow or Curtsy"],double_agent:!1,area:{origin:{x:2824,y:3454,level:0},size:{x:6,y:4}},hidey_hole:{name:"Crates (hidey-hole)",location:{topleft:{x:2829,y:3455},botright:{x:2829,y:3455},level:0}}},{id:258,type:"emote",tier:"medium",text:["Yawn in the Castle Wars lobby. Shrug before you talk to me. Equip a ruby amulet, mithril scimitar and an iron square shield."],items:["Ruby amulet","Mithril scimitar","Iron square shield"],emotes:["Yawn","Shrug"],double_agent:!1,area:{origin:{x:2436,y:3080,level:0},size:{x:13,y:20}},hidey_hole:{name:"Stone blocks (hidey-hole)",location:{topleft:{x:2448,y:3088},botright:{x:2448,y:3087},level:0}}},{id:225,type:"emote",tier:"hard",text:["Panic in the heart of the Haunted Woods. Beware of double agents! Have no items equipped when you do."],emotes:["Panic"],items:["Nothing"],double_agent:!0,area:{origin:{x:3611,y:3483,level:0},size:{x:11,y:11}},hidey_hole:null},{id:226,type:"emote",tier:"hard",text:["Laugh in the Jokul's tent in the Mountain Camp. Beware of double agents! Equip a rune full helmet, blue dragonhide chaps and a fire battlestaff."],items:["Rune full helm","Blue dragonhide chaps","Fire battlestaff"],emotes:["Laugh"],double_agent:!0,area:{origin:{x:2790,y:3667,level:0},size:{x:8,y:9}},hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2790,y:3667},botright:{x:2790,y:3667},level:0}}},{id:227,type:"emote",tier:"hard",text:["Panic by the pilot on White Wolf Mountain. Beware of double agents! Equip mithril platelegs, a ring of life, and a rune hatchet."],items:["Mithril platelegs","Ring of life","Rune hatchet"],emotes:["Panic"],double_agent:!0,area:{origin:{x:2843,y:3489,level:1},size:{x:11,y:10}},hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2845,y:3496},botright:{x:2845,y:3496},level:1}}},{id:228,type:"emote",tier:"hard",text:["Salute in the banana plantation. Beware of double agents! Equip a diamond ring, amulet of power and nothing on your chest and legs."],items:["Diamond ring","Amulet of power","Nothing on your chest and legs"],emotes:["Salute"],double_agent:!0,area:{origin:{x:2908,y:3154,level:0},size:{x:27,y:21}},hidey_hole:{name:"Log (hidey-hole)",location:{topleft:{x:2914,y:3154},botright:{x:2914,y:3154},level:0}}},{id:229,type:"emote",tier:"hard",text:["Dance at the cat-doored pyramid in Sophanem. Beware of double agents! Equip a ring of life, an amulet of glory and an adamant two-handed sword."],items:["Ring of life","Uncharged amulet of glory","Adamant 2h sword"],emotes:["Dance"],double_agent:!0,area:{origin:{x:3292,y:2781,level:0},size:{x:6,y:4}},hidey_hole:{name:"Crate (hidey-hole)",location:{topleft:{x:3310,y:2784},botright:{x:3310,y:2783},level:0}}},{id:230,type:"emote",tier:"hard",text:["Blow a raspberry in the Fishing Guild bank. Beware of double agents! Equip an elemental shield, blue dragonhide chaps and a rune warhammer."],area:{origin:{x:2585,y:3420,level:0},size:{x:3,y:4}},items:["Elemental shield","Blue dragonhide chaps","Rune warhammer"],emotes:["Raspberry"],double_agent:!0,hidey_hole:{location:{topleft:{x:2585,y:3424},botright:{x:2585,y:3424},level:0},name:"Crate (hidey-hole)"}},{id:231,type:"emote",tier:"hard",text:["Blow a kiss between the tables in Shilo Village bank. Beware of double agents! Equip a splitbark helm, mud pie and rune platebody."],items:["Splitbark helmet","Mud pie","Rune platebofy"],emotes:["Blow kiss"],double_agent:!0,area:{origin:{x:2851,y:2951,level:0},size:{x:3,y:4}},hidey_hole:{name:"Potted plant (hidey-hole)",location:{topleft:{x:2856,y:2954},botright:{x:2857,y:2953},level:0}}},{id:232,type:"emote",tier:"hard",text:["Bow or curtsy at the top of the lighthouse. Beware of double agents! Equip a blue dragonhide body, blue dragonhide vambraces and no jewellery."],area:{origin:{x:2504,y:3636,level:2},size:{x:10,y:10}},items:["Blue dragonhide body","Blue dragon vambraces","No jewellry"],emotes:["Bow or Curtsy"],double_agent:!0,hidey_hole:{location:{topleft:{x:2512,y:3639},botright:{x:2512,y:3639},level:2},name:"Crate (hidey-hole)"}},{id:235,type:"emote",tier:"hard",text:["Yawn near the Wilderness Bandit camp obelisk. Beware of double agents! Equip an iron square shield, blue dragon vambraces and an iron pickaxe."],items:["Iron square shield","Blue dragonhide vambraces","Iron pickaxe"],emotes:["Yawn"],area:{origin:{x:3031,y:3728,level:0},size:{x:9,y:9}},hidey_hole:{name:"Dead tree (hidey-hole)",location:{topleft:{x:3031,y:3723},botright:{x:3032,y:3722},level:0}},double_agent:!0},{id:243,type:"emote",tier:"hard",text:["Shrug in the Zamorak temple, found in the eastern Wilderness. Beware of double agents! Equip bronze platelegs, an iron platebody and blue dragonhide vambraces."],items:["Bronze platelegs","Iron platebody","Blue dragonhide vambraces"],emotes:["Shrug"],area:{origin:{x:3234,y:3603,level:0},size:{x:12,y:12}},double_agent:!0,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:3245,y:3610},botright:{x:3245,y:3610},level:0}}},{id:233,type:"emote",tier:"master",text:["Cheer by the sulphur pit in the TzHaar City. Beware of double agents! Equip a fire cape, a Toktz-ket-xil and a spork."],area:{origin:{x:4632,y:5106,level:0},size:{x:9,y:9}},items:["Fire Cape","Toktz-Ket-Xil","Spork"],emotes:["Cheer"],double_agent:!0,hidey_hole:{name:"Table (hidey-hole)",location:{topleft:{x:4638,y:5106},botright:{x:4638,y:5106},level:0}}},{id:234,type:"emote",tier:"master",text:["Headbang inside the Slayer Tower. Beware of double agents! Equip an imp-hide hood, a Prifddinian musician's robe top and an amulet of magic."],emotes:["Headbang"],area:{origin:{x:3400,y:3541,level:0},size:{x:47,y:34}},items:["Imp-hide Hood","Prifddinia Musician's Robe Top","Amulet of Magic"],double_agent:!0,hidey_hole:{name:"Crates (hidey-hole)",location:{topleft:{x:3427,y:3541},botright:{x:3427,y:3541},level:0}}},{id:236,type:"emote",tier:"master",text:["Dare to laugh in the Green Ghost inn at Port Phasmatys. Beware of double agents! Equip an Iban's staff, a ghostly cloak and a cavalier."],emotes:["Laugh"],items:["Iban's Staff","Ghostly Cloak","Cavalier"],double_agent:!0,area:{origin:{x:3671,y:3489,level:0},size:{x:11,y:11}},hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:3676,y:3494},botright:{x:3676,y:3494},level:0}}},{id:237,type:"emote",tier:"master",text:["Blow a Raspberry at the celestial dragons on Dragontooth Isle. Beware of double agents! Equip a dragon mask, a Dragon Rider amulet and a dragon defender."],double_agent:!0,area:{origin:{x:2242,y:5956,level:0},size:{x:60,y:57}},items:["Any Dragon Mask","Dragon Rider Amulet","Dragon Defender"],emotes:["Raspberry"],hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2277,y:5966},botright:{x:2277,y:5965},level:0}}},{id:238,type:"emote",tier:"master",text:["Wave in front of the entrance to the Grand Library of Menaphos. Beware of double agents! Equip an asylum surgeon's ring and the Scabaras mask."],area:{origin:{x:3173,y:2708,level:0},size:{x:4,y:4}},items:["Asylum Surgeon's Ring","Scabaras Mask"],emotes:["Wave"],double_agent:!0,hidey_hole:{name:"Plant (hidey-hole)",location:{topleft:{x:3172,y:2711},botright:{x:3172,y:2711},level:0}}},{id:239,type:"emote",tier:"master",text:["Jig in the Edgeville Monastery garden. Beware of double agents! Equip a holy cithara, Saradomin's murmur and a ring of devotion."],emotes:["Jig"],items:["Holy Cithara","Saradomin's Murmur","Ring of Devotion"],double_agent:!0,area:{origin:{x:3046,y:3501,level:0},size:{x:12,y:8}},hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:3056,y:3499},botright:{x:3056,y:3499},level:0}}},{id:240,type:"emote",tier:"master",text:["Bow or curtsy at the charm sprite hunter area. Beware of double agents! Equip an enhanced yaktwee stick, a Dagon-hai hat and an amulet of ranging."],items:["Enhances Yaktwee Stick","Dagon-Hai Hat","Amulet of Ranging"],area:{origin:{x:2391,y:3363,level:0},size:{x:27,y:21}},emotes:["Bow or Curtsy"],double_agent:!0,hidey_hole:{name:"Rock (hidey-hole)",location:{topleft:{x:2398,y:3369},botright:{x:2398,y:3368},level:0}}},{id:241,type:"emote",tier:"master",text:["Think in the Hefin district of Prifddinas. Beware of double agents! Equip an ancient staff, Prifddinian worker's trousers and a berserker ring."],emotes:["Think"],items:["Ancient Staff","Prifdiinia Worker's Trousers","Berserker Ring"],area:{origin:{x:2174,y:3393,level:1},size:{x:30,y:22}},double_agent:!0,hidey_hole:{name:"Potted plant (hidey-hole)",location:{topleft:{x:2181,y:3402},botright:{x:2181,y:3402},level:1}}},{id:242,type:"emote",tier:"master",text:["Shrug in the Lumbridge Fishing Supplies shop. Beware of double agents! Equip demon slayer gloves, a boater and the cape of legends."],area:{origin:{x:3191,y:3251,level:0},size:{x:8,y:5}},items:["Demon Slayer Gloves","Any Boater","Cape of Legends"],emotes:["Shrug"],double_agent:!0,hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:3198,y:3250},botright:{x:3198,y:3250},level:0}}},{id:244,type:"emote",tier:"master",text:["Have an idea inside the Invention Guild. Beware of double agents! Equip a lab coat top, lab coat legs and a staff of light."],items:["Lab Coat Top","Lab Coat Legs","Staff of Light"],emotes:["Idea"],area:{origin:{x:6160,y:1039,level:0},size:{x:18,y:36}},double_agent:!0,hidey_hole:{name:"Barrel (hidey-hole)",location:{topleft:{x:6176,y:1050},botright:{x:6176,y:1050},level:0}}},{id:245,type:"emote",tier:"master",text:["Dance on an Uncharted Isle. Beware of double agents! Equip a dark bow, some infinity boots and culinaromancer gloves 10."],area:{origin:{x:1185,y:7372,level:0},size:{x:21,y:22}},items:["Dark bow","Infinity boots","Culinaromancer gloves 10"],emotes:["Dance"],double_agent:!0,hidey_hole:{location:{topleft:{x:1818,y:11653},botright:{x:1818,y:11653},level:0},name:"Water barrel (hidey-hole)"}},{id:246,type:"emote",tier:"master",text:["Salute in the Max Guild Garden. Beware of double agents! Have no items equipped when you do."],area:{origin:{x:2268,y:3320,level:1},size:{x:17,y:16}},items:["Nothing"],emotes:["Salute"],hidey_hole:null,double_agent:!0}],e.map=[{id:49,type:"map",tier:"easy",image_url:"assets/Map_clue_Wizards_Tower.png",text:["X marks the spot south of the wizard's tower."],ocr_data:[26,74,167,26,77,-17,6,8,26,77,-18,8,10,25,78,-17,6,7,26,80,-14,5,6,25,77,-15,7,8,26,77,-17,7,9,26,77,-18,6,8,25,80,-20,7,9,25,86,-19,7,8,25,82,-20,6,7,26,82,-18,5,6,26,82,-20,4,6,25,82,-19,5,7,25,85,-20,6,7,26,81,-21,8,10,26,78,-17,7,9,25,76,-21,7,9,25,79,-18,5,7,26,81,-15,6,8,26,79,-16,7,8,26,77,-19,7,8,25,78,-20,6,7,24,79,-15,15,20,25,80,-20,8,12,26,81,-11,13,17,26,79,-5,18,21,26,80,-15,12,17,25,79,-22,5,7,25,83,-23,7,8,26,80,-21,6,8,25,77,-19,8,10,26,78,-21,6,8,26,78,-20,6,7,25,82,-17,5,7,26,79,-20,6,7,26,77,-16,10,12,26,79,-18,9,14,26,64,37,40,52,26,69,24,45,56,26,68,26,41,50,26,67,40,55,67,26,67,33,52,62,26,79,-20,5,7,26,80,-23,6,7,26,80,-22,7,8,25,78,-20,5,6,25,78,-20,6,8,25,77,-20,4,5,26,80,-19,6,8,27,71,14,39,47,26,69,17,35,46,26,68,34,60,72,26,61,43,53,66,25,64,44,68,82,26,64,32,51,62,26,72,0,26,35,27,69,18,26,36,26,80,-18,6,8,25,79,-22,6,8,26,79,-23,5,6,25,78,-17,8,10,26,78,-21,6,8,25,78,-22,5,6,25,76,-8,20,24,27,67,27,43,50,26,69,12,34,43,27,64,38,66,77,27,57,60,53,63,27,59,66,71,84,27,59,51,64,79,26,62,42,52,61,27,74,-5,16,21,25,80,-18,5,6,26,81,-22,6,7,26,80,-25,6,7,26,77,-23,5,7,25,81,-21,6,7,26,78,-25,6,7,26,75,-9,19,25,26,61,40,57,67,27,62,37,62,72,26,59,56,60,73,26,54,44,25,33,26,55,44,31,38,26,58,60,73,89,26,64,28,48,67,27,69,24,31,43,26,80,-19,5,6,26,81,-22,5,6,25,80,-23,6,7,26,77,-23,7,9,26,78,-26,7,8,25,80,-23,6,8,27,67,24,48,57,27,56,69,62,80,27,58,47,64,79,26,56,45,40,46,26,53,55,40,48,26,53,46,25,30,25,60,41,42,52,27,58,61,61,76,26,70,24,30,40,25,82,-16,8,9,25,80,-22,5,6,26,79,-24,6,7,26,79,-18,6,8,26,78,-26,6,7,26,78,-23,6,8,25,74,-7,17,21,26,64,32,40,52,27,58,52,67,84,27,58,46,42,52,26,54,44,25,29,26,55,46,19,22,26,59,51,53,64,26,59,63,66,81,26,71,14,24,32,25,83,-17,6,7,26,79,-23,6,7,26,81,-23,6,8,26,79,-16,5,6,25,80,-19,6,8,26,82,-22,6,8,26,80,-11,12,15,26,70,4,27,33,27,59,44,64,78,27,61,40,56,69,26,57,57,71,85,26,59,54,55,67,26,60,50,66,80,26,62,46,56,70,26,76,-10,12,18,26,81,-18,4,6,25,79,-19,5,6,26,79,-24,5,6,25,81,-15,7,10,25,80,-17,8,10,26,81,-19,6,8,25,80,-11,12,14,25,74,-2,16,20,26,67,20,30,38,26,63,38,51,57,26,59,55,100,119,26,60,52,71,87,26,63,37,50,59,25,73,-5,19,24,26,74,-21,8,10,26,79,-21,4,5,26,80,-22,5,7,27,77,-25,5,7,26,82,-15,6,8,26,82,-18,7,8,25,82,-16,8,10,25,80,-16,8,10,26,79,-11,11,13,25,80,-14,10,13,25,81,-11,10,13,25,77,4,22,28,26,76,-6,18,24,26,77,-21,9,11,26,76,-20,10,12,27,77,-25,6,7,26,80,-21,6,8,26,79,-25,6,7,27,77,-27,5,7,25,84,-13,9,11,24,84,-15,8,10,24,85,-14,9,11,25,84,-12,7,9,25,84,-13,7,9,25,83,-14,10,12,24,84,-14,8,10,25,85,-16,10,12,26,80,-23,6,8,26,78,-24,6,8,26,77,-26,6,7,27,78,-26,5,6,26,80,-21,6,7,26,78,-25,6,8,27,76,-26,6,8],solution:{type:"dig",description:"east of the rock",spot:{x:3103,y:3133,level:0}}},{id:50,type:"map",tier:"easy",image_url:"assets/Map_clue_Brother_Galahad's_house.png",text:["X marks the spot in front of a small house surrounded by trees and near a bridge."],ocr_data:[26,77,175,26,77,-9,6,8,26,77,-10,8,10,25,78,-9,6,7,26,79,-1,15,19,25,77,-7,7,10,26,77,-9,7,9,26,77,-10,6,8,25,80,-12,7,9,25,86,-11,7,8,25,82,-12,6,7,26,82,-10,5,6,26,82,-12,4,6,25,82,-11,5,7,25,85,-12,6,7,26,81,-13,8,10,26,78,-9,7,9,25,76,-13,7,9,25,79,-10,5,14,27,70,41,40,50,26,71,37,48,59,26,77,-10,9,14,25,78,-12,6,7,24,80,-13,6,8,25,80,-14,5,7,26,84,-10,5,6,26,83,-8,6,8,26,82,-12,6,10,27,70,16,52,59,25,83,-15,7,8,26,80,-13,6,8,25,77,-11,8,10,26,78,-13,6,8,26,78,-12,6,16,26,72,36,34,42,27,70,35,45,50,26,79,-12,5,7,26,80,-13,5,6,26,80,-12,6,8,25,79,-13,7,8,26,79,-12,5,7,26,81,-9,6,7,27,71,17,45,51,26,76,-6,22,31,26,80,-15,6,7,26,80,-14,7,8,25,78,-12,5,6,25,78,-12,6,8,25,77,-12,4,9,27,69,41,39,52,27,70,38,46,57,26,80,-11,8,14,27,73,17,57,64,25,80,-15,10,17,24,80,-10,7,8,25,78,-5,21,24,26,77,-3,24,27,27,71,16,41,50,27,70,21,50,61,25,79,-14,6,8,26,79,-15,5,6,25,78,-9,8,10,26,78,-13,6,8,25,78,-14,5,6,26,69,41,55,61,27,75,15,40,46,27,76,9,22,26,26,79,-13,13,17,28,68,18,64,76,26,77,-1,25,37,26,74,22,71,89,25,75,13,66,85,27,72,21,55,87,27,71,21,57,64,26,81,-14,6,7,26,80,-17,6,7,26,77,-15,5,7,25,81,-13,6,7,26,78,-17,6,7,26,70,32,31,44,26,75,-4,22,38,26,68,37,40,53,27,70,17,57,66,26,77,2,45,58,26,74,6,43,68,26,70,42,108,131,25,76,0,39,50,27,78,-3,24,30,27,70,28,61,85,26,81,-13,6,10,25,80,-15,6,7,26,77,-15,7,9,26,78,-18,7,8,25,80,-15,6,8,27,72,19,26,31,26,72,22,53,59,27,68,42,51,63,28,67,21,58,66,25,76,-11,15,22,26,77,4,43,49,25,81,-9,8,10,26,79,-8,8,10,26,80,9,41,46,26,78,5,36,45,25,80,-13,5,9,26,79,-16,6,7,26,79,-10,6,8,26,78,-18,6,7,26,78,-15,6,8,26,72,37,27,31,27,72,53,36,45,27,68,60,53,62,27,77,-7,27,32,26,79,1,45,48,26,79,7,41,47,26,80,-10,7,9,25,82,-8,6,8,26,78,9,43,51,25,82,-7,7,12,26,79,-15,6,7,26,81,-15,6,8,26,79,-8,5,6,25,80,-11,6,8,26,82,-14,6,8,26,79,4,21,27,27,72,23,41,49,27,72,7,35,42,27,66,41,62,71,26,81,-13,7,11,26,78,8,50,55,26,78,4,41,47,26,78,5,42,48,27,73,18,60,76,27,75,8,27,34,25,79,-11,5,6,26,79,-16,5,6,25,81,-7,7,10,25,80,-9,8,10,26,81,-11,6,8,25,81,1,18,23,26,71,36,46,56,26,79,-11,6,7,25,75,9,31,37,26,66,49,58,70,26,72,23,21,25,26,72,15,26,31,25,78,-10,9,16,27,67,13,48,58,27,70,17,51,57,26,80,-14,5,7,27,77,-17,5,7,26,82,-7,6,8,26,82,-10,7,8,25,82,-8,8,10,25,80,-7,9,14,26,80,-5,12,18,25,81,-10,6,8,25,83,-8,8,10,25,82,-5,12,19,26,77,5,29,38,27,73,13,42,52,27,66,47,59,70,27,70,16,24,30,26,78,-8,18,24,26,79,-17,6,7,27,77,-19,5,7,25,84,-5,9,11,24,84,-7,8,10,24,85,-6,9,11,25,84,-4,7,9,25,84,-5,7,9,25,83,-6,10,12,24,84,-6,8,10,25,85,-8,10,12,26,80,-15,6,8,26,78,-16,6,8,26,77,-17,6,12,27,72,8,37,46,26,77,0,20,25,26,78,-17,6,8,27,76,-18,6,8],solution:{type:"dig",description:"in front of the door",spot:{x:2612,y:3481,level:0}}},{id:54,type:"map",tier:"easy",image_url:"assets/Map_clue_Falador_stones.png",text:["X marks the spot near some rocks and a tree."],ocr_data:[26,78,182,26,77,-2,6,8,26,77,-3,8,10,25,78,-2,6,7,26,80,1,5,6,25,77,0,7,8,26,77,-2,7,9,26,77,-3,6,8,25,80,-5,7,9,25,86,-4,7,8,25,82,-5,6,7,26,82,-3,5,6,26,82,-5,4,6,25,82,-4,5,7,25,85,-5,6,7,26,81,-6,8,10,26,78,-2,7,9,25,76,-6,7,9,25,79,-3,5,7,26,79,7,14,19,26,78,1,10,15,28,68,28,53,60,26,77,-3,9,14,24,80,-6,6,8,25,80,-7,5,7,26,84,-3,5,6,26,83,-1,6,8,26,82,-5,5,6,25,79,-7,5,7,25,83,-8,7,8,26,80,-6,6,8,25,77,-4,8,10,26,78,-6,6,8,26,78,-5,6,7,26,75,16,31,42,27,78,1,13,17,26,77,-1,15,18,26,80,-5,7,14,26,78,13,56,65,25,78,-1,19,28,26,79,-5,5,7,26,81,-2,6,7,26,79,-3,5,6,26,79,-5,5,7,26,80,-8,6,7,26,80,-7,7,8,25,78,-5,5,6,25,78,-5,6,8,25,77,-5,4,5,26,81,-5,4,6,27,79,7,41,44,26,79,0,22,26,26,81,8,45,53,25,80,-9,6,8,24,79,9,38,46,26,76,15,68,74,26,76,12,46,53,26,78,0,7,11,26,80,-3,6,8,25,79,-7,6,8,26,79,-8,5,6,25,78,-2,8,10,26,78,-6,6,8,25,78,-7,5,6,25,80,-5,6,8,27,78,11,67,75,26,78,-3,15,18,26,75,2,20,23,26,64,24,38,43,25,75,3,18,23,26,77,-5,11,21,25,76,-1,12,20,27,77,13,54,61,25,80,-3,5,6,26,81,-7,6,7,26,80,-10,6,7,26,77,-8,5,7,25,81,-6,6,7,26,78,-10,6,7,26,78,0,37,43,26,64,28,39,48,26,75,0,18,22,26,68,26,28,37,26,75,1,17,20,26,69,5,30,35,26,68,63,130,157,27,66,33,65,83,27,78,11,43,49,28,70,25,50,54,26,81,-7,5,6,25,80,-8,6,7,26,77,-8,7,9,26,78,-11,7,8,25,80,-8,6,8,26,78,-6,8,12,26,77,-6,6,8,26,70,3,21,29,26,78,-9,6,14,25,76,-5,11,15,26,78,-4,8,12,25,75,12,21,29,26,79,0,8,16,26,80,18,48,56,25,80,8,28,31,25,80,-7,5,6,26,79,-9,6,7,26,79,-3,6,8,26,78,-11,6,7,26,78,-8,6,8,25,78,3,29,39,26,76,8,49,63,27,77,-6,14,33,27,79,6,53,60,26,79,6,41,48,26,78,6,17,21,26,70,19,21,28,26,79,17,69,78,26,80,1,7,12,25,83,-2,6,7,26,79,-8,6,7,26,81,-8,6,8,26,79,-1,5,6,25,80,-4,6,8,26,82,-7,6,8,26,82,-2,9,11,26,79,-3,12,16,27,75,1,24,31,28,68,18,46,55,26,78,10,41,52,25,78,11,43,48,26,78,11,51,59,25,80,-2,6,10,26,80,-3,4,5,26,81,-3,4,6,25,79,-4,5,6,26,79,-9,5,6,25,81,0,7,10,25,80,-2,8,10,26,81,-4,6,8,25,82,4,22,25,25,78,14,39,45,26,77,12,41,46,26,76,17,55,65,26,79,-1,11,20,25,79,-5,6,7,26,78,-5,6,7,26,78,6,38,46,26,74,10,44,49,26,78,8,39,42,26,80,-7,5,7,27,77,-10,5,7,26,82,0,6,8,26,82,-3,7,8,25,82,-1,8,10,25,80,1,12,17,26,81,0,7,14,25,81,0,12,16,25,82,4,29,32,25,81,15,46,57,26,79,10,41,49,27,77,11,53,58,26,77,0,26,37,27,76,-7,17,21,26,80,-6,6,8,26,79,-10,6,7,27,77,-12,5,7,25,84,2,9,11,24,84,0,8,10,24,85,1,9,11,25,84,3,7,9,25,84,2,7,9,25,83,1,10,12,24,84,1,8,10,25,85,-1,10,12,26,80,-8,6,8,26,78,-9,6,8,26,77,-11,6,7,27,78,-11,5,6,26,80,-6,6,7,26,78,-10,6,8,27,76,-11,6,8],solution:{type:"dig",description:"west of the tree",spot:{x:3043,y:3399,level:0}}},{id:55,type:"map",tier:"easy",image_url:"assets/Map_clue_Falador_statue_crossroads.png",text:["X marks the spot near a statue."],ocr_data:[26,77,180,26,77,-4,6,8,26,77,-5,8,10,25,78,-4,6,7,26,80,-1,5,6,25,77,-2,7,8,26,77,-4,7,9,26,77,-5,6,8,25,80,-7,7,9,25,86,-6,7,8,25,82,-7,6,7,26,82,-5,5,6,26,82,-7,4,6,25,82,-6,5,7,25,85,-7,6,7,26,81,-8,8,10,26,78,-4,7,9,25,76,-8,7,9,25,79,-5,5,7,26,81,-2,6,8,26,77,4,21,28,27,71,14,32,44,25,78,-7,6,7,24,80,-8,6,8,26,76,2,24,29,27,75,21,31,38,26,83,-3,6,8,27,76,10,24,28,25,79,-9,6,10,25,83,-10,7,8,26,80,-8,6,8,25,77,-6,8,10,26,78,-8,6,8,26,78,-7,6,10,27,74,20,44,51,26,80,-7,5,6,26,79,-7,5,8,26,78,-2,16,21,26,80,-7,6,8,25,79,-8,7,9,26,75,3,19,29,26,81,-4,6,7,27,69,24,48,52,26,78,-4,11,15,26,80,-10,6,7,26,80,-9,7,8,25,78,-7,5,6,25,78,-7,6,8,25,77,-7,4,5,26,79,-3,14,18,27,81,-8,6,7,26,80,-8,6,8,26,75,14,49,54,27,69,25,44,51,24,79,-1,15,19,25,78,-3,12,16,26,78,-4,7,9,26,78,-2,7,9,26,80,-5,6,8,25,79,-9,6,8,26,79,-10,5,6,25,78,-4,8,10,26,78,-8,6,8,25,78,-9,5,6,25,80,-3,18,22,28,71,20,56,60,26,80,-8,6,8,26,81,-11,5,7,25,48,31,77,85,25,64,10,29,35,27,70,19,51,57,25,77,-5,6,9,27,79,-3,7,9,25,80,-5,5,6,26,81,-9,6,7,26,80,-12,6,7,26,77,-10,5,7,25,81,-8,6,7,26,78,-12,6,9,26,77,17,71,86,26,74,17,75,86,26,78,-8,10,16,25,80,-10,7,8,21,36,35,49,58,23,38,37,42,51,25,78,-7,7,8,25,78,-7,11,16,26,76,0,16,21,26,78,13,52,60,26,81,-8,5,11,25,80,-10,6,7,26,77,-10,7,9,26,78,-13,7,8,25,80,-10,6,8,26,77,-2,18,27,26,75,14,66,73,27,75,15,69,87,26,77,3,44,57,24,51,34,135,153,25,52,34,63,80,26,75,32,85,97,26,76,23,58,67,26,79,26,71,88,26,80,21,62,73,25,80,-3,20,24,26,79,-11,6,7,26,79,-5,6,8,26,78,-13,6,7,26,78,-10,6,8,27,71,17,48,53,26,77,-6,12,17,27,77,6,52,63,27,79,9,46,59,26,80,-7,6,14,26,72,14,94,107,26,74,25,67,86,26,78,28,77,89,26,79,13,44,52,25,83,-4,6,7,26,79,-10,6,7,26,81,-10,6,8,26,79,-3,5,6,25,80,-6,6,8,26,82,-9,6,8,26,80,0,19,23,28,66,33,62,69,27,76,-14,6,7,27,75,10,58,66,26,81,-8,7,8,25,75,3,26,27,26,78,15,51,59,25,80,-4,7,10,26,80,-5,5,8,26,76,3,21,24,25,79,-6,5,6,26,79,-11,5,6,25,81,-2,7,10,25,80,-4,8,10,26,81,-6,6,8,26,77,14,31,37,25,78,3,21,27,28,66,32,60,65,25,79,1,17,26,26,78,16,57,64,26,78,12,51,57,26,77,7,40,49,25,77,-3,10,13,26,69,2,23,29,25,72,4,27,28,26,80,-9,5,7,27,77,-12,5,7,26,82,-2,6,8,26,82,-5,7,8,25,82,-3,8,10,25,77,3,22,27,26,81,-3,7,8,27,72,21,44,52,25,83,-3,8,10,26,81,20,59,69,26,79,11,44,53,26,78,-10,5,6,26,78,-11,5,6,27,73,-5,16,19,26,80,-8,6,8,26,79,-12,6,7,27,77,-14,5,7,25,84,0,9,11,24,84,-2,8,10,24,85,-1,9,11,25,84,1,7,9,25,84,0,7,9,25,80,9,29,41,24,84,-1,8,10,25,83,11,44,53,26,80,-10,6,8,26,78,-11,6,8,26,77,-13,6,7,27,78,-13,5,6,26,80,-8,6,7,26,78,-12,6,8,27,76,-13,6,8],solution:{type:"dig",description:"two tiles south-east of the bench",spot:{x:2971,y:3414,level:0}}},{id:56,type:"map",tier:"easy",image_url:"assets/Map_clue_Varrock_east_mine.webp",text:["X marks the spot at the end of a path north of a mine."],ocr_data:[26,78,181,26,77,-3,6,8,26,77,-4,8,10,25,78,-3,6,7,26,80,0,5,6,25,77,-1,7,8,26,77,-3,7,9,26,77,-4,6,8,25,80,-6,7,9,25,86,-5,7,8,25,79,12,39,46,26,79,10,36,43,26,82,-6,4,6,25,82,-5,5,7,25,85,-6,6,7,26,81,-7,8,10,26,78,-3,7,9,25,76,-7,7,9,25,79,-4,5,7,26,81,-1,6,8,26,79,-2,7,8,26,78,-6,7,8,25,78,-6,6,7,24,80,-7,6,8,25,80,-8,5,7,26,77,25,58,68,26,77,21,54,64,26,82,-6,5,6,25,79,-8,5,7,25,83,-9,7,8,26,80,-7,6,8,25,77,-5,8,10,26,78,-7,6,8,26,78,-6,6,7,25,82,-3,5,7,26,80,-6,5,6,26,79,-6,5,7,26,72,9,49,55,26,71,16,95,106,25,73,6,43,49,26,71,11,50,56,26,79,-1,9,13,26,79,-4,5,6,26,79,-6,5,7,26,80,-9,6,7,26,80,-8,7,8,25,78,-6,5,6,25,78,-6,6,8,25,77,-6,4,5,26,81,-6,4,6,27,81,-6,9,13,26,80,-7,6,8,25,76,9,48,58,25,73,10,34,53,24,74,7,19,27,25,78,-5,6,8,26,77,3,23,27,26,78,-1,7,9,26,80,-4,6,8,25,79,-8,6,8,26,79,-9,5,6,25,78,-3,8,10,26,78,-7,6,8,25,78,-8,5,6,25,80,-6,6,7,27,77,13,43,49,26,77,3,87,97,26,69,16,54,74,26,63,24,39,51,25,74,7,23,31,26,64,26,36,40,25,75,12,42,48,27,79,-2,7,9,25,80,-4,5,6,26,81,-8,6,7,26,80,-11,6,7,26,77,-9,5,7,25,81,-7,6,7,26,78,-11,6,7,26,79,-8,6,8,26,75,10,43,49,26,66,17,46,53,26,70,12,60,84,26,72,7,85,103,26,76,-7,10,19,25,78,-6,7,8,25,76,9,50,58,27,79,-5,7,11,26,80,-5,5,6,26,81,-8,5,6,25,80,-9,6,7,26,77,-9,7,9,26,78,-12,7,8,25,80,-9,6,8,26,78,-7,7,9,26,75,10,44,51,26,65,16,39,46,26,76,-6,16,25,25,76,-6,15,21,26,64,31,91,107,25,71,21,31,35,26,79,-1,8,12,26,79,16,73,82,25,82,-1,8,11,25,80,-8,5,6,26,79,-10,6,7,26,79,-4,6,8,26,78,-12,6,7,26,78,-9,6,8,25,78,-5,8,9,26,76,7,43,49,27,78,-11,5,7,27,70,15,25,31,26,69,17,53,62,26,79,1,14,18,26,80,-4,7,9,25,82,-2,6,8,26,79,3,17,28,26,80,14,23,27,26,79,-9,6,7,26,81,-9,6,8,26,79,-2,5,6,25,80,-5,6,8,26,82,-8,6,8,26,82,-3,9,11,26,77,7,47,55,27,76,-9,11,19,27,74,-2,20,24,26,71,16,23,26,25,80,-5,6,7,25,76,2,17,20,26,71,16,26,32,26,75,10,28,38,26,79,12,22,25,25,79,-5,5,6,26,79,-10,5,6,25,81,-1,7,10,25,80,-3,8,10,26,81,-5,6,8,25,83,-2,8,10,25,80,-3,6,7,26,76,15,68,78,25,79,-2,10,18,26,79,-6,5,7,25,79,-6,6,7,26,69,16,22,26,25,61,35,46,55,26,71,5,29,41,26,77,8,23,26,26,80,-8,5,7,27,77,-11,5,7,26,82,-1,6,8,26,82,-4,7,8,25,82,-2,8,10,25,80,-3,7,9,26,81,-2,7,8,25,81,-4,6,8,26,80,16,46,54,26,80,16,43,49,26,78,11,42,49,27,75,15,42,56,27,74,14,42,55,27,75,11,47,52,26,79,-1,16,20,26,79,-11,6,7,27,77,-13,5,7,25,84,1,9,11,24,84,-1,8,10,24,85,0,9,11,25,84,2,7,9,25,84,1,7,9,25,83,0,10,12,24,84,0,8,10,25,85,-2,10,12,26,80,-9,6,8,26,78,-10,6,8,26,77,-12,6,7,27,78,-12,5,6,26,80,-7,6,7,26,78,-11,6,8,27,76,-12,6,8],solution:{type:"dig",description:"two tiles south-east of the dead tree",spot:{x:3290,y:3373,level:0}}},{id:63,type:"map",tier:"easy",image_url:"assets/Map_clue_Varrock_west_mine.png",text:["X marks the spot east of a tree near a small island on a river."],ocr_data:[26,77,177,26,77,-7,6,8,26,77,-8,8,10,25,78,-7,6,7,26,80,-4,5,6,25,77,-5,7,8,26,77,-7,7,10,26,77,-8,6,8,25,80,-10,7,9,25,86,-9,7,8,25,82,-10,6,7,26,82,-8,5,6,26,82,-10,4,9,25,82,-9,5,7,25,85,-10,6,7,26,81,-11,8,10,26,78,-7,7,9,25,76,-11,7,9,25,79,-8,5,7,26,81,-5,6,8,27,75,7,28,36,29,62,37,59,69,25,77,-9,7,12,27,66,32,55,62,25,80,-12,5,7,26,84,-8,5,7,26,72,13,38,45,26,68,17,39,46,25,79,-11,6,11,25,83,-13,7,8,26,80,-11,6,8,25,77,-9,8,10,26,78,-11,6,8,26,78,-10,6,7,26,81,-5,10,15,28,64,34,51,60,27,75,-3,19,23,26,80,-11,5,6,26,75,2,30,34,25,76,-4,18,22,26,75,-1,22,28,26,66,27,28,37,25,62,29,31,39,26,75,-2,16,19,26,80,-13,6,7,26,80,-12,7,8,25,78,-10,5,6,25,78,-10,6,8,25,77,-10,4,5,26,81,-10,4,6,27,80,-8,11,14,26,80,-11,6,8,25,84,-11,7,9,25,77,-6,19,23,24,65,27,33,39,25,72,4,20,28,26,78,-7,7,9,26,77,-3,9,16,26,80,-8,6,8,25,79,-12,6,8,26,79,-13,5,6,25,78,-7,8,10,26,78,-11,6,8,25,78,-12,5,6,25,80,-10,6,7,26,80,-10,6,7,26,80,-11,6,8,26,81,-14,5,7,26,77,-16,5,7,26,71,9,21,24,26,71,5,21,24,25,77,-8,6,8,27,79,-6,7,9,25,80,-8,5,6,26,81,-12,6,7,26,80,-15,6,7,26,77,-13,5,7,25,81,-11,6,7,26,78,-15,6,7,26,79,-11,7,13,29,63,33,40,53,26,78,-14,5,6,25,79,-2,31,40,26,79,-13,7,11,26,76,-12,7,8,25,78,-10,7,8,25,78,-11,7,9,27,79,-9,7,9,26,80,-9,5,6,26,81,-12,5,6,25,80,-13,6,7,26,77,-13,7,9,26,78,-16,7,8,25,80,-13,6,8,26,78,-11,7,11,26,70,9,41,53,26,66,11,127,130,26,71,30,106,124,26,73,9,25,31,26,75,4,21,25,25,81,-6,9,14,26,79,-6,8,10,26,82,-4,7,8,25,82,-6,8,9,25,80,-12,5,6,26,79,-14,6,7,26,79,-8,6,8,26,78,-16,6,7,26,76,-4,24,29,26,69,30,49,60,26,77,-10,9,16,27,69,23,44,54,27,71,29,50,60,26,77,9,33,41,26,75,19,35,40,26,70,33,53,63,26,73,27,40,49,26,80,-5,7,11,25,83,-7,6,7,26,79,-13,6,7,26,81,-13,6,8,26,79,-6,5,6,25,80,-9,6,8,26,82,-12,6,8,26,81,-1,18,26,26,69,32,61,71,27,73,-3,24,31,27,75,-4,22,29,27,64,50,74,86,26,67,41,63,75,26,75,7,28,35,26,77,6,26,34,27,67,56,56,63,26,72,35,39,47,25,79,-9,5,6,26,79,-14,5,6,25,81,-5,7,10,25,80,-7,8,10,26,80,-7,12,18,25,83,-6,8,13,25,80,-7,6,7,26,79,-9,6,7,25,78,0,21,28,26,66,45,75,92,26,66,36,77,87,26,72,19,46,55,25,79,-10,5,6,27,70,33,27,31,26,75,19,35,55,26,80,-12,5,7,27,77,-15,5,7,26,82,-5,6,8,26,82,-8,7,8,25,80,4,17,21,26,70,34,52,61,27,71,33,47,54,26,71,31,52,61,25,81,4,28,39,25,83,-6,7,21,26,80,-6,14,29,26,71,22,44,54,26,68,30,58,66,27,68,32,41,52,26,74,24,27,33,26,79,-15,6,7,27,77,-17,5,7,25,84,-3,9,11,24,84,-5,8,10,24,85,-4,9,11,25,84,-2,7,9,25,84,-3,7,9,25,82,2,16,21,25,75,26,24,30,25,74,34,28,42,26,72,25,26,36,26,76,-6,15,21,26,77,-16,6,7,27,78,-16,5,6,26,80,-11,6,7,26,78,-15,6,8,27,76,-16,6,8],solution:{type:"dig",description:"three tiles east of the tree",spot:{x:3166,y:3360,level:0}}},{id:44,type:"map",tier:"medium",image_url:"assets/Map_clue_Clock_Tower.png",text:["A crate near a bridge over a river."],ocr_data:[26,78,174,26,77,-10,6,8,26,77,-11,8,10,25,78,-10,6,7,26,80,-7,5,6,25,77,-8,7,8,26,77,-10,7,9,26,77,-9,10,15,25,76,11,21,24,26,76,29,24,34,26,79,2,18,23,26,82,-11,5,6,26,82,-13,4,6,25,82,-12,5,7,25,85,-13,6,7,26,81,-14,8,10,26,78,-10,7,9,25,76,-14,7,9,25,79,-11,5,7,26,81,-8,6,8,26,79,-9,7,8,26,76,-3,17,22,27,69,41,63,74,25,76,18,74,92,25,78,-2,29,55,26,76,29,55,63,26,74,33,50,60,26,74,26,23,33,26,71,26,23,34,26,82,-10,18,23,26,80,-14,6,8,25,77,-12,8,10,26,78,-14,6,8,26,78,-13,6,7,25,82,-10,5,7,27,77,14,42,51,27,71,36,52,64,26,79,-7,13,28,26,70,33,48,59,26,70,39,54,70,26,76,5,33,41,26,80,-1,49,55,26,78,1,27,48,26,73,17,40,66,26,79,-9,15,19,26,80,-15,7,8,25,78,-13,5,6,25,78,-13,6,8,25,77,-13,4,5,26,77,4,21,25,27,72,46,79,102,27,79,6,45,51,26,81,5,36,42,26,72,17,24,29,24,80,-11,7,12,26,69,36,52,60,27,70,38,60,67,27,68,40,70,81,26,72,26,29,35,25,78,-12,10,13,26,79,-16,5,6,25,78,-10,8,10,26,78,-14,6,8,25,78,-15,5,8,26,72,37,58,70,27,78,8,36,55,27,74,18,51,58,27,69,41,65,75,26,75,-6,17,21,26,76,24,76,94,27,75,24,85,107,25,76,5,45,55,27,79,-9,7,9,25,80,-11,5,6,26,81,-15,6,7,26,80,-18,6,7,26,77,-16,5,7,25,81,-14,6,7,26,75,5,39,45,26,75,11,38,44,26,73,13,44,57,26,75,4,45,54,25,80,-15,7,11,26,78,-1,44,52,26,76,-10,14,24,26,77,-8,16,25,26,76,24,85,104,27,79,-12,7,9,26,80,-12,5,6,26,81,-15,5,6,25,80,-16,6,7,26,77,-16,7,9,26,78,-19,7,8,25,80,-16,6,8,26,78,-14,7,9,27,67,43,61,72,26,76,-15,11,16,28,64,25,36,42,27,71,26,70,80,26,78,-13,7,9,25,81,-10,8,10,26,77,16,60,70,26,82,-7,7,8,25,82,-9,8,9,25,80,-15,5,6,26,79,-17,6,7,26,79,-11,6,8,26,78,-19,6,7,26,78,-16,6,8,26,71,22,49,60,26,73,11,24,30,27,77,-17,7,18,31,55,80,41,58,28,71,47,75,84,26,79,12,53,58,26,78,8,43,48,26,79,17,56,66,26,80,-8,7,15,25,83,-10,6,7,26,79,-16,6,7,26,81,-16,6,8,26,79,-9,5,6,25,80,-12,6,8,26,79,-3,25,32,26,69,38,48,58,26,79,-15,6,8,27,76,-20,6,7,27,75,4,53,60,26,79,8,47,55,26,78,10,44,51,26,78,7,43,48,26,78,11,48,57,26,78,13,50,64,26,81,-11,4,6,25,79,-12,5,6,26,79,-17,5,6,25,81,-8,7,10,25,80,-10,8,10,26,79,-5,15,20,25,82,-6,13,16,25,80,-10,6,7,26,79,-12,6,7,26,78,8,44,50,26,79,-8,20,27,26,76,26,89,99,26,78,-13,6,7,26,77,7,43,49,26,75,3,44,49,26,79,-14,4,5,26,80,-15,5,7,27,77,-18,5,7,26,82,-8,6,8,26,82,-11,7,8,25,82,-9,8,10,25,80,-10,7,9,26,81,-9,7,8,25,81,-11,6,8,26,81,10,44,49,26,81,14,53,60,26,79,6,44,49,26,77,8,54,62,27,76,4,48,57,27,75,6,63,69,26,80,-14,6,8,26,79,-18,6,7,27,77,-20,5,7,25,84,-6,9,11,24,84,-8,8,10,24,85,-7,9,11,25,84,-5,7,9,25,84,-6,7,9,25,83,-7,10,12,24,84,-7,8,10,25,84,-5,23,27,26,80,-16,6,8,26,78,-13,20,24,26,77,-12,29,33,27,78,-19,5,6,26,80,-14,6,7,26,78,-18,6,8,27,76,-19,6,8],solution:{type:"search",spot:{level:0,topleft:{x:2565,y:3248},botright:{x:2565,y:3248}},entity:"Crate"}},{id:45,type:"map",tier:"medium",image_url:"assets/Map_clue_McGrubors_Wood.png",text:["A crate in the woods directly next to a building."],ocr_data:[26,78,180,26,77,-4,6,8,26,77,-5,8,10,25,78,-4,6,7,26,80,-1,5,6,25,77,-2,7,8,26,77,-1,18,23,26,76,-2,13,17,25,80,-6,10,14,25,85,-3,11,15,25,82,-7,6,7,26,82,-5,5,6,26,82,-5,10,15,25,82,-6,5,7,25,85,-7,6,7,26,81,-8,8,10,26,78,-4,7,9,25,76,-8,7,9,25,79,-5,5,7,26,81,-2,6,8,26,79,-3,7,8,26,79,7,49,56,28,68,31,57,67,25,77,7,24,37,26,77,2,21,27,27,77,14,42,50,26,82,7,37,46,28,77,20,52,65,25,79,-9,5,7,25,83,-10,7,8,26,80,-8,6,8,25,77,-6,8,10,26,78,-8,6,8,26,78,-7,6,7,26,80,2,15,22,27,76,5,24,30,28,74,21,58,66,26,80,4,40,49,26,79,-3,11,18,25,78,-5,14,18,27,73,23,57,66,26,81,4,32,40,26,76,5,24,34,26,77,-1,17,21,26,80,-10,6,7,26,80,-9,7,8,25,78,-7,5,6,25,78,-7,6,8,25,77,-7,4,5,26,81,-7,4,7,27,81,-7,8,10,26,78,-2,21,24,27,81,20,56,65,26,79,-3,19,24,24,80,-5,7,8,26,80,7,37,41,27,74,13,28,33,27,77,3,17,21,27,74,16,42,46,25,79,-9,6,8,26,79,-10,5,6,25,78,-4,8,10,26,78,-8,6,8,26,77,-6,13,17,27,74,18,41,50,27,76,8,28,33,26,80,-8,6,8,26,80,8,45,56,26,77,-12,6,12,25,79,-7,6,8,27,77,16,52,59,25,75,-1,13,20,27,79,-3,7,10,25,80,-5,5,6,26,81,-9,6,7,26,80,-12,6,7,26,77,-10,5,7,25,81,-8,6,7,26,78,-12,6,7,26,78,-6,13,18,26,75,-3,21,27,27,75,4,28,34,26,82,12,54,62,26,80,3,32,48,27,78,6,48,63,27,77,26,82,94,26,74,6,24,33,28,74,12,27,33,26,80,-6,5,7,26,81,-9,5,6,25,80,-10,6,7,26,77,-10,7,9,26,78,-13,7,8,25,80,-10,6,8,27,73,8,30,41,26,76,-4,14,17,27,74,-3,21,28,26,80,0,39,46,25,77,-9,8,11,26,79,7,55,61,26,83,22,51,62,26,77,4,25,32,26,79,8,25,34,25,82,-2,8,9,25,80,-9,5,6,26,79,-11,6,7,26,79,-5,6,8,26,78,-13,6,7,26,77,-9,9,13,27,74,10,32,37,27,74,7,31,37,27,74,2,31,37,27,82,1,44,51,26,81,-2,23,31,26,81,2,21,31,26,81,7,48,55,26,76,15,36,42,26,80,-2,7,9,26,81,1,14,18,26,79,-10,6,7,26,81,-10,6,8,26,79,-3,5,6,25,80,-6,6,8,26,82,-9,6,8,26,81,-1,15,19,26,78,-5,20,23,27,76,-11,14,18,28,72,10,35,41,26,82,2,33,39,28,71,41,70,80,28,73,31,47,54,26,77,8,20,25,26,80,-5,5,8,27,76,10,28,34,25,79,-6,5,6,26,79,-11,5,6,25,81,-2,7,10,25,80,-4,8,10,26,81,-6,6,9,26,77,15,43,48,25,80,-1,14,17,28,73,16,35,41,26,76,8,33,40,27,76,7,26,35,29,69,45,56,64,29,76,37,44,52,26,74,9,32,36,28,71,12,39,43,26,79,-8,4,5,26,80,-9,5,7,27,77,-12,5,7,26,82,-2,6,8,26,82,-5,7,8,25,82,-3,8,10,26,78,3,17,28,27,77,11,27,34,26,80,-1,13,16,26,82,0,14,19,27,77,14,29,38,26,79,0,14,22,28,74,9,27,33,27,77,-7,13,17,27,75,-6,22,25,26,80,-8,6,8,26,79,-12,6,7,27,77,-14,5,7,25,84,0,9,11,24,84,-2,8,10,24,85,-1,9,11,25,84,1,7,9,25,84,0,7,9,25,83,-1,10,12,24,84,-1,8,10,25,83,1,18,26,26,80,-10,6,8,26,76,-5,22,27,26,77,-13,6,7,27,78,-13,5,6,26,80,-8,6,7,26,78,-12,6,8,27,76,-13,6,8],solution:{type:"search",spot:{level:0,topleft:{x:2658,y:3488},botright:{x:2658,y:3488}},entity:"Crate"}},{id:48,type:"map",tier:"medium",image_url:"assets/Map_clue_Ourania_chaos_altar.png",text:["X marks the spot between lava lakes."],ocr_data:[25,89,175,26,77,-9,6,8,26,77,-10,8,10,25,78,-9,6,7,26,80,-6,5,6,25,77,-7,7,8,26,77,-9,7,9,26,76,-7,23,36,25,78,-1,47,58,25,86,-11,7,8,25,82,-12,6,7,26,82,-10,5,6,26,82,-12,4,6,25,82,-11,5,7,25,85,-12,6,7,26,81,-13,8,10,26,78,-9,7,9,25,76,-13,7,9,25,79,-10,5,7,26,81,-7,6,8,26,79,-8,7,8,26,78,-12,7,8,26,77,4,50,68,24,106,29,45,59,25,84,3,43,50,26,83,-8,11,14,26,83,-8,6,8,26,82,-12,5,6,25,79,-14,5,7,25,83,-15,7,8,26,80,-13,6,8,25,77,-11,8,10,26,78,-13,6,8,26,78,-12,6,7,25,82,-9,5,7,26,80,-12,5,6,27,79,-1,47,54,26,80,-11,8,19,25,112,35,47,55,25,91,10,33,41,26,79,-12,5,7,26,81,-9,6,7,26,79,-10,5,6,26,79,-12,5,7,26,80,-15,6,7,26,80,-14,7,8,25,78,-12,5,6,25,78,-12,6,8,25,77,-12,4,5,26,81,-12,4,6,27,81,-10,17,24,27,81,3,43,54,25,104,12,31,36,22,200,55,4,6,22,187,54,17,24,25,83,3,27,46,26,78,-9,7,9,26,78,-7,7,9,26,80,-10,6,8,25,79,-14,6,8,26,79,-15,5,6,25,78,-9,8,10,26,78,-13,6,8,25,78,-14,5,6,25,80,-12,6,7,27,72,18,107,132,27,79,6,60,70,25,100,14,28,32,22,187,63,2,3,22,188,62,2,3,24,129,44,55,60,25,77,-10,6,10,27,79,-8,7,9,25,80,-10,5,6,26,81,-14,6,7,26,80,-17,6,7,26,77,-15,5,7,25,81,-13,6,7,26,78,-17,6,7,26,79,-14,6,8,26,72,1,46,59,26,78,-1,40,45,26,83,3,45,52,24,124,46,83,95,22,171,67,13,22,22,181,66,3,4,23,126,39,46,53,27,79,-10,8,13,26,80,-11,5,6,26,81,-14,5,6,25,80,-15,6,7,26,77,-15,7,9,26,78,-18,7,8,25,80,-15,6,8,26,78,-13,7,9,26,77,-13,6,8,26,77,0,41,47,26,78,-1,41,46,26,72,20,101,114,23,136,58,31,42,22,171,73,2,3,22,167,67,9,12,25,90,9,42,47,25,82,-8,8,9,25,80,-14,5,6,26,79,-16,6,7,26,79,-10,6,8,26,78,-18,6,7,26,78,-15,6,8,25,78,-11,8,9,26,81,-8,18,26,27,77,1,61,71,26,89,9,51,61,26,89,8,38,44,25,93,12,32,38,23,150,58,37,47,24,115,21,19,24,26,80,-7,7,9,25,83,-9,6,7,26,79,-15,6,7,26,81,-15,6,8,26,79,-8,5,6,25,80,-11,6,8,26,82,-14,6,8,26,82,-9,9,11,24,128,27,29,36,24,111,69,98,116,24,118,58,81,98,25,105,17,32,38,26,80,18,82,92,26,80,0,24,37,26,80,1,20,33,26,78,-1,47,61,26,81,-9,4,7,25,79,-11,5,6,26,79,-16,5,6,25,81,-7,7,10,25,80,-9,8,10,26,81,-11,6,8,25,83,-8,8,10,25,95,8,29,34,22,181,58,18,27,22,186,58,16,24,25,92,8,32,40,26,80,13,65,77,26,78,-9,13,16,25,79,-12,5,6,27,71,2,56,70,26,79,-13,4,5,26,80,-14,5,7,27,77,-17,5,7,26,82,-7,6,8,26,82,-10,7,8,25,82,-8,8,10,25,80,-9,7,9,26,80,-6,17,22,25,88,27,105,116,25,96,11,28,33,25,83,-8,7,9,26,81,-12,6,7,26,76,-4,52,59,27,75,-3,49,64,27,77,-18,5,6,26,80,-13,6,8,26,79,-17,6,7,27,77,-19,5,7,25,84,-5,9,11,24,84,-7,8,10,24,85,-6,9,11,25,84,-4,7,9,25,84,-5,7,9,25,81,-1,21,24,24,84,-6,8,10,25,85,-8,10,12,26,80,-15,6,8,26,77,-14,11,14,26,76,-16,10,14,27,78,-18,5,6,26,80,-13,6,7,26,78,-17,6,8,27,76,-18,6,8],solution:{type:"dig",description:"behind the chaos altar at Ourania",spot:{x:2454,y:3230,level:0}}},{id:51,type:"map",tier:"medium",image_url:"assets/Map_clue_Chemist's_house.png",text:["X marks the spot next to a building at the coast."],ocr_data:[26,78,178,26,77,-6,6,8,26,77,-7,8,10,25,78,-6,6,7,26,80,-1,8,13,26,73,17,36,44,26,77,-6,7,12,26,77,-7,6,8,25,80,-9,7,9,25,86,-8,7,8,25,82,-9,6,7,26,82,-7,5,6,26,82,-9,4,6,25,82,-8,5,7,25,85,-9,6,7,26,81,-10,8,10,26,78,-6,7,9,25,76,-10,7,9,25,79,-7,5,7,26,81,-3,8,11,27,73,22,22,27,27,68,47,65,76,25,78,-9,6,8,26,71,19,49,53,27,71,21,55,61,26,84,-7,5,6,26,83,-5,6,8,26,82,-9,5,6,25,79,-11,5,7,25,83,-12,7,8,26,80,-10,6,8,25,77,-8,8,10,26,78,-10,6,8,26,78,-9,6,7,25,82,-6,5,7,26,80,-9,5,6,26,76,8,19,25,27,74,29,55,64,26,77,0,27,30,27,69,22,54,66,26,76,3,27,34,26,81,-6,6,7,26,79,-7,5,6,26,79,-9,5,7,26,80,-12,6,7,26,80,-11,7,8,25,78,-9,5,6,25,78,-9,6,8,25,77,-9,4,5,26,81,-9,4,6,27,81,-10,6,7,26,80,-10,6,8,26,75,29,35,46,25,77,7,35,46,27,67,30,53,68,27,68,25,56,62,26,78,-6,7,9,26,78,-4,7,9,26,80,-7,6,8,25,79,-11,6,8,26,79,-12,5,6,25,78,-6,8,10,26,78,-10,6,8,25,78,-11,5,6,25,80,-9,6,7,26,80,-9,6,7,26,80,-10,6,8,26,79,-3,20,27,27,71,28,42,47,26,78,-7,11,14,26,78,-10,6,8,25,77,-7,6,8,27,79,-5,7,9,25,80,-7,5,6,26,81,-11,6,7,26,80,-14,6,7,26,77,-12,5,7,25,81,-10,6,7,26,78,-14,6,8,26,78,-3,43,48,26,76,-4,42,46,26,78,-13,5,6,26,72,38,60,69,26,78,2,32,40,27,75,13,48,62,25,77,-7,12,21,25,78,-10,7,17,27,79,-8,7,18,26,80,-8,5,14,26,81,-11,5,6,25,80,-12,6,7,26,77,-12,7,9,26,78,-15,7,8,25,80,-12,6,8,26,78,-10,7,9,26,77,-10,6,8,26,75,-7,17,24,26,70,36,44,51,25,76,5,42,52,26,77,4,22,42,26,79,25,42,71,26,78,15,25,41,26,80,16,25,40,26,80,26,56,71,25,80,-11,5,6,26,79,-13,6,7,26,79,-7,6,8,26,78,-15,6,7,26,78,-12,6,8,25,78,-8,8,11,26,78,-11,6,10,27,76,0,21,26,27,74,26,40,45,26,70,62,123,140,26,77,31,58,73,26,80,-2,14,21,25,82,-5,6,8,26,80,2,23,29,26,80,23,60,76,26,79,-12,6,7,26,81,-12,6,8,26,79,-5,5,6,25,80,-8,6,8,26,82,-11,7,9,26,82,1,43,47,26,79,-3,41,46,27,76,-7,44,51,27,69,39,63,75,26,81,-7,14,25,26,78,12,43,49,26,78,11,42,48,26,79,13,42,48,26,79,12,41,46,26,79,13,43,48,25,79,-8,5,6,26,79,-13,5,6,25,81,-4,7,10,25,80,-6,8,10,26,81,-8,6,8,25,83,-5,8,10,25,80,-6,6,7,26,79,-8,6,7,25,77,6,17,20,26,70,40,44,55,26,70,41,56,65,26,71,28,39,45,26,75,9,31,38,26,76,-14,4,5,27,72,14,33,39,26,79,-8,13,17,27,77,-14,5,7,26,82,-4,6,8,26,82,-7,7,8,25,82,-5,8,10,25,80,-6,7,9,26,81,-5,7,8,25,81,-4,18,21,25,82,5,53,58,25,83,-1,23,26,26,81,-9,6,9,26,76,0,20,24,27,70,24,31,41,27,68,38,59,65,26,68,35,68,79,26,79,-14,6,7,27,77,-16,5,7,25,84,-2,9,11,24,84,-4,8,10,24,85,-3,9,11,25,84,-1,7,9,25,84,-2,7,9,25,83,-3,10,12,24,84,-3,8,10,25,85,-5,10,12,26,80,-12,6,8,26,78,-13,6,8,26,77,-15,6,7,27,78,-15,5,6,26,72,21,29,39,26,75,4,32,38,27,76,-15,6,8],solution:{type:"dig",description:"west of the Chemist's House",spot:{x:2923,y:3210,level:0}}},{id:52,type:"map",tier:"medium",image_url:"assets/Map_clue_Miscellania.png",text:["X marks the spot between some trees at the end of a path."],ocr_data:[26,79,180,26,77,-4,6,8,26,77,-5,8,10,25,78,-4,6,7,26,80,-1,5,6,25,77,-2,7,8,26,77,-4,7,9,26,77,-5,6,8,25,80,-7,7,9,25,86,-6,7,8,25,82,-7,6,7,26,82,-5,5,6,26,82,-7,4,6,25,82,-6,5,7,25,85,-7,6,7,26,81,-8,8,10,26,78,-4,7,9,25,76,-8,7,9,25,79,-3,11,16,26,81,2,13,21,26,79,-3,7,8,26,78,-7,7,8,25,78,-7,6,7,25,80,6,26,32,27,78,17,33,38,26,84,-5,5,6,26,83,-3,6,12,27,80,14,34,42,25,79,-9,5,7,25,83,-10,7,8,26,80,-8,6,8,25,77,-6,8,10,26,78,-8,6,8,26,78,-4,17,23,26,81,13,52,58,27,79,7,43,49,27,78,5,24,29,27,78,15,31,35,26,80,3,22,32,26,78,18,39,46,26,79,-7,5,7,26,80,0,16,22,27,75,42,62,67,26,79,-7,5,7,26,80,-10,6,7,26,80,-9,7,8,25,78,-7,5,6,25,78,-7,6,8,25,77,-3,11,25,27,79,12,42,57,27,80,9,56,63,27,79,3,25,34,26,80,19,41,48,25,80,-11,6,8,24,80,-5,7,8,25,78,-6,6,8,26,78,-4,7,9,26,78,-2,7,9,26,80,-5,6,8,25,79,-9,6,8,26,79,-10,5,6,25,78,-4,8,10,26,78,-8,6,8,25,78,-9,5,6,26,79,22,62,83,26,80,-7,6,7,26,80,-8,6,8,26,81,-11,5,7,26,77,-6,18,23,26,78,8,27,32,26,78,-8,6,8,25,77,-5,6,8,27,79,-3,7,9,25,80,-5,5,6,26,81,-9,6,7,26,80,-12,6,7,26,77,-10,5,7,25,81,-8,6,7,26,78,-12,6,7,26,78,21,63,85,26,77,-10,6,7,27,77,15,42,49,25,77,18,59,73,26,73,35,98,119,27,75,28,45,52,25,78,-7,7,8,25,78,-8,7,9,27,79,-6,7,9,26,80,-6,5,6,26,81,-9,5,6,25,80,-10,6,7,26,77,-10,7,9,26,78,-13,7,8,25,80,-10,6,8,27,77,16,62,75,26,76,13,60,66,28,75,36,64,73,26,77,2,31,47,25,61,31,149,169,26,78,-7,7,9,25,81,-4,8,10,26,79,-2,8,17,27,78,26,36,40,26,79,17,32,36,25,80,-9,5,6,26,79,-11,6,7,26,79,-5,6,8,26,78,-13,6,7,26,78,-10,6,8,26,77,10,44,50,26,78,5,41,48,27,78,-12,5,7,27,81,-11,6,11,26,61,31,157,169,26,70,17,120,144,26,77,5,48,70,29,75,55,54,72,26,79,9,28,34,26,82,5,25,31,26,79,-10,6,7,26,81,-10,6,8,26,79,-3,5,6,25,80,-6,6,8,26,82,-9,6,8,26,81,18,60,66,26,78,11,62,69,27,76,-14,6,7,27,77,-12,6,8,26,79,-2,16,24,26,68,33,99,138,26,68,26,83,124,26,79,17,57,66,26,79,9,39,44,26,80,6,34,37,25,79,-6,5,6,26,79,-11,5,6,25,81,-2,7,10,25,80,-4,8,10,26,81,-4,9,16,26,81,25,67,86,26,79,17,50,59,26,78,20,59,78,25,80,-4,11,17,26,79,14,67,75,26,78,10,46,59,26,76,11,53,66,25,79,-7,5,6,26,76,-12,4,5,26,79,-8,4,5,26,80,-9,5,7,27,77,-12,5,7,26,82,-2,6,8,26,82,-5,7,8,25,82,2,22,28,26,80,5,30,36,26,81,-3,7,10,26,80,12,48,53,26,82,13,48,53,25,83,-3,7,10,26,80,8,41,48,26,78,1,36,44,26,77,0,38,46,27,77,-13,5,6,26,80,-8,6,8,26,79,-12,6,7,27,77,-14,5,7,25,84,0,9,11,24,84,-2,8,10,24,85,-1,9,11,25,84,1,7,9,25,84,0,7,9,25,83,-1,10,12,24,84,-1,8,10,25,85,-3,10,12,26,80,-10,6,9,26,78,-11,6,8,26,77,-13,6,7,27,78,-13,5,6,26,80,-8,6,7,26,78,-12,6,8,27,76,-13,6,8],solution:{type:"dig",description:"between the signpost and the evergreen",spot:{x:2536,y:3865,level:0}}},{id:53,type:"map",tier:"medium",image_url:"assets/Map_clue_Tower_of_Life.png",text:["X marks the spot on a surprisingly detailled map next to a statue on a road."],ocr_data:[29,69,156,28,75,-7,8,11,31,64,7,30,34,28,75,-3,10,14,29,74,-1,15,19,28,74,-2,29,36,27,67,-8,36,44,27,66,-29,16,19,25,72,-27,43,49,26,73,-28,19,25,27,73,-11,37,43,30,72,10,48,57,29,79,-2,6,9,28,78,13,32,37,28,79,15,36,41,29,77,13,37,42,29,76,-4,9,12,28,75,-8,10,12,28,77,-7,8,11,30,74,2,23,29,28,64,-7,34,41,27,69,-33,15,19,26,72,-34,13,17,25,72,-25,38,45,27,72,-12,38,45,28,80,-8,10,13,31,70,18,36,41,29,79,-1,6,8,26,59,24,32,38,25,51,16,10,11,26,56,27,31,37,28,75,-7,10,15,30,71,-2,17,21,29,74,-3,14,19,31,68,15,43,50,29,67,0,46,54,28,62,-27,16,20,27,66,-29,15,20,27,68,-17,26,31,28,77,-7,29,37,33,66,16,31,39,29,78,1,6,7,29,77,1,6,9,25,56,28,34,40,25,51,15,8,10,26,54,26,33,40,28,66,12,23,30,30,64,10,29,33,29,71,4,21,26,30,75,1,15,20,29,80,-5,13,18,28,78,-6,28,33,27,82,-14,21,26,27,77,-20,11,14,27,77,-10,10,13,30,65,6,31,37,29,76,-2,10,12,29,76,0,9,13,27,61,25,47,54,26,56,21,36,42,27,59,24,53,61,28,75,-3,13,17,28,67,6,18,22,31,60,11,35,42,31,63,8,34,44,29,75,-2,14,18,29,77,-10,11,13,28,77,-16,9,12,28,74,-19,9,12,30,69,-3,20,26,30,69,3,25,31,28,76,-1,7,9,29,75,-3,11,15,28,78,-5,6,8,29,77,-6,11,16,31,69,3,20,25,30,72,-2,18,24,31,66,11,35,42,28,66,1,19,24,32,59,10,40,46,32,63,7,27,33,29,74,-6,13,18,29,47,19,73,78,29,75,-8,14,18,30,71,-3,22,26,31,66,12,33,40,30,71,5,26,32,32,66,7,25,29,30,69,3,20,26,31,67,3,22,28,30,71,1,24,31,31,67,10,35,40,31,66,1,44,51,29,72,-6,22,28,29,67,5,25,32,29,65,11,23,30,29,66,7,21,25,21,80,6,68,78,31,64,5,26,33,32,65,14,36,44,30,72,10,26,31,33,61,15,38,41,29,79,2,8,9,29,74,6,19,22,29,75,-2,15,20,30,74,-1,18,24,28,76,-7,13,18,32,66,8,38,46,29,70,-1,28,35,30,68,9,32,40,30,72,1,20,25,29,75,-6,11,17,29,67,12,10,16,29,76,-3,12,16,31,67,11,55,61,29,70,4,38,46,29,76,1,19,23,29,80,6,21,27,28,82,6,26,32,31,69,9,31,36,33,67,11,34,44,28,77,-4,9,12,28,77,-5,16,21,32,68,8,40,48,28,79,-7,11,13,29,78,-8,11,16,28,65,10,49,56,26,54,19,36,42,26,59,21,40,46,29,70,15,44,60,29,74,4,22,33,29,73,8,47,54,29,61,-6,37,46,29,57,-8,31,39,28,79,1,28,34,29,71,-7,27,32,29,76,3,16,21,32,64,10,29,37,32,70,10,24,28,28,79,-5,10,12,27,68,15,40,47,25,52,12,11,15,25,53,12,30,35,25,51,16,16,20,26,56,25,41,49,29,78,-1,13,19,28,63,-7,34,42,27,68,-38,13,17,27,67,-31,19,24,28,74,-2,49,56,29,78,-10,27,32,32,65,11,25,31,29,76,-1,14,22,28,75,1,23,29,28,77,-4,10,12,28,67,16,33,39,25,52,15,11,13,26,68,-13,39,47,25,54,14,30,35,26,54,27,33,41,29,78,0,12,19,29,62,-6,39,48,28,70,-40,10,13,27,73,-36,11,14,28,68,-36,19,23,29,63,-36,17,21,28,80,1,12,16,28,80,-1,10,13,28,78,4,17,22,32,65,16,31,39,29,70,20,49,59,25,53,23,16,23,24,51,22,10,13,24,51,21,11,14,27,62,27,48,58,29,78,-1,12,18,29,62,-8,43,54,28,71,-41,9,12,27,74,-37,7,9,27,72,-40,8,10,28,70,-42,9,12],solution:{type:"dig",description:"south of the giant head",spot:{x:2648,y:3231,level:0}}},{id:57,type:"map",tier:"medium",image_url:"assets/Map_clue_Seers_to_Rellekka_road.png",text:["X marks the spot on a narrow landstrip near a road and a lot of trees."],ocr_data:[26,77,174,26,77,-10,6,8,26,77,-11,8,10,25,78,-10,6,7,26,80,-7,5,6,25,77,-8,7,8,26,77,-10,7,9,26,77,-11,6,8,25,80,-10,16,21,25,82,3,18,23,25,82,-13,6,7,26,82,-11,6,9,26,82,-13,4,6,25,82,-12,5,7,25,85,-13,6,7,26,81,-14,8,10,26,78,-10,7,9,25,76,-14,7,9,25,79,-11,5,7,27,78,13,34,42,27,73,31,117,134,26,75,2,53,67,25,78,-13,6,7,24,80,-14,6,12,26,68,42,63,73,26,82,-6,28,32,26,81,1,47,54,26,82,-12,11,14,25,79,-15,5,7,25,83,-16,7,8,26,80,-14,6,8,25,77,-12,8,10,26,78,-14,6,8,26,78,-13,6,7,30,62,72,35,44,29,64,63,41,46,27,74,18,106,120,27,69,21,62,68,26,77,-2,23,27,26,74,13,38,46,26,71,31,49,58,26,80,-9,8,12,26,79,-8,15,21,26,79,-13,5,9,26,80,-16,6,7,26,80,-15,7,8,25,78,-13,5,6,25,78,-13,6,8,25,77,-13,4,5,26,77,15,40,49,27,78,15,49,56,27,75,16,95,110,27,75,32,50,58,27,69,21,65,77,26,71,18,44,51,25,76,2,27,39,27,69,34,42,54,26,77,-2,28,34,26,79,-3,39,44,25,79,-15,6,8,26,79,-16,5,6,25,78,-10,8,10,26,78,-14,6,8,25,78,-15,5,6,25,80,-13,6,7,28,69,19,56,60,27,72,35,126,141,31,59,84,11,22,28,70,32,44,52,26,75,-4,27,33,26,78,-14,6,9,26,68,32,54,64,27,73,17,26,35,26,78,1,19,22,26,80,-9,12,17,26,80,-18,6,7,26,77,-16,5,7,25,81,-14,6,7,26,78,-18,6,7,27,73,4,25,30,26,74,-4,29,44,26,74,14,81,104,25,75,21,50,60,26,79,-12,15,24,26,66,48,121,141,25,74,9,42,55,25,78,-14,7,9,27,75,10,35,43,26,73,20,35,41,26,80,-10,13,18,25,80,-16,6,7,26,77,-16,7,9,26,78,-19,7,8,25,80,-13,11,15,27,70,14,54,65,26,76,-12,8,12,27,72,14,111,128,26,75,4,74,91,25,77,-16,7,9,27,70,16,45,57,25,79,-1,21,31,28,70,22,52,60,27,71,22,46,52,25,82,-9,8,9,25,80,-15,5,6,26,79,-17,6,7,26,79,-11,6,8,26,78,-19,6,7,26,78,-15,7,12,26,65,46,61,72,26,78,-15,6,8,27,78,-18,5,7,27,78,4,62,80,26,76,19,93,114,26,73,21,71,86,26,77,11,70,84,26,76,13,71,86,27,70,18,49,57,26,78,4,22,31,26,79,-16,6,7,26,81,-16,6,8,26,79,-9,5,6,25,80,-12,6,8,26,82,-15,6,8,26,76,14,26,33,27,68,35,54,66,27,74,-3,34,42,27,77,-17,9,13,27,70,22,54,69,26,78,3,28,54,27,71,21,42,67,28,67,42,110,136,26,77,3,42,57,26,80,-9,6,10,25,79,-12,5,6,26,79,-17,5,6,25,81,-8,7,10,25,80,-10,8,10,26,81,-12,6,8,25,83,-8,11,19,25,78,1,29,42,26,68,37,36,48,26,71,29,52,63,26,76,-2,29,37,25,79,-12,6,10,27,66,24,54,70,26,72,12,54,79,26,73,5,62,76,26,79,-14,4,5,26,80,-15,5,7,27,77,-18,5,7,26,82,-8,6,8,26,82,-11,7,8,25,82,-9,8,10,25,79,-5,19,29,26,80,-3,22,31,25,81,-10,7,13,25,79,9,23,31,26,69,38,44,54,26,81,-13,6,7,26,74,-5,29,38,26,76,-6,30,46,27,74,-1,61,72,26,80,-14,6,8,26,79,-18,6,7,27,77,-20,5,7,25,84,-6,9,11,24,84,-8,8,10,24,85,-7,9,11,25,84,-5,7,9,25,84,-6,7,9,25,83,-7,10,12,24,84,-7,8,10,25,81,2,25,30,26,80,-16,6,8,26,78,-17,6,8,26,77,-19,6,7,27,78,-19,5,6,26,80,-14,6,7,26,78,-18,6,8,27,76,-19,6,8],solution:{type:"dig",description:"next to the bush",spot:{x:2667,y:3562,level:0}}},{id:58,type:"map",tier:"medium",image_url:"assets/Map_clue_Hobgoblin_peninsula.png",text:["X marks the spot near a rock on a peninsula."],ocr_data:[26,78,177,26,77,-7,6,8,26,77,-8,8,10,25,78,-7,6,7,26,80,-4,5,6,25,77,-5,7,8,26,73,14,37,43,26,77,-8,6,9,25,80,-10,7,9,25,86,-9,7,8,25,82,-10,6,7,26,82,-8,5,6,26,82,-10,4,6,25,82,-9,5,7,25,85,-10,6,7,26,81,-11,8,10,26,78,-7,7,9,25,76,-11,7,9,25,79,-8,5,7,26,81,-5,6,8,26,79,-6,7,10,26,73,14,24,31,26,72,23,45,56,26,72,18,49,60,29,69,29,67,78,26,78,4,18,23,26,72,19,26,30,26,82,-10,5,7,25,79,-12,5,7,25,83,-13,7,8,26,80,-11,6,8,25,77,-9,8,10,26,78,-11,6,8,26,78,-10,6,7,26,82,-2,27,31,26,79,-2,39,45,26,79,-10,8,11,26,71,32,46,56,26,75,11,32,42,26,73,8,40,45,26,79,-10,5,7,26,75,7,22,25,26,70,16,24,28,26,79,-10,5,7,26,80,-13,6,7,26,80,-12,7,8,25,78,-10,5,6,25,78,-10,6,8,25,77,-10,4,5,26,81,-10,4,6,27,81,-11,6,7,26,80,-11,6,8,25,84,-10,11,18,26,69,38,43,54,24,80,-8,7,8,27,71,18,52,58,29,69,26,60,67,26,78,-5,7,9,26,80,-8,6,8,25,79,-12,6,8,26,79,-13,5,6,25,78,-7,8,10,26,78,-11,6,8,25,78,-12,5,6,25,80,-10,6,7,26,80,-9,10,14,26,80,-11,6,9,26,78,19,40,49,27,69,45,60,76,26,74,23,52,62,27,75,0,25,31,26,72,12,30,43,28,73,12,29,37,26,79,-4,12,15,26,81,-12,6,7,26,80,-15,6,7,26,77,-13,5,7,25,81,-11,6,7,26,78,-15,6,7,26,79,-7,24,28,26,77,-5,32,40,26,77,6,27,33,26,78,13,42,50,26,74,30,57,68,27,73,24,39,49,26,74,27,51,61,25,78,-10,13,18,29,70,26,58,69,26,80,-9,5,6,26,81,-12,5,6,25,80,-13,6,7,26,77,-13,7,9,26,78,-16,7,8,25,80,-13,6,8,26,78,-11,7,9,26,77,-11,6,8,26,74,23,24,36,26,77,8,43,68,25,74,33,102,122,27,74,38,59,68,26,74,37,49,63,26,78,2,20,27,26,81,-3,9,12,25,82,-6,8,9,25,80,-12,5,6,26,79,-14,6,7,26,79,-8,6,8,26,78,-16,6,7,26,78,-13,6,8,25,78,-9,8,9,26,78,-12,6,7,27,77,13,24,36,27,79,8,40,54,26,76,9,38,49,26,76,22,39,45,26,71,38,38,45,25,77,16,33,40,26,80,-5,7,9,25,83,-7,6,7,26,79,-13,6,7,26,81,-13,6,8,26,79,-6,5,6,25,80,-9,6,8,26,82,-12,6,8,26,82,-7,9,11,26,79,-12,6,8,27,76,-16,7,10,27,75,33,63,74,26,69,18,25,35,26,72,32,43,50,26,76,19,33,46,26,77,22,44,54,26,80,-8,4,5,26,81,-8,4,6,25,79,-9,5,6,26,79,-14,5,6,25,81,-5,7,10,25,80,-7,8,10,26,81,-9,6,8,25,83,-5,12,22,25,80,1,30,42,26,79,-2,36,43,25,80,-2,17,23,27,79,27,58,65,25,79,-6,12,19,27,69,44,59,70,26,72,27,38,52,27,71,32,52,63,26,79,-9,7,13,26,80,-12,5,7,27,77,-15,5,7,26,82,-5,6,8,26,82,-8,7,8,25,82,-6,8,10,26,80,-2,16,24,26,81,-6,7,10,25,81,-6,6,14,25,83,-6,8,10,26,75,39,54,60,26,81,-10,6,7,26,77,-2,23,31,27,68,33,46,56,27,77,-13,8,14,26,80,-11,6,8,26,79,-15,6,7,27,77,-17,5,7,25,84,-3,9,11,24,84,-5,8,10,24,85,-4,9,11,25,84,-2,7,9,25,84,-3,7,9,25,83,-4,10,12,24,84,-4,8,10,25,80,17,26,37,26,80,-9,13,20,26,78,-14,6,8,26,72,11,41,46,27,78,-16,5,6,26,80,-11,6,7,26,78,-15,6,8,27,76,-16,6,8],solution:{type:"dig",spot:{x:2906,y:3296,level:0},description:"west of the snape grass at the tip of the hobgoblin peninsula."}},{id:60,type:"map",tier:"medium",image_url:"assets/Map_clue_Lighthouse_peninsula.png",text:["X marks the spot on a small landmass surrounded by water."],ocr_data:[26,77,176,26,77,-8,6,8,26,77,-9,8,10,25,78,-8,6,7,26,80,-5,5,6,25,77,-6,7,8,26,77,-8,7,9,26,77,-9,6,8,25,80,-11,7,9,25,86,-10,7,8,25,82,-11,6,7,26,82,-9,5,6,26,82,-11,4,6,25,82,-10,5,7,25,85,-11,6,7,26,81,-12,8,10,26,78,-8,7,9,25,76,-12,7,9,25,79,-9,5,7,26,81,-6,6,8,26,79,-7,7,8,26,77,-10,8,14,26,70,28,44,58,25,72,30,64,71,26,73,18,54,62,26,76,23,45,52,26,73,31,51,59,26,81,-9,8,12,26,76,-1,28,33,25,83,-14,7,8,26,80,-12,6,8,25,77,-10,8,10,26,78,-12,6,8,26,78,-11,6,7,25,82,-8,5,7,26,77,2,61,69,26,79,-11,5,7,26,78,-4,15,33,26,80,-11,6,8,25,79,-11,8,14,26,78,0,47,63,26,75,21,109,126,27,68,55,71,88,27,64,69,100,113,26,80,-14,6,7,26,80,-13,7,8,25,78,-11,5,6,25,78,-11,6,8,25,77,-11,4,5,26,81,-11,4,6,27,78,4,61,78,26,76,13,101,117,27,71,29,85,99,25,79,-2,52,62,25,77,17,108,129,27,69,29,67,89,26,72,15,36,40,26,68,41,58,69,26,73,22,33,45,25,78,-12,7,13,26,79,-14,5,6,25,78,-8,8,10,26,78,-12,6,8,25,78,-13,5,6,25,77,-2,23,32,27,72,13,33,43,26,79,-8,18,29,27,74,19,66,93,27,69,29,128,153,26,78,-3,20,32,26,74,-2,31,38,25,75,-1,21,27,27,70,35,52,59,25,80,-9,5,6,26,81,-13,6,7,26,80,-16,6,7,26,77,-14,5,7,25,81,-12,6,7,26,77,-11,14,17,26,75,0,23,30,26,76,-11,9,12,26,78,-15,5,6,26,79,-4,42,58,26,74,14,113,133,26,76,-12,9,16,26,68,30,52,61,26,68,36,62,71,27,75,14,33,41,26,80,-9,7,10,26,81,-13,5,6,25,80,-14,6,7,26,77,-14,7,9,26,78,-17,7,8,25,80,-13,9,13,27,68,33,58,66,26,67,34,58,65,26,74,4,55,64,26,75,17,110,132,25,77,-12,7,13,26,77,-6,17,26,26,67,48,59,71,26,68,42,61,71,26,80,1,34,40,25,81,1,40,45,25,80,-13,6,9,26,79,-15,6,7,26,79,-9,6,8,26,78,-17,6,7,26,78,-14,6,8,25,73,10,24,29,26,68,30,52,62,26,69,41,106,120,27,77,9,47,64,26,71,27,54,62,26,69,39,52,60,26,72,19,54,71,27,65,51,65,79,26,78,1,16,23,25,83,-8,6,7,26,79,-14,6,7,26,81,-14,6,8,26,79,-7,5,6,25,80,-10,6,8,26,82,-13,6,8,26,68,45,61,71,26,79,-13,6,8,27,76,-18,6,7,27,68,35,66,77,26,78,3,18,22,25,79,-7,11,15,26,72,24,34,44,26,72,25,35,44,26,80,-9,4,5,26,81,-9,4,6,25,79,-10,5,6,26,79,-15,5,6,25,81,-6,7,10,25,80,-8,8,10,26,81,-10,6,8,26,69,44,56,65,25,78,2,26,36,26,75,13,37,44,26,74,20,25,33,26,78,-5,30,35,26,78,-2,44,52,26,78,-10,9,12,25,79,-11,5,6,26,76,-16,4,5,26,79,-12,4,5,26,80,-13,5,7,27,77,-16,5,7,26,82,-6,6,8,26,82,-9,7,8,25,82,-7,8,10,25,79,-3,13,17,27,71,31,35,45,26,71,37,46,56,25,83,-5,10,15,25,83,-7,7,9,26,81,-11,6,7,26,78,-13,11,13,26,76,-6,45,50,27,75,-7,51,58,26,79,-7,25,29,26,79,-16,6,7,27,77,-18,5,7,25,84,-4,9,11,24,84,-6,8,10,24,85,-5,9,11,25,84,-3,7,9,25,84,-4,7,9,25,83,-5,10,12,24,84,-5,8,10,25,85,-7,10,12,26,80,-14,6,8,26,78,-15,6,8,26,77,-17,6,7,27,78,-17,5,6,26,80,-12,6,7,26,78,-16,6,8,27,76,-17,6,8],solution:{type:"dig",spot:{x:2579,y:3597,level:0},description:"at the end of the branching path next to the crystal tree"}},{id:61,type:"map",image_url:"assets/Map_clue_Haunted_Mine.png",tier:"medium",text:["X marks the spot near some weird looking grass"],ocr_data:[26,76,169,26,77,-15,6,8,26,77,-16,8,10,25,78,-15,6,8,26,80,-12,5,7,25,77,-13,7,9,26,77,-5,24,30,26,77,-16,7,12,25,79,-1,32,36,25,86,-17,8,12,26,79,2,31,38,26,82,-16,5,6,26,81,2,27,32,25,82,-16,6,10,25,85,-18,6,7,26,81,-19,8,10,26,78,-15,7,9,25,76,-19,7,9,25,78,-5,27,33,26,76,20,38,47,26,79,-14,7,8,27,73,28,58,67,26,78,-11,41,49,25,75,25,47,56,25,80,-20,6,10,26,77,28,54,65,26,83,-10,26,31,26,77,13,36,43,26,78,-9,17,20,25,83,-21,7,8,26,80,-19,6,8,25,77,-17,8,10,26,78,-19,6,8,26,78,-18,6,7,26,76,28,47,58,29,70,17,111,128,26,78,-6,15,21,26,75,27,62,71,26,76,22,49,57,25,79,-18,7,9,26,74,30,54,71,26,80,-7,28,39,26,77,6,35,43,26,78,-1,17,20,26,80,-21,6,7,26,80,-20,7,8,25,78,-18,5,6,25,78,-18,6,8,25,77,-18,4,5,27,73,31,58,68,30,68,29,137,164,27,75,-3,43,57,25,84,-19,7,9,25,80,-18,18,23,24,80,-6,17,22,26,73,28,62,73,27,70,20,39,49,26,74,20,43,53,28,72,18,94,103,25,79,-20,6,8,26,79,-21,5,6,25,78,-15,8,10,26,78,-19,6,8,26,75,11,51,60,25,79,-1,46,70,29,68,46,105,135,29,73,8,73,95,26,79,-9,28,42,26,75,13,30,40,25,79,-14,13,18,27,73,26,60,68,26,73,27,52,58,27,76,19,47,63,30,67,32,146,175,26,79,-14,21,29,26,80,-23,6,7,26,77,-21,5,7,25,81,-19,6,7,26,76,0,20,23,26,76,4,37,49,27,74,24,53,66,31,63,36,154,186,28,68,22,91,115,26,69,2,51,59,26,64,5,106,112,26,67,3,43,54,25,78,-19,7,9,27,79,-16,7,12,29,68,25,132,163,28,73,8,74,91,25,80,-21,6,7,26,77,-21,7,9,26,78,-24,7,8,26,79,2,18,23,27,77,0,41,56,27,74,26,50,57,30,65,24,142,169,28,62,36,137,171,25,72,-5,92,103,26,78,-18,7,9,25,70,4,38,50,26,78,-12,15,22,26,81,-10,14,21,27,77,5,66,86,28,70,18,102,121,26,79,-22,6,7,26,79,-16,6,8,26,78,-24,6,8,26,75,25,62,74,26,77,8,57,73,29,66,43,121,138,31,65,30,158,188,28,68,51,152,189,28,70,20,113,138,26,79,-8,21,36,26,70,3,40,50,29,69,26,116,140,29,70,23,116,134,27,75,13,90,110,28,73,-1,54,70,26,81,-21,6,8,26,79,-14,5,6,25,80,-17,6,8,26,82,-17,12,18,26,76,29,57,65,28,73,5,75,98,31,64,29,148,191,31,65,30,147,187,30,67,31,147,178,28,70,17,102,116,26,64,14,134,150,29,68,24,119,144,30,66,32,141,176,30,67,30,142,169,25,79,-16,6,10,26,79,-22,5,6,25,81,-13,7,10,25,80,-15,8,10,26,81,-17,6,8,26,78,25,35,52,25,79,-11,16,24,28,70,18,114,128,29,67,28,132,157,30,66,33,148,183,26,75,-6,36,51,26,69,1,26,42,28,71,10,87,112,29,67,15,103,134,28,71,10,80,106,26,80,-20,5,8,27,77,-23,5,7,26,82,-13,6,8,26,82,-16,7,8,25,82,-8,20,31,26,76,22,25,39,26,81,-14,7,8,25,81,-16,6,8,25,83,-14,8,10,25,83,-13,8,13,27,75,1,66,78,26,68,-4,36,46,26,67,-2,31,41,28,74,-9,52,68,27,76,-4,56,67,26,79,-23,6,7,27,77,-25,5,7,25,84,-11,9,11,24,84,-13,8,10,24,84,-9,13,18,25,83,-7,11,14,25,84,-11,7,9,25,83,-12,10,12,24,84,-12,8,10,25,85,-14,10,12,27,75,-1,72,81,26,78,-22,7,11,26,76,-23,8,12,27,78,-24,5,6,26,80,-19,6,7,26,78,-23,6,8,27,76,-24,6,8],solution:{type:"dig",spot:{x:3434,y:3265,level:0},description:"four tiles west of the mushroom"}},{id:62,type:"map",tier:"medium",image_url:"assets/Map_clue_Draynor.png",text:["X marks the spot at the end of a path starting from a rock and near a fishing spot."],ocr_data:[26,78,180,26,77,-4,6,8,26,77,-5,8,10,25,78,-4,6,7,26,79,3,17,23,25,77,-2,7,8,26,77,-4,7,9,26,77,-5,6,8,25,80,-7,7,9,25,86,-6,7,8,25,82,-7,6,7,26,82,-5,5,6,26,82,-7,4,6,25,82,-6,5,7,25,85,-7,6,7,26,81,-8,8,10,26,78,-4,7,9,25,76,-8,7,9,25,79,-5,5,7,26,73,28,35,45,27,70,36,58,67,26,78,-7,7,8,26,77,-3,10,14,24,80,-6,9,14,25,80,-9,5,7,26,84,-5,5,6,26,83,-3,6,8,26,82,-7,5,6,25,79,-9,5,7,25,83,-10,7,8,26,80,-8,6,8,25,77,-6,8,10,26,78,-8,6,8,26,78,-7,6,7,25,82,-4,5,7,27,75,12,21,27,27,69,38,64,74,27,73,15,33,37,27,74,14,28,41,27,73,13,23,28,29,69,32,43,53,26,75,9,90,103,26,74,6,34,43,26,74,4,16,18,26,80,-10,6,7,26,80,-9,7,8,25,78,-7,5,6,25,78,-7,6,8,25,77,-7,4,5,26,81,-7,4,6,27,81,-8,6,7,26,75,12,22,29,26,71,41,68,80,25,78,-3,20,29,26,71,20,47,51,26,73,10,49,64,26,74,4,38,41,26,66,25,25,28,26,66,29,25,28,25,79,-9,6,8,26,79,-10,5,6,25,78,-4,8,10,26,78,-8,6,8,25,78,-9,5,6,25,80,-7,6,8,26,80,1,41,50,26,80,-6,16,21,26,78,1,17,21,27,68,41,68,78,26,78,-1,19,29,29,66,39,78,98,25,71,8,79,80,27,77,2,32,41,25,80,-5,5,6,26,81,-9,6,7,26,80,-12,6,7,26,77,-10,5,7,25,81,-8,6,7,26,78,-12,6,7,26,79,-8,10,19,26,77,-6,9,16,26,78,-10,5,11,25,80,-10,7,8,26,77,0,17,22,27,69,41,60,73,26,73,5,30,34,25,76,-3,20,32,27,72,8,48,63,26,78,0,52,58,26,81,-9,5,6,25,80,-10,6,7,26,77,-10,7,9,26,78,-13,7,8,25,80,-10,6,8,26,78,-8,7,9,26,77,-8,6,8,26,76,-11,7,8,26,78,-13,6,8,26,76,-3,23,28,27,58,62,41,54,27,74,31,68,82,28,72,25,39,46,26,77,25,76,91,25,80,13,60,75,25,80,-9,5,6,26,79,-11,6,7,26,79,-5,6,8,26,78,-13,6,7,26,78,-10,6,8,25,78,-6,8,13,26,78,-6,23,33,27,78,-8,29,42,27,81,-11,7,14,26,81,-8,6,7,26,78,11,23,27,26,72,31,41,48,25,78,5,17,25,25,77,25,68,78,25,81,9,38,44,26,79,-10,6,7,26,81,-10,6,8,26,79,-3,5,6,25,80,-6,6,8,26,82,-9,6,8,26,82,-2,15,24,26,79,-4,16,26,27,76,-9,12,19,27,77,-6,17,30,26,81,-8,7,8,25,80,-6,7,14,26,68,44,40,52,25,80,-4,6,7,26,80,-5,4,5,26,81,-5,4,6,25,79,-6,5,6,26,79,-11,5,6,25,81,-2,7,10,25,80,-4,8,10,26,81,-6,6,8,25,83,-3,8,10,25,80,-4,6,7,26,79,-6,6,7,25,80,-5,7,12,26,79,-7,5,7,25,79,-7,6,7,26,68,43,57,64,25,79,-7,5,6,26,76,-12,4,5,26,79,-8,4,5,26,80,-9,5,7,27,77,-12,5,7,26,82,-2,6,8,26,82,-5,7,8,25,82,-3,8,10,25,80,-4,7,9,26,81,-3,7,8,25,81,-3,14,16,26,83,6,44,52,25,83,1,24,28,26,81,-7,6,7,27,69,37,42,53,26,76,-1,19,28,27,77,-13,5,6,26,80,-8,6,8,26,79,-12,6,7,27,77,-14,5,7,25,84,0,9,11,24,84,-2,8,10,24,85,-1,9,11,25,84,1,7,9,25,84,0,7,9,25,83,-1,10,12,24,84,-1,8,10,25,85,-3,10,12,26,80,-10,6,8,26,77,-7,13,17,26,73,11,35,42,27,78,-13,5,6,26,80,-8,6,7,26,78,-12,6,8,27,76,-13,6,8],solution:{type:"dig",spot:{x:3092,y:3225,level:0},description:"between the southern most willow tree and the small obelisk"}},{id:40,type:"map",tier:"hard",text:["A crate at a group of three buildings."],image_url:"assets/Map_clue_Observatory.png",ocr_data:[26,77,185,26,77,1,6,8,26,77,0,8,10,25,78,1,6,7,26,80,4,5,6,25,77,3,7,8,26,76,5,14,20,26,73,14,19,23,25,80,-2,7,9,25,86,-1,7,8,25,82,-2,6,7,26,82,0,5,6,26,82,-2,4,6,25,82,1,13,18,25,85,-2,6,7,26,81,-3,8,10,26,78,1,7,9,25,76,-3,7,9,25,79,0,5,7,26,81,3,6,8,27,74,18,22,27,27,74,12,24,31,27,69,25,37,53,24,80,-3,6,8,25,80,-4,5,7,26,84,0,5,6,26,83,2,6,8,26,81,6,18,27,26,77,12,44,55,25,83,-5,7,8,26,80,-3,6,8,25,77,-1,8,10,26,78,-3,6,8,26,78,-2,6,7,25,82,1,5,7,27,71,23,40,55,27,76,6,14,25,26,76,9,17,22,28,69,35,47,61,26,75,9,26,30,26,77,20,45,51,26,76,34,59,65,26,76,21,42,47,26,79,-2,5,7,26,80,-5,6,7,26,80,-4,7,8,25,78,-2,5,6,25,78,-2,6,8,25,77,-2,4,5,26,81,-2,4,16,29,65,50,64,76,26,79,0,15,19,26,77,17,33,38,26,72,17,34,53,25,75,33,61,73,26,76,23,46,51,26,76,21,43,49,26,75,23,43,48,26,80,0,6,8,25,79,-4,6,8,26,79,-5,5,6,25,78,1,8,10,26,78,-3,6,8,25,78,-4,5,6,25,80,1,12,34,27,75,30,47,58,27,76,25,43,49,26,78,16,38,44,26,77,-8,5,7,26,75,33,60,66,26,76,13,35,39,26,73,33,65,69,27,76,22,42,49,25,80,0,5,7,26,81,-4,6,7,26,80,-7,6,7,26,77,-5,5,7,25,81,-3,6,7,26,78,-7,6,7,26,76,19,60,68,26,74,18,46,55,26,78,-6,5,6,26,77,20,48,54,26,78,0,15,18,26,76,-4,7,8,25,78,-2,7,8,25,78,-3,7,9,27,78,3,12,17,26,78,16,58,63,26,81,-4,5,6,25,80,-5,6,7,26,77,-5,7,9,26,78,-8,7,8,25,80,-5,6,8,27,74,25,67,78,29,62,62,86,108,29,54,71,50,60,28,67,52,65,73,26,74,21,48,54,26,78,-2,7,9,25,81,1,8,10,26,79,2,8,10,26,82,4,7,8,25,82,2,8,9,25,80,-4,5,6,26,79,-6,6,7,26,79,0,6,8,26,78,-8,6,7,26,78,-5,6,8,25,78,3,14,23,27,71,45,91,106,29,57,85,72,82,28,70,52,53,61,26,79,9,28,35,26,81,2,7,9,26,79,4,20,28,26,78,29,49,54,26,78,22,37,43,25,83,1,6,7,26,79,-5,6,7,26,81,-5,6,8,26,79,2,5,6,25,80,-1,6,8,26,82,-4,6,8,26,82,1,9,11,26,77,14,42,51,27,75,-1,6,29,27,76,0,6,30,26,81,0,7,18,25,80,-1,6,7,26,74,47,57,83,26,77,25,43,48,26,77,21,42,47,26,81,0,4,6,25,79,-1,5,6,26,79,-6,5,6,25,81,3,7,10,25,80,1,8,10,26,81,-1,6,8,25,83,2,8,10,25,80,1,6,7,26,79,-1,6,7,25,80,0,7,8,26,79,-2,5,7,25,79,-2,6,7,26,76,12,24,41,25,79,-2,5,6,26,74,15,43,48,26,79,-3,4,5,26,80,-4,5,7,27,77,-7,5,7,26,82,3,6,8,26,82,0,7,8,25,82,2,8,10,25,80,1,7,9,26,81,2,7,8,25,81,1,7,12,28,70,40,53,60,25,83,2,7,9,26,81,-2,6,7,27,75,24,40,51,27,75,23,43,49,27,76,4,25,30,26,80,-3,6,8,26,79,-7,6,7,27,77,-9,5,7,25,84,5,9,11,24,84,3,8,10,24,85,4,9,11,25,84,6,7,9,25,84,5,7,9,25,83,4,10,12,24,79,16,33,38,25,85,2,10,12,26,80,-5,6,8,26,78,-6,6,8,26,77,-8,6,7,27,78,-8,5,6,26,80,-3,6,7,26,78,-7,6,8,27,76,-8,6,8],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:2457,y:3182},botright:{x:2457,y:3182}}}},{id:41,type:"map",tier:"hard",text:["X marks the spot next to a tree behind a building in the corner of a city."],image_url:"assets/Map_clue_Yanille_anvil.png",ocr_data:[26,77,176,26,77,-8,6,8,26,77,-9,8,10,25,78,-8,6,7,26,80,-5,5,6,25,77,-6,7,8,26,76,2,28,32,26,77,-9,6,8,25,79,-2,25,29,25,84,-1,21,25,26,80,-1,22,26,26,82,-9,5,6,26,82,-11,4,6,25,82,-10,5,7,25,85,-11,6,7,26,81,-12,8,10,26,78,-8,7,9,25,76,-12,7,9,25,79,-9,5,7,26,81,-6,6,8,26,79,-7,7,8,26,76,7,41,47,26,76,3,43,49,25,77,11,55,61,26,76,15,43,49,26,79,19,42,47,26,79,3,17,22,26,81,-9,7,13,25,79,-13,5,7,25,83,-14,7,8,26,80,-12,6,8,25,77,-10,8,10,26,78,-12,6,8,26,78,-11,6,7,25,82,-8,5,7,26,80,-11,5,6,26,77,0,37,48,26,79,-5,18,28,26,80,-11,6,8,26,76,17,44,50,26,76,18,42,47,27,70,21,35,48,26,75,3,17,27,26,79,-11,5,7,26,80,-14,6,7,26,80,-13,7,8,25,78,-11,5,6,25,78,-11,6,8,25,77,-11,4,5,26,81,-11,4,6,27,81,-12,6,10,26,79,-1,43,48,26,81,5,51,62,25,79,-1,42,52,25,77,19,43,49,26,75,19,43,48,26,78,-8,7,9,26,78,-6,7,9,26,80,-9,6,8,25,79,-13,6,8,26,79,-14,5,6,25,78,-8,8,10,26,78,-12,6,8,26,77,-5,28,32,25,78,3,45,54,27,77,13,66,80,26,80,-12,6,8,26,81,-15,5,7,26,75,6,66,83,26,75,21,50,60,27,75,17,43,49,25,77,-9,6,8,27,79,-7,7,9,28,67,31,61,66,26,81,-13,6,7,26,80,-16,6,7,26,77,-14,5,7,25,81,-12,6,7,26,78,-16,6,7,26,77,1,44,50,26,75,4,51,60,26,76,0,45,55,26,78,4,47,63,27,63,56,110,137,28,68,34,67,81,26,74,17,43,49,25,78,-12,7,9,27,79,-10,7,9,26,76,-1,23,26,26,81,-13,5,6,25,80,-14,6,7,26,77,-14,7,9,26,78,-17,7,8,25,79,-7,27,42,26,76,1,41,68,26,77,-12,6,29,26,75,-6,30,61,26,76,4,60,99,25,67,38,121,160,26,73,20,70,82,26,76,22,55,61,26,79,-7,8,10,26,82,-5,7,8,25,82,-7,8,9,25,80,-13,5,6,26,79,-15,6,7,26,79,-9,6,8,26,78,-17,6,7,26,75,8,41,46,26,72,43,64,71,27,71,45,63,70,27,71,43,63,71,27,73,44,64,72,27,73,45,62,69,26,75,31,72,84,26,77,7,32,48,25,74,23,34,39,26,72,24,34,40,26,73,31,47,54,26,79,-14,6,7,26,81,-14,6,8,26,79,-7,5,6,25,80,-10,6,8,27,74,8,34,48,28,71,24,64,76,27,76,-3,27,35,27,76,-18,6,7,27,74,-5,18,22,26,78,-1,18,23,25,80,-10,6,7,26,66,50,64,74,26,75,10,21,25,26,76,7,24,32,26,80,-4,9,14,25,79,-10,5,6,26,79,-15,5,6,25,81,-6,7,10,25,80,-8,8,10,26,80,-8,10,14,26,71,22,61,76,26,72,15,45,52,27,73,6,27,31,26,76,2,28,32,26,73,7,29,35,26,70,32,59,70,26,72,20,33,44,25,79,-9,15,18,26,74,-5,50,59,26,79,-9,21,23,26,80,-13,5,7,27,77,-16,5,7,26,82,-6,6,8,26,82,-9,7,8,25,82,-7,8,10,25,80,-8,7,9,26,81,-7,7,10,27,69,24,53,61,26,77,18,42,50,26,69,46,65,77,26,74,16,26,32,26,77,-6,43,47,26,76,-4,52,59,27,77,-13,21,25,26,80,-12,6,8,26,79,-16,6,7,27,77,-18,5,7,25,84,-4,9,11,24,84,-6,8,10,24,85,-5,9,11,25,84,-3,7,9,25,84,-4,7,9,25,79,13,39,46,25,76,25,30,36,25,83,-1,17,23,26,80,-14,6,8,26,78,-15,6,8,26,77,-17,6,7,27,78,-17,5,6,26,80,-12,6,7,26,78,-16,6,8,27,76,-17,6,8],solution:{type:"dig",spot:{x:2616,y:3077,level:0},description:"inside, next to the south-eastern wall of the anvil building, or outside next to the tree"}},{id:42,type:"map",tier:"hard",text:["X marks the spot between two tables."],image_url:"assets/Map_clue_Legends_Guild.png",ocr_data:[26,77,176,26,77,-8,6,8,26,77,-9,8,10,25,78,-8,6,7,26,80,-5,5,6,25,77,-6,7,8,26,77,-8,7,9,26,77,-9,6,8,25,79,0,22,26,26,81,19,40,46,25,82,-11,6,7,26,82,-9,5,6,26,82,-11,4,6,25,82,-10,5,7,25,85,-11,6,7,26,81,-12,8,10,26,78,-8,7,9,25,76,-12,7,9,25,79,-9,5,9,26,76,21,67,79,27,71,43,116,133,26,70,34,99,115,26,75,2,34,47,26,70,43,40,46,31,58,88,8,17,26,81,4,27,34,27,72,24,58,62,26,76,25,60,65,26,74,17,52,57,25,83,-14,7,8,26,80,-12,6,8,25,77,-10,8,10,26,78,-12,6,8,26,78,-11,6,7,27,73,35,38,43,31,59,87,12,19,27,76,9,33,46,26,72,36,101,118,26,72,38,80,113,26,72,48,76,95,26,79,-11,5,7,26,78,-2,20,23,26,72,34,56,68,27,70,44,75,89,26,80,-14,6,7,26,80,-13,7,8,25,78,-11,5,6,25,78,-11,6,8,25,77,-10,5,12,27,74,32,55,63,27,70,64,76,87,26,80,-9,10,19,27,72,21,59,66,25,76,8,41,57,25,72,43,88,105,26,71,39,99,111,27,71,41,92,113,27,71,44,111,127,26,78,4,29,35,25,79,-13,6,8,26,79,-14,5,6,25,78,-8,8,10,26,78,-12,6,8,26,73,16,40,45,31,58,87,4,5,27,73,27,41,48,28,68,23,64,70,26,79,-10,17,20,26,77,-17,5,7,25,79,-11,6,8,26,78,-12,6,8,25,77,-9,6,11,28,69,23,45,55,26,79,-5,14,17,26,81,-13,6,7,26,80,-16,6,7,26,77,-14,5,7,25,81,-12,6,7,26,78,-14,10,14,26,71,46,78,89,26,76,-8,17,24,28,68,18,60,66,25,80,-14,7,8,26,74,-2,26,36,27,68,9,44,64,25,78,-11,7,10,25,78,-12,7,9,27,78,-8,12,16,26,80,-10,5,6,26,81,-13,5,6,25,80,-14,6,7,26,77,-14,7,9,26,78,-17,7,8,25,80,-14,6,8,26,78,-12,7,9,26,77,-12,6,8,26,73,-6,30,33,26,78,-17,6,8,26,70,4,31,34,26,68,14,30,38,25,80,-5,11,18,26,79,-7,8,10,26,82,-5,7,8,25,82,-7,8,9,25,80,-13,5,6,26,79,-15,6,7,26,79,-9,6,8,26,78,-17,6,7,26,78,-14,6,8,25,78,-10,8,9,26,78,-13,6,7,27,78,-16,5,7,27,81,-15,6,8,26,77,5,72,84,26,76,22,66,81,25,73,21,79,92,25,82,-7,6,8,26,80,-6,7,9,26,78,8,34,37,27,72,5,31,40,26,81,-14,6,8,26,79,-7,5,6,25,80,-10,6,8,26,82,-13,6,8,26,82,-8,9,11,26,75,4,90,103,27,76,-14,33,39,27,77,-16,6,12,26,79,4,28,64,25,76,13,42,63,25,72,23,81,93,25,80,-8,6,7,26,78,-3,15,20,26,80,-7,9,12,25,78,-8,8,11,26,79,-15,5,6,25,81,-6,7,10,25,80,-8,8,10,26,81,-10,6,8,25,83,-7,8,10,25,77,0,25,29,26,79,-10,6,7,25,76,2,76,88,26,78,1,25,46,25,79,-11,6,7,26,78,-11,6,7,25,79,-11,5,6,27,68,7,43,46,26,78,-8,12,16,26,80,-13,5,7,27,77,-16,5,7,26,82,-6,6,8,26,82,-9,7,8,25,82,-7,8,10,25,80,-8,7,9,26,81,-7,7,8,25,81,-9,6,8,26,77,8,31,43,26,74,17,45,71,26,81,-11,6,7,26,78,-14,5,6,26,78,-15,5,6,27,77,-17,5,6,26,80,-12,6,8,26,79,-16,6,7,27,77,-18,5,7,25,84,-4,9,11,24,84,-6,8,10,24,85,-5,9,11,25,84,-3,7,9,25,84,-4,7,9,25,83,-5,10,12,24,76,14,34,37,25,74,17,41,45,26,80,-14,6,8,26,78,-15,6,8,26,77,-17,6,7,27,78,-17,5,6,26,80,-12,6,7,26,78,-16,6,8,27,76,-17,6,8],solution:{type:"dig",spot:{x:2722,y:3338,level:0},description:"two tiles south of the northern bench"}},{id:43,type:"map",tier:"hard",image_url:"assets/Map_clue_West_Ardougne.png",text:["X marks the spot in one of multiple column-like buildings."],ocr_data:[26,79,181,26,77,-3,6,8,26,77,-4,8,10,25,78,-3,6,7,26,80,0,5,6,25,77,-1,7,8,26,77,-3,7,9,26,77,-4,6,8,25,80,-6,7,9,25,86,-5,7,8,25,82,-6,6,7,26,82,-4,5,6,26,82,-6,4,6,25,82,-5,5,7,25,85,-6,6,7,26,81,-7,8,10,26,78,-3,7,9,25,76,-7,7,9,25,79,-4,5,7,26,81,-1,6,8,26,77,15,40,44,26,75,18,73,81,26,75,15,43,50,25,77,18,62,82,25,77,13,43,49,26,78,32,78,87,26,80,15,44,49,26,79,16,63,68,25,79,-8,5,7,25,83,-9,7,8,26,80,-7,6,8,25,77,-5,8,10,26,78,-7,6,8,26,78,-6,6,7,25,82,-3,5,7,26,78,4,37,41,27,75,21,67,75,26,77,14,43,49,26,76,24,53,72,26,77,7,44,50,26,76,25,75,87,26,79,8,38,43,26,76,21,67,73,26,79,-6,5,7,26,80,-9,6,7,26,80,-8,7,8,25,78,-6,5,6,25,78,-6,6,8,25,77,-6,4,5,26,81,-6,4,6,27,81,-7,6,7,26,80,-7,6,8,25,84,-7,7,9,25,80,-10,6,8,24,80,-4,7,8,25,78,-5,6,8,26,78,-3,7,9,26,78,-1,7,9,26,80,-4,6,8,25,79,-8,6,8,26,79,-9,5,6,25,78,-3,8,10,26,78,-7,6,8,25,78,-8,5,6,25,80,-6,6,7,26,80,-6,6,7,26,80,-7,6,8,26,81,-10,5,7,26,77,-12,5,7,25,79,-6,6,8,26,78,-7,6,8,25,77,-4,6,8,27,79,-2,7,9,25,80,-4,5,6,26,81,-8,6,7,26,80,-11,6,7,26,77,-9,5,7,25,81,-7,6,7,26,78,-11,6,7,26,79,-8,6,8,26,75,13,70,76,26,76,10,59,65,25,80,-9,7,8,26,76,15,58,81,26,74,7,56,61,25,77,-6,8,15,25,66,65,155,190,27,77,13,53,64,26,80,-5,5,6,26,81,-8,5,6,25,80,-9,6,7,26,77,-9,7,9,26,78,-12,7,8,25,80,-9,6,8,26,78,-7,7,9,26,75,8,47,53,26,75,5,49,56,26,78,-12,6,8,26,75,6,27,53,26,76,9,46,52,25,81,-3,8,10,26,77,9,25,49,26,81,5,21,28,25,82,-2,8,9,25,80,-8,5,6,26,79,-10,6,7,26,79,-4,6,8,26,78,-12,6,7,26,78,-9,6,8,25,78,-5,8,9,26,75,17,58,80,27,75,12,56,75,27,81,-10,6,8,26,78,14,35,70,26,78,17,50,65,26,80,-4,7,9,26,79,18,35,67,26,78,17,52,65,25,83,-3,6,7,26,79,-9,6,7,26,81,-9,6,8,26,79,-2,5,6,25,80,-5,6,8,26,82,-8,6,8,26,82,-3,9,11,26,77,6,46,53,27,75,2,48,53,27,77,-11,6,8,26,80,3,23,40,25,79,3,31,34,25,80,-6,5,7,26,79,7,21,38,26,79,3,25,28,26,81,-4,4,6,25,79,-5,5,6,26,79,-10,5,6,25,81,-1,7,10,25,80,-3,8,10,26,81,-5,6,8,25,83,-2,8,10,26,77,21,67,76,26,76,17,61,69,25,80,-4,7,8,26,76,20,60,86,26,77,10,49,56,26,78,-6,6,7,26,75,21,57,84,26,74,6,50,57,26,79,-7,4,5,26,80,-8,5,7,27,77,-11,5,7,26,82,-1,6,8,26,82,-4,7,8,25,82,-2,8,10,25,80,-3,7,9,27,79,12,50,54,26,79,11,46,52,25,83,-2,8,10,26,81,11,29,51,26,79,8,46,54,26,78,-9,5,6,26,76,5,30,53,27,75,4,47,55,26,80,-7,6,8,26,79,-11,6,7,27,77,-13,5,7,25,84,1,9,11,24,84,-1,8,10,24,85,0,9,11,25,84,2,7,9,25,84,1,7,9,25,83,1,10,17,24,84,0,8,10,25,85,-2,10,12,26,80,-8,6,13,26,78,-10,6,8,26,77,-12,6,7,27,78,-11,5,12,26,80,-7,6,7,26,78,-11,6,8,27,76,-12,6,8],solution:{type:"dig",description:"in the north-western corner of the building",spot:{x:2488,y:3308,level:0}}},{id:46,type:"map",tier:"hard",image_url:"assets/Map_clue_Dark_Warriors_Fortress.png",text:["A crate in the courtyard of a castle."],ocr_data:[26,77,170,26,77,-14,6,8,26,77,-15,8,10,25,78,-14,6,7,26,80,-11,5,6,25,77,-12,7,8,26,77,-14,7,9,26,77,-15,10,13,25,80,-17,9,11,25,86,-16,7,8,25,82,-17,6,7,26,82,-15,5,10,26,82,-16,6,10,25,82,-16,5,7,25,85,-17,6,7,26,81,-18,8,10,26,78,-14,7,9,25,76,-18,7,9,25,79,-15,5,7,26,75,14,31,39,27,67,37,58,66,26,67,28,35,49,26,68,27,57,69,25,72,22,56,69,26,71,27,55,66,26,73,21,23,32,27,69,43,58,68,27,67,42,58,68,26,77,-11,14,18,25,83,-20,7,8,26,80,-18,6,8,25,77,-16,8,10,26,78,-18,6,8,26,78,-17,6,7,27,69,38,58,66,27,78,2,37,43,27,75,17,60,74,26,76,16,55,72,26,77,1,30,37,26,77,-5,20,36,26,74,22,63,78,26,78,12,45,50,26,74,13,38,50,26,74,6,20,24,26,80,-20,6,7,26,80,-19,7,8,25,78,-17,5,6,25,78,-17,6,8,25,77,-17,4,5,27,69,32,48,55,27,79,8,44,49,26,80,-18,6,8,26,80,16,56,64,26,78,3,45,51,25,78,7,42,48,26,75,14,46,53,26,77,-2,25,28,27,69,33,52,63,26,77,-1,19,22,25,79,-19,6,8,26,79,-20,5,6,25,78,-14,8,10,26,78,-18,6,8,25,78,-19,5,6,26,71,27,32,49,27,76,13,52,66,27,76,11,49,57,27,76,22,67,77,26,75,1,44,50,26,77,6,42,48,27,73,24,67,83,26,74,19,54,60,27,70,30,51,60,26,77,1,20,24,26,81,-19,6,7,26,80,-22,6,7,26,77,-20,5,7,25,81,-18,6,7,26,78,-17,17,21,27,71,25,47,56,26,76,-9,24,33,26,76,3,44,50,26,78,3,44,50,26,79,-21,7,8,26,76,-19,7,8,26,76,6,44,62,26,76,5,26,39,27,72,15,37,42,26,76,0,18,21,26,81,-19,5,6,25,80,-20,6,7,26,77,-20,7,9,26,78,-23,7,8,25,79,-15,17,21,27,68,39,60,74,26,76,-12,15,23,26,74,3,47,53,29,58,46,57,65,28,66,32,47,52,26,78,-17,7,9,25,78,9,45,67,26,77,10,27,37,26,77,7,33,40,26,73,17,21,24,25,80,-19,5,6,26,79,-21,6,7,26,79,-15,6,8,26,78,-23,6,7,26,78,-20,6,8,26,67,34,54,66,26,75,8,51,57,27,75,9,50,58,29,60,52,60,69,28,70,37,50,58,26,78,9,42,48,27,75,26,66,77,26,78,16,43,53,26,78,7,29,56,26,70,32,27,41,26,79,-20,6,7,26,81,-20,6,8,26,79,-13,5,6,25,80,-16,6,8,26,82,-19,6,8,26,71,33,49,56,26,76,6,45,51,27,76,-24,6,7,27,74,13,51,64,26,78,5,32,49,26,77,7,31,48,26,76,13,45,53,25,80,-14,6,7,26,77,9,31,48,26,69,36,55,61,25,79,-16,5,6,26,79,-21,5,6,25,81,-12,7,10,25,80,-14,8,10,26,81,-16,6,8,26,71,33,53,60,26,78,3,34,40,26,77,8,43,49,26,78,5,42,56,26,79,-17,5,7,25,79,-17,6,15,26,77,5,40,46,26,76,6,41,47,26,74,-8,26,40,26,67,38,56,65,26,80,-19,5,7,27,77,-22,5,7,26,82,-12,6,8,26,82,-15,7,8,25,82,-13,8,10,26,74,10,25,32,27,70,33,52,59,26,72,29,53,60,26,70,39,42,58,26,70,39,56,70,27,69,35,42,68,27,67,32,56,64,27,68,28,57,64,27,70,18,37,48,26,78,-10,14,19,26,79,-22,6,7,27,77,-24,5,7,25,84,-10,9,11,24,84,-12,8,10,24,85,-11,9,11,25,84,-9,7,9,25,84,-10,7,9,25,83,-11,10,12,24,84,-11,8,10,25,84,-8,21,32,26,80,-13,25,35,26,78,-21,6,11,26,77,-23,6,7,27,78,-23,5,6,26,80,-18,6,7,26,78,-22,6,8,27,76,-23,6,8],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3026,y:3629},botright:{x:3026,y:3629}}}},{id:47,type:"map",tier:"hard",image_url:"assets/Map_clue_Fort_Forinthry.png",text:["A crate outside of some fort's walls."],ocr_data:[26,77,176,26,77,-7,6,8,26,77,-9,8,10,25,78,-8,6,7,26,80,-5,5,6,25,77,-6,7,8,26,77,-8,7,9,26,77,-9,6,8,25,80,-11,7,9,25,86,-10,7,8,25,83,-11,6,7,26,81,-9,5,7,26,82,-11,5,6,25,82,-10,5,7,25,85,-11,6,7,26,81,-12,8,10,26,78,0,35,41,26,75,12,89,102,25,79,-8,6,11,26,81,-6,6,8,26,79,-7,7,8,26,77,-10,7,8,26,78,-11,6,7,24,80,-11,6,8,25,80,-14,5,7,26,84,-9,5,6,26,83,-7,6,7,26,82,-11,5,6,26,79,-3,33,42,26,82,3,64,77,26,81,-9,15,21,25,77,-9,8,10,26,78,-2,39,49,27,78,15,75,88,26,81,17,68,77,27,80,14,68,76,27,78,13,69,77,26,80,-2,33,37,26,80,-11,6,8,26,79,5,55,62,26,78,22,87,102,27,80,23,85,97,27,79,18,68,77,27,79,14,72,85,26,67,11,51,64,26,69,2,24,27,25,78,-11,5,6,25,78,-11,6,8,26,77,-11,4,6,26,81,-11,5,6,27,81,-12,6,7,26,80,-12,7,8,25,84,-12,7,8,25,81,-15,6,8,25,63,14,32,39,25,67,39,95,108,26,75,18,71,86,26,78,-3,13,18,32,75,41,44,51,28,73,17,44,52,26,79,-14,5,6,25,78,-8,8,9,26,78,-12,6,8,25,78,-12,5,6,25,80,-12,6,7,26,80,-11,6,7,26,80,-12,6,8,26,81,-15,5,7,26,77,-17,5,7,25,79,-11,6,12,27,34,39,19,23,25,55,19,18,21,27,79,-1,17,24,31,74,44,40,48,28,78,14,37,42,26,80,-15,6,7,26,77,-13,5,7,25,81,-12,6,7,26,78,-16,6,7,26,79,-13,6,8,26,77,-13,6,8,26,78,-15,5,6,26,80,0,25,37,26,78,-4,27,36,26,76,-12,10,16,28,21,56,7,11,27,35,38,17,20,27,79,-10,7,9,26,81,2,22,28,28,81,12,42,49,27,80,4,30,35,26,77,-14,7,8,26,78,-16,7,8,25,80,-14,6,8,26,78,-13,7,9,26,77,-12,6,8,26,72,-8,15,19,27,76,6,40,53,26,76,10,49,55,26,78,-11,7,9,26,54,15,17,20,27,70,12,32,38,26,82,5,22,28,25,82,-6,7,10,32,73,50,42,53,31,73,41,45,53,26,77,8,53,58,27,76,3,31,50,26,77,4,25,40,26,77,0,25,31,27,78,3,23,31,27,71,16,34,54,28,78,23,67,80,27,78,11,46,54,26,67,9,29,33,25,80,-8,10,17,33,73,49,29,36,33,70,53,28,36,25,83,-3,10,17,26,80,2,32,37,27,82,0,30,40,27,78,16,46,53,26,78,11,48,57,27,78,15,48,65,27,78,26,48,72,27,78,10,24,43,27,76,-11,16,27,27,77,-16,6,8,26,78,12,48,54,25,68,5,15,18,26,55,16,18,21,28,78,31,46,51,30,78,34,52,58,26,81,-8,5,6,25,79,-10,5,6,26,79,-15,5,6,25,81,-6,8,10,25,80,-8,9,11,26,81,-10,6,8,25,83,-8,8,11,25,80,-1,10,25,26,78,7,25,35,26,76,19,54,65,26,77,13,45,51,26,60,11,17,20,26,43,28,15,19,26,79,-4,16,23,26,77,-6,19,23,26,79,-12,4,5,26,80,-13,5,7,27,77,-16,5,7,26,82,-6,6,8,26,81,-9,7,8,25,82,-7,8,10,25,80,-8,7,9,26,81,-7,7,8,25,81,-8,6,8,26,80,20,43,50,26,80,16,44,49,26,81,-11,6,7,26,79,-14,5,6,26,78,-14,5,6,27,77,-17,5,6,26,79,-12,6,7,26,79,-16,6,7,27,77,-18,6,7,25,84,-4,8,10,25,84,-6,9,11,24,84,-5,10,12,25,83,-4,7,8,25,84,-5,6,8,25,83,-5,10,12,25,81,20,44,50,26,83,19,40,46,26,81,-14,6,8,26,78,-16,6,8,26,77,-17,6,7,27,78,-17,5,6,26,79,-12,6,7,26,78,-16,6,8,27,76,-17,6,8],solution:{type:"search",entity:"Crate",spot:{level:0,topleft:{x:3312,y:3528},botright:{x:3312,y:3528}}}},{id:59,type:"map",tier:"hard",image_url:"assets/Map_clue_small_volcanoes.png",text:["X marks the spot between three small volcanoes."],ocr_data:[26,78,184,26,77,0,6,8,26,77,-1,8,10,25,78,0,6,7,26,79,8,24,32,26,77,4,10,20,26,77,0,7,9,26,77,-1,6,8,25,80,-3,7,9,25,86,-2,7,8,25,82,-3,6,7,26,82,-1,5,6,26,82,-3,4,6,25,82,-2,5,7,25,85,-3,6,7,26,81,-4,8,10,26,78,0,7,9,25,76,-4,7,9,25,79,-1,5,7,26,75,19,61,68,26,78,4,18,25,26,78,-3,7,8,25,78,-3,6,7,24,80,-4,6,8,25,80,-5,5,7,26,84,-1,5,6,26,83,1,6,8,26,82,-3,5,6,25,79,-5,5,7,25,83,-6,7,8,26,80,-4,6,8,25,77,-2,8,10,26,78,-4,6,8,26,78,-3,6,7,25,82,0,5,7,26,80,-3,5,6,26,79,-3,5,7,26,80,-4,5,6,26,80,-3,6,8,25,79,-4,7,8,26,79,-3,5,7,26,81,0,6,7,26,79,-1,5,6,26,79,-3,5,7,26,80,-6,6,7,26,80,-5,7,8,25,78,-3,5,6,25,78,-3,6,8,25,77,-3,4,5,26,81,-3,4,6,27,81,-4,6,7,26,80,0,14,19,25,84,-2,12,17,25,80,-7,6,8,24,80,-1,7,8,25,78,-2,6,8,26,78,0,7,9,26,78,2,7,9,26,80,-1,6,8,25,79,-5,6,8,26,79,-6,5,6,25,78,0,8,10,26,78,-4,6,8,25,78,-5,5,6,25,80,-3,6,7,26,80,-3,6,7,25,58,36,42,47,25,63,27,36,41,26,77,-9,5,7,25,79,-3,6,8,26,77,-3,11,22,25,77,-1,6,8,27,79,1,8,12,26,76,19,96,103,26,81,-5,6,7,26,80,-8,6,7,26,77,-6,5,7,25,81,-4,6,7,26,78,-8,6,7,26,79,-5,6,8,26,77,-6,6,7,26,78,-7,5,6,25,80,-4,14,23,25,71,61,122,141,26,63,20,42,55,24,46,101,37,51,25,76,0,13,20,27,79,-2,7,9,26,77,5,20,23,26,81,-5,5,6,25,80,-6,6,7,26,77,-6,7,9,26,78,-9,7,8,25,80,-6,6,8,26,78,-4,7,9,26,77,-4,6,8,26,76,-7,7,8,26,78,-8,7,13,25,75,15,38,47,25,63,22,31,41,23,47,47,22,26,26,71,13,22,27,26,82,3,7,8,25,82,1,8,9,25,80,-5,5,6,26,79,-7,6,7,26,79,-1,6,8,26,78,-9,6,7,26,78,-6,6,8,25,78,-2,8,9,26,78,-5,6,7,27,78,-8,5,7,27,81,-7,6,8,26,81,-4,6,7,26,81,1,7,9,26,80,-1,7,9,25,82,1,6,8,26,80,2,7,9,25,83,0,6,7,26,79,-6,6,7,26,81,-6,6,8,26,79,1,5,6,25,80,-2,6,8,26,82,-5,6,8,26,82,0,9,11,26,79,-5,6,8,27,76,-10,6,7,27,77,-8,6,11,24,53,58,59,66,25,79,-1,7,13,25,80,-3,5,7,25,80,0,6,7,26,80,-1,4,5,26,81,-1,4,6,25,79,-2,5,6,26,79,-7,5,6,25,81,2,7,10,25,80,0,8,10,26,81,-2,6,8,25,83,1,8,10,25,80,0,6,7,26,79,-2,6,7,25,80,-1,7,11,25,70,11,21,25,25,78,-2,7,11,26,78,-3,6,7,25,79,-3,5,6,26,76,-8,4,5,26,79,-4,4,5,26,80,-5,5,7,27,77,-8,5,7,26,82,2,6,8,26,82,-1,7,8,25,82,1,8,10,25,80,0,7,9,26,80,5,25,33,26,77,17,76,86,25,83,1,8,10,25,83,1,7,9,26,81,-3,6,7,26,78,-6,5,6,26,78,-7,5,6,27,77,-9,5,6,26,80,-4,6,8,26,79,-8,6,7,27,77,-10,5,7,25,84,4,9,11,24,84,2,8,10,24,85,3,9,11,25,84,5,7,9,25,84,4,7,9,25,81,8,18,24,24,84,3,8,10,25,85,1,10,12,26,80,-6,6,8,26,78,-7,6,8,26,77,-9,6,7,27,78,-9,5,6,26,80,-4,6,7,26,78,-8,6,8,27,76,-9,6,8],solution:{type:"dig",spot:{x:3021,y:3913,level:0},description:"two tiles west of the large geyser"}}],e.anagram=[{id:14,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Eek Zero Op"],challenge:[{type:"challengescroll",question:"How many animals are in the Ardougne Zoo?",answers:[{answer:40,note:"Before Eagles' Peak and Hunt for Red Raktuber"},{answer:41,note:"After either Eagles' Peak or Hunt for Red Raktuber"},{answer:42,note:"After both Eagles' Peak and Hunt for Red Raktuber"}]}],solution:{type:"talkto",npc:"Zookeeper",spots:[{range:{origin:{x:2607,y:3268,level:0},size:{x:14,y:14}},description:"in Ardougne Zoo"}]},anagram:["Eek Zero Op"]},{id:24,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Stab Ob","This anagram reveals who to speak to next: Boast B"],solution:{type:"talkto",spots:[{id:"before-death-plateu",description:"in his cave near Burthorpe",range:{origin:{x:2267,y:4752,level:0},size:{x:5,y:9}},note:"Before 'Death Plateu'"}],npc:"Sabbot"},anagram:["Stab Ob","Boast B"]},{id:318,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Nod med"],challenge:[{type:"challengescroll",question:"How many pigeon cages are there around the back of Jerico's house?",answers:[{answer:3}]}],solution:{type:"talkto",npc:"Edmond",spots:[{range:{origin:{x:2564,y:3330,level:0},size:{x:7,y:7}},description:"north of Ardougne castle"}]},anagram:["Nod med"]},{id:320,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Winston Lane"],challenge:[{type:"challengescroll",question:"How many tables are there in the Pick and Lute Inn?",answers:[{answer:10}]}],solution:{type:"talkto",npc:"Nails Newton",spots:[{range:{origin:{x:2880,y:3443,level:0},size:{x:3,y:3}},description:"near Taverley Lodestone"}]},anagram:["Winston Lane"]},{id:321,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Or A Vile"],challenge:[{type:"challengescroll",question:"How many windows look out into the Citharede Abbey courtyard?",answers:[{answer:17}]}],solution:{type:"talkto",npc:"Valerio",spots:[{range:{origin:{x:3399,y:3148,level:0},size:{x:3,y:3}},description:"outside of the abbey"}]},anagram:["Or A Vile"]},{id:322,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Icy Fe"],solution:{type:"talkto",npc:"Fycie",spots:[{range:{origin:{x:2646,y:9390,level:0},size:{x:8,y:9}},description:"in Rantz's cave"}]},anagram:["Icy Fe"]},{id:323,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Aha Jar"],solution:{type:"talkto",npc:"Jaraah",spots:[{range:{origin:{x:3290,y:3215,level:0},size:{x:8,y:5}},description:"at the northern end of Al Kharid"}]},anagram:["Aha Jar"]},{id:326,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Bail Trims"],solution:{type:"talkto",spots:[{range:{origin:{x:2405,y:9815,level:0},size:{x:9,y:8}},description:"in his cave at Tree Gnome Stronghold"}],npc:"Brimstail"},anagram:["Bail Trims"]},{id:327,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Ok Co"],challenge:[{type:"challengescroll",question:"How many cannons does Lumbridge Castle have?",answers:[{answer:7}]}],solution:{type:"talkto",npc:"Cook",spots:[{range:{origin:{x:3208,y:3215,level:0},size:{x:3,y:1}},description:"in Lumbridge Castle's kitchen"}]},anagram:["Ok Co"]},{id:328,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Are Col"],challenge:[{type:"challengescroll",question:"If x is 15 and y is 3, what is 3x + y? ",answers:[{answer:48}]}],solution:{type:"talkto",npc:"Oracle",spots:[{range:{origin:{x:3008,y:3498,level:0},size:{x:12,y:6}},description:"on the peak of Ice Mountain"}]},anagram:["Are Col"]},{id:329,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Arc O Line"],challenge:[{type:"challengescroll",question:"How many fishermen are there on the Fishing Platform?",answers:[{answer:11,note:"Before 'Kennith's Concerns'"},{answer:0,note:"After 'Kennith's Concerns'"}]}],solution:{type:"talkto",npc:"Caroline",spots:[{id:"default",description:"in Witchhaven",range:{origin:{x:2713,y:3290,level:0},size:{x:6,y:16}},note:"Before 'Sea Slug'"},{range:{origin:{x:2708,y:3280,level:1},size:{x:5,y:6}},description:"in her house in Witchhaven",note:"After 'Sea Slug'."}]},anagram:["Arc O Line"]},{id:330,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Goblin Kern"],solution:{type:"talkto",spots:[{range:{origin:{x:2540,y:3167,level:0},size:{x:3,y:5}},description:"in Tree Gnome Village"}],npc:"King Bolren"},anagram:["Goblin Kern"]},{id:331,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Soy Drain"],challenge:[{type:"challengescroll",question:"How many ore rocks are there in the nearby copper and tin mine?",answers:[{answer:8}]}],solution:{type:"talkto",npc:"Ysondria",spots:[{range:{origin:{x:3219,y:3182,level:0},size:{x:3,y:3}},description:"at the Nexus"}]},anagram:["Soy Drain"]},{id:332,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Dt Run B"],challenge:[{type:"challengescroll",question:"How many people are waiting for the next bard to perform?",answers:[{answer:4}]}],solution:{type:"talkto",npc:"Brundt the Chieftain",spots:[{range:{origin:{x:2657,y:3666,level:0},size:{x:4,y:5}},description:"in Relekka Longhall"}]},anagram:["Dt Run B"]},{id:334,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Me if"],solution:{type:"talkto",spots:[{range:{origin:{x:2457,y:3380,level:0},size:{x:5,y:3}},description:"at gates of Tree Gnome Stronghold"}],npc:"Femi"},anagram:["Me if"]},{id:335,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: R Ak Mi"],challenge:[{type:"challengescroll",question:"I have 16 kebabs, I eat one myself and share the rest equally between 3 friends. How many do they have each?",answers:[{answer:5}]}],solution:{type:"talkto",npc:"Karim",spots:[{range:{origin:{x:3269,y:3182,level:0},size:{x:3,y:3}},description:"in Al Kharid"}]},anagram:["R Ak Mi"]},{id:336,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Got A Boy"],challenge:[{type:"challengescroll",question:"How many buildings are in the village?",answers:[{answer:11}]}],solution:{type:"talkto",npc:"Gabooty",spots:[{range:{origin:{x:2786,y:3063,level:0},size:{x:16,y:8}},description:"in Tai Bwo Wannai Village"}]},anagram:["Got A Boy"]},{id:337,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Halt Us"],solution:{type:"talkto",spots:[{range:{origin:{x:2935,y:3152,level:0},size:{x:7,y:5}},description:"at Musa Point"}],npc:"Luthas"},anagram:["Halt Us"]},{id:338,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Err Cure It"],challenge:[{type:"challengescroll",question:"How many houses have a cross on the door?",answers:[{answer:20}]}],solution:{type:"talkto",npc:"Recruiter",spots:[{range:{origin:{x:2539,y:3302,level:0},size:{x:6,y:7}},description:"in West Ardougne"}]},anagram:["Err Cure It"]},{id:339,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Iz A Ammo Load For Mrs Yakkers"],challenge:[{type:"challengescroll",question:"How many bottles are there on the stall to the east of Mr Ex?",answers:[{answer:7}]}],solution:{type:"talkto",npc:"Moldark, Emissary of Zamorak",spots:[{range:{origin:{x:3104,y:3508,level:0},size:{x:2,y:3}},description:"in Edgeville"}]},anagram:["Iz A Ammo Load For Mrs Yakkers"]},{id:340,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Im Krom"],challenge:[{type:"challengescroll",question:"How many rocks in the Rimmington mine cannot be used to make bronze?",answers:[{answer:7}]}],solution:{type:"talkto",npc:"Rommik",spots:[{range:{origin:{x:2945,y:3193,level:0},size:{x:6,y:7}},description:"in Rimmington"}]},anagram:["Im Krom"]},{id:341,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: El Ow"],solution:{type:"talkto",spots:[{range:{origin:{x:3230,y:3420,level:0},size:{x:7,y:3}},description:"in Varrock's Archery Store"}],npc:"Lowe"},anagram:["El Ow"]},{id:342,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Peaty Pert"],solution:{type:"talkto",spots:[{range:{origin:{x:3048,y:3372,level:0},size:{x:7,y:7}},description:"in the Party Room"}],npc:"Party Pete"},anagram:["Peaty Pert"]},{id:343,type:"anagram",tier:"medium",text:["This anagram reveals who to speak to next: Lark In Dog"],challenge:[{type:"challengescroll",question:"How many bookcases are there in the Varrock Palace library?",answers:[{answer:24}]}],solution:{type:"talkto",npc:"King Roald",spots:[{range:{origin:{x:3217,y:3471,level:0},size:{x:8,y:8}},description:"in Varrock Castle"}]},anagram:["Lark In Dog"]},{id:20,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Me Am The Calc","This anagram reveals who to speak to next: Ace Match Elm","This anagram reveals who to speak to next: The Cal Came"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3284,y:3234,level:0},size:{x:11,y:8}},description:"north of Al Kharid"}],npc:"Cam the Camel"},anagram:["Me Am The Calc","Ace Match Elm","The Cal Came"]},{id:287,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: I Eat Its Chart Hints Do U"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3420,y:2926,level:0},size:{x:11,y:5}},description:"in Nardah"}],npc:"Shiratti the Custodian"},anagram:["I Eat Its Chart Hints Do U"]},{id:288,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: An Paint Tonic"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2860,y:9873,level:0},size:{x:18,y:11}},description:"in the Dwarven Tunnel under the White Wolf Mountain"}],npc:"Captain Ninto"},anagram:["An Paint Tonic"]},{id:289,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Arr! So I am a crust, and?"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2338,y:3673,level:0},size:{x:9,y:6}},description:"at the Piscatoris Fishing Colony"}],npc:"Ramara du Croissant"},anagram:["Arr! So I am a crust, and?"]},{id:290,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: C On Game Hoc"],challenge:[{type:"challengescroll",question:"How many gnomes on the gnome ball field have red patches on their uniforms?",answers:[{answer:6}]}],solution:{type:"talkto",npc:"Gnome Coach",spots:[{range:{origin:{x:2381,y:3479,level:0},size:{x:29,y:19}},description:"roaming around the gnomeball field"}]},anagram:["C On Game Hoc"]},{id:291,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: He Do Pose. It Is Cultrrl, Mk?"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2903,y:10206,level:0},size:{x:3,y:3}},description:"in eastern Keldagrim"}],npc:"Riki the sculptor's model"},anagram:["He Do Pose. It Is Cultrrl, Mk?"]},{id:292,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Profs Lose Wrong Pie"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3103,y:3146,level:0},size:{x:12,y:20}},description:"on the ground floor of Wizard's Tower"}],npc:"Professor Onglewip"},anagram:["Profs Lose Wrong Pie"]},{id:293,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: O Birdz A Zany En Pc"],challenge:[{type:"challengescroll",question:"How many banana trees are there in the plantation?",answers:[{answer:33}]}],solution:{type:"talkto",npc:"Cap'n Izzy No-Beard",spots:[{range:{origin:{x:2806,y:3190,level:0},size:{x:4,y:3},data:"7g8="},description:"at the Agility Arena"}]},anagram:["O Birdz A Zany En Pc"]},{id:295,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Red Art Tans"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3032,y:3190,level:0},size:{x:3,y:2}},description:"in Port Sarim"}],npc:"Trader Stan"},anagram:["Red Art Tans"]},{id:296,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Or Zinc Fumes Ward"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2587,y:9488,level:0},size:{x:3,y:2}},description:"in the basement of Wizard's Guild"}],npc:"Wizard Frumscone"},anagram:["Or Zinc Fumes Ward"]},{id:297,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: By Look"],challenge:[{type:"challengescroll",question:"How many flowers are there in the clearing below this platform?",answers:[{answer:13}]}],solution:{type:"talkto",npc:"Bolkoy",spots:[{range:{origin:{x:2525,y:3160,level:1},size:{x:7,y:5}},description:"in Tree Gnome Village"}]},anagram:["By Look"]},{id:298,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Sequin Dirge"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2499,y:3861,level:1},size:{x:4,y:4}},note:"After 'Blood Runs Deep'",description:"in Miscellania's Throneroom"},{range:{origin:{x:2612,y:3871,level:1},size:{x:6,y:9}},note:"Before 'Blood Runs Deep'",description:"in Etceteria Castle"}],npc:"Queen Sigrid"},anagram:["Sequin Dirge"]},{id:299,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: A Zen She"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2657,y:3291,level:0},size:{x:5,y:3}},description:"in her house south of Ardougne Market"}],npc:"Zenesha"},anagram:["A Zen She"]},{id:300,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Gulag Run"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2437,y:3047,level:0},size:{x:14,y:11}},description:"south of Castle Wars"}],npc:"Uglug Nar"},anagram:["Gulag Run"]},{id:301,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: Land Doomd"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:3358,y:3502,level:0},size:{x:7,y:9}},description:"at the limestone mine"}],npc:"Odd Old Man"},anagram:["Land Doomd"]},{id:302,type:"anagram",tier:"hard",text:["This anagram reveals who to speak to next: I Faffy Run"],challenge:[{type:"slider"}],solution:{type:"talkto",spots:[{range:{origin:{x:2384,y:4466,level:0},size:{x:6,y:6}},description:"north of the bank in Zanaris"}],npc:"Fairy Nuff"},anagram:["I Faffy Run"]},{id:303,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: An exile that isn't wholly free WE IRK OVER NA."],solution:{type:"talkto",spots:[{range:{origin:{x:4644,y:5382,level:0},size:{x:5,y:5}},description:"at the bottom of Polypore Dungeon"}],npc:"Ramokee Skinweaver"},anagram:["WE IRK OVER NA"]},{id:306,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: He often preaches of QUIT THY BRINE RAT ROLL"],solution:{type:"talkto",spots:[{range:{origin:{x:3679,y:2960,level:0},size:{x:5,y:5}},description:"by the docks on Mos Le'Harmless",note:"Mos Le'Harmless"},{range:{origin:{x:3783,y:2822,level:0},size:{x:8,y:8}},description:"on Harmony Island",note:"Harmony"}],npc:"Brother Tranquility"},anagram:["QUIT THY BRINE RAT ROLL"]},{id:307,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: They seek spirits O EASTERN WISHES"],challenge:[{type:"towers"}],solution:{type:"talkto",spots:[{range:{origin:{x:1784,y:11952,level:0},size:{x:3,y:3}},description:"on Tuaei Leit"}],npc:"Sensei Seaworth"},anagram:["O EASTERN WISHES"]},{id:308,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: This lady wants me to find ancient scrolls ERGO I DIG CLAY"],challenge:[{type:"towers"}],solution:{type:"talkto",spots:[{id:"outside",description:"outside of the entrance to the empty throne room",range:{origin:{x:3376,y:3403,level:0},size:{x:3,y:3}},note:"Outside the empty throne room"},{id:"inside",description:"inside the empty throne room",range:{origin:{x:2825,y:12630,level:2},size:{x:3,y:3}},note:"Inside the empty throne room"}],npc:"Celia Diggory"},anagram:["ERGO I DIG CLAY"]},{id:309,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: Master of the elements, he may REIGN US IF IMMORTAL"],challenge:[{type:"lockbox"}],solution:{type:"talkto",spots:[{id:"armadyl-tower",range:{origin:{x:2997,y:3263,level:0},size:{x:8,y:11}},description:"by Armadyl's tower"},{id:"city-of-um",range:{origin:{x:1034,y:1762,level:1},size:{x:3,y:3}},description:"at the Ritual Site"}],npc:"Malignus mortifer"},anagram:["REIGN US IF IMMORTAL"]},{id:310,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: If distracted from their work AH; WET ARM"],challenge:[{type:"lockbox"}],solution:{type:"talkto",spots:[{range:{origin:{x:2346,y:3163,level:0},size:{x:3,y:3}},description:"in Lletya"}],npc:"Amaethwr"},anagram:["AH; WET ARM"]},{id:311,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: Young but stylish PIN HEIR ALL IN PLACE"],solution:{type:"talkto",npc:"Philippe Carnillean",spots:[{id:"before",description:"at Carnillean Mansion",range:{origin:{x:2564,y:3267,level:0},size:{x:12,y:8}},note:"Before Carnillean Rising"},{id:"50qp",description:"at the entrance of Ardougne Combat Training Camp",range:{origin:{x:2514,y:3354,level:0},size:{x:8,y:4}},note:"50 qp."},{id:"100qp",description:"at the entrance to Mountain Camp",range:{origin:{x:2752,y:3649,level:0},size:{x:8,y:8}},note:"100 qp."},{id:"150qp",description:"in Shilo Village",range:{origin:{x:2857,y:2993,level:1},size:{x:9,y:9}},note:"150 qp."},{id:"200qp",description:"in the Green Ghost Inn",range:{origin:{x:3671,y:3489,level:0},size:{x:11,y:11}},note:"200 qp."},{id:"250qp",description:"at the bottom of Polypore Dungeon",range:{origin:{x:4643,y:5384,level:0},size:{x:8,y:8}},note:"250 qp."},{id:"300qp",description:"outside of Oldak's house",range:{origin:{x:2709,y:5357,level:0},size:{x:6,y:6}},note:"300 qp."},{id:"350qp",description:"at Piscatoris Fishing Colony",range:{origin:{x:2338,y:3673,level:0},size:{x:9,y:6}},note:"350 qp."},{id:"400qp",description:"at the TzHaar fight Caves",range:{origin:{x:4610,y:5123,level:0},size:{x:8,y:8}},note:"400 qp."}]},anagram:["PIN HEIR ALL IN PLACE"]},{id:312,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: In his youth, this adventurer was a WINSOME LAD"],solution:{type:"talkto",spots:[{range:{origin:{x:3087,y:3254,level:0},size:{x:3,y:2}},description:"in Draynor"}],npc:"Wise Old Man"},anagram:["WINSOME LAD"]},{id:313,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: The cabbage diet must work because he has A PURE GLOW"],solution:{type:"talkto",spots:[{id:"farm",note:"Before Gower Quest",range:{origin:{x:3252,y:3353,level:0},size:{x:5,y:3}},description:"at the farm south of Varrock"},{id:"life-altar",note:"After Gower Quest",range:{origin:{x:1055,y:5549,level:1},size:{x:3,y:3}},description:"at the Life Altar"}],npc:"Paul Gower"},anagram:["A PURE GLOW"]},{id:314,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: Age allows a new perspective in this vital place TABOO RISES SHYLY"],solution:{type:"talkto",spots:[{range:{origin:{x:3197,y:6960,level:1},size:{x:3,y:3}},description:"at the entrance to Telos"}],npc:"Soothsayer Sybil"},anagram:["TABOO RISES SHYLY"]},{id:315,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: With her age, it's no surprise to HEAR A LADY RANT"],solution:{type:"talkto",spots:[{range:{origin:{x:2220,y:3297,level:1},size:{x:3,y:3}},description:"at the seren stones"}],npc:"Lady Trahaearn"},anagram:["HEAR A LADY RANT"]},{id:316,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: He claimed to be a human scholar but I SAW THE LIE"],solution:{type:"talkto",spots:[{range:{origin:{x:3416,y:2935,level:0},size:{x:6,y:6}},description:"in Nardaah"}],npc:"Ali The Wise"},anagram:["I SAW THE LIE"]},{id:317,type:"anagram",tier:"master",text:["This anagram reveals who to speak to next: His job leaves him kind of HATED"],solution:{type:"talkto",spots:[{id:"office",range:{origin:{x:414,y:674,level:0}},description:"in Death's Office",note:"Death's Office"}],npc:"Death"},anagram:["HATED"]}],e.coordinates=[{id:402,type:"coordinates",tier:"medium",text:["00 degrees 05 minutes south,01 degrees 13 minutes east"],coordinates:{latitude:{degrees:0,minutes:5,direction:"south"},longitude:{degrees:1,minutes:13,direction:"east"}}},{id:403,type:"coordinates",tier:"medium",text:["00 degrees 13 minutes south,14 degrees 00 minutes east"],coordinates:{latitude:{degrees:0,minutes:13,direction:"south"},longitude:{degrees:14,minutes:0,direction:"east"}}},{id:404,type:"coordinates",tier:"medium",text:["00 degrees 18 minutes south,09 degrees 28 minutes east"],coordinates:{latitude:{degrees:0,minutes:18,direction:"south"},longitude:{degrees:9,minutes:28,direction:"east"}}},{id:405,type:"coordinates",tier:"medium",text:["00 degrees 20 minutes south,23 degrees 15 minutes east"],coordinates:{latitude:{degrees:0,minutes:20,direction:"south"},longitude:{degrees:23,minutes:15,direction:"east"}}},{id:406,type:"coordinates",tier:"medium",text:["00 degrees 31 minutes south,17 degrees 43 minutes east"],coordinates:{latitude:{degrees:0,minutes:31,direction:"south"},longitude:{degrees:17,minutes:43,direction:"east"}}},{id:407,type:"coordinates",tier:"medium",text:["00 degrees 50 minutes north,24 degrees 16 minutes east"],coordinates:{latitude:{degrees:0,minutes:50,direction:"north"},longitude:{degrees:24,minutes:16,direction:"east"}}},{id:408,type:"coordinates",tier:"medium",text:["01 degrees 18 minutes south,14 degrees 15 minutes east"],coordinates:{latitude:{degrees:1,minutes:18,direction:"south"},longitude:{degrees:14,minutes:15,direction:"east"}}},{id:410,type:"coordinates",tier:"medium",text:["01 degrees 26 minutes north,08 degrees 01 minutes east"],coordinates:{latitude:{degrees:1,minutes:26,direction:"north"},longitude:{degrees:8,minutes:1,direction:"east"}}},{id:411,type:"coordinates",tier:"medium",text:["01 degrees 35 minutes south,07 degrees 28 minutes east"],coordinates:{latitude:{degrees:1,minutes:35,direction:"south"},longitude:{degrees:7,minutes:28,direction:"east"}}},{id:413,type:"coordinates",tier:"medium",text:["02 degrees 50 minutes north,06 degrees 20 minutes east"],coordinates:{latitude:{degrees:2,minutes:50,direction:"north"},longitude:{degrees:6,minutes:20,direction:"east"}}},{id:414,type:"coordinates",tier:"medium",text:["02 degrees 50 minutes north,21 degrees 46 minutes east"],coordinates:{latitude:{degrees:2,minutes:50,direction:"north"},longitude:{degrees:21,minutes:46,direction:"east"}}},{id:416,type:"coordinates",tier:"medium",text:["03 degrees 35 minutes south,13 degrees 35 minutes east"],coordinates:{latitude:{degrees:3,minutes:35,direction:"south"},longitude:{degrees:13,minutes:35,direction:"east"}}},{id:419,type:"coordinates",tier:"medium",text:["04 degrees 00 minutes south,12 degrees 46 minutes east"],coordinates:{latitude:{degrees:4,minutes:0,direction:"south"},longitude:{degrees:12,minutes:46,direction:"east"}}},{id:422,type:"coordinates",tier:"medium",text:["04 degrees 13 minutes north,12 degrees 45 minutes east"],coordinates:{latitude:{degrees:4,minutes:13,direction:"north"},longitude:{degrees:12,minutes:45,direction:"east"}}},{id:425,type:"coordinates",tier:"medium",text:["05 degrees 20 minutes south,04 degrees 28 minutes east"],coordinates:{latitude:{degrees:5,minutes:20,direction:"south"},longitude:{degrees:4,minutes:28,direction:"east"}}},{id:427,type:"coordinates",tier:"medium",text:["05 degrees 43 minutes north,23 degrees 05 minutes east"],coordinates:{latitude:{degrees:5,minutes:43,direction:"north"},longitude:{degrees:23,minutes:5,direction:"east"}}},{id:431,type:"coordinates",tier:"medium",text:["06 degrees 31 minutes north,01 degrees 46 minutes west"],coordinates:{latitude:{degrees:6,minutes:31,direction:"north"},longitude:{degrees:1,minutes:46,direction:"west"}}},{id:432,type:"coordinates",tier:"medium",text:["07 degrees 05 minutes north,30 degrees 56 minutes east"],coordinates:{latitude:{degrees:7,minutes:5,direction:"north"},longitude:{degrees:30,minutes:56,direction:"east"}}},{id:434,type:"coordinates",tier:"medium",text:["07 degrees 33 minutes north,15 degrees 00 minutes east"],coordinates:{latitude:{degrees:7,minutes:33,direction:"north"},longitude:{degrees:15,minutes:0,direction:"east"}}},{id:440,type:"coordinates",tier:"medium",text:["08 degrees 33 minutes north,01 degrees 39 minutes west"],coordinates:{latitude:{degrees:8,minutes:33,direction:"north"},longitude:{degrees:1,minutes:39,direction:"west"}}},{id:442,type:"coordinates",tier:"medium",text:["09 degrees 33 minutes north,02 degrees 15 minutes east"],coordinates:{latitude:{degrees:9,minutes:33,direction:"north"},longitude:{degrees:2,minutes:15,direction:"east"}}},{id:443,type:"coordinates",tier:"medium",text:["09 degrees 48 minutes north,17 degrees 39 minutes east"],coordinates:{latitude:{degrees:9,minutes:48,direction:"north"},longitude:{degrees:17,minutes:39,direction:"east"}}},{id:444,type:"coordinates",tier:"medium",text:["11 degrees 03 minutes north,31 degrees 20 minutes east"],coordinates:{latitude:{degrees:11,minutes:3,direction:"north"},longitude:{degrees:31,minutes:20,direction:"east"}}},{id:445,type:"coordinates",tier:"medium",text:["11 degrees 05 minutes north,00 degrees 45 minutes west"],coordinates:{latitude:{degrees:11,minutes:5,direction:"north"},longitude:{degrees:0,minutes:45,direction:"west"}}},{id:446,type:"coordinates",tier:"medium",text:["11 degrees 41 minutes north,14 degrees 58 minutes east"],coordinates:{latitude:{degrees:11,minutes:41,direction:"north"},longitude:{degrees:14,minutes:58,direction:"east"}}},{id:449,type:"coordinates",tier:"medium",text:["14 degrees 54 minutes north,09 degrees 13 minutes east"],coordinates:{latitude:{degrees:14,minutes:54,direction:"north"},longitude:{degrees:9,minutes:13,direction:"east"}}},{id:462,type:"coordinates",tier:"medium",text:["22 degrees 30 minutes north,03 degrees 01 minutes east"],coordinates:{latitude:{degrees:22,minutes:30,direction:"north"},longitude:{degrees:3,minutes:1,direction:"east"}}},{id:401,type:"coordinates",tier:"hard",text:["00 degrees 00 minutes north,07 degrees 13 minutes west"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:0,minutes:0,direction:"north"},longitude:{degrees:7,minutes:13,direction:"west"}}},{id:409,type:"coordinates",tier:"hard",text:["01 degrees 24 minutes north,08 degrees 05 minutes west"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:1,minutes:24,direction:"north"},longitude:{degrees:8,minutes:5,direction:"west"}}},{id:412,type:"coordinates",tier:"hard",text:["02 degrees 33 minutes north,28 degrees 45 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:2,minutes:33,direction:"north"},longitude:{degrees:28,minutes:45,direction:"east"}}},{id:415,type:"coordinates",tier:"hard",text:["03 degrees 03 minutes south,05 degrees 03 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:3,minutes:3,direction:"south"},longitude:{degrees:5,minutes:3,direction:"east"}}},{id:417,type:"coordinates",tier:"hard",text:["03 degrees 39 minutes south,13 degrees 58 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:3,minutes:39,direction:"south"},longitude:{degrees:13,minutes:58,direction:"east"}}},{id:418,type:"coordinates",tier:"hard",text:["03 degrees 45 minutes south,22 degrees 45 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:3,minutes:45,direction:"south"},longitude:{degrees:22,minutes:45,direction:"east"}}},{id:420,type:"coordinates",tier:"hard",text:["04 degrees 03 minutes south,03 degrees 11 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:4,minutes:3,direction:"south"},longitude:{degrees:3,minutes:11,direction:"east"}}},{id:421,type:"coordinates",tier:"hard",text:["04 degrees 05 minutes south,04 degrees 24 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:4,minutes:5,direction:"south"},longitude:{degrees:4,minutes:24,direction:"east"}}},{id:423,type:"coordinates",tier:"hard",text:["04 degrees 16 minutes south,16 degrees 16 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:4,minutes:16,direction:"south"},longitude:{degrees:16,minutes:16,direction:"east"}}},{id:424,type:"coordinates",tier:"hard",text:["04 degrees 41 minutes north,03 degrees 09 minutes west"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:4,minutes:41,direction:"north"},longitude:{degrees:3,minutes:9,direction:"west"}}},{id:426,type:"coordinates",tier:"hard",text:["05 degrees 37 minutes north,31 degrees 15 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:5,minutes:37,direction:"north"},longitude:{degrees:31,minutes:15,direction:"east"}}},{id:428,type:"coordinates",tier:"hard",text:["05 degrees 50 minutes south,10 degrees 05 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:5,minutes:50,direction:"south"},longitude:{degrees:10,minutes:5,direction:"east"}}},{id:429,type:"coordinates",tier:"hard",text:["06 degrees 00 minutes south,21 degrees 48 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:6,minutes:0,direction:"south"},longitude:{degrees:21,minutes:48,direction:"east"}}},{id:430,type:"coordinates",tier:"hard",text:["06 degrees 11 minutes south,15 degrees 07 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:6,minutes:11,direction:"south"},longitude:{degrees:15,minutes:7,direction:"east"}}},{id:433,type:"coordinates",tier:"hard",text:["07 degrees 22 minutes north,14 degrees 15 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:7,minutes:22,direction:"north"},longitude:{degrees:14,minutes:15,direction:"east"}}},{id:435,type:"coordinates",tier:"hard",text:["07 degrees 41 minutes north,06 degrees 00 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:7,minutes:41,direction:"north"},longitude:{degrees:6,minutes:0,direction:"east"}}},{id:436,type:"coordinates",tier:"hard",text:["07 degrees 43 minutes south,12 degrees 26 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:7,minutes:43,direction:"south"},longitude:{degrees:12,minutes:26,direction:"east"}}},{id:437,type:"coordinates",tier:"hard",text:["08 degrees 03 minutes north,31 degrees 16 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:8,minutes:3,direction:"north"},longitude:{degrees:31,minutes:16,direction:"east"}}},{id:438,type:"coordinates",tier:"hard",text:["08 degrees 05 minutes south,15 degrees 56 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:8,minutes:5,direction:"south"},longitude:{degrees:15,minutes:56,direction:"east"}}},{id:439,type:"coordinates",tier:"hard",text:["08 degrees 26 minutes south,10 degrees 28 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:8,minutes:26,direction:"south"},longitude:{degrees:10,minutes:28,direction:"east"}}},{id:441,type:"coordinates",tier:"hard",text:["09 degrees 22 minutes north,02 degrees 24 minutes west"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:9,minutes:22,direction:"north"},longitude:{degrees:2,minutes:24,direction:"west"}}},{id:447,type:"coordinates",tier:"hard",text:["12 degrees 48 minutes north,20 degrees 20 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:12,minutes:48,direction:"north"},longitude:{degrees:20,minutes:20,direction:"east"}}},{id:448,type:"coordinates",tier:"hard",text:["13 degrees 46 minutes north,21 degrees 01 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:13,minutes:46,direction:"north"},longitude:{degrees:21,minutes:1,direction:"east"}}},{id:450,type:"coordinates",tier:"hard",text:["15 degrees 48 minutes north,13 degrees 52 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:15,minutes:48,direction:"north"},longitude:{degrees:13,minutes:52,direction:"east"}}},{id:451,type:"coordinates",tier:"hard",text:["16 degrees 20 minutes north,12 degrees 45 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:16,minutes:20,direction:"north"},longitude:{degrees:12,minutes:45,direction:"east"}}},{id:452,type:"coordinates",tier:"hard",text:["16 degrees 30 minutes north,16 degrees 28 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:16,minutes:30,direction:"north"},longitude:{degrees:16,minutes:28,direction:"east"}}},{id:453,type:"coordinates",tier:"hard",text:["16 degrees 35 minutes north,27 degrees 01 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:16,minutes:35,direction:"north"},longitude:{degrees:27,minutes:1,direction:"east"}}},{id:454,type:"coordinates",tier:"hard",text:["17 degrees 50 minutes north,08 degrees 30 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:17,minutes:50,direction:"north"},longitude:{degrees:8,minutes:30,direction:"east"}}},{id:455,type:"coordinates",tier:"hard",text:["18 degrees 03 minutes north,25 degrees 16 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:18,minutes:3,direction:"north"},longitude:{degrees:25,minutes:16,direction:"east"}}},{id:456,type:"coordinates",tier:"hard",text:["18 degrees 22 minutes north,16 degrees 33 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:18,minutes:22,direction:"north"},longitude:{degrees:16,minutes:33,direction:"east"}}},{id:457,type:"coordinates",tier:"hard",text:["19 degrees 43 minutes north,25 degrees 07 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:19,minutes:43,direction:"north"},longitude:{degrees:25,minutes:7,direction:"east"}}},{id:458,type:"coordinates",tier:"hard",text:["20 degrees 05 minutes north,21 degrees 52 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:20,minutes:5,direction:"north"},longitude:{degrees:21,minutes:52,direction:"east"}}},{id:459,type:"coordinates",tier:"hard",text:["20 degrees 07 minutes north,18 degrees 33 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:20,minutes:7,direction:"north"},longitude:{degrees:18,minutes:33,direction:"east"}}},{id:460,type:"coordinates",tier:"hard",text:["20 degrees 33 minutes north,15 degrees 48 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:20,minutes:33,direction:"north"},longitude:{degrees:15,minutes:48,direction:"east"}}},{id:461,type:"coordinates",tier:"hard",text:["21 degrees 24 minutes north,17 degrees 54 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:21,minutes:24,direction:"north"},longitude:{degrees:17,minutes:54,direction:"east"}}},{id:463,type:"coordinates",tier:"hard",text:["22 degrees 35 minutes north,19 degrees 18 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:22,minutes:35,direction:"north"},longitude:{degrees:19,minutes:18,direction:"east"}}},{id:464,type:"coordinates",tier:"hard",text:["22 degrees 45 minutes north,26 degrees 33 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:22,minutes:45,direction:"north"},longitude:{degrees:26,minutes:33,direction:"east"}}},{id:465,type:"coordinates",tier:"hard",text:["24 degrees 26 minutes north,26 degrees 24 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:24,minutes:26,direction:"north"},longitude:{degrees:26,minutes:24,direction:"east"}}},{id:466,type:"coordinates",tier:"hard",text:["24 degrees 56 minutes north,22 degrees 28 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:24,minutes:56,direction:"north"},longitude:{degrees:22,minutes:28,direction:"east"}}},{id:467,type:"coordinates",tier:"hard",text:["24 degrees 58 minutes north,18 degrees 43 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:24,minutes:58,direction:"north"},longitude:{degrees:18,minutes:43,direction:"east"}}},{id:468,type:"coordinates",tier:"hard",text:["25 degrees 03 minutes north,17 degrees 05 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:25,minutes:3,direction:"north"},longitude:{degrees:17,minutes:5,direction:"east"}}},{id:469,type:"coordinates",tier:"hard",text:["25 degrees 03 minutes north,23 degrees 24 minutes east"],challenge:[{type:"wizard"}],coordinates:{latitude:{degrees:25,minutes:3,direction:"north"},longitude:{degrees:23,minutes:24,direction:"east"}}}],e.scan=[{id:36,type:"scan",tier:"elite",text:["This scroll will work in the deepest levels of the Wilderness. Orb scan range: 25 paces."],spots:[{x:2958,y:3917,level:0},{x:2979,y:3962,level:0},{x:2998,y:3914,level:0},{x:2956,y:3908,level:0},{x:2944,y:3909,level:0},{x:2990,y:3924,level:0},{x:3055,y:3914,level:0},{x:3060,y:3941,level:0},{x:3029,y:3949,level:0},{x:3012,y:3959,level:0},{x:3057,y:3948,level:0},{x:3048,y:3926,level:0},{x:3037,y:3925,level:0},{x:3031,y:3926,level:0},{x:3021,y:3926,level:0},{x:3110,y:3954,level:0},{x:3125,y:3909,level:0},{x:3080,y:3911,level:0},{x:3160,y:3943,level:0},{x:3182,y:3926,level:0},{x:3193,y:3950,level:0},{x:3179,y:3943,level:0},{x:3175,y:3962,level:0},{x:3242,y:3956,level:0},{x:3241,y:3944,level:0},{x:3210,y:3910,level:0},{x:3216,y:3944,level:0},{x:3266,y:3936,level:0},{x:3307,y:3916,level:0},{x:3306,y:3947,level:0},{x:3281,y:3942,level:0},{x:3315,y:3914,level:0},{x:3269,y:3914,level:0},{x:3380,y:3960,level:0},{x:3342,y:3894,level:0},{x:3334,y:3906,level:0},{x:3363,y:3960,level:0},{x:3346,y:3976,level:0},{x:3408,y:3937,level:0}],range:25,scantext:"the deepest levels of the Wilderness"},{id:349,type:"scan",tier:"elite",text:["This scroll will work in the desert, east of the Elid and north of Nardah. Orb scan range: 27 paces."],spots:[{x:3421,y:2949,level:0},{x:3444,y:2952,level:0},{x:3447,y:2967,level:0},{x:3438,y:2960,level:0},{x:3417,y:2959,level:0},{x:3427,y:2970,level:0},{x:3442,y:2974,level:0},{x:3408,y:2986,level:0},{x:3426,y:2984,level:0},{x:3436,y:2989,level:0},{x:3406,y:3003,level:0},{x:3393,y:2997,level:0},{x:3419,y:3017,level:0},{x:3382,y:3015,level:0},{x:3385,y:3024,level:0},{x:3383,y:3018,level:0},{x:3423,y:3020,level:0},{x:3448,y:3019,level:0},{x:3411,y:3048,level:0},{x:3422,y:3051,level:0},{x:3448,y:3063,level:0},{x:3401,y:3064,level:0},{x:3460,y:3022,level:0},{x:3476,y:3018,level:0},{x:3462,y:3047,level:0},{x:3465,y:3034,level:0},{x:3502,y:3050,level:0},{x:3510,y:3041,level:0},{x:3476,y:3057,level:0},{x:3480,y:3090,level:0},{x:3473,y:3082,level:0},{x:3482,y:3108,level:0},{x:3499,y:3104,level:0},{x:3505,y:3093,level:0},{x:3401,y:3099,level:0},{x:3396,y:3110,level:0},{x:3406,y:3126,level:0},{x:3433,y:3122,level:0},{x:3444,y:3085,level:0},{x:3446,y:3128,level:0},{x:3360,y:3095,level:0},{x:3387,y:3123,level:0},{x:3373,y:3126,level:0},{x:3384,y:3081,level:0},{x:3405,y:3136,level:0},{x:3409,y:3119,level:0},{x:3432,y:3105,level:0},{x:3427,y:3141,level:0},{x:3444,y:3141,level:0},{x:3435,y:3129,level:0},{x:3456,y:3140,level:0}],range:27,scantext:"the desert, east of the Elid and north of Nardah"},{id:350,type:"scan",tier:"elite",text:["This scroll will work in Isafdar and Lletya. Orb scan range: 22 paces."],spots:[{x:2173,y:3125,level:0},{x:2283,y:3265,level:0},{x:2217,y:3130,level:0},{x:2253,y:3118,level:0},{x:2247,y:3143,level:0},{x:2271,y:3165,level:0},{x:2287,y:3141,level:0},{x:2310,y:3187,level:0},{x:2331,y:3171,level:0},{x:2322,y:3190,level:0},{x:2348,y:3183,level:0},{x:2225,y:3145,level:0},{x:2186,y:3146,level:0},{x:2205,y:3155,level:0},{x:2216,y:3159,level:0},{x:2182,y:3192,level:0},{x:2226,y:3158,level:0},{x:2176,y:3201,level:0},{x:2225,y:3212,level:0},{x:2219,y:3221,level:0},{x:2194,y:3220,level:0},{x:2194,y:3237,level:0},{x:2229,y:3248,level:0},{x:2203,y:3254,level:0},{x:2258,y:3212,level:0},{x:2289,y:3220,level:0},{x:2302,y:3230,level:0},{x:2282,y:3262,level:0},{x:2232,y:3223,level:0}],range:22,scantext:"Isafdar and Lletya"},{id:351,type:"scan",tier:"elite",text:["This scroll will work within the walls of Varrock and the Grand Exchange Orb scan range: 16 paces"],spots:[{x:3197,y:3383,level:0},{x:3211,y:3385,level:0},{x:3228,y:3383,level:0},{x:3240,y:3383,level:0},{x:3175,y:3404,level:0},{x:3175,y:3415,level:0},{x:3196,y:3415,level:0},{x:3197,y:3423,level:0},{x:3253,y:3393,level:0},{x:3228,y:3409,level:0},{x:3231,y:3439,level:0},{x:3220,y:3407,level:0},{x:3204,y:3409,level:0},{x:3273,y:3398,level:0},{x:3284,y:3378,level:0},{x:3185,y:3472,level:0},{x:3188,y:3488,level:0},{x:3180,y:3510,level:0},{x:3141,y:3488,level:0},{x:3213,y:3484,level:0},{x:3230,y:3494,level:0},{x:3241,y:3480,level:0},{x:3213,y:3462,level:0},{x:3248,y:3454,level:0}],range:16,scantext:"Varrock and the Grand Exchange"},{id:352,type:"scan",tier:"elite",text:["This scroll will work within the walls of East or West Ardougne. Orb scan range: 22 paces."],spots:[{x:2442,y:3310,level:0},{x:2440,y:3319,level:0},{x:2462,y:3282,level:0},{x:2483,y:3313,level:0},{x:2467,y:3319,level:0},{x:2496,y:3282,level:0},{x:2517,y:3281,level:0},{x:2512,y:3267,level:0},{x:2529,y:3270,level:0},{x:2537,y:3306,level:0},{x:2520,y:3318,level:0},{x:2500,y:3290,level:0},{x:2540,y:3331,level:0},{x:2509,y:3330,level:0},{x:2475,y:3331,level:0},{x:2583,y:3265,level:0},{x:2589,y:3319,level:0},{x:2582,y:3314,level:0},{x:2623,y:3311,level:0},{x:2570,y:3321,level:0},{x:2662,y:3304,level:0},{x:2625,y:3292,level:0},{x:2635,y:3313,level:0},{x:2662,y:3338,level:0},{x:2633,y:3339,level:0},{x:2613,y:3337,level:0},{x:2589,y:3330,level:0},{x:2569,y:3340,level:0}],range:22,scantext:"East or West Ardougne"},{id:353,type:"scan",tier:"elite",text:["This scroll will work within the dwarven city of Keldagrim. Orb scan range: 11 paces."],spots:[{x:2841,y:10189,level:0},{x:2856,y:10192,level:0},{x:2822,y:10193,level:0},{x:2873,y:10194,level:0},{x:2872,y:10181,level:0},{x:2846,y:10233,level:0},{x:2860,y:10215,level:0},{x:2837,y:10209,level:0},{x:2905,y:10162,level:0},{x:2924,y:10162,level:0},{x:2938,y:10162,level:0},{x:2936,y:10206,level:0},{x:2906,y:10202,level:0},{x:2937,y:10191,level:0},{x:2904,y:10193,level:0},{x:2924,y:10191,level:0},{x:2922,y:10179,level:0},{x:2938,y:10179,level:0}],range:11,scantext:"Keldagrim"},{id:354,type:"scan",tier:"elite",text:["This scroll will work in Menaphos. Orb scan range: 30 paces"],spots:[{x:3099,y:2677,level:0},{x:3127,y:2643,level:0},{x:3095,y:2730,level:0},{x:3096,y:2692,level:0},{x:3108,y:2742,level:0},{x:3131,y:2791,level:0},{x:3135,y:2775,level:0},{x:3146,y:2659,level:0},{x:3155,y:2641,level:0},{x:3180,y:2669,level:0},{x:3180,y:2700,level:0},{x:3199,y:2750,level:0},{x:3145,y:2759,level:0},{x:3153,y:2799,level:0},{x:3165,y:2814,level:0},{x:3193,y:2797,level:0},{x:3237,y:2664,level:0},{x:3200,y:2709,level:0},{x:3210,y:2770,level:0},{x:3231,y:2770,level:0},{x:3238,y:2792,level:0}],range:30,scantext:"Menaphos"},{id:355,type:"scan",tier:"elite",text:["This scroll will work in the Piscatoris Hunter Area. Orb scan range: 14 paces."],spots:[{x:2310,y:3518,level:0},{x:2336,y:3540,level:0},{x:2364,y:3547,level:0},{x:2353,y:3543,level:0},{x:2324,y:3553,level:0},{x:2361,y:3567,level:0},{x:2308,y:3560,level:0},{x:2313,y:3576,level:0},{x:2331,y:3574,level:0},{x:2342,y:3575,level:0},{x:2358,y:3557,level:0},{x:2363,y:3527,level:0},{x:2358,y:3580,level:0},{x:2388,y:3586,level:0},{x:2398,y:3582,level:0},{x:2392,y:3591,level:0},{x:2373,y:3612,level:0},{x:2372,y:3626,level:0},{x:2318,y:3601,level:0},{x:2339,y:3589,level:0},{x:2362,y:3612,level:0},{x:2347,y:3609,level:0},{x:2332,y:3632,level:0},{x:2320,y:3625,level:0},{x:2344,y:3645,level:0},{x:2310,y:3587,level:0}],range:14,scantext:"Piscatoris Hunter Area"},{id:356,type:"scan",tier:"elite",text:["This scroll will work in Brimhaven Dungeon. Orb scan range: 14 paces."],spots:[{x:2703,y:9439,level:0},{x:2738,y:9456,level:0},{x:2737,y:9433,level:0},{x:2722,y:9444,level:0},{x:2729,y:9427,level:0},{x:2695,y:9457,level:0},{x:2739,y:9506,level:0},{x:2745,y:9488,level:0},{x:2707,y:9486,level:0},{x:2699,y:9481,level:0},{x:2730,y:9513,level:0},{x:2717,y:9517,level:0},{x:2712,y:9524,level:0},{x:2701,y:9516,level:0},{x:2713,y:9503,level:0},{x:2679,y:9479,level:0},{x:2650,y:9488,level:0},{x:2649,y:9499,level:0},{x:2665,y:9504,level:0},{x:2681,y:9505,level:0},{x:2647,y:9511,level:0},{x:2664,y:9522,level:0},{x:2672,y:9514,level:0},{x:2652,y:9528,level:0},{x:2640,y:9533,level:0},{x:2641,y:9541,level:0},{x:2680,y:9542,level:0},{x:2669,y:9573,level:0},{x:2675,y:9582,level:0},{x:2660,y:9589,level:0},{x:2642,y:9575,level:0},{x:2638,y:9594,level:2},{x:2630,y:9581,level:2},{x:2638,y:9566,level:2},{x:2634,y:9551,level:2},{x:2627,y:9530,level:2},{x:2631,y:9516,level:2},{x:2639,y:9504,level:2},{x:2628,y:9489,level:2},{x:2655,y:9475,level:2},{x:2703,y:9564,level:0},{x:2697,y:9563,level:0}],range:14,scantext:"Brimhaven Dungeon"},{id:357,type:"scan",tier:"elite",text:["This scroll will work in Taverley Dungeon. Orb scan range: 22 paces."],spots:[{x:2858,y:9788,level:0},{x:2870,y:9791,level:0},{x:2875,y:9805,level:0},{x:2832,y:9813,level:0},{x:2835,y:9819,level:0},{x:2822,y:9826,level:0},{x:2892,y:9783,level:0},{x:2895,y:9769,level:0},{x:2914,y:9757,level:0},{x:2936,y:9764,level:0},{x:2905,y:9734,level:0},{x:2907,y:9718,level:0},{x:2907,y:9705,level:0},{x:2926,y:9692,level:0},{x:2968,y:9786,level:0},{x:2952,y:9786,level:0},{x:2949,y:9773,level:0},{x:2938,y:9812,level:0},{x:2904,y:9809,level:0},{x:2884,y:9799,level:0},{x:2895,y:9831,level:0},{x:2933,y:9848,level:0},{x:2907,y:9842,level:0},{x:2888,y:9846,level:0},{x:2945,y:9796,level:0}],range:22,scantext:"Taverley Dungeon"},{id:358,type:"scan",tier:"elite",text:["This scroll will work on the faraway island of Mos Le'Harmless. Orb scan range: 27 paces."],spots:[{x:3702,y:2972,level:0},{x:3657,y:2955,level:0},{x:3699,y:2996,level:0},{x:3651,y:2991,level:0},{x:3692,y:2976,level:0},{x:3676,y:2981,level:0},{x:3773,y:2960,level:0},{x:3728,y:2973,level:0},{x:3730,y:2996,level:0},{x:3765,y:2995,level:0},{x:3717,y:2969,level:0},{x:3758,y:2956,level:0},{x:3752,y:3006,level:0},{x:3669,y:3055,level:0},{x:3695,y:3063,level:0},{x:3697,y:3052,level:0},{x:3687,y:3046,level:0},{x:3679,y:3018,level:0},{x:3702,y:3027,level:0},{x:3757,y:3063,level:0},{x:3742,y:3063,level:0},{x:3736,y:3041,level:0},{x:3726,y:3038,level:0},{x:3765,y:3030,level:0},{x:3769,y:3015,level:0},{x:3740,y:3018,level:0},{x:3802,y:3035,level:0},{x:3791,y:3023,level:0},{x:3818,y:3027,level:0},{x:3831,y:3031,level:0},{x:3843,y:2987,level:0},{x:3850,y:3010,level:0}],range:27,scantext:"Mos Le'Harmless"},{id:359,type:"scan",tier:"elite",text:["This scroll will work within the Haunted Woods. Orb scan range: 11 paces."],spots:[{x:3534,y:3470,level:0},{x:3523,y:3460,level:0},{x:3551,y:3514,level:0},{x:3575,y:3511,level:0},{x:3562,y:3509,level:0},{x:3583,y:3484,level:0},{x:3583,y:3466,level:0},{x:3552,y:3483,level:0},{x:3573,y:3484,level:0},{x:3529,y:3501,level:0},{x:3544,y:3465,level:0},{x:3567,y:3475,level:0},{x:3609,y:3499,level:0},{x:3596,y:3501,level:0},{x:3637,y:3486,level:0},{x:3623,y:3476,level:0},{x:3604,y:3507,level:0},{x:3624,y:3508,level:0},{x:3616,y:3512,level:0},{x:3606,y:3465,level:0},{x:3590,y:3475,level:0}],range:11,scantext:"the Haunted Woods"},{id:360,type:"scan",tier:"elite",text:["This scroll will work in the Kharazi Jungle. Orb scan range: 14 paces."],spots:[{x:2775,y:2891,level:0},{x:2786,y:2914,level:0},{x:2804,y:2924,level:0},{x:2762,y:2918,level:0},{x:2775,y:2936,level:0},{x:2766,y:2932,level:0},{x:2815,y:2887,level:0},{x:2859,y:2891,level:0},{x:2848,y:2907,level:0},{x:2827,y:2934,level:0},{x:2832,y:2935,level:0},{x:2852,y:2934,level:0},{x:2857,y:2919,level:0},{x:2841,y:2915,level:0},{x:2872,y:2901,level:0},{x:2920,y:2888,level:0},{x:2892,y:2907,level:0},{x:2931,y:2920,level:0},{x:2921,y:2937,level:0},{x:2892,y:2937,level:0},{x:2929,y:2894,level:0},{x:2927,y:2925,level:0},{x:2936,y:2917,level:0},{x:2944,y:2902,level:0},{x:2932,y:2935,level:0},{x:2942,y:2934,level:0}],range:14,scantext:"the Kharazi Jungle"},{id:361,type:"scan",tier:"elite",text:["This scroll will work in the city of Zanaris. Orb scan range: 16 paces."],spots:[{x:2414,y:4378,level:0},{x:2423,y:4372,level:0},{x:2420,y:4381,level:0},{x:2389,y:4405,level:0},{x:2377,y:4410,level:0},{x:2404,y:4406,level:0},{x:2372,y:4467,level:0},{x:2402,y:4466,level:0},{x:2396,y:4457,level:0},{x:2410,y:4460,level:0},{x:2400,y:4441,level:0},{x:2380,y:4421,level:0},{x:2406,y:4428,level:0},{x:2429,y:4431,level:0},{x:2417,y:4444,level:0},{x:2417,y:4470,level:0},{x:2385,y:4447,level:0},{x:2439,y:4460,level:0},{x:2441,y:4428,level:0},{x:2468,y:4439,level:0},{x:2457,y:4443,level:0},{x:2453,y:4471,level:0}],range:16,scantext:"Zanaris"},{id:362,type:"scan",tier:"elite",text:["This scroll will work in the dark and damp caves below Lumbridge Swamp. Orb scan range: 11 paces."],spots:[{x:3172,y:9570,level:0},{x:3167,y:9546,level:0},{x:3179,y:9559,level:0},{x:3191,y:9555,level:0},{x:3170,y:9557,level:0},{x:3210,y:9557,level:0},{x:3233,y:9547,level:0},{x:3246,y:9566,level:0},{x:3252,y:9577,level:0},{x:3227,y:9575,level:0},{x:3209,y:9587,level:0},{x:3210,y:9571,level:0}],range:11,scantext:"The caves beneath Lumbridge Swamp"},{id:363,type:"scan",tier:"elite",text:["This scroll will work on the Fremennik Isles of Jatizso and Neitiznot. Orb scan range: 16 paces."],spots:[{x:2354,y:3790,level:0},{x:2360,y:3799,level:0},{x:2324,y:3808,level:0},{x:2322,y:3787,level:0},{x:2311,y:3801,level:0},{x:2340,y:3803,level:0},{x:2342,y:3809,level:0},{x:2330,y:3829,level:0},{x:2311,y:3835,level:0},{x:2376,y:3800,level:0},{x:2381,y:3789,level:0},{x:2402,y:3789,level:0},{x:2421,y:3792,level:0},{x:2397,y:3801,level:0},{x:2419,y:3833,level:0},{x:2395,y:3812,level:0},{x:2373,y:3834,level:0},{x:2314,y:3851,level:0},{x:2326,y:3866,level:0},{x:2326,y:3850,level:0},{x:2354,y:3853,level:0},{x:2349,y:3880,level:0},{x:2312,y:3894,level:0},{x:2352,y:3892,level:0},{x:2414,y:3848,level:0},{x:2418,y:3870,level:0},{x:2377,y:3850,level:0},{x:2400,y:3870,level:0},{x:2368,y:3870,level:0},{x:2417,y:3893,level:0},{x:2399,y:3888,level:0},{x:2389,y:3899,level:0}],range:16,scantext:"Fremennik Isles of Jatizso and Neitiznot"},{id:364,type:"scan",tier:"elite",text:["This scroll will work within the walls of Falador. Orb scan range: 22 paces."],spots:[{x:2938,y:3322,level:0},{x:2976,y:3316,level:0},{x:2947,y:3316,level:0},{x:3005,y:3326,level:0},{x:2958,y:3379,level:0},{x:2972,y:3342,level:0},{x:2945,y:3339,level:0},{x:2948,y:3390,level:0},{x:2942,y:3388,level:0},{x:2939,y:3355,level:0},{x:3039,y:3331,level:0},{x:3050,y:3348,level:0},{x:3015,y:3339,level:0},{x:3027,y:3365,level:0},{x:3025,y:3379,level:0},{x:3059,y:3384,level:0},{x:3031,y:3379,level:0},{x:3011,y:3382,level:0}],range:22,scantext:"Falador"},{id:365,type:"scan",tier:"elite",text:["This scroll will work in the cave goblin city of Dorgesh-Kaan. Orb scan range: 16 paces."],spots:[{x:2747,y:5263,level:0},{x:2731,y:5266,level:0},{x:2740,y:5273,level:0},{x:2723,y:5279,level:0},{x:2711,y:5271,level:0},{x:2729,y:5295,level:0},{x:2711,y:5284,level:0},{x:2730,y:5315,level:0},{x:2717,y:5311,level:0},{x:2739,y:5253,level:1},{x:2738,y:5301,level:1},{x:2700,y:5284,level:1},{x:2704,y:5321,level:0},{x:2732,y:5327,level:0},{x:2704,y:5349,level:0},{x:2701,y:5343,level:1},{x:2704,y:5357,level:1},{x:2734,y:5370,level:1},{x:2747,y:5327,level:1},{x:2698,y:5316,level:1}],range:16,scantext:"Dorgesh-Kaan"},{id:366,type:"scan",tier:"elite",text:["This scroll will work in the Fremennik Slayer Dungeons. Orb scan range: 16 paces."],spots:[{x:2720,y:9969,level:0},{x:2741,y:9977,level:0},{x:2701,y:9978,level:0},{x:2724,y:9977,level:0},{x:2714,y:9990,level:0},{x:2731,y:9998,level:0},{x:2718,y:1e4,level:0},{x:2722,y:10025,level:0},{x:2705,y:10027,level:0},{x:2745,y:10024,level:0},{x:2743,y:9986,level:0},{x:2751,y:9995,level:0},{x:2754,y:10009,level:0},{x:2804,y:10004,level:0},{x:2808,y:10018,level:0},{x:2789,y:10042,level:0},{x:2772,y:10030,level:0},{x:2757,y:10029,level:0},{x:2767,y:10002,level:0}],range:16,scantext:"Fremennik Slayer Dungeons"},{id:367,type:"scan",tier:"elite",text:["This scroll will work in the crater of the Wilderness volcano. Orb scan range: 11 paces."],spots:[{x:3112,y:3678,level:0},{x:3124,y:3698,level:0},{x:3130,y:3672,level:0},{x:3120,y:3665,level:0},{x:3104,y:3704,level:0},{x:3087,y:3712,level:0},{x:3133,y:3717,level:0},{x:3118,y:3724,level:0},{x:3110,y:3735,level:0},{x:3096,y:3738,level:0},{x:3134,y:3741,level:0},{x:3169,y:3745,level:0},{x:3180,y:3713,level:0},{x:3163,y:3724,level:0},{x:3146,y:3738,level:0},{x:3174,y:3705,level:0},{x:3152,y:3698,level:0},{x:3145,y:3681,level:0},{x:3146,y:3698,level:0}],range:11,scantext:"The crater of the Wilderness volcano"},{id:368,type:"scan",tier:"master",text:["This scroll will work in the elven city of Prifddinas. Orb scan range: 30 paces."],spots:[{x:2175,y:3291,level:1},{x:2133,y:3379,level:1},{x:2145,y:3381,level:1},{x:2148,y:3351,level:1},{x:2174,y:3398,level:1},{x:2180,y:3322,level:1},{x:2199,y:3268,level:1},{x:2212,y:3272,level:1},{x:2227,y:3295,level:1},{x:2224,y:3328,level:1},{x:2197,y:3433,level:1},{x:2222,y:3429,level:1},{x:2228,y:3424,level:1},{x:2247,y:3267,level:1},{x:2234,y:3265,level:1},{x:2275,y:3382,level:1},{x:2292,y:3361,level:1},{x:2268,y:3397,level:1}],range:30,scantext:"Prifddinas"},{id:369,type:"scan",tier:"master",text:["This scroll will work in the vampyre city of Darkmeyer. Orb scan range: 16 paces."],spots:[{x:3599,y:3328,level:0},{x:3590,y:3344,level:0},{x:3588,y:3361,level:0},{x:3596,y:3375,level:0},{x:3631,y:3358,level:0},{x:3611,y:3328,level:0},{x:3606,y:3391,level:0},{x:3639,y:3390,level:0},{x:3651,y:3405,level:0},{x:3670,y:3373,level:0},{x:3632,y:3344,level:0},{x:3654,y:3335,level:0},{x:3666,y:3344,level:0},{x:3654,y:3357,level:0},{x:3671,y:3366,level:0},{x:3661,y:3374,level:0},{x:3676,y:3392,level:0}],range:16,scantext:"Darkmeyer"},{id:370,type:"scan",tier:"master",text:["This scroll will work on The Islands That Once Were Turtles. Orb scan range: 27 paces."],spots:[{x:2103,y:11425,level:0},{x:2092,y:11427,level:0},{x:2100,y:11432,level:0},{x:2101,y:11440,level:0},{x:2099,y:11448,level:0},{x:2286,y:11452,level:0},{x:2285,y:11440,level:0},{x:2266,y:11455,level:0},{x:2221,y:11497,level:0},{x:2198,y:11481,level:0},{x:2183,y:11500,level:0},{x:2194,y:11500,level:0},{x:2200,y:11501,level:0},{x:2251,y:11428,level:0},{x:2267,y:11441,level:0},{x:2275,y:11453,level:0},{x:2283,y:11499,level:0},{x:2272,y:11428,level:0},{x:2286,y:11473,level:0}],range:27,scantext:"Islands That Once Were Turtles"},{id:371,type:"scan",tier:"master",text:["This scroll will work in the the Heart of Gielinor. Orb scan range: 49 paces."],spots:[{x:3119,y:6905,level:1},{x:3124,y:6905,level:1},{x:3148,y:6913,level:1},{x:3131,y:6921,level:1},{x:3131,y:6932,level:1},{x:3156,y:6925,level:1},{x:3166,y:6910,level:1},{x:3165,y:6932,level:1},{x:3236,y:6924,level:1},{x:3257,y:6927,level:1},{x:3258,y:6913,level:1},{x:3248,y:6903,level:1},{x:3227,y:6982,level:1},{x:3217,y:7004,level:1},{x:3219,y:7023,level:1},{x:3180,y:6985,level:1},{x:3129,y:6998,level:1},{x:3141,y:7018,level:1},{x:3183,y:7015,level:1},{x:3194,y:7029,level:1},{x:3210,y:7028,level:1},{x:3229,y:6980,level:1},{x:3241,y:7039,level:1},{x:3147,y:7046,level:1},{x:3156,y:7040,level:1},{x:3274,y:7045,level:1}],range:49,scantext:"Heart of Gielinor"}],e.skilling=[{type:"skilling",text:["Pick some coconuts that are oh so close to the stage."],tier:"sandy",id:479,areas:[{origin:{x:3185,y:3239,level:0},size:{x:3,y:2}}],answer:"Attempt to pick coconuts from the palm tree south of the main stage at the Lumbridge Crater, or read the palm if it's depleted.",cursor:"generic"},{type:"skilling",text:["Investigate a large hole that leads... Well, we don't know where it leads."],tier:"sandy",id:480,areas:[{origin:{x:3167,y:3242,level:0},size:{x:5,y:6},data:"////CQ=="}],answer:"Attempt to dungeoneer in the Dungeoneering hole at the Lumbridge Crater.",cursor:"generic"},{type:"skilling",text:["Investigate a magical portal that will take you to random encounters within a dangerous land."],tier:"sandy",id:482,areas:[{origin:{x:3150,y:3222,level:0},size:{x:3,y:3}}],answer:"Attempt to enter the Wilderness Flash Events portal at the Lumbridge Crater.",cursor:"generic"},{type:"skilling",text:["Something smells fishy behind a dwarf on holiday."],tier:"sandy",id:483,areas:[{origin:{x:3180,y:3251,level:0},size:{x:3,y:4}}],answer:"Click on the table behind Nigel at the Lumbridge Crater.",cursor:"generic"},{type:"skilling",text:["Somewhere a dwarf looks after a pile of coconuts. Search the pile!"],tier:"sandy",id:484,areas:[{origin:{x:3171,y:3214,level:0},size:{x:3,y:3},data:"ugA="}],answer:"Attempt to deposit coconuts on the pile of coconuts next to the coconut shy at the Lumbridge Crater.",cursor:"generic"},{type:"skilling",text:["Crossing the desert I met a crocodile. She gave me a dazzling smile but she had something in her teeth."],tier:"master",id:372,areas:[{origin:{x:3274,y:2677,level:0},size:{x:8,y:9}}],answer:"Catch a plover bird in the southern part of Sophanem.",cursor:"hunt"},{type:"skilling",text:["I once met a man returning from market. He showed me the spoils of his day. It's precious to see what people pay for."],tier:"master",id:373,areas:[{origin:{x:2666,y:3301,level:0},size:{x:4,y:5}}],answer:"Steal from the Ardougne Gem Stall.",cursor:"thieve"},{type:"skilling",text:["A view of the city from high above. I can hear their prayers below."],tier:"master",id:374,areas:[{origin:{x:2189,y:3441,level:2},size:{x:3,y:3}}],cursor:"agility",answer:"Go to the top of the Hefin Agility Course."},{type:"skilling",text:["Round and round we go, burning, burning all aglow."],tier:"master",id:375,areas:[{origin:{x:3017,y:9242,level:0},size:{x:4,y:4}}],cursor:"burn",answer:"Start a firepit with a Curly Root in the Jadinko Lair."},{type:"skilling",text:["When I encountered this individual, she had more rings than any I had seen before."],tier:"master",id:376,areas:[{origin:{x:2269,y:3386,level:1},size:{x:5,y:5}}],answer:"Cut some elder logs from an elder tree.",cursor:"chop"},{type:"skilling",text:["Rowdy Unruly Boisterous I am pie."],tier:"master",id:377,answer:"Cook a wild pie. The 'Bake Pie' spell works.",cursor:"cook",areas:[{origin:{x:2633,y:3164,level:0},size:{x:2,y:2}}]},{type:"skilling",text:["In a station of power someone requires assistance. Do a good deed to spread some happiness."],tier:"master",id:378,areas:[{origin:{x:2698,y:5186,level:2},size:{x:50,y:61}}],cursor:"agility",answer:"Help Turgall at the Dorgesh-Kaan Agility Course."},{type:"skilling",text:["Those things I once held dear continue to fade. I look upon her face and barely know who she is. But her eyes... They are still so radiant."],tier:"master",id:379,areas:[{origin:{x:3800,y:3547,level:0},size:{x:10,y:10}}],cursor:"divine",answer:"Harvest a radiant memory."},{type:"skilling",text:["There are those who prove themselves and become a beacon of light in the darkness. Come to the crystal city and become that figure."],tier:"master",cursor:"pray",id:380,areas:[{origin:{x:2199,y:3352,level:1},size:{x:19,y:19}}],answer:"Active the Light Form Prayer in Prifddinas"},{type:"skilling",text:["Stare into the flames for long enough and you may see something you didn't realise was there."],tier:"master",id:381,answer:"Light some magic logs.",cursor:"burn",areas:[{origin:{x:4310,y:823,level:0},size:{x:3,y:2},data:"Og=="}]},{type:"skilling",text:["The crystals tempt most however, there are other riches to gain for the quick-fingered."],tier:"master",id:382,answer:"Pickpocket any elf",cursor:"thieve",areas:[{origin:{x:2141,y:3333,level:1},size:{x:7,y:13}}]},{type:"skilling",text:["Magical energy floats unleashed. The fluid of life that flows through us all. Span the gap to capture this energy."],tier:"master",id:383,areas:[{origin:{x:4348,y:6059,level:0},size:{x:11,y:12}}],answer:"Siphon some blood runes in the Runespan.",cursor:"runecraft"},{type:"skilling",text:["The spell struck me in the chest. Perhaps if I had worn armour today. Black looks better than red."],tier:"master",id:384,answer:"Craft a black dragonhide body.",cursor:"craft",areas:[{origin:{x:2274,y:3311,level:1},size:{x:5,y:3}}]},{type:"skilling",text:["Ernie once mentioned to me a secret to improve my cooking. His idea was strong but I went the extra mile."],tier:"master",id:385,answer:"Add a fire rune to a decorated cooking urn (nr).",cursor:"craft",areas:[{origin:{x:2274,y:3311,level:1},size:{x:5,y:3}}]},{type:"skilling",text:["I have all the ingredients for soup but sometimes a simple meal tastes the best."],tier:"master",id:386,answer:"Cook a raw shark, raw rocktail or raw sailfish.",cursor:"cook",areas:[{origin:{x:4310,y:823,level:0},size:{x:3,y:3}}]},{type:"skilling",text:["Take the journey to a distant mining site. Become a blight to your foes."],tier:"master",id:387,answer:"Smelt a Bane bar at a furnace.",cursor:"smith",areas:[{origin:{x:3225,y:3255,level:0},size:{x:5,y:3}}]},{type:"skilling",text:["Where there is Light there is also Death. Should you contain this you may progress."],tier:"master",id:388,areas:[{origin:{x:2203,y:4834,level:0},size:{x:5,y:5}}],answer:"Craft a death rune.",cursor:"runecraft"},{type:"skilling",text:["There is a temple where there are rivers of red. Bind the magic to get ahead."],tier:"master",id:389,areas:[{origin:{x:2460,y:4893,level:1},size:{x:6,y:6}}],answer:"Craft a blood rune.",cursor:"runecraft"},{type:"skilling",text:["Corruption seeps from this stone but there are those who work to cleanse it. Lend your voice."],tier:"master",id:390,areas:[{origin:{x:2188,y:3446,level:1},size:{x:5,y:5}}],answer:"Completely use up a cleansing crystal on the Corrupted Seren Stone.",cursor:"pray"},{type:"skilling",text:["Charm me and I shall unlock. But be brave in the darkness."],tier:"master",id:391,areas:[{origin:{x:3365,y:3730,level:0},size:{x:21,y:21}}],answer:"Catch a charming moth in the Wilderness.",cursor:"hunt"},{type:"skilling",text:["I once met an ancient warrior who told me tales of his adventures. His eyes lit up as he spoke."],tier:"master",id:392,answer:"Burn some elder logs.",cursor:"herblore",areas:[{origin:{x:4310,y:823,level:0},size:{x:3,y:2},data:"Og=="}]},{type:"skilling",text:["Keeping all your gold together. That's a good idea. It shall be mine."],tier:"master",id:393,answer:"Mine a concentrated gold deposit in the Living Rock Caverns.",cursor:"mine",areas:[{origin:{x:3646,y:5141,level:0},size:{x:3,y:5}}]},{type:"skilling",text:["Rumours of a great shark continue to spread. Catch me one and I will be fed."],tier:"master",id:394,answer:"Catch a raw great white shark.",cursor:"fish",areas:[{origin:{x:2845,y:3424,level:0},size:{x:19,y:7},data:"wA8A/wD8z+H/j/9//v///x8="}]},{type:"skilling",text:["The God of Order requires a sacrifice of strength but in return restores me. If only we could keep that feeling in his absence."],tier:"master",id:395,answer:"Create a Saradomin brew.",cursor:"herblore",areas:[{origin:{x:2274,y:3311,level:1},size:{x:5,y:3}}]},{type:"skilling",text:["Head protection is never a bad thing. Make it from rune for the best chance of survival."],tier:"master",id:396,answer:"Smith a rune med helm or rune full helm.",cursor:"smith",areas:[{origin:{x:3228,y:3253,level:0},size:{x:2,y:3}}]},{type:"skilling",text:["Being open to Chaos can raise your defences. It may also bring you closer to death. Take a moment to bottle this feeling."],tier:"master",id:397,answer:"Create a Zamorak brew.",cursor:"herblore",areas:[{origin:{x:2274,y:3311,level:1},size:{x:5,y:3}}]},{type:"skilling",text:["Catching only one shark. That don't impress me much."],tier:"master",id:398,answer:"Catch two sharks at once.",cursor:"fish",areas:[{origin:{x:2845,y:3424,level:0},size:{x:19,y:7},data:"wA8A/wD8z+H/j/9//v///x8="}]}],e.all=[...e.simple,...e.cryptic,...e.map,...e.emote,...e.anagram,...e.scan,...e.compass,...e.skilling,...e.coordinates],e.index=Qc.simple(e.all),e.spot_index=eu.simple(e.index)}(Wc||(Wc={}));class tu{constructor(e){this.f=e,this._value=null,this._calculated=!1}get(){return this._calculated||(this._value=this.f(),this._calculated=!0),this._value}hasValue(){return this._calculated}}class iu{constructor(e){this.f=e,this._value_promise=null,this._calculated=!1}async get(){return this._value_promise||(this._value_promise=this.f(),await this._value_promise,this._calculated=!0),await this._value_promise}hasValue(){return this._calculated}}function nu(e){return new tu(e)}function ou(e){return new iu(e)}!function(e){var t=B.cleanedJSON;e.toString=function(e){const i=e.category?`[${e.category}] `:"";return"string"==typeof e.body?i+e.body:i+t(e.body)},e.equals=function(e,t){return e.body==t.body&&e.category==t.category&&!e.attachment&&!t.attachment}}(Zc||(Zc={}));class ru{constructor(e=void 0){this.clone_to=e}_log(e){var t;null===(t=this.clone_to)||void 0===t||t._log(e)}log(e,t=void 0,i=void 0){const n=i instanceof ImageData?{type:"image",value:"data:image/png;base64,"+i.toPngBase64()}:null!=i?{type:"object",value:i}:void 0;return this._log({body:e,category:null!=t?t:"",attachment:n}),this}}!function(e){var t=B.index;e.Void=class extends e{_log(e){super._log(e)}};class i extends e{_log(e){super._log(e),console.log(Zc.toString(e))}}let n;e.Console=i,function(e){var i=B.formatTime;e.toString=function(e){return e.map((e=>e.timestamps.length>1?`${i(e.timestamps[0])} - ${Zc.toString(e.message)} (${e.timestamps.length}x until ${i(t(e.timestamps,-1))})`:`${i(e.timestamps[0])} - ${Zc.toString(e.message)}`)).join("\n")}}(n||(n={}));class o extends e{constructor(){super(...arguments),this.entries=[]}_log(e){super._log(e),this.entries.length>0&&Zc.equals(e,t(this.entries,-1).message)?t(this.entries,-1).timestamps.push(Date.now()):this.entries.push({timestamps:[Date.now()],message:e})}last(){return t(this.entries,-1)}first(){return t(this.entries,0)}}e.SingleBuffered=o;class r extends e{constructor(){super(...arguments),this.buffers=[new o,new o]}_log(e){super._log(e),this.buffers[0]._log(e),this.buffers[0].entries.length>1e4&&(this.buffers[1]=this.buffers[0],this.buffers[0]=new o)}get(){return[...this.buffers[1].entries,...this.buffers[0].entries]}toString(){return n.toString(this.get())}}e.DoubleBuffered=r;const s=nu((()=>new r(new i)));e.log=function(){return s.get()}}(ru||(ru={}));var su,au,lu,cu=B.timestamp,uu=zc.ClueSpot,hu=B.uuid,du=ru.log;!function(e){e.setMeta=function(e,t){e.author=t.author,e.description=t.description,e.name=t.name,e.default_assumptions=o.cloneDeep(t.default_assumptions),e.default_method_name=t.default_method_name},e.meta=function(e){return{name:e.name,author:e.author,description:e.description,default_assumptions:o.cloneDeep(e.default_assumptions),default_method_name:e.default_method_name}}}(su||(su={})),function(e){e.isSame=function(e,t){return e==t||e&&t&&lu.equals(lu.fromMethod(e),lu.fromMethod(t))}}(au||(au={})),function(e){e.fromMethod=function(e){return{local_pack_id:e.pack.local_id,method_id:e.method.id}},e.equals=function(e,t){return e.local_pack_id==t.local_pack_id&&e.method_id==t.method_id}}(lu||(lu={}));class pu{constructor(){this.local_pack_store=Xc.instance().variable("data/local_methods"),this.local_packs=[],this.pack_set_changed=pi(),this.saved=pi(),this.method_index=eu.simple(Wc.index).with((()=>({methods:[]}))),this.initialized=(async()=>{var e;this.local_packs=null!==(e=await this.local_pack_store.get())&&void 0!==e?e:[],this.default_packs=[await(await fetch("data/method_packs/scans_zyklop.json")).json(),await(await fetch("data/method_packs/easy_ngis.json")).json(),await(await fetch("data/method_packs/medium_ngis.json")).json(),await(await fetch("data/method_packs/hard_ngis.json")).json(),await(await fetch("data/method_packs/master_ngis.json")).json(),await(await fetch("data/method_packs/elite_compass_ngis.json")).json(),await(await fetch("data/method_packs/tetras_ngis.json")).json()]})(),this.invalidateIndex(),this.pack_set_changed.on((()=>this.invalidateIndex()))}async save(){await this.local_pack_store.set(this.local_packs),this.invalidateIndex(),this.saved.trigger(null)}invalidateIndex(){this.index_created=new Promise((async e=>{this.method_index.forEach((e=>e.methods=[])),(await this.all()).forEach((e=>{e.methods.forEach((t=>{var i,n;null===(n=null===(i=this.method_index.get(t.for))||void 0===i?void 0:i.methods)||void 0===n||n.push({method:t,pack:e,clue:Wc.index.get(t.for.clue).clue})}))})),e()}))}async all(){return await this.initialized,[...this.default_packs,...this.local_packs]}async create(e){return(e=o.cloneDeep(e)).local_id=hu(),e.original_id=e.local_id,e.type="local",e.timestamp=cu(),this.local_packs.push(e),await this.save(),this.pack_set_changed.trigger(await this.all()),e}async import(e){return(e=o.cloneDeep(e)).local_id=hu(),e.type="imported",this.local_packs.push(e),this.invalidateIndex(),await this.save(),this.pack_set_changed.trigger(await this.all()),e}async getPack(e){return(await this.all()).find((t=>t.local_id==e))}async deletePack(e){if("default"==e.type)return void du().log("Attempting to delete default pack");let t=this.local_packs.findIndex((t=>t.local_id==e.local_id));t<0?du().log("Attempting to delete non-existing pack"):(this.local_packs.splice(t,1),await this.save(),this.pack_set_changed.trigger(await this.all()))}async updatePack(e,t,i=!1){if("local"==e.type||i&&"imported"==e.type)return t(e),e.timestamp=cu(),await this.save(),e}async updateMethod(e){let t=this.local_packs.find((t=>"local"==t.type&&t.local_id==e.pack.local_id)),i=t.methods.findIndex((t=>t.id==e.method.id));i>=0?t.methods[i]=e.method:t.methods.push(e.method),e.method.timestamp=t.timestamp=cu(),this.save()}deleteMethod(e){let t=this.local_packs.find((t=>"local"==t.type&&t.local_id==e.pack.local_id)),i=t.methods.findIndex((t=>t.id==e.method.id));t.methods.splice(i,1),t.timestamp=cu(),this.save()}static instance(){return pu._instance||(pu._instance=new pu),pu._instance}async getForClue(e,t=void 0){var i,n;await this.index_created;const o=null!==(n=null===(i=this.method_index.get(e))||void 0===i?void 0:i.methods)&&void 0!==n?n:[];return t?o.filter((e=>t.includes(e.pack.local_id))):o}async get(e,t=void 0){return await this.getForClue(uu.toId(e),t)}async getMethod(e,t){const i=await this.getPack(e);return i?i.methods.find((e=>e.id==t)):null}async resolve(e){const t=(await this.all()).find((t=>t.local_id==e.local_pack_id));if(!t)return null;const i=t.methods.find((t=>t.id==e.method_id));return i?{method:i,pack:t,clue:Wc.index.get(i.for.clue).clue}:null}}pu._instance=null;var gu=B.copyUpdate,mu=uc.notification;class fu extends pa{constructor(e){super(),this.setValue(e)}render(){this.empty();const e=(new $s).appendTo(this),t=this.get();e.named("Name",this.name=(new Zl).onCommit((e=>{this.commit(gu(this.get(),(t=>t.name=e)))})).setPlaceholder("Enter a pack name...").setValue(t.name)),e.named("Author(s)",this.authors=(new Zl).onCommit((e=>{this.commit(gu(this.get(),(t=>t.author=e)))})).setPlaceholder("Enter author(s)...").setValue(t.author)),e.header("Description"),e.row(this.description=(new Nl).setPlaceholder("Optionally enter a description.").onCommit((e=>{this.commit(gu(this.get(),(t=>t.description=e)))})).css("height","80px").setValue(t.description)),e.header("Default Assumptions"),e.row((new Yc).setValue(t.default_assumptions).onCommit((e=>{this.commit(gu(this.get(),(t=>t.default_assumptions=e)))}))),e.header("Default Method Name"),e.row((new Zl).onCommit((e=>{this.commit(gu(this.get(),(t=>t.default_method_name=e)))})).setPlaceholder("Enter default name...").setValue(t.default_method_name))}}class yu extends Il{constructor(e=null){super({size:"small"}),this.clone_from=e}render(){super.render(),this.clone_from?(this.title.set("Clone Method Pack"),this.edit=new fu({name:`${this.clone_from.name} (Clone)`,description:this.clone_from.description,author:this.clone_from.author,default_assumptions:this.clone_from.default_assumptions,default_method_name:this.clone_from.default_method_name}).appendTo(this.body)):(this.title.set("Create Method Pack"),this.edit=new fu({name:"",description:"",author:"",default_assumptions:{},default_method_name:""}).appendTo(this.body))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.hide())),new Dl("Save","confirm").onClick((async()=>{const e=await pu.instance().create(this.clone_from?{...o.cloneDeep(this.clone_from),...this.edit.get()}:{...this.edit.get(),type:"local",local_id:"",original_id:"",timestamp:0,methods:[]});mu(`Method Pack '${e.name}' created!`).show(),this.confirm({created:e})}))]}getValueForCancel(){return{created:null}}}class vu extends Il{constructor(e){super({size:"small"}),this.pack=e}render(){super.render(),this.title.set("Edit Method Pack"),this.edit=new fu(su.meta(this.pack)).appendTo(this.body)}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.hide())),new Dl("Save","confirm").onClick((async()=>{const e=await pu.instance().updatePack(this.pack,(e=>su.setMeta(e,this.edit.get())));mu(`Saved changes to method Pack '${e.name}'!`).show(),this.confirm({saved:!0})}))]}getValueForCancel(){return{saved:!1}}}var _u=Ic.ClueAssumptions;class xu extends Ls{constructor(e){super(),this.parent=e,this.assumptions=mi(_u.init())}begin(){this.layer.add(new gl(!0))}setAssumptions(e){return this.assumptions.set(e),this}}var wu,bu=Rs.movement_state,ku=Vr.activate,Tu=di.hbox,Su=di.hboxl,Cu=di.vbox,Eu=di.span,Au=Rs.collect_issues,zu=As.EntityTransportation.default_interactive_area;function Lu(e,t){switch(t){case"pre":return e.pre_path;case"post":return e.post_path;case"main":return e.main_path}}class Pu extends si{constructor(e,t){super(Tu().container),this.parent=e,this.section=t,this.path=null,this.addClass("ctr-scantreeedit-node"),t.path||this.addClass("no-hover");const i=Tu(c().css("background-color",t.path?"blue":"gray").css("width","3px")).css2({"padding-left":"4px","padding-right":"4px"});this.body=new $s,this.append(i,this.body.css("flex-grow","1").on("click",(e=>{e.stopPropagation(),e.preventDefault(),this.parent.requestActivation(this.isActive()?null:this)}))),this.on("contextmenu",(e=>this.contextMenu(e.originalEvent))),this.renderValue(null)}contextMenu(e){e.preventDefault(),e.stopPropagation();const t=[{type:"basic",text:this.isActive()?"Deactivate":"Activate",handler:()=>{this.parent.requestActivation(this.isActive()?null:this)}}];new wi({type:"submenu",text:"",children:t.filter((e=>!!e))}).showFromEvent2(e)}renderValue(e){if(this.path=e,this.body.empty(),this.body.header(Mu.SequenceSegment.header(this.section)),this.section.path&&e){e.raw.length>0&&this.body.row(c().append(...Is().app.template_resolver.resolve(this.path.raw.map(Ys.templateString).join(" - "))));const t=Au(e);t.length>0&&this.body.row(Cu(...t.map((e=>new xl(e))))),this.body.named("Timing",Su(Eu(`T${this.path.pre_state.tick}`).addClass("nisl-textlink"),Eu().setInnerHtml("&nbsp;to&nbsp;"),Eu(`T${this.path.post_state.tick}`).addClass("nisl-textlink")))}}setActive(e){this.toggleClass("active",e)}isActive(){return this==this.parent.active.value()}}class Mu extends xu{constructor(e,t){super(e),this.value=t,this.path_editor=this.withSub(new Ps),this.sequence=[],this.active=mi(null),this.preview_layer=null,this.layer=new os,this.assumptions.subscribe((e=>{this.updateSequence()})),this.active.subscribe((e=>{this.path_editor.isActive()&&(this.path_editor.get(),this.path_editor.set(null)),this.updatePreview(null==e?void 0:e.section),e&&this.setPathEditor({start_state:e.path.pre_state,initial:e.path.raw,target:e.path.target,commit_handler:t=>{switch(this.sequence.find((t=>t.edit==e)).path.section){case"pre":this.value.method.pre_path=t;break;case"post":this.value.method.post_path=t;break;case"main":this.value.method.main_path=t}this.parent.registerChange(),this.propagateState()},discard_handler:()=>{}}).onStop((()=>{this.active.value()==e&&this.requestActivation(null)}))}))}updatePreview(e){if(this.preview_layer&&(this.preview_layer.remove(),this.preview_layer=null),!e){const e=new os;this.sequence.filter((e=>e.path)).map((e=>e.path.section)).filter((e=>e)).map((t=>{da.renderPath(Lu(this.value.method,t)).addTo(e)})),this.preview_layer=e.addTo(this.layer)}}setPathEditor(e){let t=new Vc(this.layer,Is().app.template_resolver,e,!1);return this.path_editor.set(t),t}async begin(){super.begin(),this.sidepanel_widget=c().appendTo(this.parent.sidebar.body),this.layer.addTo(Is().app.map),await this.updateSequence(),this.requestActivation(this.sequence.find((e=>e.path)).edit)}async updateSequence(){const e=this.value,t=this.value.clue;this.sequence=await Mu.getSequence({clue:t,spot:e.method.for.spot},this.assumptions.value()),await this.render()}async render(){this.sidepanel_widget.empty();const e=(new $s).appendTo(this.sidepanel_widget);this.value,this.assumptions.value(),this.sequence.forEach((t=>{e.row(t.edit=new Pu(this,t))})),await this.propagateState()}end(){this.layer.remove()}async propagateState(){const e=await this.sequence.reduce((async(e,t)=>{let i=o.cloneDeep(await e);if(t.path){const e=Lu(this.value.method,t.path.section),n=await Rs.augment(e,i,t.path.target);t.edit.renderValue(n),i=o.cloneDeep(n.post_state)}return t.ticks&&(i.tick+=t.ticks),i}),Promise.resolve(bu.start(this.assumptions.value())));this.value.method.expected_time=e.tick}requestActivation(e){e&&!e.section.path||(this.active.value()&&this.active.value().setActive(!1),this.active.set(e),this.active.value()&&this.active.value().setActive(!0))}}!function(e){let t;async function i(e,t){let i=[];const n=e.clue;if("emote"==n.type){const e=n.hidey_hole&&ku(n.area).query(Z.center(n.hidey_hole.location));t.full_globetrotter||(e?i.push({name:"Path to Hidey Hole in Target Area",path:{section:"main",target:ku(zu(n.hidey_hole.location))}}):n.hidey_hole&&i.push({name:"Path to Hidey Hole",path:{section:"pre",target:ku(zu(n.hidey_hole.location))}}),n.hidey_hole?i.push({name:"Take and Equip Items",ticks:1}):i.push({name:"Unequip Items",ticks:1+Math.floor(n.items.length/3)})),!t.full_globetrotter&&e||i.push({name:"Path to Emote Area",path:{section:"main",target:ku(n.area)}}),i.push({name:"Summon Uri",ticks:1}),n.double_agent&&i.push({name:"Kill double agent",ticks:"master"==n.tier?5:3}),!n.hidey_hole||e||t.full_globetrotter||(i.push({name:"Return to Hidey Hole",path:{section:"post",target:ku(zu(n.hidey_hole.location))}}),i.push({name:"Return Items",ticks:1}))}else zc.requiresKey(n)&&!t.way_of_the_footshaped_key&&(i.push({name:"Path to Key",path:{section:"pre",target:ku(n.solution.key.area)}}),i.push({name:`Get Key (${n.solution.key.instructions})`,ticks:2})),i.push({name:"To target",path:{section:"main",target:ku(zc.ClueSpot.targetArea({clue:n,spot:e.spot}))}});return i}!function(e){e.header=function(e){return null!=e.ticks?`${e.name} (+${e.ticks} ticks)`:e.name}}(t=e.SequenceSegment||(e.SequenceSegment={})),e.getSequence=i,e.getEndState=async function(e){const t=await i({clue:e.clue,spot:e.method.for.spot},e.method.assumptions);return await t.reduce((async(t,i)=>{let n=o.cloneDeep(await t);if(i.path){const t=Lu(e.method,i.path.section),r=await Rs.augment(t,n,i.path.target);n=o.cloneDeep(r.post_state)}return i.ticks&&(n.tick+=i.ticks),n}),Promise.resolve(bu.start(e.method.assumptions)))}}(Mu||(Mu={})),function(e){var t=Vc.normalizeFarDive,i=B.cleanedJSON;class n{async step(e){return e}async path(e){return await Promise.all(e.map((async e=>this.step(e))))}async method(e){switch(e.method.type){case"general_path":return{...e.method,pre_path:e.method.pre_path?await this.path(e.method.pre_path):void 0,main_path:e.method.main_path?await this.path(e.method.main_path):void 0,post_path:e.method.post_path?await this.path(e.method.post_path):void 0};case"scantree":const t=async e=>({...e,path:await this.path(e.path),children:await Promise.all(e.children.map((async e=>({key:e.key,value:await t(e.value)}))))});return{...e.method,tree:{...e.method.tree,root:await t(e.method.tree.root)}}}}async pack(e){return{...e,methods:await Promise.all(e.methods.map((t=>this.method({method:t,pack:e,clue:Wc.index.get(t.for.clue).clue}))))}}}function o(){return new class extends n{async step(e){return await t(e)}}}function r(){return new class extends n{async method(e){switch(e.method.type){case"general_path":return{...e.method,expected_time:(await Mu.getEndState(e)).tick};case"scantree":return{...e.method,expected_time:(await Mc.Augmentation.augment({augment_paths:!0,analyze_timing:!0,path_assumptions:e.method.assumptions},e.method.tree,e.clue)).state.timing_analysis.average+1}}}}}function s(...e){return new class extends n{async pack(t){return await e.reduce((async(e,t)=>await t.pack(await e)),Promise.resolve(t))}}}function a(e){const t=[];return e.update_far_dives&&t.push(o()),e.recalculate_timings&&t.push(r()),s(...t)}e.update_far_dives=o,e.update_timings=r,e.chain=s,e.forSettings=a,e.Modal=class extends Ml{constructor(e){super(),this.pack=e,this.settings={},this.mode="show",this.title.set("Normalize Method Pack")}render(){super.render();const e=(new $s).appendTo(this.body);e.header(new ma("Update Far Dives").onCommit((e=>this.settings.update_far_dives=e))),e.paragraph("Update all dives to correctly contain a flag that indicates whether it's a far dive or a precise dive."),e.header(new ma("Recalculate timings").onCommit((e=>this.settings.recalculate_timings=e))),e.paragraph("Recalculate expected timings for all methods.");const t=new ma.Group([{button:new ma("Show JSON"),value:"show"},{button:new ma("Save").setEnabled("default"!=this.pack.type),value:"save"},{button:new ma("Save Copy"),value:"savecopy"}]).setValue(this.mode).onChange((e=>this.mode=e));(new Ll).buttons(...t.checkboxes()).appendTo(this.body)}async execute(){const e=await a(this.settings).pack(this.pack);switch(this.mode){case"show":new mc(i(e)).show();break;case"save":pu.instance().updatePack(this.pack,(t=>t.methods=e.methods));break;case"savecopy":new yu(e).do()}this.remove()}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.remove())),new Dl("Confirm","confirm").onClick((()=>this.execute()))]}}}(wu||(wu={}));var Iu=Es.exp,Ou=B.cleanedJSON,Du=uc.notification,Ru=di.hboxl;class Bu extends si{constructor(e,t,i){super(),this.pack=e,this.addClass("ctr-pack-widget");let n=(new $s).addClass("ctr-pack-widget-body"),o=di.div().append(`${e.name} (${e.methods.length})`).addClass("ctr-pack-widget-header").tooltip(e.local_id);this.append(o,n),n.named("Assumptions",Ru(...Yc.icons(e.default_assumptions))),n.named("Author(s)",c().text(e.author)),n.row(c().css("font-style","italic").text(e.description)),i.buttons&&this.on("click contextmenu",(i=>{i.preventDefault();let n={type:"submenu",text:"",children:[]};if(n.children.push({type:"basic",text:"Clone",icon:"assets/icons/copy.png",handler:()=>new yu(e).do()}),"local"==e.type&&n.children.push({type:"basic",text:"Edit Metainformation",icon:"assets/icons/edit.png",handler:()=>{new vu(e).do()}}),"local"==e.type||"imported"==e.type){n.children.push({type:"basic",text:"Delete",icon:"assets/icons/delete.png",handler:async()=>{await new ac({body:"local"==e.type?`Are you sure you want to delete the local pack ${e.name}? There is no way to undo this action!`:"Are you sure you want to remove this imported pack? You will need to reimport it again.",options:[{kind:"neutral",text:"Cancel",value:!1},{kind:"cancel",text:"Delete",value:!0}]}).do()&&(await t.deletePack(e),Du(`Deleted pack '${this.pack.name}'`).show())}});const i=e.name.length>0?e.name:"Unnamed Pack";n.children.push({type:"basic",text:"Export",handler:()=>{mc.do(Iu({type:"method-pack",version:1},!0,!0)(e),"",`${i}.txt`)}}),n.children.push({type:"basic",text:"Export JSON",handler:()=>{mc.do(Ou(e),"",`${i}.json`)}})}n.children.push({type:"basic",text:"Normalize",handler:()=>{new wu.Modal(this.pack).show()}}),new wi(n).showFromEvent2(i.originalEvent)}))}}var Nu=di.btnrow,ju=di.h,Fu=Es.imp;class qu extends $c{constructor(e){super("Theorycrafter"),this.theorycrafter=e,this.css("width","300px"),this.methods=pu.instance(),this.methods.saved.on((async e=>this.render(await this.methods.all()))).bindTo(e.handler_pool),this.methods.all().then((e=>this.render(e)))}render(e){this.body.empty();let t=o.groupBy(e,(e=>e.type));ju(2,"Default Method-Packs").appendTo(this.body),t.default.forEach((e=>{new Bu(e,pu.instance(),{buttons:!0,collapsible:!0}).appendTo(this.body)})),ju(2,"Imported Method-Packs").appendTo(this.body);let i=t.imported||[];i.forEach((e=>{new Bu(e,pu.instance(),{buttons:!0,collapsible:!0}).appendTo(this.body)})),0==i.length&&c().text("No imported method packs.").appendTo(this.body),Nu(new yl("Import","rectangle").onClick((async()=>{const e=await new yc(Fu({expected_type:"method-pack",expected_version:1})).do();(null==e?void 0:e.imported)&&this.methods.import(e.imported)}))).appendTo(this.body);let n=t.local||[];ju(2,"Local Method-Packs").appendTo(this.body),n.forEach((e=>{new Bu(e,pu.instance(),{buttons:!0,collapsible:!0}).appendTo(this.body)})),0==n.length&&c().text("No local method packs.").appendTo(this.body),Nu(new yl("+ Create New","rectangle").onClick((()=>{(new yu).do()}))).appendTo(this.body)}}class Uu extends si{constructor(){super(),this.url=mi(""),this.addClass("nisl-icon"),this.img=c("<img>").appendTo(this),this.url.subscribe((e=>{this.img.setAttribute("src",e)}))}inline(){return this.img.addClass("text-icon"),this}setSource(e){return this.url.set(e),this}withClick(e){return this.addClass("ctr-clickable"),this.on("click",e),this}static dropdown(){return(new Uu).setSource("assets/nis/dropdown.png")}static arrow(e="down"){return new Vu(e)}static info(){return(new Uu).css("cursor","help").setSource("assets/icons/info_nis.png")}static delete(){return(new Uu).setSource("assets/icons/delete.png")}static from(e){return(new Uu).setSource(e)}}class Hu extends Uu{constructor(){super(),this.toggled=mi(!1),this.toggled.subscribe((e=>{this.setSource(e?"assets/nis/favourite_on.png":"assets/nis/favourite_off.png")}),!0)}set(e){return this.toggled.set(e),this}}class Vu extends Uu{constructor(e="down"){super(),this.direction=mi(e),this.direction.subscribe((e=>{this.setSource(`assets/nis/arrow_${e}.png`)}),!0)}setDirection(e){return this.direction.set(e),this}}var $u=Ic.Method,Wu=Ic.ClueAssumptions,Zu=B.copyUpdate;class Gu extends pa{constructor(e,t){super(),this.spot=e,t.assumptions=Wu.filterWithRelevance(t.assumptions,Wu.Relevance.forSpot(this.spot)),this.setValue(t)}render(){this.empty();const e=(new $s).appendTo(this),t=this.get();e.named("Name",this.name=(new Zl).onCommit((e=>{this.commit(Zu(this.get(),(t=>t.name=e)))})).setPlaceholder("Enter a method name...").setValue(t.name)),e.header("Description"),e.row(this.description=(new Nl).setPlaceholder("Optionally enter a description.").onCommit((e=>{this.commit(Zu(this.get(),(t=>t.description=e)))})).css("height","80px").setValue(t.description)),e.header("Clue Assumptions"),e.row((new Yc).setValue(t.assumptions).setRelevantAssumptions(Wu.Relevance.forSpot(this.spot)).onCommit((e=>{this.commit(Zu(this.get(),(t=>t.assumptions=e)))})))}}class Ku extends pa{constructor(){super()}async render(){this.empty();const e=this.get();this.selector=new Hl({type_class:{toHTML:e=>e?e.create_new?c().text("Create New"):c().text(e.pack.name):c().text("None")}},[]).setItems((async()=>[...(await pu.instance().all()).filter((e=>"local"==e.type)).map((e=>({pack:e}))),{pack:null,create_new:!0},null])).setValue(e?{pack:e}:null).onSelection((async e=>{if(null==e?void 0:e.create_new){this.selector.setValue(null);const e=await(new yu).do();(null==e?void 0:e.created)&&this.commit(e.created)}else this.commit(null==e?void 0:e.pack)})).appendTo(this)}}class Yu extends Il{constructor(e,t=null){super({size:"small"}),this.spot=e,this.clone_from=t}render(){var e,t,i;super.render(),(new $s).appendTo(this.body).named("Pack",this.pack_selector=(new Ku).setValue("local"==(null===(t=null===(e=this.clone_from)||void 0===e?void 0:e.pack)||void 0===t?void 0:t.type)?null===(i=this.clone_from)||void 0===i?void 0:i.pack:null).onCommit((e=>{if(e){const t=o.cloneDeep(this.edit.get());t.assumptions=Wu.filterWithRelevance(e.default_assumptions,Wu.Relevance.forSpot(this.spot)),t.name=e.default_method_name,this.edit.setValue(t)}}))),this.clone_from?(this.title.set("Clone Method"),this.edit=new Gu(this.spot,Zu($u.meta(this.clone_from.method),(e=>{e.name+=" (Clone)"}))).appendTo(this.body)):(this.title.set("Create New Method"),this.edit=new Gu(this.spot,{name:"",description:"",assumptions:{}}).appendTo(this.body))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.confirm(this.getValueForCancel()))),new Dl("Create","confirm").onClick((async()=>{const e=this.clone_from?Ic.clone(this.clone_from.method):Ic.init(this.spot);$u.setMeta(e,this.edit.get()),e.assumptions=Wu.filterWithRelevance(e.assumptions,Wu.Relevance.forSpot(this.spot)),this.confirm({created:{pack:this.pack_selector.get(),method:e,clue:this.spot.clue}})}))]}getValueForCancel(){return{created:null}}}class Ju extends Il{constructor(e,t){super({size:"small"}),this.spot=e,this.start_value=t}render(){super.render(),this.title.set("Edit Method Metainformation"),this.edit=new Gu(this.spot,this.start_value).appendTo(this.body)}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.confirm(this.getValueForCancel()))),new Dl("Save","confirm").onClick((async()=>{this.confirm({result:this.edit.get()})}))]}getValueForCancel(){return{result:null}}}var Xu=di.hbox,Qu=di.spacer,eh=di.span,th=zc.ClueSpot,ih=B.natural_join,nh=B.plural,oh=Vr.activate;class rh extends $s{constructor(e,t,i,n,o,r){super(),this.clue=e,this.methods=t,this.edit_handler=i,this.include_header=n,this.alternative_index=o,this.manage_methods_button=r,this.render_promise=null,this.render_promise=this.render()}async render(){var e;function t(e,t){try{e.named("Solution",(()=>{switch(t.type){case"dig":return c(`<span><img src='assets/icons/cursor_shovel.png' class="inline-img"> Dig at ${W.toString(t.spot)}</span>`);case"search":return c(`<span><img src='assets/icons/cursor_search.png' class="inline-img"> Search <span class="nisl-entity">${t.entity}</span> at ${W.toString(Z.bl(t.spot))}</span>`);case"talkto":return c(`<span><img src='assets/icons/cursor_talk.png' class="inline-img"> Talk to <span class="nisl-npc">${t.npc}</span> near ${W.toString(oh(t.spots[e.alternative_index||0].range).center())}</span>`)}})()),"search"==t.type&&t.key&&e.named("Key",c(`<span><span style="font-style: italic">${t.key.instructions}</span> (${t.key.answer})</span>`))}catch(e){}}switch(this.include_header&&this.row(rh.header(this.clue)),this.clue.clue.type){case"scan":this.named("Area",c().text(`${this.clue.clue.scantext}`)),this.named("Range",c().text(`${this.clue.clue.range}`)),this.named("Spots",c().text(`${this.clue.clue.spots.length}`));break;case"compass":t(this,{type:"dig",spot:this.clue.spot,description:null}),this.named("Total",c().text(`${this.clue.clue.spots.length}`));break;case"coordinates":this.named("Text",c().text(this.clue.clue.text[0]).css("font-style","italic")),this.named("Coordinates",c().text(s.toString(this.clue.clue.coordinates))),t(this,{type:"dig",spot:s.toCoords(this.clue.clue.coordinates),description:null});break;case"simple":case"cryptic":case"anagram":this.named("Text",c().text(this.clue.clue.text[0]).css("font-style","italic")),t(this,this.clue.clue.solution);break;case"map":this.row(c(`<div style="text-align: center"><img src="${this.clue.clue.image_url}" style="height: 180px; width: auto; max-width: 100%"></div>`)),this.named("Transcript",c().text(this.clue.clue.text[0])),t(this,this.clue.clue.solution);break;case"emote":this.named("Text",c().text(this.clue.clue.text[0]).css("font-style","italic")),this.named("Equip",c().text(ih(this.clue.clue.items,"and"))),this.clue.clue.emotes.length>1?this.named("Emotes",c().text(ih(this.clue.clue.emotes,"then"))):this.named("Emote",c().text(this.clue.clue.emotes[0])),this.named("Agent",c().text(this.clue.clue.double_agent?"Yes":"No"));break;case"skilling":this.named("Text",c().text(this.clue.clue.text[0])),this.named("Answer",c().text(this.clue.clue.answer))}(null===(e=this.clue.clue.challenge)||void 0===e?void 0:e.length)>0&&this.named("Challenge",c().append(...this.clue.clue.challenge.map(rh.render_challenge).map((e=>e))));const i=await pu.instance().get(this.clue);return this.named("Methods",c().text(`${nh(i.length,"method")} available`)),this.manage_methods_button&&this.row(Xu(new yl("Manage Methods","rectangle").onClick((async e=>{new wi(await rh.methodMenu(this.clue,this.edit_handler)).showFromEvent(e)}))).addClass("ctr-button-container")),this}rendered(){return this.render_promise}}!function(e){var t=uc.notification;e.header=function(e){return Xu(eh(`${Ac.meta(e.clue.tier).name} ${Ac.meta(e.clue.type).name} Step (Id ${e.clue.id})`).css("font-weight","bold"),Qu().css("min-width","20px"),c(`<img class="icon" src='${e.clue.tier?Ac.meta(e.clue.tier).icon_url:""}' title="${Ac.pretty(e.clue.tier)}" style="margin-right: 3px">`),c(`<img class="icon" src='${Yr.icons.types[e.clue.type]}' title="${Ac.pretty(e.clue.type)}">`))},e.methodMenu=async function(e,i){const n=await pu.instance().get(e),o=await Ms.instance().app.favourites.getMethod(th.toId(e));return{type:"submenu",text:"",children:[{type:"basic",text:"New Method",handler:async()=>{const t=await new Yu(e).do();(null==t?void 0:t.created)&&i(t.created)}},...n.map((n=>{const r=au.isSame(o,n),s={type:"submenu",text:n.method.name,icon:()=>(new Hu).set(r),children:[{type:"basic",text:r?"Unset Favourite":"Make Favourite",icon:()=>(new Hu).set(r),handler:()=>{Ms.instance().app.favourites.setMethod(th.toId(e),r?null:n)}}]};return"local"==n.pack.type&&s.children.push({type:"basic",text:"Edit",icon:"assets/icons/edit.png",handler:()=>i(n)}),s.children.push({type:"basic",icon:"assets/icons/copy.png",text:"Make Copy",handler:async()=>{const t=await new Yu(e,n).do();(null==t?void 0:t.created)&&i(t.created)}}),"local"==n.pack.type&&s.children.push({type:"basic",text:"Delete",icon:"assets/icons/delete.png",handler:async()=>{await new ac({body:"Are you sure you want to delete this method? There is no way to undo it!",options:[{kind:"neutral",text:"Cancel",value:!1},{kind:"cancel",text:"Delete",value:!0}]}).do()&&(pu.instance().deleteMethod(n),t("Deleted").show())}}),s}))]}},e.render_challenge=function(e){switch(e.type){case"wizard":return c("<div><img src='assets/icons/cursor_attack.png' class=\"inline-img\"> Wizard</div>");case"slider":return c("<div><img src='assets/icons/slider.png' class=\"inline-img\"> Puzzle box</div>");case"celticknot":return c("<div><img src='assets/icons/celticknot.png' class=\"inline-img\"> Celtic Knot</div>");case"lockbox":return c("<div><img src='assets/icons/lockbox.png' class=\"inline-img\"> Lockbox</div>");case"towers":return c("<div><img src='assets/icons/towers.png' class=\"inline-img\"> Towers Puzzle</div>");case"challengescroll":return c(`<div><img src='assets/icons/cursor_talk.png' class="inline-img"> <span style="font-style: italic">${e.question}</span> (Answer: ${ih(e.answers.map((e=>e.note?`${e.answer} (${e.note}`:e.answer)),"or")})</div>`)}}}(rh||(rh={}));class sh extends Ci{constructor(e,t,i,n){super(),this.clue=e,this.methods=t,this.edit_handler=i,this.talk_alternative_index=n,this.setInteractive(),this.setTooltip((async()=>{let e=this;return(await new rh(e.clue,e.methods,e.edit_handler,!0,e.talk_alternative_index).rendered()).row(c().text("Right click marker to manage methods.").css("font-style","italic"))}))}bounds(){return Z.from(sh.position(this.clue,this.talk_alternative_index))}async render_implementation(e){const t=[vs,_s,xs,ws],i=sh.position(this.clue,this.talk_alternative_index),n=e.highlight;return a.marker([i.y,i.x],{icon:a.icon({iconUrl:t[i.level],iconSize:n?[27,36]:[18,24],iconAnchor:n?[14,36]:[9,24],className:"marker-icon"})}).addTo(this).getElement()}async contextMenu(e){return await rh.methodMenu(this.clue,this.edit_handler)}}!function(e){var t=Vr.activate;e.position=function(e,i){var n,o;switch(e.clue.type){case"anagram":case"simple":case"cryptic":case"map":switch(null===(n=e.clue.solution)||void 0===n?void 0:n.type){case"talkto":let n=Math.min(i||0,e.clue.solution.spots.length);return t(e.clue.solution.spots[n].range).center();case"dig":return e.clue.solution.spot;case"search":return Z.center(e.clue.solution.spot)}return{x:0,y:0,level:0};case"compass":return e.spot;case"coordinates":return s.toCoords(e.clue.coordinates);case"emote":return t(e.clue.area).center();case"scan":return W.lift(F.center(F.from(...e.clue.spots)),Math.min(...e.clue.spots.map((e=>e.level))));case"skilling":let r=i||0;if(r>=0&&(null===(o=e.clue.areas)||void 0===o?void 0:o.length)>0)return r>=e.clue.areas.length&&(r=0),t(e.clue.areas[r]).center()}return{x:0,y:0,level:0}},e.forClue=function(t,i,n){var o;return("talkto"==(null===(o=t.clue.solution)||void 0===o?void 0:o.type)&&t.clue.solution.spots?t.clue.solution.spots.map(((e,t)=>({instance_index:t}))):"skilling"==t.clue.type?(t.clue.areas||[]).map(((e,t)=>({instance_index:t}))):[{}]).map((({instance_index:o})=>new e(t,i,n,o)))}}(sh||(sh={}));var ah,lh=Rl.sitog,ch=di.hbox,uh=di.spacer,hh=di.span,dh=di.vbox,ph=zc.ClueSpot;!function(e){var t=zc.ClueSpot;e.normalize=function(e){return e.types||(e.types={simple:!0,anagram:!0,compass:!0,coordinates:!0,cryptic:!0,emote:!0,map:!0,scan:!0,skilling:!0}),e.tiers||(e.tiers={easy:!0,elite:!0,hard:!0,master:!0,medium:!0,tetracompass:!0,sandy:!0}),e},e.apply=async function(e,i,n,o){if(!e.types[i.clue.type]||!e.tiers[i.clue.tier])return!1;if(n&&e.method_mode){let o=await n.getForClue(t.toId(i),e.method_pack?[e.method_pack]:void 0);switch(e.method_mode){case"none":if(o.length>0)return!1;break;case"at_least_one":if(o.length<=0)return!1}}if(e.search_term){if(!o)return!1;let t=Xl.single(e.search_term,o);if(!t||t.score<-500)return!1}return!0},e.filter_string=function(e){return"compass"===e.clue.type?null:e.clue.text[0]}}(ah||(ah={}));class gh extends si{constructor(e,t,i,n){super(),this.spot=e,this.methods=t,this.edit_handler=i,this.map=n,this.addClass("ctr-filtered-clue-result"),this.addTippy((()=>new rh(this.spot,this.methods,this.edit_handler,!0,void 0,!1).row(c().text("Right click marker to manage methods.").css("font-style","italic")))),this.append(ch(dh(this.summary=c().text(ph.shortString(e)).addClass("ctr-filtered-clue-result-summary").on("click",(()=>{this.map&&this.map.fitView(Z.from(sh.position(e)),{maxZoom:4})})).tooltip("Click to center on spot.")).css2({overflow:"hidden"}),uh(),c().setInnerHtml("&#x22EE;").addClass("ctr-path-edit-overview-step-options").addClass("ctr-clickable").on("click",(async e=>{new wi(await rh.methodMenu(this.spot,this.edit_handler)).showFromEvent(e)})))),this.on("contextmenu",(async e=>{e.preventDefault(),new wi(await rh.methodMenu(this.spot,this.edit_handler)).showFromEvent(e)}))}}class mh extends ds{constructor(t,i){super({type:"floating",position:"top-left"},new Fs("Clue Filter").css2({"max-width":"300px",width:"300px"})),this.methods=t,this.edit_handler=i,this.stored_filter=new e.Variable("preferences/cluefilters2",(()=>ah.normalize({}))),this.filter=mi({}),this.filtered_index_updated=pi(),this.index=Wc.spot_index.with((()=>({visible:!1,list_widget:null,prepared_search_string:null}))),this.index.forEach((e=>{let t=ah.filter_string(e.for);e.prepared_search_string=t?Xl.prepare(t):null})),this.filter.set(ah.normalize(this.stored_filter.get())),this.filter.subscribe((e=>{this.stored_filter.set(e)})),this.renderFilter(),this.filter.subscribe((async()=>{await this.refreshFilterIndex()}),!0)}async refreshFilterIndex(){await Promise.all(this.index.flat().map((async e=>{e.visible=await ah.apply(this.filter.value(),e.for,this.methods,e.prepared_search_string)}))),this.filtered_index_updated.trigger(void 0),this.renderResults()}async renderFilter(){this.content.body.css2({display:"flex","flex-direction":"column"});let e=(new $s).appendTo(this.content.body),t={tier:Ec.values.map((e=>({tier:e,btn:lh(Ac.meta(e).icon_url,(t=>this.filter.update((i=>i.tiers[e]=t)))).setState(this.filter.value().tiers[e]).tooltip(Ac.meta(e).name)}))),type:Ac.all.map((e=>({type:e,btn:lh(Ac.meta(e).icon_url,(t=>this.filter.update((i=>i.types[e]=t)))).setState(this.filter.value().types[e]).tooltip(Ac.meta(e).name)})))};if(e.named("Tier",ch(...t.tier.map((e=>e.btn)),uh()).addClass("ctr-filter-control-row")),e.named("Type",ch(...t.type.map((e=>e.btn)),uh()).addClass("ctr-filter-control-row")),this.methods){let t=new ma.Group([{value:"none",button:new ma("None")},{value:"at_least_one",button:new ma("At least one","radio")}],!0).setValue(this.filter.value().method_mode).onChange((e=>this.filter.update((t=>t.method_mode=e))));const[i,n]=t.checkboxes();let r=ch(i,uh(),n),s=new Hl({type_class:{toHTML:e=>hh(e?`${o.capitalize(e.type)}: ${e.name}`:"Any")}},[null].concat(await this.methods.all())).setItems((async()=>[null].concat(await this.methods.all()))).setValue(this.filter.value().method_pack?await this.methods.getPack(this.filter.value().method_pack):null).onSelection((e=>{this.filter.update((t=>t.method_pack=null==e?void 0:e.local_id))}),!0);e.named("Methods",r),e.named("In Pack",s)}e.named("Search",(new Zl).setPlaceholder("Search").setValue(this.filter.value().search_term||"").onChange((e=>{this.filter.update((t=>t.search_term=e.value))}))),this.count_line=c().appendTo(this.content.body),this.result_container=c().css2({"max-height":"60vh","overflow-y":"scroll"}).appendTo(this.content.body)}async renderResults(){this.index.flat().forEach((e=>{e.visible&&!e.list_widget?e.list_widget=new gh(e.for,this.methods,this.edit_handler,this.getMap()).appendTo(this.result_container):!e.visible&&e.list_widget&&(e.list_widget.remove(),e.list_widget=null)})),null==this||this.count_line.text(`${this.index.flat().filter((e=>e.visible)).length} matches`)}}var fh=di.span,yh=B.copyUpdate;class vh extends pa{constructor(){super()}setValue(e){return e||(e={type:"none"}),super.setValue(e)}async render(){this.empty();const e=this.get(),t=new ma.Group([{value:"none",button:new ma("None")},{value:"favourites",button:new ma("Preferred")},{value:"pack",button:new ma("Method Pack")}]).setValue(e.type).onChange((async e=>{this.method_dropdown.setEnabled("pack"==e);const t=(await pu.instance().all())[0];this.commit(yh(this.get(),(i=>{var n;i.type=e,"pack"==e&&(null!==(n=i.local_pack_id)&&void 0!==n||(i.local_pack_id=t.local_id))})))}));this.append(...t.checkboxes()),this.method_dropdown=new Hl({type_class:{toHTML:e=>fh(e?`${o.capitalize(e.type)}: ${e.name}`:"None")}},await pu.instance().all()).setValue(await pu.instance().getPack(e.local_pack_id)).setItems((async()=>await pu.instance().all())).setEnabled("pack"==e.type).onSelection((e=>{this.commit(yh(this.get(),(t=>{t.local_pack_id=e.local_id})))})).appendTo(this)}}var _h,xh=zc.ClueSpot,wh=Ic.Method;class bh extends os{constructor(t){super(),this.app=t,this.route_display_options=new e.Variable("preferences/overview_route_display",(()=>({type:"none"}))),this.update_promise=Promise.resolve(),this.filter_control=new mh(pu.instance(),(e=>t.editMethod(e))).addTo(this),new ds({type:"floating",position:"top-right"},new Fs("Show routes").setContent(this.route_control=(new vh).setValue(this.route_display_options.get()).onCommit((e=>{this.route_display_options.set(e),this.updateVisibleRoutes()}))).css("width","200px")).addTo(this),this.marker_index=Wc.spot_index.with((()=>({markers:[],route_display:null}))),this.filter_control.filtered_index_updated.on((()=>this.updateVisibleMarkersByFilter())),this.updateVisibleMarkersByFilter()}async updateVisibleMarkersByFilter(){await this.update_promise,this.update_promise=Promise.all(this.marker_index.flat().map((async e=>{let t=this.filter_control.index.get(xh.toId(e.for)).visible;!t&&e.markers.length>0&&(e.markers.forEach((e=>this.removeLayer(e))),e.markers=[]),t&&0==e.markers.length&&(e.markers=sh.forClue(e.for,pu.instance(),(e=>this.app.editMethod(e))),e.markers.forEach((e=>e.addTo(this))))}))),await this.updateVisibleRoutes()}async updateVisibleRoutes(){await this.update_promise;const e=this.route_control.get();this.update_promise=(async()=>{for(const t of this.marker_index.flat()){let i=null;if(t.markers.length>0)switch(e.type){case"favourites":i=await Is().app.favourites.getMethod(xh.toId(t.for));break;case"pack":if(!e.local_pack_id)break;const n=await pu.instance().get(t.for,[e.local_pack_id]);n.length>0&&(i=n[0])}t.route_display&&(t.route_display.remove(),t.route_display=null),i&&(t.route_display=da.renderPath(wh.allPaths(i.method)).addTo(this))}})(),await this.update_promise}}class kh{constructor(e,t=null){this.bounds=e,this.size={x:e.botright.x-e.topleft.x+1,y:e.topleft.y-e.botright.y+1},this.data=new Array(this.size.x*this.size.y),t&&(this.data=this.data.map((()=>t())))}xyToI(e){return(e.y-this.bounds.botright.y)*this.size.x+(e.x-this.bounds.topleft.x)}iToXY(e){return{x:e%this.size.x+this.bounds.topleft.x,y:Math.floor(e/this.size.x)+this.bounds.botright.y}}get(e){return this.data[this.xyToI(e)]}set(e,t){this.data[this.xyToI(e)]=t}}!function(e){e.compute=function(e,t,i){return t.map((t=>Lc.Pulse.hash(Lc.get_pulse(e,t,i))))},e.equals=function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0},e.information_gain=function(e){let t=e.length,i=[0,0,0,0,0,0,0,0];e.forEach((e=>i[e]++));let n=0;return i[0]>0&&(n+=i[0]*Math.log2(t/i[0])),i[1]>0&&(n+=i[1]*Math.log2(t/i[1])),i[2]>0&&(n+=i[2]*Math.log2(t)),i[3]>0&&(n+=i[3]*Math.log2(t/i[3])),i[4]>0&&(n+=i[4]*Math.log2(t/i[4])),i[5]>0&&(n+=i[5]*Math.log2(t)),n/=t,n}}(_h||(_h={}));class Th{constructor(e,t,i){this.id=e,this.profile=t,this.area=i,this.information_gain=_h.information_gain(t)}}class Sh{constructor(e){if(this.options=e,this.raster=null,this.equivalence_classes=null,0==this.options.candidates.length)return this.max_information=0,void(this.equivalence_classes=[]);let t=a.bounds(this.options.candidates.map((e=>a.point(e.x,e.y))));this.raster=new kh(this.options.complement?{topleft:{x:t.getTopLeft().x-(this.options.range+15),y:(t.getBottomLeft().y+(this.options.range+15)+1+6400)%12800},botright:{x:t.getTopRight().x+(this.options.range+15)+1,y:(t.getTopLeft().y-(this.options.range+15)+6400)%12800}}:{topleft:{x:t.getTopLeft().x-2*this.options.range,y:t.getBottomLeft().y+2*this.options.range+1},botright:{x:t.getTopRight().x+2*this.options.range,y:t.getTopLeft().y-2*this.options.range}}),this.equivalence_classes=[];let i=0;for(let e=0;e<this.raster.size.y;e++)for(let t=0;t<this.raster.size.x;t++){let n=e*this.raster.size.x+t,o={x:this.raster.bounds.topleft.x+t,y:this.raster.bounds.botright.y+e,level:this.options.floor},r=_h.compute(o,this.options.candidates,this.options.range);if(t>0){let e=this.raster.data[n-1];if(_h.equals(r,e.profile)){this.raster.data[n]=e,e.area.push(n);continue}}if(e>0){let e=this.raster.data[n-this.raster.size.x];if(_h.equals(r,e.profile)){this.raster.data[n]=e,e.area.push(n);continue}}this.raster.data[n]=new Th(i++,r,[n]),this.equivalence_classes.push(this.raster.data[n])}this.max_information=Math.max(...this.equivalence_classes.map((e=>e.information_gain)))}}var Ch=ui.observe_combined;class Eh extends Za{constructor(e){super(1,.2),this._spot=e,this.update()}spot(){return this._spot}setRegion(e){this._spot=e,this.update()}update(){var e;this.polygon&&(this.polygon.remove(),this.polygon=null,this.label.remove(),this.label=null),(null===(e=this._spot)||void 0===e?void 0:e.area)&&(this.polygon=is(this._spot.area),this.label=a.tooltip({interactive:!1,permanent:!0,className:"area-name",offset:[0,0],direction:"center",content:this._spot.name}),this.polygon.setStyle({color:Yr.colors.scan_area,fillColor:Yr.colors.scan_area,interactive:!1}).bindTooltip(this.label).addTo(this)),this.setActive(this.isActive())}}class Ah extends Ci{constructor(e,t,i,n,o){super(),this.spot=e,this.range=t,this.include_marker=i,this.is_complement=n,this.range_is_with_meerkats=o,this.setInteractive(),this.setTooltip((()=>{const e=new $s;return e.header("Manual Radius Marker"),this.is_complement?(e.named("Position",W.toString(this.spot)+" (In complement area)"),e.named("Radius",`${this.range+15} (${this.range} base + 15 due to being in complement area)`)):(e.named("Position",W.toString(this.spot)),this.range_is_with_meerkats?e.named("Radius",`${this.range} (${this.range-5} base + 5 from meerkats)`):e.named("Radius",this.range.toString())),e.row(c().text("Click to remove").css("font-style","italic")),e}))}bounds(){return F.centeredOn(this.spot,2*this.range)}async render_implementation(e){var t,i;return this.include_marker&&a.marker(j.toLatLong(this.spot),{icon:bs(this.spot.level,e.highlight?1.5:1),opacity:e.opacity,interactive:!0,bubblingMouseEvents:!0}).addTo(this),this.is_complement?ts({topleft:{x:this.spot.x-(this.range+15),y:this.spot.y+(this.range+15)},botright:{x:this.spot.x+(this.range+15),y:this.spot.y-(this.range+15)}}).setStyle({interactive:!1}).setStyle({color:"blue",fillOpacity:0}).addTo(this):(ts({topleft:{x:this.spot.x-this.range,y:this.spot.y+this.range},botright:{x:this.spot.x+this.range,y:this.spot.y-this.range}}).setStyle({interactive:!1}).setStyle({color:"#e51c02",fillOpacity:0,dashArray:[9,6,9,6,9,18]}).addTo(this),ts({topleft:{x:this.spot.x-2*this.range,y:this.spot.y+2*this.range},botright:{x:this.spot.x+2*this.range,y:this.spot.y-2*this.range}}).setStyle({interactive:!1}).setStyle({color:"#fff40b",fillOpacity:0,dashArray:[9,9,9,18]}).addTo(this)),null===(i=null===(t=this.marker)||void 0===t?void 0:t.marker)||void 0===i?void 0:i.getElement()}async contextMenu(e){return{type:"submenu",text:"",children:[]}}}class zh extends os{constructor(){super(),this.marker_spot=mi(null),this.scan_range=mi({radius:10,meerkat:!1}),this.surface_is_complement=mi(!1),this.fixedMarker=mi(null),this.manualMarker=mi(null),this.cursorMarker=mi(null),this.canBeManuallySet=mi(!1),this.followCursor=mi(!1),this.canBeManuallySet.subscribe((()=>{this.manualMarker.set(null)})),Ch({fixed:this.fixedMarker,manual:this.manualMarker,cursor:this.cursorMarker,manualEnabled:this.canBeManuallySet,followEnabled:this.followCursor}).subscribe((({fixed:e,manual:t,cursor:i,manualEnabled:n,followEnabled:o})=>{o&&i?this.marker_spot.set({coordinates:i,with_marker:!1}):n&&t?this.marker_spot.set({coordinates:t,with_marker:!0}):e?this.marker_spot.set({coordinates:e,with_marker:!1}):this.marker_spot.set(null)})),Ch({range:this.scan_range,spot:this.marker_spot}).subscribe((({range:e,spot:t})=>{if(this.custom_marker&&(this.custom_marker.remove(),this.custom_marker=null),t){let i=t.coordinates.y<6400==this.surface_is_complement.value();this.custom_marker=new Ah(t.coordinates,e.radius,t.with_marker,i,e.meerkat).addTo(this)}}))}setComplementByExampleSpot(e){return this.surface_is_complement.set(e.y>=6400),this}setFixedSpot(e){return this.fixedMarker.set(e),this}setFollowCursor(e){return this.followCursor.set(e),this}setClickable(e){return this.canBeManuallySet.set(e),this}setRadius(e,t){return this.scan_range.set({radius:e,meerkat:t}),this}clearManualMarker(){this.manualMarker.set(null)}eventClick(e){e.onPost((()=>{this.canBeManuallySet.value()&&(this.custom_marker&&e.active_entity==this.custom_marker||W.eq2(e.tile(),this.manualMarker.value())?this.clearManualMarker():this.manualMarker.set(e.tile()))}))}eventHover(e){e.onPost((()=>{this.followCursor.value()&&this.cursorMarker.set(e.tile())}))}eventContextMenu(e){e.onPre((()=>{e.active_entity instanceof Ah&&e.active_entity==this.custom_marker?e.addForEntity({type:"basic",text:"Remove",handler:()=>{this.manualMarker.set(null)}}):this.canBeManuallySet.value()&&!e.active_entity&&(W.eq2(this.manualMarker.value(),e.tile())?e.add({type:"basic",text:"Remove Marker",handler:()=>{this.manualMarker.set(null)}}):e.add({type:"basic",text:"Set Marker",handler:()=>{this.manualMarker.set(e.tile())}}))}))}}var Lh=di.hboxc,Ph=di.centered,Mh=di.span;class Ih extends si{constructor(e){super(),this.editor=e,this.normal=mi(!1),this.complement=mi(!1),Ph(c("<div style='font-weight: bold'>Center On</div>"),new Ll({align:"center",sizing:"100px",max_center_spacer_width:"20px"}).buttons(new yl("Spots","rectangle").onClick((()=>{let e=a.latLngBounds([]);this.editor.value.clue.spots.forEach((t=>e.extend(j.toLatLong(t)))),e.pad(.1),this.editor.app.map.fitBounds(e)})),new yl("Complement","rectangle").onClick((()=>{let e=a.latLngBounds([]);this.editor.value.clue.spots.forEach((t=>{e.extend(j.toLatLong({x:t.x,y:t.y<6400?t.y+6400:t.y-6400}))})),e.pad(.1),this.editor.app.map.fitBounds(e)}))).addClass("ctr-button-container"),c("<div style='font-weight: bold'>Show Equivalence Classes</div>"),Lh(new ma("Spots").onCommit((e=>{this.normal.set(e)})),new ma("Complement").onCommit((e=>{this.complement.set(e)}))),c("<div style='font-weight: bold'>Expected Average Time</div>"),this.expected_timing_display=c().css("text-align","center").css("font-family","monospace")).appendTo(this),this.editor.builder.augmented.subscribe((e=>{const t=Mh(e.state.timing_analysis.average.toFixed(2)+" ticks");e.state.timing_analysis.spots.some((e=>e.timings.some((e=>e.incomplete))))&&t.css("color","yellow").tooltip("Incomplete path"),this.expected_timing_display.empty().append(t)}))}}class Oh extends Us{constructor(e){super(e),this.config=e,this.dragstart=null,this.area=mi({area:null,committed:!1})}onAdd(e){return super.onAdd(e),e.dragging.disable(),this}onRemove(e){return super.onRemove(e),e.dragging.enable(),this}start(e){return this.dragstart=e,this}reset(){this.dragstart=null,this.area.set({area:null,committed:!1})}eventMouseDown(e){e.onPre((()=>{this.dragstart||(e.stopAllPropagation(),this.dragstart=e.tile(),this.preview(Z.fromTile(e.tile())))}))}eventMouseUp(e){e.onPre((()=>{this.dragstart&&(e.stopAllPropagation(),this.commit(Z.from(this.dragstart,e.tile())))}))}eventClick(e){e.onPre((()=>{e.stopAllPropagation(),this.dragstart?this.commit(Z.from(this.dragstart,e.tile())):this.commit(Z.fromTile(e.tile()))}))}eventHover(e){e.onPre((()=>{this.dragstart&&(e.stopAllPropagation(),this.preview(Z.from(this.dragstart,e.tile())))}))}}class Dh{constructor(){this.bounds=null,this.level=null}addTile(...e){for(let t of e)t&&(this.bounds?this.bounds=F.extendTo(this.bounds,t):this.bounds={topleft:t,botright:t},"level"in t&&(null==this.level?this.level=t.level:this.level=Math.min(this.level,t.level)))}addRectangle(e){e&&(this.addTile(e.topleft),this.addTile(e.botright),"level"in e&&(null==this.level?this.level=e.level:this.level=Math.min(this.level,e.level)))}addArea(e){e&&this.addRectangle(Vr.toRect(e))}get(){return this.bounds?{topleft:this.bounds.topleft,botright:this.bounds.botright,level:this.level||0}:null}}class Rh extends $s{constructor(e){super(),this.method=e,this.render()}render(){this.empty(),this.named("Pack",c().text(this.method.pack?this.method.pack.name:"None")),this.named("Name",c().text(this.method.method.name)),this.named("Assumptions",c().append(...Yc.icons(this.method.method.assumptions))),this.header("Description"),this.row(c().text(this.method.method.description?this.method.method.description:"None").css("font-style","italic"))}}var Bh,Nh=di.spacer,jh=di.span,Fh=di.hbox;class qh extends si{constructor(e,t){super(),this.parent=e,this.clue=t,this.dropdown=null,this.method=mi(e.active_method),this.method.subscribe((e=>this.render(e)),!0)}renderName(e){var t;const i=Fh().css2({overflow:"hidden","white-space":"nowrap"});return e.method.name&&e.method.name.length>0?i.append(di.span(e.method.name).css2({overflow:"hidden","text-overflow":"ellipsis"})):i.append(di.italic("Unnamed Method").css2({overflow:"hidden","text-overflow":"ellipsis"})),i.append(di.space(),jh(` (${null!==(t=e.method.expected_time.toFixed("scantree"==e.method.type?1:0))&&void 0!==t?t:"?"} ticks)`)),i}render(e){this.row=Fh(e?this.renderName(e):c("<span style='font-style: italic; color: gray'> No method selected</span>"),Nh(),Uu.dropdown().css("margin-right","3px").css("margin-left","3px")).addClass("ctr-clickable").setAttribute("tabindex","-1"),this.row.on("click",(()=>this.openMethodSelection())).appendTo(this)}async openMethodSelection(){this.dropdown||(this.dropdown=new Ul.DropDown({dropdownClass:"ctr-neosolving-favourite-dropdown",renderItem:e=>e?Fh((new Hu).set(e==this.parent.active_method),this.renderName(e),Nh()).addTippy(new Rh(e)):Fh((new Hu).set(e==this.parent.active_method),jh("None"),Nh())}).setItems((await pu.instance().getForClue(this.clue)).concat([null])).onSelected((e=>{this.parent.app.favourites.setMethod(this.clue,e),this.parent.setMethod(e)})).onClosed((()=>{this.dropdown=null})).open(this,this.row))}}!function(e){e.render_digspot=function(e){return c("<span>").addClass("ctr-digspot-inline").text(null==e?void 0:e.toString())},e.render_scanregion=function(e){return c("<span>").addClass("ctr-scanspot-inline").text(e)}}(Bh||(Bh={}));var Uh=Bh.render_digspot,Hh=Lc.Pulse.simplify_with_context,Vh=di.cls;class $h extends si{constructor(e,t){super();this.addClass("ctr-neosolving-pulseicon");let{type:i,text:n}=t?Hh(e,t):{type:e.pulse,text:e.different_level?"DL":null};null!=i&&c("<img>").setAttribute("src",["assets/icons/pulse_single.png","assets/icons/pulse_double.png","assets/icons/pulse_triple.png"][e.pulse-1]).appendTo(this),null!=n&&Vh("tele-icon-code-overlay").text(n).appendTo(this)}}class Wh extends yl{constructor(e){switch(super("",(e.type,"round")),this.addClass("ctr-neosolving-pulsebutton"),this.css("position","relative"),e.type){case"pulse":this.append(new $h(e.value,e.context));break;case"spot":this.empty().append(Uh(e.value))}}static forPulse(e,t){return new Wh({type:"pulse",value:e,context:t})}static forSpot(e){return new Wh({type:"spot",value:e})}}var Zh=ru.log;class Gh extends Ls{constructor(e,t){super(),this.parent=e,this.type=t,this._state=void 0}setRelatedState(e){this._state=e}endClue(e){var t;(null===(t=this.parent)||void 0===t?void 0:t.reset(this._state))&&Zh().log(`Ended clue from subbehaviour: ${e}`,"NeoSolving"),this.stop()}registerSolution(e){var t,i,n,o;this._state||console.error("Setting solution area with undefined state"),Zh().log(`Setting clue solution to ${null!==(i=null===(t=e.size)||void 0===t?void 0:t.x)&&void 0!==i?i:1}x${null!==(o=null===(n=e.size)||void 0===n?void 0:n.y)&&void 0!==o?o:1} at ${W.toString(e.origin)}`,"Solving"),this._state.solution_area=e}pausesClueReader(){return!1}}var Kh=Vr.activate,Yh=Mc.Augmentation.AugmentedScanTree,Jh=di.cls,Xh=B.Order,Qh=di.span,ed=Mc.spotNumber,td=B.index;class id extends Gh{constructor(e,t){super(e,"method"),this.method=t,this.node=null,this.augmented=null,this.layer=null,this.augmented=Mc.Augmentation.basic_augmentation(t.method.tree,t.clue)}fit(){var e;let t=this.node,i=new Dh;if(0==t.children.length&&t.remaining_candidates.forEach((e=>i.addTile(e))),t.raw.path.length>0){const e=td(Rs.Section.split_into_sections(t.raw.path).children,-1);ra("inner"==e.type);const n=e.children.map((e=>(ra("leaf"==e.type),e.value)));i.addRectangle(Rs.bounds(n,!0))}else(null===(e=t.region)||void 0===e?void 0:e.area)&&i.addArea(t.region.area);this.parent.layer.fit(i.get())}renderLayer(){let e=this.node;this.layer.clearLayers();let t=e.region?Kh(e.region.area).center():Rs.ends_up(e.raw.path);t?this.parent.layer.getMap().floor.set(t.level):this.parent.layer.getMap().floor.set(Math.min(...e.remaining_candidates.map((e=>e.level)))),t&&e.remaining_candidates.length>1&&!(e.region&&e.region.area&&F.width(Vr.toRect(e.region.area))>2*this.method.method.tree.assumed_range)?this.parent.layer.scan_layer.marker.setFixedSpot(t):this.parent.layer.scan_layer.marker.setFixedSpot(null),this.parent.layer.scan_layer.setActiveCandidates(e.remaining_candidates),new Eh(Mc.getTargetRegion(e)).setOpacity(1).addTo(this.layer),Yh.collect_parents(e,!1).forEach((e=>{new Eh(Mc.getTargetRegion(e)).setOpacity(.5).addTo(this.layer),da.renderPath(e.raw.path).eachEntity((e=>e.setOpacity(.5))).addTo(this.layer)})),e.children.filter((e=>3!=e.key.pulse)).forEach((e=>{da.renderPath(e.value.raw.path).eachEntity((e=>e.setOpacity(.5))).addTo(this.layer),new Eh(Mc.getTargetRegion(e.value)).setOpacity(.5).addTo(this.layer)}))}setNode(e){this.node=e,this.tree_widget.empty(),this.parent.path_control.reset().setPath(e.raw.path),this.fit(),this.renderLayer(),this.registerSolution(Vr.fromRect(Z.from(...e.remaining_candidates))),new qh(this.parent,this.method.method.for).addClass("ctr-neosolving-solution-row").appendTo(this.tree_widget);let t=Jh("ctr-neosolving-solution-row").appendTo(this.tree_widget);{let i=c(),n=c("<ol class='breadcrumb' style='margin-bottom: unset'></ol>").appendTo(i);Yh.collect_parents(e).map((e=>c("<span class='nisl-textlink'>").on("click",(()=>this.setNode(e))).text(Yh.decision_string(e)))).forEach((e=>e.appendTo(c("<li>").addClass("breadcrumb-item").appendTo(n))));let o=n.container.children().last();o.text(o.children().first().text()).addClass("active"),t.append(i)}t.append(Jh("ctr-neosolving-nextscanstep").append("Next: ",...this.parent.app.template_resolver.with(...id.scan_tree_template_resolvers(e)).resolve(Mc.getInstruction(e))));{let i=e.children.filter((e=>3==e.key.pulse));e.children.filter((e=>i.length<=1||3!=e.key.pulse)).sort(Xh.comap(Lc.Pulse.compare,(e=>e.key))).forEach((i=>{const n=this.parent.app.template_resolver.with(...id.scan_tree_template_resolvers(i.value));Jh("ctr-neosolving-scantreeline").append(Wh.forPulse(i.key,e.children.map((e=>e.key))).onClick((()=>{this.setNode(i.value)})),c().append(...n.resolve(Mc.getInstruction(i.value)))).appendTo(t)})),i.length>1&&Jh("ctr-neosolving-scantreeline").append(c().append(new $h({different_level:!1,pulse:3},null).css("margin","1px")),Qh("at"),...i.sort(Xh.comap(Xh.natural_order,(t=>ed(e.root.raw,t.value.remaining_candidates[0])))).map((t=>Wh.forSpot(ed(e.root.raw,t.value.remaining_candidates[0])).onClick((()=>this.setNode(t.value)))))).appendTo(t)}}begin(){this.parent.layer.scan_layer.setSpotOrder(this.method.method.tree.ordered_spots),this.parent.layer.scan_layer.marker.setRadius(this.method.method.tree.assumed_range,this.method.method.assumptions.meerkats_active),this.tree_widget=c().appendTo(this.parent.layer.scantree_container),this.layer=a.featureGroup().addTo(this.parent.layer.scan_layer),this.setNode(this.augmented.root_node)}end(){this.tree_widget.remove(),this.tree_widget=null,this.parent.layer.scan_layer.marker.setFixedSpot(null),this.parent.layer.scan_layer.marker.clearManualMarker(),this.parent.layer.scan_layer.setSpotOrder(null),this.layer&&(this.layer.remove(),this.layer=null)}}!function(e){var t=B.shorten_integer_list,i=Bh.render_digspot,n=Bh.render_scanregion;e.scan_tree_template_resolvers=function(e){return[{name:"target",apply:()=>{var t;return 1==e.remaining_candidates.length?[{type:"domelement",value:i(ed(e.root.raw,e.remaining_candidates[0]))}]:[{type:"domelement",value:n((null===(t=e.raw.region)||void 0===t?void 0:t.name)||"_")}]}},{name:"candidates",apply:()=>[{type:"domelement",value:c(B.natural_join(t(e.remaining_candidates.map((t=>ed(e.root.raw,t))),(e=>i(e).raw().outerHTML))))}]}]}}(id||(id={}));var nd=B.natural_join,od=B.shorten_integer_list,rd=Mc.Augmentation.AugmentedScanTree,sd=di.span,ad=di.spacer,ld=Lc.Pulse,cd=B.Order,ud=di.hbox,hd=di.vbox,dd=di.hboxl,pd=Rs.collect_issues,gd=id.scan_tree_template_resolvers,md=di.cls;class fd extends Us{constructor(e){super({preview_render:e=>new Eh(e)}),new Oh({}).addTo(this).onPreview((t=>{this.preview({area:Vr.fromRect(t),name:e})})).onCommit((t=>{this.commit({area:Vr.fromRect(t),name:e})})),this.attachTopControl(new qs({name:"Draw Scan Region"}).setText("Click and Drag the map to draw a scan region rectangle."))}}class yd extends si{constructor(e,t){super(),this.parent=e,this.node=t,this.children=[],this.decision_span=null,this.is_collapsed=!1,this.region_preview=null,this.self_content=ud().addClass("ctr-scantreeedit-node"),this.child_content=c();const i=ud(c().css("background-color",["blue","purple","green"][t.depth%3]).css("width","3px")).css2({"padding-left":7*t.depth+"px","padding-right":"4px"}).tooltip("Click to collapse/expand").on("click",(e=>{e.stopPropagation(),e.preventDefault(),this.toggleCollapse()}));let n=nd(od(t.remaining_candidates.map((t=>Mc.spotNumber(e.parent.builder.tree,t))),(e=>`<span class="ctr-digspot-inline">${e}</span>`)),"and");this.header=c().addClass("ctr-scantreeedit-node-header").append(this.decision_span=md("ctr-scantreeedit-node-path").on("click",(()=>this.parent.requestActivation(this.isActive()?null:this))),this.you_are_here_marker=md("ctr-scantreeedit-youarehere"),ad(),sd(`${t.remaining_candidates.length}`).addTippy(c(`<span>${n}</span>`)),this.completeness_container=ud(),c().setInnerHtml("&#x22EE;").addClass("ctr-path-edit-overview-step-options").on("click",(e=>{this.contextMenu(e.originalEvent)}))),this.body=new $s,this.body.row(this.instruction_preview=c()),this.body.named("Timing",this.timing_box=dd()),this.append(this.self_content=ud().addClass("ctr-scantreeedit-node").append(i,hd(this.header,this.body).css("flex-grow","1").on("click",(e=>{e.stopPropagation(),e.preventDefault(),this.parent.requestActivation(this.isActive()?null:this)}))),this.child_content),this.self_content.on("contextmenu",(e=>this.contextMenu(e.originalEvent))),this.renderValue(t)}toggleCollapse(){this.is_collapsed=!this.is_collapsed,this.child_content.setVisible(!this.is_collapsed),this.body.setVisible(!this.is_collapsed)}contextMenu(e){var t;e.preventDefault(),e.stopPropagation();const i=[{type:"basic",text:this.is_collapsed?"Expand":"Collapse",handler:()=>this.toggleCollapse()},{type:"basic",text:this.isActive()?"Deactivate":"Activate",handler:()=>{this.parent.requestActivation(this.isActive()?null:this)}},""!=this.node.raw.directions?{type:"submenu",text:"Custom Instructions",children:[{type:"basic",text:"Reset",handler:()=>{this.node.raw.directions="",this.updateInstructionPreview()}},{type:"basic",text:"Edit",handler:()=>{this.editInstructions()}}]}:{type:"basic",text:"Add custom instructions",handler:()=>{this.editInstructions()}},this.node.remaining_candidates.length<=1?void 0:{type:"submenu",text:"Target region",children:[{type:"basic",text:"Edit Name",handler:async()=>{const e=this,t=await(new class extends Il{constructor(){super({size:"small"}),this.title.set("Edit region name"),this.shown.on((()=>{this.edit.raw().focus()}))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.cancel())),new Dl("Save","confirm").onClick((()=>this.confirm(this.edit.get())))]}render(){var t,i;super.render(),(new $s).appendTo(this.body).named("New Name",this.edit=(new Zl).setValue(null!==(i=null===(t=e.node.raw.region)||void 0===t?void 0:t.name)&&void 0!==i?i:"").appendTo(this.body))}getValueForCancel(){}}).do();void 0!==t&&this.parent.parent.builder.updateNode(this.node.raw,(e=>{e.region||(e.region={area:null,name:""}),e.region.name=t}))}},(null===(t=this.node.raw.region)||void 0===t?void 0:t.area)?{type:"basic",text:"Reset",handler:()=>{this.parent.parent.builder.updateNode(this.node.raw,(e=>e.region.area=null))}}:void 0,this.node.raw.path.length<1?void 0:{type:"basic",text:"Save Implicit",handler:()=>{const e=Rs.endsUpArea(this.node.raw.path);this.parent.parent.builder.updateNode(this.node.raw,(t=>{t.region||(t.region={area:null,name:""}),t.region.area=e}))}},{type:"basic",text:"Draw on Map",handler:()=>{var e,t;this.parent.parent.interaction_guard.set(new fd(null!==(t=null===(e=this.node.raw.region)||void 0===e?void 0:e.name)&&void 0!==t?t:"").onStart((()=>{var e;return null===(e=this.region_preview)||void 0===e?void 0:e.setOpacity(0)})).onEnd((()=>{var e;return null===(e=this.region_preview)||void 0===e?void 0:e.setOpacity(this.region_preview.isActive()?this.region_preview.active_opacity:this.region_preview.inactive_opacity)})).onCommit((e=>{this.parent.parent.builder.setRegion(this.node.raw,e)})))}}].filter(o.identity)},{type:"basic",text:"Reset node",handler:async()=>{await new ac({title:"Reset node",body:"Resetting a node will delete its path, instruction, and all of its children and can not be undone.",options:[{kind:"neutral",text:"Cancel",value:!1,is_cancel:!0},{kind:"cancel",text:"Reset Node",value:!0}]}).do()&&(this.isActive()&&this.parent.requestActivation(null),this.parent.parent.builder.updateNode(this.node.raw,(e=>{e.path=[],e.directions="",e.children=[],e.region=void 0})))}}];new wi({type:"submenu",text:"",children:i.filter((e=>!!e))}).showFromEvent2(e)}renderValue(e){this.node=e;{let t="",i=rd.collect_parents(e);const n=20;for(let e=i.length-1;e>=0;e--){let o=e>0?rd.decision_string(i[e]):"";if(t.length+o.length>=n&&e>0){t="..."+t;break}t="/"+o+t}this.decision_span.text(`${t}: `)}function t(e){let{char:t,cls:i,desc:n}=Mc.Augmentation.completeness_meta(e);return c("<span>").css("width","10px").addClass(i).text(t).tooltip(n)}const i=t(e.completeness).css("margin-left","5px"),n=t(e.correctness).css("margin-left","5px");this.completeness_container.empty().append(i,n),e.path.issues.length>0&&n.addTippy(hd(...pd(e.path).map((e=>new xl(e))))),this.children.forEach((e=>e.detach())),this.updateInstructionPreview(),this.timing_box.empty().append(sd(`T${this.node.path.pre_state.tick}`).addClass("nisl-textlink"),sd().setInnerHtml("&nbsp;to&nbsp;"),sd(`T${this.node.path.post_state.tick}`).addClass("nisl-textlink")),this.children=this.node.children.map((e=>{let t=this.children.find((t=>t.node.raw==e.value.raw));return t?(t.renderValue(e.value),t):new yd(this.parent,e.value)})).sort(cd.chain(cd.reverse(cd.comap(ld.comp,(e=>e.node.parent.key))),cd.comap(cd.natural_order,(e=>(ra(3==e.node.parent.key.pulse),Mc.spotNumber(e.node.root.raw,e.node.parent.key.spot)))))),this.children.forEach((e=>e.appendTo(this.child_content)))}updateInstructionPreview(){const e=this.parent.parent.app.template_resolver.with(...gd(this.node));this.instruction_preview.empty().append(...e.resolve(Mc.getInstruction(this.node)))}setActive(e){this.self_content.toggleClass("active",e)}isActive(){return this==this.parent.active.value()}async editInstructions(){const e=this,t=await(new class extends Il{constructor(){super(),this.title.set(e.node.raw.directions?"Add custom directions":"Edit custom directions"),this.shown.on((()=>{this.edit.raw().focus()}))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.cancel())),new Dl("Delete","cancel").onClick((()=>this.confirm(""))),new Dl("Save","confirm").onClick((()=>this.confirm(this.edit.get())))]}render(){var t;super.render(),this.edit=(new class extends pa{constructor(){super(),this.instruction_input=null,this.resolver=e.parent.parent.app.template_resolver.with(...gd(e.node)),this.onChange((()=>this.renderPreview()))}render(){this.empty(),this.instruction_input=new Nl({placeholder:"Enter text"}).setValue(this.get()).onPreview((e=>{this.preview(e)})).onCommit((e=>{this.commit(e)})).css("height","40px"),this.append(hd(this.instruction_input,this.preview_container=c(),new yl("Load default").onClick((()=>this.setValue(Mc.defaultScanTreeInstructions(e.node))))).css2({display:"flex","flex-direction":"column"})),this.renderPreview()}renderPreview(){this.preview_container&&this.preview_container.empty().append(...this.resolver.resolve(this.get()||""))}}).setValue(null!==(t=e.node.raw.directions)&&void 0!==t?t:"").appendTo(this.body)}getValueForCancel(){}}).do();void 0!==t&&(this.node.raw.directions=t,this.updateInstructionPreview())}}class vd extends si{constructor(e,t){super(),this.parent=e,this.value=t,this.root_widget=null,this.active=mi(null),this.active_node=this.active.map((e=>null==e?void 0:e.node)),this.parent.builder.augmented.subscribe((async e=>{e&&(this.root_widget?this.root_widget.renderValue(e.root_node):(this.root_widget=new yd(this,e.root_node).appendTo(this),this.requestActivation(this.root_widget)))}),!0)}getNode(e){let t=Mc.Augmentation.AugmentedScanTree.collect_parents(e),i=this.root_widget;for(let e=1;e<t.length;e++)i=i.children.find((i=>i.node.raw==t[e].raw));return i}requestActivation(e){this.active.value()&&this.active.value().setActive(!1),this.active.set(e),this.active.value()&&this.active.value().setActive(!0)}}var _d=Mc.Augmentation.AugmentedScanTree;class xd extends os{constructor(e){super(),this.spots=e,this.markers=[],this.marker=(new zh).addTo(this),this.setSpots(e)}setSpots(e){return this.markers.forEach((e=>{e.regular.remove(),e.complement.remove()})),this.markers=e.map((e=>new xd.MarkerPair(e))),this.markers.forEach(((e,t)=>{e.regular.addTo(this),e.complement.addTo(this)})),e.length>0&&this.marker.setComplementByExampleSpot(e[0]),this}setActiveCandidates(e){this.markers.forEach((t=>t.setActive(e.some((e=>W.eq2(e,t.spot))))))}getMarker(e){return this.markers.find((t=>W.eq2(t.spot,e)))}setSpotOrder(e){e?e.forEach(((e,t)=>{var i;null===(i=this.getMarker(e))||void 0===i||i.setNumber(t+1)})):this.markers.forEach((e=>e.setNumber(null)))}setTiming(e){this.markers.forEach((t=>{t.setTiming(e.spots.find((e=>W.eq(e.spot,t.spot))))}))}}!function(e){var t=Bh.render_digspot,i=Lc.complementSpot,n=di.span,o=di.inlineimg,r=di.cls;e.MarkerPair=class{constructor(t){this.spot=t,this.regular=new e.SpotMarker(t,!1),this.complement=new e.SpotMarker(t,!0)}setNumber(e){this.regular.setNumber(e),this.complement.setNumber(e)}setActive(e){const t=e?1:.2;this.regular.opacity.set(t),this.complement.opacity.set(t)}setTiming(e){this.regular.setTiming(e),this.complement.setTiming(e)}},e.SpotMarker=class extends Ci{constructor(e,s){super(),this.spot=e,this.is_complement=s,this.spot_on_map=null,this.number=void 0,this.setInteractive(),this.spot_on_map=s?i(e):e,this.setTooltip((async()=>{const e=new $s;if(this.is_complement?e.header(c().append("Complement of Spot ",t(this.number))):e.header(c().append("Spot ",t(this.number))),this.is_complement&&e.row(r("ctr-step-properties-explanation").append(o("assets/icons/info.png")," This is the complement of a dig spot. Right click to learn more about complement spots.")),this.timing_information){let t=c();this.timing_information.timings.forEach(((e,i)=>{0!=i&&t.append(" | ");let o=n(e.ticks.toFixed(2)+" ticks");e.incomplete&&o.css("color","yellow").tooltip("Incomplete path"),t.append(o)}));const i=this.timing_information.timings.some((e=>e.incomplete));if(this.timing_information.timings.length>1){const e=n(this.timing_information.average.toFixed(2)+" ticks");i&&e.css("color","yellow").tooltip("Incomplete path"),t.append(", Average ",e)}e.named("Expected time",t),i&&e.row(c().css("font-style","italic").text("Timings in yellow are from incomplete branches."))}return e}))}bounds(){return F.from(this.spot_on_map)}async render_implementation(e){const t=a.marker(j.toLatLong(this.spot_on_map),{icon:bs(this.spot.level,e.highlight?1.5:1),opacity:e.opacity}).addTo(this);return this.number&&t.bindTooltip(a.tooltip({content:this.number.toString(),className:"spot-number-on-map",offset:[0,10],permanent:!0,direction:"center",opacity:e.opacity})),t.getElement()}setNumber(e){this.number=e,this.render(!0)}setTiming(e){this.timing_information=e}async contextMenu(e){return this.is_complement&&e.addForEntity({type:"basic",text:"About complement spots",handler:()=>{(new class extends Ml{render(){super.render(),this.body.text("Sorry, this explanation is still missing.")}}).show()}}),{type:"submenu",text:()=>c().append("Spot ",t(this.number)),children:[]}}}}(xd||(xd={}));class wd extends Ls{constructor(e){super(),this.parent=e,this.equivalence_classes=[]}render_equivalence_classes(e){let t=a.featureGroup();return e.equivalence_classes.map((t=>{let i=Math.abs(t.information_gain-e.max_information)<.01?"blue":`rgb(${255*(1-t.information_gain/e.max_information)}, ${255*t.information_gain/e.max_information}, 0)`,n=a.featureGroup();return function(e,i,n){function o(i){let n=e.data[i];return n&&n.id==t.id}function r(t){let i=e.iToXY(t.tile);return{x:i.x-.5+Math.floor(t.corner/2),y:i.y-.5+t.corner%2}}let s=n;for(;o(s-1);)s-=1;for(;o(s-e.size.x);)s-=e.size.x;let l=s,c={tile:s,corner:0},u=[];do{switch(c.corner){case 0:{let t=c.tile;for(;o(t+e.size.x)&&!o(t+e.size.x-1);)t+=e.size.x;u.push(r({tile:t,corner:1})),c=o(t+e.size.x-1)?{tile:t+e.size.x-1,corner:2}:{tile:t,corner:1}}break;case 1:{let t=c.tile;for(;o(t+1)&&!o(t+e.size.x+1);)t+=1;u.push(r({tile:t,corner:3})),c=o(t+e.size.x+1)?{tile:t+e.size.x+1,corner:0}:{tile:t,corner:3};break}case 2:{let t=c.tile;for(;o(t-1)&&!o(t-e.size.x-1);)t-=1;u.push(r({tile:t,corner:0})),c=o(t-e.size.x-1)?{tile:t-e.size.x-1,corner:3}:{tile:t,corner:0};break}case 3:{let t=c.tile;for(;o(t-e.size.x)&&!o(t-e.size.x+1);)t-=e.size.x;u.push(r({tile:t,corner:2})),c=o(t-e.size.x+1)?{tile:t-e.size.x+1,corner:1}:{tile:t,corner:2};break}}}while(l!=c.tile||0!=c.corner);return a.polygon(u.map(j.toLatLong))}(e.raster,0,t.area[0]).setStyle({color:"black",opacity:1,weight:3,fillOpacity:.25,fillColor:i}).addTo(n),a.marker(n.getBounds().getCenter(),{icon:a.divIcon({iconSize:[50,20],className:"equivalence-class-information",html:`${t.information_gain.toFixed(2)}b`})}).addTo(n),n})).forEach((e=>t.addLayer(e))),t}begin(){let e=this;function t(t,i){let n=mi(t),o=n.map((t=>nu((()=>e.render_equivalence_classes(new Sh(t))))));return o.subscribe(((t,n)=>{n.hasValue()&&e.parent.layer.removeLayer(n.get()),i.value()&&e.parent.layer.addLayer(t.get())})),i.subscribe((t=>{t?e.parent.layer.addLayer(o.value().get()):o.value().hasValue()&&e.parent.layer.removeLayer(o.value().get())})),{options:n,layer:o}}let i=t({candidates:this.parent.value.clue.spots,range:this.parent.builder.tree.assumed_range,complement:!1,floor:this.parent.app.map.floor.value()},this.parent.tools.normal),n=t({candidates:this.parent.value.clue.spots,range:this.parent.builder.tree.assumed_range,complement:!0,floor:this.parent.app.map.floor.value()},this.parent.tools.complement);this.equivalence_classes=[i,n],this.parent.app.map.floor.subscribe((e=>this.equivalence_classes.forEach((t=>t.options.update((t=>t.floor=e)))))),this.parent.candidates_at_active_node.subscribe((e=>this.equivalence_classes.forEach((t=>t.options.update((t=>t.candidates=e))))))}end(){this.equivalence_classes.forEach((e=>{e.layer.value().hasValue()&&e.layer.value().get().remove()})),this.equivalence_classes=[]}}class bd{constructor(e){this.clue=e,this.tree=null,this.augmented=mi(null),this.preview_invalid=pi(),this.assumptions=mi({}).equality(((e,t)=>e.meerkats_active==t.meerkats_active&&e.mobile_perk==t.mobile_perk&&e.double_escape==t.double_escape&&e.double_surge==t.double_surge)),this.order_changed=pi(),this.any_change=pi(),this.assumptions.subscribe((e=>{this.cleanTree()}))}async cleanTree(){this.tree&&(this.tree.assumed_range=this.clue.range+(this.assumptions.value().meerkats_active?5:0),this.augmented.set(await Mc.Augmentation.augment({augment_paths:!0,analyze_completeness:!0,analyze_correctness:!0,analyze_timing:!0,path_assumptions:this.assumptions.value()},Mc.normalize(this.tree),this.clue)),this.preview_invalid.trigger(null))}set(e){this.tree=e,this.cleanTree()}setRegion(e,t){this.updateNode(e,(e=>e.region=t))}updateNode(e,t){t(e),this.cleanTree(),this.any_change.trigger(null)}setPath(e,t){this.updateNode(e,(e=>e.path=t))}setOrder(e){this.tree.ordered_spots=e,this.order_changed.trigger(e)}}class kd extends Ls{constructor(e){super(),this.parent=e,this.path_layer=null}begin(){this.layer=(new Wa).addTo(this.parent.layer),this.parent.tree_edit.active.subscribe((()=>this.updatePreview()),!0),this.parent.builder.preview_invalid.on((()=>this.updatePreview()))}async updatePreview(){let e=this.parent.tree_edit.active_node.value(),t=new Wa;if(e)for(const i of _d.collect_parents(e,!0)){const n=Mc.getTargetRegion(i);n&&(this.parent.tree_edit.getNode(i).region_preview=new Eh(n).addTo(t)),i!=e&&da.renderPath(i.raw.path).addTo(t)}else this.parent.tree_edit.root_widget&&_d.traverse(this.parent.tree_edit.root_widget.node,(async e=>{const i=Mc.getTargetRegion(e);return(null==i?void 0:i.area)&&(this.parent.tree_edit.getNode(e).region_preview=new Eh(i).addTo(t)),da.renderPath(e.raw.path).addTo(t)}),!0);this.path_layer&&this.path_layer.remove(),this.path_layer=t.addTo(this.layer)}end(){}}class Td extends xu{constructor(e,t,i,n){super(e),this.parent=e,this.app=t,this.value=i,this.side_panel=n,this.builder=new bd(i.clue),this.builder.assumptions.set(o.cloneDeep(i.method.assumptions)),this.builder.augmented.subscribe((e=>{this.layer.setTiming(e.state.timing_analysis)})),this.builder.any_change.on((()=>{this.parent.registerChange()})),this.builder.order_changed.on((e=>{this.layer.setSpotOrder(e)})),this.layer=new xd(i.clue.spots),this.layer.marker.setClickable(!0);const r=this;this.layer.add(new class extends os{eventContextMenu(e){e.onPre((()=>{if(e.active_entity instanceof xd.SpotMarker){const t=e.active_entity.spot;e.addForEntity({type:"basic",text:"Set spot number",handler:async()=>{const e=await(new class extends Il{constructor(){super({size:"small"}),this.title.set("Set spot number")}render(){super.render(),(new $s).appendTo(this.body).named("New Spot Number",this.input=new Jl(1,r.value.clue.spots.length).setValue(r.builder.tree.ordered_spots.findIndex((e=>W.eq(e,t)))+1)),this.input.raw().focus()}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.cancel())),new Dl("Save","confirm").onClick((()=>this.confirm(this.input.get()-1)))]}getValueForCancel(){}}).do();if(void 0!==e){const i=o.clone(r.builder.tree.ordered_spots),n=i.findIndex((e=>W.eq(t,e))),s=i[e];i[e]=i[n],i[n]=s,r.builder.setOrder(i)}}})}}))}}),this.interaction_guard=(new ms).setDefaultLayer(this.layer),this.equivalence_classes=this.withSub(new wd(this)),this.preview_layer=this.withSub(new kd(this)),this.path_editor=this.withSub(new Ps),this.assumptions.subscribe((e=>{this.value.method.tree.assumed_range=this.value.clue.range+(e.meerkats_active?5:0),this.builder.assumptions.set(o.cloneDeep(e)),this.layer.marker.setRadius(this.value.method.tree.assumed_range,e.meerkats_active)})),this.builder.augmented.subscribe((e=>{this.value.method.expected_time=e.state.timing_analysis.average+1}))}setPathEditor(e){this.path_editor.set(new Vc(this.layer.marker,this.app.template_resolver,{initial:e.path.raw,target:e.path.target,start_state:e.path.pre_state,discard_handler:()=>{},commit_handler:t=>{this.builder.setPath(e.raw,t)}},!1).onStop((()=>{this.tree_edit.active_node.value()==e&&this.tree_edit.requestActivation(null)})))}begin(){super.begin(),this.layer.setSpotOrder(this.value.method.tree.ordered_spots),new ds({position:"top-right",type:"floating"},new Fs("Scan Tools").setContent(this.tools=new Ih(this))).addTo(this.layer),this.builder.set(this.value.method.tree),c("<div style='font-weight: bold; text-align: center'>Scan Tree</div>").appendTo(this.side_panel),this.tree_edit=new vd(this,this.builder.tree.root).css("overflow-y","auto").appendTo(this.side_panel),this.candidates_at_active_node=this.tree_edit.active.map((e=>e?e.node.remaining_candidates:this.value.clue.spots)),this.candidates_at_active_node.subscribe((e=>{this.layer.setActiveCandidates(e)})),this.app.map.addGameLayer(this.layer),this.tree_edit.active_node.subscribe((async e=>{e?this.setPathEditor(e):this.path_editor.set(null)}))}end(){this.layer.remove(),this.tree_edit.remove()}setSpotOrder(e){this.value.method.tree.ordered_spots}}class Sd extends Il{constructor(e=["local"]){super({force_footer:!0}),this.types=e,this.packs=pu.instance(),this.valid_packs=mi([]),this.selected=mi(null),this.title.set("Select Pack"),this.selected.subscribe((()=>this.highlightCurrentSelection())),this.updateValidPacks(!0),this.valid_packs.subscribe((e=>{this.renderSelectors(e),e.includes(this.selected.value())||this.selected.set(null)}))}updateValidPacks(e=!1){this.packs.all().then((t=>{this.valid_packs.set(t.filter((e=>this.types.includes(e.type)))),e&&this.selected.set(o.maxBy(this.valid_packs.value(),(e=>e.timestamp)))}))}render(){super.render(),this.renderSelectors(this.valid_packs.value())}renderSelectors(e){this.body.empty(),this.pack_widgets=e.map((e=>new Bu(e,this.packs,{buttons:!1}).css("cursor","pointer").tapRaw((t=>t.on("click",(()=>{this.selected.value()==e?this.selected.set(null):this.selected.set(e)})))).appendTo(this.body))),this.types.includes("local")&&(new Ll).buttons(new yl("Create New","rectangle").onClick((async()=>{let e=await(new yu).do();(null==e?void 0:e.created)&&this.updateValidPacks(!0)}))).appendTo(this.body)}highlightCurrentSelection(){const e=this.selected.value();this.pack_widgets.forEach((t=>{var i;t.toggleClass("inactive",t.pack!=e),null===(i=this.save_button)||void 0===i||i.setEnabled(!!e)}))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>{this.confirm({pack:null})})),this.save_button=new Dl("Save","confirm").onClick((()=>{this.confirm({pack:this.selected.value()})}))]}}var Cd=Ic.Method,Ed=zc.ClueSpot,Ad=uc.notification;class zd extends $c{constructor(e){super("Method Editor"),this.parent=e,this.save_row=(new Ll).appendTo(this.body),this.parent.is_dirty.subscribe((()=>this.renderSaveRow())),this.meta_props=new Rh(this.parent.method).appendTo(this.body),this.renderMetaProps(),this.renderSaveRow()}renderMetaProps(){this.meta_props.render(),this.meta_props.row(new yl("Edit Metainformation","rectangle").onClick((async()=>{const e=await new Ju({clue:this.parent.method.clue,spot:this.parent.method.method.for.spot},Cd.meta(this.parent.method.method)).do();(null==e?void 0:e.result)&&(Cd.setMeta(this.parent.method.method,e.result),this.renderMetaProps(),this.parent.sub_editor.setAssumptions(e.result.assumptions),this.parent.registerChange())})))}renderSaveRow(){this.save_row.empty(),this.save_row.buttons(new yl("Save","rectangle").setEnabled(this.parent.is_dirty.value()).onClick((async()=>{if(this.parent.method.pack)await pu.instance().updateMethod(this.parent.method),Ad(`Successfully saved in Pack '${this.parent.method.pack.name}'.`).show();else{const e=await(new Sd).do();(null==e?void 0:e.pack)&&(await pu.instance().updatePack(e.pack,(e=>e.methods.push(this.parent.method.method))),this.parent.method.pack=e.pack,Ad(`Successfully saved in Pack '${this.parent.method.pack.name}'.`).show(),this.renderSaveRow())}this.parent.is_dirty.set(!1)})),new yl("Make and Edit Copy","rectangle").setEnabled(!!this.parent.method.pack).onClick((async()=>{this.parent.theorycrafter.editMethod({pack:null,clue:this.parent.method.clue,method:Ic.clone(this.parent.method.method)})})),new yl("Close","rectangle").onClick((async()=>{await this.parent.requestClosePermission()&&this.parent.stop()})))}}class Ld extends Ls{constructor(e,t){super(),this.theorycrafter=e,this.method=t,this.is_dirty=mi(!1),t.pack&&pu.instance().getMethod(t.pack.local_id,t.method.id)||this.is_dirty.set(!0)}registerChange(){this.is_dirty.set(!0)}begin(){this.sidebar=new zd(this).prependTo(Ms.instance().app.main_content).css("width","300px"),"scantree"==this.method.method.type?this.sub_editor=this.withSub(new Td(this,Ms.instance().app,this.method,this.sidebar.body)):this.sub_editor=this.withSub(new Mu(this,this.method)),this.sub_editor.setAssumptions(this.method.method.assumptions);const e=Ed.targetArea({clue:this.method.clue,spot:this.method.method.for.spot});e&&this.sub_editor.layer.getMap().fitView(Vr.toRect(e))}end(){this.sidebar.remove()}async requestClosePermission(){return!this.is_dirty.value()||await new ac({title:"Unsaved changes",body:"There are unsaved changes that will be lost.",options:[{kind:"neutral",text:"Cancel",value:!1,is_cancel:!0},{kind:"cancel",text:"Confirm",value:!0}]}).do()}}class Pd extends Ls{constructor(e){super(),this.app=e,this.method_editor=this.withSub(new Ps),pu.instance().saved.on((async()=>{await this.layer.filter_control.refreshFilterIndex()})).bindTo(this.handler_pool),this.method_editor.behaviour.subscribe(((e,t)=>{e&&!t?(this.sidebar.setVisible(!1),this.layer.remove()):!e&&t&&(this.sidebar.setVisible(!0),this.layer.addTo(this.app.map))})),this.method_editor.content_stopped.on((()=>{this.method_editor.set(null)}))}begin(){this.sidebar=new qu(this).prependTo(this.app.main_content),this.app.map.invalidateSize(),this.layer=new bh(this).addTo(this.app.map)}end(){this.sidebar.remove(),this.layer.remove()}async editMethod(e){let t={clue:e.clue,pack:e.pack,method:o.cloneDeep(e.method)};await(async()=>{let e=this.method_editor.get();return!e||await e.requestClosePermission()})()&&this.method_editor.set(new Ld(this,t))}}class Md{constructor(e,t){this.id=e,this.name=t,this.legacy=!1}makeLegacy(){return this.legacy=!0,this}}class Id extends Us{constructor(e={},t){e.preview_render||(e.preview_render=({origin:e,offset:t})=>il.render_transport_arrow(e,j.add(e,t),t.level)),super(e),this.start_area=t,this.attachTopControl(new qs({name:"Draw Transportation Offset"}).setText("Click an interactive tile and draw an arrow to enter the transportation offset."))}eventClick(e){e.onPre((()=>{var t;e.stopAllPropagation(),null==(null===(t=this.value.value().value)||void 0===t?void 0:t.origin)?this.start_area&&!Z.contains(this.start_area,e.tile())||this.preview({origin:e.tile(),offset:{x:0,y:0,level:0}}):this.commit({origin:this.value.value().value.origin,offset:{...j.sub(e.tile(),this.value.value().value.origin),level:e.tile().level-this.value.value().value.origin.level}})}))}eventHover(e){e.onPre((()=>{var t;null!=(null===(t=this.value.value().value)||void 0===t?void 0:t.origin)&&this.preview({origin:this.value.value().value.origin,offset:{...j.sub(e.tile(),this.value.value().value.origin),level:e.tile().level-this.value.value().value.origin.level}})}))}}class Od extends pa{constructor(e,t,i=1){super(),this.min=e,this.max=t,this.step=i,this.preview_function=e=>e.toString(),this.css("display","flex"),this.append(this.input=c(`<input style="flex-grow: 1" type='range' min='${e}' max="${t}" step="${i}">`).on("input",(()=>{this.commit(Number(this.input.container.val())),this.updatePreview()})),this.preview_container=c().css("min-width","30px").css("margin-left","3px"))}withPreviewFunction(e){return this.preview_function=e,this.updatePreview(),this}updatePreview(){var e;let t="";try{t=this.preview_function(this.get())}catch(e){}t||(t=(null===(e=this.get())||void 0===e?void 0:e.toString())||"0"),this.preview_container.text(t)}render(){this.updatePreview(),this.input.container.val(this.get())}}class Dd{constructor(e){this._default_value=e}default(e){return this._default_value=e,this}getDefault(e){return Dd.P.apply(this._default_value,e)}}!function(e){var t=B.copyUpdate2,i=di.hboxl,n=di.inlineimg,o=di.spacer,r=di.span;let s;function a(t=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]){return new class extends e{constructor(){super((e=>Math.max(s.apply(t,e)[0],0)))}renderForm(i,n){const o=this;return new class extends e.Editor{constructor(){super(o)}render_implementation(e){const[i,o]=s.apply(t,n);o-i>20?this.control.append(new Jl(i,o).onCommit((e=>this.commit(e))).setValue(e)):this.control.append(new Od(i,o).onCommit((e=>this.commit(e))).setValue(e))}}}}}function l(){return new class extends e{constructor(){super((()=>""))}renderForm(t){const i=this;return new class extends e.Editor{constructor(){super(i)}render_implementation(e){this.control.append((new Zl).onCommit((e=>this.commit(e))).setValue(e))}}}}}function u(t,i){return new class extends e{constructor(){super((e=>s.apply(i,e)[0]))}renderForm(n,o){return new class extends e.Editor{render_implementation(e){this.control.append(new Hl({type_class:s.apply(t,o)},s.apply(i,o)).onSelection((e=>this.commit(e))).setValue(e))}}(this)}}}function h(t=!0,n=!0){return new class extends e{constructor(){super(null)}renderForm(s,a,l){const u=a.getTransform(),h=a.getInverseTransform();return new class extends e.Editor{constructor(){super(...arguments),this.wip_value=null,this.interaction=null}render_implementation(e){this.wip_value=e?{type:e.type,tiles:Vr.activate(e.area).getTiles()}:null,this.update_render()}act(e){const t=this;l.setInteraction(this.interaction=(new class extends Us{constructor(){var e,i;super();let n=(null===(e=t.wip_value)||void 0===e?void 0:e.tiles)||[];"relativetoloc"==(null===(i=t.wip_value)||void 0===i?void 0:i.type)&&(n=n.map((e=>W.transform(e,u))));const o=new Cc(n).onPreview((e=>this.preview(e))).attachTopControl(null).addTo(this);this.attachTopControl(new qs({name:"Draw Tile Area"}).setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Shift + Mouse] add tiles, [Alt + Mouse] remove tiles")))),o.preview(n)}}).onPreview((t=>{if(t.length>0){let i=t;"relativetoloc"==e&&(i=i.map((e=>W.transform(e,h)))),this.wip_value={type:e,tiles:i}}else this.wip_value=null;this.update_render()})).onEnd((()=>{this.commitTiles(),this.interaction=null,this.update_render()})))}commitTiles(){this.wip_value?this.commit({type:this.wip_value.type,area:Vr.fromTiles(this.wip_value.tiles)}):this.commit(null)}update_render(){this.control.empty().append(i(this.wip_value?r(`${this.wip_value.tiles.length} tiles [${"relativetoloc"==this.wip_value.type?"rel":"abs"}]`):r("None"),o(),this.interaction?(new Ll).buttons(new yl("Abort").onClick((()=>{var e;null===(e=this.interaction)||void 0===e||e.cancel(),this.update_render()})),new yl("").append(Uu.delete()).onClick((()=>{var e;this.wip_value=null,null===(e=this.interaction)||void 0===e||e.cancel(),this.update_render(),this.commitTiles()}))):(new Ll).buttons(t?new yl("Rel").onClick((()=>this.act("relativetoloc"))):void 0,n?new yl("Abs").onClick((()=>this.act("absolute"))):void 0,new yl("").append(Uu.delete()).onClick((()=>{var e;this.wip_value=null,null===(e=this.interaction)||void 0===e||e.cancel(),this.update_render(),this.commitTiles()})))))}}(this)}}}function d(t){return new e.Rec(t)}function p(e,t,i=!1){return{name:e,type:t,optional:i}}function g(){return u((()=>({toHTML:e=>{let t=Zs.meta(e);return c(`<div><img style="height: 18px; object-fit: contain; margin-right: 3px" src="${t.icon_url}" alt="${t.description}">${t.description}</div>`)}})),Zs.all().map((e=>e.type)))}function m(){return d({name:p("Name",l()),cursor:p("Icon",g())})}function f(){return u((e=>({toHTML:t=>{const o=e.prototype.actions[t.id];return o?i(n(Zs.meta(o[1]).icon_url)," ",o[0]):c().text("undefined")}})),(e=>e.prototype.actions.map(((e,t)=>({id:t})))))}!function(e){e.apply=function(e,t){return"function"==typeof e?e(t):e}}(s=e.P||(e.P={})),e.bool=function(){return new class extends e{constructor(){super((()=>!1))}renderForm(t){const i=this;return new class extends e.Editor{constructor(){super(i)}render_implementation(e){this.control.append((new ma).onCommit((e=>this.commit(e))).setValue(e))}}}}},e.int=a,e.floor=function(){return a([0,3])},e.time=function(){return a([0,20]).default(3)},e.string=l,e.choose=u,e.tileArea2=h,function(e){e.translate=function(e,t){if(!t)return null;switch(t.type){case"absolute":return t.area;case"relativetoloc":return Vr.transform(t.area,e.getTransform())}}}(h=e.tileArea2||(e.tileArea2={})),e.movement=function(){return new class extends e{constructor(){super(null)}renderForm(t,n,s){const a=n.getTransform(),l=n.getInverseTransform();return new class extends e.Editor{constructor(){super(...arguments),this.interaction=null,this.wip_value=null}render_implementation(e){this.wip_value=(null==e?void 0:e.fixed_target)?{relative:e.fixed_target.relative,origin_only:e.fixed_target.origin_only,tiles:Vr.activate(e.fixed_target.target).getTiles()}:null,this.update_render()}act(e){const t=this;if("offset"==e)s.setInteraction(new Id({}).onCommit((e=>{this.wip_value=null,this.commit({offset:e.offset}),this.render()})));else{const i="relativefixed"==e||"originonly"==e;s.setInteraction(this.interaction=(new class extends Us{constructor(){var e,i;super();let n=(null===(e=t.wip_value)||void 0===e?void 0:e.tiles)||[];(null===(i=t.wip_value)||void 0===i?void 0:i.relative)&&(n=n.map((e=>W.transform(e,a))));const o=new Cc(n).onPreview((e=>this.preview(e))).attachTopControl(null).addTo(this);this.attachTopControl(new qs({name:"Draw Tile Area"}).setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Shift + Mouse] add tiles, [Alt + Mouse] remove tiles")))),o.preview(n)}}).onPreview((t=>{if(t.length>0){let n=t;i&&(n=n.map((e=>W.transform(e,l)))),this.wip_value={relative:i,tiles:n,origin_only:"originonly"==e}}else this.wip_value=null;this.update_render()})).onEnd((()=>{this.commitWIP(),this.interaction=null,this.update_render()})))}}commitWIP(){this.wip_value?this.commit({fixed_target:{target:Vr.fromTiles(this.wip_value.tiles),relative:this.wip_value.relative,origin_only:this.wip_value.origin_only}}):this.commit({offset:{x:0,y:0,level:0}})}update_render(){var e,t;const n=null!==(t=null===(e=this.get())||void 0===e?void 0:e.offset)&&void 0!==t?t:{x:0,y:0,level:0};this.control.empty().append(i(this.wip_value?r(`${this.wip_value.tiles.length} tiles [${(this.wip_value.relative?"rel":"abs")+this.wip_value.origin_only?", org":""}]`):r(`+${n.x} | ${n.y} | ${n.level}`),o(),this.interaction?(new Ll).buttons(new yl("Abort").onClick((()=>{var e;null===(e=this.interaction)||void 0===e||e.cancel(),this.update_render()})),new yl("").append(Uu.delete()).onClick((()=>{var e;this.wip_value=null,null===(e=this.interaction)||void 0===e||e.cancel(),this.update_render(),this.commitWIP()}))):(new Ll).buttons(new yl("Off").onClick((()=>this.act("offset"))),new yl("Rel").onClick((()=>this.act("relativefixed"))),new yl("Abs").onClick((()=>this.act("absolutefixed"))),new yl("Ori").onClick((()=>this.act("originonly"))),new yl("").append(Uu.delete()).onClick((()=>{var e;this.wip_value=null,null===(e=this.interaction)||void 0===e||e.cancel(),this.update_render(),this.commitWIP()})))))}}(this)}}},e.dir=function(){return u({toHTML:e=>c().text(qr.toString(e))},(()=>qr.all))},e.tileArea=function(t=!0){return new class extends e{constructor(){super(Vr.init({x:0,y:0,level:0}))}renderForm(n,o,r){const s=t?o.getTransform():$.identity(),a=t?o.getInverseTransform():$.identity();return new class extends e.Editor{constructor(){super(...arguments),this.interaction=null}render_implementation(e){this.edited_tiles=Vr.activate(e).getTiles().filter((e=>0!=e.x||0!=e.y)),this.update_render()}activate(){const e=this;this.interaction?this.interaction.cancel():(r.setInteraction(this.interaction=(new class extends Us{constructor(){super(),new Cc(e.edited_tiles.map((e=>W.transform(e,s)))).onPreview((e=>this.preview(e))).attachTopControl(null).addTo(this),this.attachTopControl(new qs({name:"Draw Tile Area"}).setContent(c("<div style='font-family: monospace; white-space:pre'></div>").append(c().text("[Shift + Mouse] add tiles, [Alt + Mouse] remove tiles"))))}}).onPreview((e=>{this.edited_tiles=e.map((e=>W.transform(e,a))),this.update_render()})).onEnd((()=>{this.commitTiles(),this.interaction=null,this.update_render()}))),this.update_render())}commitTiles(){this.commit(Vr.fromTiles(this.edited_tiles))}update_render(){this.control.empty().append(i(this.edited_tiles.length>0?c().text(`${this.edited_tiles.length} tiles near ${W.toString(this.edited_tiles[0])}`):c().text(`${this.edited_tiles.length} tiles`),new yl(this.interaction?"Stop Editing":"Edit").onClick((()=>{this.activate()})),new yl("Reset").onClick((()=>{var e;this.edited_tiles=[],null===(e=this.interaction)||void 0===e||e.cancel(),this.update_render(),this.commitTiles()}))))}}(this)}}},e.rec=d,e.element=p,e.cursorType=g,e.customAction=m,e.locAction=f,e.action=function(){return _({loc:f(),custom:m()}).default((()=>({loc:{id:0}})))};class y{constructor(e){this.type=e,this.control=c(),this.additional=c(),this.value_changed=pi()}activate(){}render(){this.control.empty(),this.additional.empty(),this.render_implementation(this.value)}commit(e){this.value=e,this.value_changed.trigger(e)}get(){return this.value}set(e){return this.value=e,this.render(),this}onChange(e){return this.value_changed.on(e),this}}e.Editor=y;class v extends e{constructor(e){super((t=>Object.fromEntries(Object.entries(e).map((([e,i])=>[e,i.optional?void 0:i.type.getDefault(t)]))))),this.elements=e}renderForm(i,n,o){const r=this;return new class extends e.Editor{constructor(){super(r)}render_implementation(e){this.elements=Object.entries(r.elements).map((([r,s])=>new v.ElementWidget(s,s.optional?"check":"none",i+1,n,o).set(null==e?void 0:e[r]).onChange((e=>{this.commit(t(this.get(),(t=>t[r]=e)))})))),this.additional.append(...this.elements.map((e=>e.additional)))}}}}function _(t){return new class extends e{constructor(){super((e=>{const[i,n]=Object.entries(t)[0];return Object.fromEntries([[i,n.getDefault(e)]])}))}renderForm(i,n,o){const r=this;return new class extends e.Editor{constructor(){super(r)}render_implementation(e){this.elements=Object.entries(t).map((([t,r],s)=>new v.ElementWidget({type:r,name:t},"radio",i+1,n,o).set(null==e?void 0:e[t]).onChange((e=>{void 0!==e&&this.elements.forEach(((e,t)=>{t!=s&&e.set(void 0)})),this.commit({[t]:e})})))),this.additional.append(...this.elements.map((e=>e.additional)))}}}}}e.Rec=v,function(e){var t=di.hbox;e.ElementWidget=class extends y{constructor(e,t,i,n,o){super(e.type),this.element=e,this.cb_type=t,this.depth=i,this.loc=n,this.map=o,this.sub=null,this.additional.css("margin-left","3px").css("padding-left","3px").css("border-left",`2px solid ${["blue","purple","green"][this.depth%3]}`).css("margin-top","4px").css("margin-bottom","4px")}render_implementation(e){const i=c().css("min-width","100px"),n=c().css("flex-grow","1"),o=c();switch(this.cb_type){case"check":this.checkbox=new ma(this.element.name,"checkbox");break;case"radio":this.checkbox=new ma(this.element.name,"radio")}this.checkbox?this.checkbox.setValue(void 0!==e).onCommit((e=>{if(e!=(void 0!==this.get())){const t=e?this.element.type.getDefault(this.loc):void 0;this.commit(t),this.render(),e&&this.sub.activate()}})).appendTo(i):i.text(this.element.name),this.additional.append(t(i,n),o),this.sub=null,void 0!==e&&(this.sub=this.element.type.renderForm(this.depth+1,this.loc,this.map).set(e).onChange((e=>this.commit(e))),n.append(this.sub.control),o.append(this.sub.additional))}}}(v=e.Rec||(e.Rec={})),e.list=function(i,n=0){return new class extends e{constructor(){super((e=>new Array(n).fill(null).map((()=>i.getDefault(e)))))}renderForm(n,o,r){const s=this;return new class extends e.Editor{constructor(){super(s)}render_implementation(e){this.control.append(new yl("Add").onClick((()=>{this.commit(t(this.get(),(e=>e.push(i.getDefault(o))))),this.render()}))),this.elements=e.map(((e,s)=>new v.ElementWidget({name:`Item ${s}`,type:i},"check",n+1,o,r).set(e).onChange((e=>{null==e?(this.commit(t(this.get(),(e=>e.splice(s,1)))),this.render()):this.commit(t(this.get(),(t=>t[s]=e)))})))),this.additional.append(...this.elements.map((e=>e.additional)))}}}}},e.either=_,e.offset=function(n=!0){return new class extends e{renderForm(o,r,s){const a=r.getTransform(),l=r.getInverseTransform();return new class extends e.Editor{render_implementation(e){this.transformed_value=n?As.EntityActionMovement.Offset.transform(e,a.matrix):e,this.control.append(i(new Jl(-6400,6400).setValue(this.transformed_value.x).onCommit((e=>this.save(t(this.transformed_value,(t=>t.x=e)))))," | ",new Jl(-6400,6400).setValue(this.transformed_value.y).onCommit((e=>this.save(t(this.transformed_value,(t=>t.y=e)))))," | ",new Jl(-3,3).setValue(this.transformed_value.level).onCommit((e=>this.save(t(this.transformed_value,(t=>t.level=e))))),new yl("Draw").onClick((()=>{s.setInteraction(new Id({}).onCommit((e=>{this.save(e.offset),this.render()})))}))))}save(e){this.transformed_value=e;const t=n?As.EntityActionMovement.Offset.transform(e,l.matrix):e;this.commit(t)}}(this)}}({x:0,y:0,level:0})}}(Dd||(Dd={}));class Rd{constructor(e){this.value=e}movement(...e){return this.value.movement.push(...e.map((e=>e.done()))),this}}class Bd{constructor(e,t){this.underlying=e,this.value=t}finish(){let e=this.value;e.source_loc=this.underlying.prototype.id;let t=this.underlying;0!=t.instance.rotation&&(e=As.transform(e,$.normalize(N.rotation((4-t.instance.rotation)%4))));const i="entity"==e.type?Z.bl(e.clickable_area):e.position;return e=As.transform(e,$.translation(j.sub(t.box.origin,i),t.box.origin.level)),"entity"==e.type&&(e.clickable_area=Z.extend(e.clickable_area,.5)),this.value=e}}class Nd extends Bd{constructor(e,t){super(e,t),this.underlying=e,this.value=t}action(e={},...t){var i,n,o,r,s,a;const l=this.underlying.prototype.actions[null!==(i=e.index)&&void 0!==i?i:0],c=new Rd({name:null!==(o=null!==(n=e.name)&&void 0!==n?n:null==l?void 0:l[0])&&void 0!==o?o:"Unnamed Action",cursor:null!==(s=null!==(r=e.cursor)&&void 0!==r?r:null==l?void 0:l[1])&&void 0!==s?s:"generic",interactive_area:null!==(a=e.interactive_area)&&void 0!==a?a:void 0,movement:[]});return c.value.name,c.movement(...t),this.value.actions.push(c.value),this}}!function(e){e.from=function(e){const t={type:"entity",entity:{name:e.prototype.name,kind:"static"},clickable_area:Z.from({x:0,y:0,level:0},W.lift(j.add(e.prototype.size,{x:-1,y:-1}),0)),actions:[]};return new Nd(e,t)}}(Bd||(Bd={}));class jd{constructor(e){this.value=e}time(e){return this.value.time=e,this}restrict(e){return this.value.valid_from=e,this}fixed(e,t=!1){return this.value.fixed_target=t?{target:e,relative:!0}:{target:e},this.value.offset=void 0,this}offset(e){return this.value.offset=e,this.value.fixed_target=void 0,this}orientation(e){return this.value.orientation=e,this.value.forced_orientation=void 0,this}forcedOrientation(e,t=void 0){return this.value.orientation="forced",this.value.forced_orientation={dir:e,relative:t},this}done(){return this.value}}!function(e){function t(){return i({time:1})}function i(t){return new e(t)}e.init=t,e.move=i,e.offset=function(e){return t().offset(e)},e.fixed=function(e,i=!1){return t().fixed(e,i)}}(jd||(jd={}));var Fd=Dd,qd=Dd.rec,Ud=jd.offset,Hd=jd.fixed,Vd=di.span,$d=Dd.tileArea2;const Wd=Fd.choose({toHTML:e=>{switch(e.orientation){case void 0:return Vd("Default (Weird)");case"bymovement":return Vd("By Movement");case"toentitybefore":return Vd("To Entity Before Movement");case"toentityafter":return Vd("To Entity After Movement");case"keep":return Vd("Keep Previous Rotation");case"forced":return e.forced_orientation.relative?Vd(`Forced ${qr.toString(e.forced_orientation.dir)} [rel]`):Vd(`Forced ${qr.toString(e.forced_orientation.dir)}`)}}},[{},{orientation:"bymovement"},{orientation:"toentitybefore"},{orientation:"toentityafter"},{orientation:"keep"},...qr.all.flatMap((e=>[!0,!1].map((t=>({orientation:"forced",forced_orientation:{relative:t,dir:e}})))))]).default({}),Zd=Fd.list(Fd.rec({action:Fd.element("Action",Fd.action()),area:Fd.element("Area",Fd.tileArea(!0),!0),movements:Fd.element("Movements",Fd.list(Fd.rec({valid_from:Fd.element("Valid",Fd.tileArea(!0),!0),orientation:Fd.element("Orientation",Fd.either({simple:Fd.choose({toHTML:e=>c().text(e)},["bymovement","toentitybefore","toentityafter","keep","forced"]),forced:Fd.rec({dir:Fd.element("Direction",Fd.dir()),relative:Fd.element("Relative",Fd.bool())})}),!0),movement:Fd.element("Movement",Fd.either({offset:Fd.offset(),fixed:Fd.rec({area:Fd.element("Area",Fd.tileArea(!0)),origin_only:Fd.element("Origin only",Fd.bool())})})),time:Fd.element("Time",Fd.time())}),1))}),1),Gd=Fd.list(Fd.rec({action:Fd.element("Action",Fd.action()),area:Fd.element("Area",Fd.tileArea2(!0,!1),!1),movements:Fd.element("Movements",Fd.list(Fd.rec({valid_from:Fd.element("Valid",Fd.tileArea2(!0,!1),!1),orientation:Fd.element("Orientation",Wd,!1),movement:Fd.element("Movement",Fd.movement()),time:Fd.element("Time",Fd.time())}),1))}),1);function Kd(e,t,i,n,o,r){return new class extends Md{constructor(){super(e,t),this.per_loc_group_parameter=i,this.per_instance_parameter=n,this.instance_group_required=n&&o}apply(e,t){return r(e,t)}}}function Yd(e,t){0!=t.instance.rotation&&(e=As.transform(e,$.normalize(N.rotation((4-t.instance.rotation)%4))));const i="entity"==e.type?Z.bl(e.clickable_area):e.position;return"entity"==(e=As.transform(e,$.translation(j.sub(t.box.origin,i),t.box.origin.level-i.level))).type&&(e.clickable_area=Z.extend(e.clickable_area,.5)),e}const Jd=[Kd("west-facing-doors","Standard West Doors",null,null,!1,(async e=>{var t;return[Yd({type:"door",position:e.box.origin,direction:qr.west,name:null!==(t=e.prototype.name)&&void 0!==t?t:"Door"},e)]})),Kd("ignore","Ignore",null,null,!1,(async e=>[])),Kd("ladders","Ladders",Fd.rec({across:Fd.element("Across",Fd.bool()),single_side:Fd.element("Side",Fd.dir(),!0),up:Fd.element("Up",Fd.locAction(),!0),down:Fd.element("Down",Fd.locAction(),!0),top:Fd.element("Top/Bottom",Fd.rec({action:Fd.element("Action",Fd.locAction()),level:Fd.element("Floor",Fd.floor())}),!0)}),null,!1,(async(e,{per_loc:t})=>{const i=Bd.from(e),n=t.single_side&&t.across?j.scale(-2,qr.toVector(t.single_side)):{x:0,y:0},o=t.single_side?Vr.init({...qr.toVector(t.single_side),level:0}):void 0;return null!=t.up&&i.action({index:t.up.id,interactive_area:o},Ud({...n,level:1}).orientation("toentitybefore").time(3)),null!=t.down&&i.action({index:t.down.id,interactive_area:o},Ud({...n,level:-1}).orientation("toentitybefore").time(3)),null!=t.top&&i.action({index:t.top.action.id,interactive_area:o},Ud({...n,level:t.top.level-e.box.origin.level}).orientation("toentitybefore").time(3)),[i.finish()]})),Kd("simpleremotetransport","Remote",Fd.rec({action:Fd.element("Action",Fd.locAction()),time:Fd.element("Time",Fd.time().default(2)),area:Fd.element("Area",Fd.tileArea(!0),!0)}),Fd.rec({target:Fd.element("Target",Fd.tileArea(!1))}),!0,(async(e,{per_loc:t,per_instance:i})=>{var n;const o=Bd.from(e);return o.action({index:t.action.id,interactive_area:t.area},Hd(i.target).time(null!==(n=t.time)&&void 0!==n?n:2)),[o.finish()]})),Kd("simpleremotetransportlegacy","Remote (LEGACY)",Fd.rec({action:Fd.element("Action",Fd.locAction()),time:Fd.element("Time",Fd.time()),area:Fd.element("Area",Fd.tileArea(!0),!0)}),Fd.rec({target:Fd.element("Target",Fd.tileArea())}),!0,(async(e,{per_loc:t,per_instance:i})=>{var n;const o=Bd.from(e);return o.action({index:t.action.id,interactive_area:t.area},Hd(Vr.transform(i.target,e.getTransform())).time(null!==(n=t.time)&&void 0!==n?n:1)),[o.finish()]})).makeLegacy(),Kd("prototypecopylocnew","Prototype NEW",qd({actions:Fd.element("Actions",Gd)}),qd({actions:Fd.element("Actions",Gd)}),!1,(async(e,{per_loc:t,per_instance:i})=>{var n;const o=Bd.from(e);for(const r of[...t.actions,...null!==(n=null==i?void 0:i.actions)&&void 0!==n?n:[]])o.action({index:r.action.custom?null:r.action.loc.id,name:r.action.custom?r.action.custom.name:null,cursor:r.action.custom?r.action.custom.cursor:null,interactive_area:$d.translate(e,r.area)},...r.movements.map((t=>{var i;let n;if(t.movement,t.movement.fixed_target){const i=Vr.transform(t.movement.fixed_target.target,t.movement.fixed_target.relative?e.getTransform():$.identity());n=Hd(t.movement.fixed_target.origin_only?Vr.init(i.origin):i,t.movement.fixed_target.relative)}else n=Ud(t.movement.offset);return t.orientation&&("forced"!=t.orientation.orientation?n.orientation(t.orientation.orientation):n.forcedOrientation(t.orientation.forced_orientation.dir,!!t.orientation.forced_orientation.relative)),n.time(null!==(i=t.time)&&void 0!==i?i:3),t.valid_from&&n.restrict($d.translate(e,t.valid_from)),n})));return[o.finish()]})),Kd("prototypecopyloc","Prototype",qd({actions:Fd.element("Actions",Zd)}),qd({actions:Fd.element("Actions",Zd)}),!1,(async(e,{per_loc:t,per_instance:i})=>{var n;const o=Bd.from(e);for(const r of[...t.actions,...null!==(n=null==i?void 0:i.actions)&&void 0!==n?n:[]])o.action({index:r.action.custom?null:r.action.loc.id,name:r.action.custom?r.action.custom.name:null,cursor:r.action.custom?r.action.custom.cursor:null,interactive_area:r.area},...r.movements.map((t=>{var i;let n=null;if(t.movement.fixed){let i=t.movement.fixed.area;t.movement.fixed.origin_only&&(i=Vr.transform(i,e.getTransform()),i=Vr.init(i.origin),i=Vr.transform(i,e.getInverseTransform())),n=Hd(i,!0)}else t.movement.offset&&(n=Ud(t.movement.offset));return t.orientation&&(t.orientation.simple&&n.orientation(t.orientation.simple),t.orientation.forced&&n.forcedOrientation(t.orientation.forced.dir,!!t.orientation.forced.relative)),n.time(null!==(i=t.time)&&void 0!==i?i:3),t.valid_from&&n.restrict(t.valid_from),n})));return[o.finish()]})),Kd("prototypecopylocperinstancelegacy","(LEGACY) Prototype Per Instance",null,qd({actions:Fd.element("Actions",Fd.list(Fd.rec({action:Fd.element("Action",Fd.locAction()),area:Fd.element("Area",Fd.tileArea(),!0),movements:Fd.element("Movements",Fd.list(Fd.rec({valid_from:Fd.element("Valid",Fd.tileArea(),!0),orientation:Fd.element("Orientation",Fd.either({simple:Fd.choose({toHTML:e=>c().text(e)},["bymovement","toentitybefore","toentityafter","keep"]),forced:Fd.rec({dir:Fd.element("Direction",Fd.dir()),relative:Fd.element("Relative",Fd.bool())})}),!0),movement:Fd.element("Movement",Fd.either({offset:Fd.offset(),fixed:Fd.rec({area:Fd.element("Area",Fd.tileArea()),relative:Fd.element("Relative",Fd.bool()),origin_only:Fd.element("Origin only",Fd.bool())})})),time:Fd.element("Time",Fd.time())})))})))}),!0,(async(e,{per_instance:t})=>{const i=Bd.from(e);for(const n of t.actions)i.action({index:n.action.id,interactive_area:n.area},...n.movements.map((t=>{var i;let n=null;if(t.movement.fixed)if(t.movement.fixed.origin_only){let i=t.movement.fixed.area;t.movement.fixed.relative&&(i=Vr.transform(i,e.getTransform())),i=Vr.init(i.origin),t.movement.fixed.relative&&(i=Vr.transform(i,e.getInverseTransform())),n=Hd(i,t.movement.fixed.relative)}else n=Hd(t.movement.fixed.area,t.movement.fixed.relative);else t.movement.offset&&(n=Ud(t.movement.offset));return t.orientation&&(t.orientation.simple&&n.orientation(t.orientation.simple),t.orientation.forced&&n.forcedOrientation(t.orientation.forced.dir,!!t.orientation.forced.relative)),n.time(null!==(i=t.time)&&void 0!==i?i:3),t.valid_from&&n.restrict(t.valid_from),n})));return[i.finish()]})).makeLegacy()];var Xd,Qd;!function(e){e.getById=function(e){return Jd.find((t=>t.id==e))}}(Xd||(Xd={})),function(e){let t,i,n;!function(e){e.isLoc=function(e){return"loc"==e.id[0]},e.fromCache=function(e){var t,i;switch(e.type){case"npc":return{id:e.id,name:e.data.name,actions:[],raw:e.data,size:{x:1,y:1}};case"loc":return{id:e.id,name:e.data.name,actions:[],raw:e.data,size:{x:null!==(t=e.data.width)&&void 0!==t?t:1,y:null!==(i=e.data.length)&&void 0!==i?i:1}}}}}(t=e.Prototype||(e.Prototype={})),function(e){e.hash=function(e){return e[0]+":"+e[1]},e.equals=function(e,t){return e[0]==t[0]&&e[1]==t[1]}}(i=e.PrototypeID||(e.PrototypeID={})),function(e){e.combine=function(...e){const t={};return e.forEach((e=>e.forEach((e=>{const n=i.hash(e.id);t[n]?t[n].instances.push(...o.cloneDeep(e.instances)):t[n]=o.cloneDeep(e)})))),Object.values(t)}}(n=e.GroupedInstanceData||(e.GroupedInstanceData={}));class r{constructor(e,t){this.prototype=e,this.instance=t,this.box=Vr.init(this.instance.position,this.instance.rotation%2==0?this.prototype.size:{x:this.prototype.size.y,y:this.prototype.size.x})}protoId(){return this.prototype.id}isLoc(){return"loc"==this.prototype.id[0]}getTransform(){const e=N.rotation((4-this.instance.rotation)%4),t=F.from({x:0,y:0},j.transform(j.sub(this.prototype.size,{x:-1,y:-1}),e));return $.chain($.translation(j.sub(this.instance.position,F.bottomLeft(t)),this.instance.position.level),e)}getInverseTransform(){const e=N.rotation(this.instance.rotation%4),t=F.from({x:0,y:0},j.transform(j.sub(this.prototype.size,{x:-1,y:-1}),N.rotation((4-this.instance.rotation)%4)));return $.chain(e,$.translation(j.sub(F.bottomLeft(t),this.instance.position),-this.instance.position.level))}}e.PrototypeInstance=r;class s{constructor(e,i){this.data=e,this.lookup_table={loc:[],npc:[]},e.forEach((e=>{t.isLoc(e)?this.lookup_table.loc[e.id[1]]={prototype:e,data:i(e)}:this.lookup_table.npc[e.id[1]]={prototype:e,data:i(e)}}))}static simple(e){return new s(e,(()=>null))}getEntry(e){const t=this.lookup_table[e[0]][e[1]];return t||console.log(`Missing ${e[1]}`),t}lookup(e){return this.getEntry(e).prototype}resolve(e){const t=this.lookup(e.id);return new r(t,e)}set(e,t){const i=this.getEntry(e);i&&(i.data=t)}get(e){var t;return null===(t=this.getEntry(e))||void 0===t?void 0:t.data}}e.PrototypeIndex=s}(Qd||(Qd={}));var ep=Qd.Prototype,tp=di.vbox,ip=di.hboxl,np=di.inlineimg;class op{constructor(e,t){this.prepared_items=e.map((e=>({item:e,term:Xl.prepare(t(e))})))}do(e,t=void 0){return Xl.go(e,this.prepared_items,{key:"term",all:!0,threshold:-1e4,limit:t}).map((e=>e.obj.item))}}class rp extends $s{constructor(e){super(),this.header(rp.renderName(e)),this.named("Id",e.id[1].toString()),this.named("Size",`${e.size.x}x${e.size.y}`),this.named("Actions",tp(...e.actions.map((e=>ip(np(Zs.meta(e[1]).icon_url),di.space(),e[0],di.space(),`(${e[2]})`)))))}}!function(e){var t=di.staticentity,i=di.npc;e.renderName=function(e){return ep.isLoc(e)?t(e.name):i(e.name)}}(rp||(rp={}));class sp extends rp{constructor(e){super(e.prototype),this.named("Origin",W.toString(e.instance.position)),this.named("Rotation",e.instance.rotation.toString())}}class ap extends si{constructor(e,t,i){super(),this.filter=t,this.click_options=i,this.search_field=(new Zl).setPlaceholder("Search...").onPreview((e=>this.update(e))).appendTo(this),this.result_area=c().appendTo(this).css("max-height","600px").css("overflow-y","scroll"),this.setPrototypes(e)}setPrototypes(e){this.index=new op(e,(e=>e.name+e.actions.map((e=>e[0])).join())),this.update(this.search_field.get())}update(e){const t=this.index.do(e,200);this.result_area.empty(),t.forEach((e=>{new ap.PrototypeSearchResult(e).on("click",(t=>{new wi({type:"submenu",children:this.click_options(e),text:()=>rp.renderName(e)}).showFromEvent(t)})).appendTo(this.result_area)}))}}!function(e){var t=di.hboxl;e.PrototypeSearchResult=class extends si{constructor(e){super(),this.addClass("ctr-clickable"),this.append(t(rp.renderName(e),di.space(),`(${e.size.x}x${e.size.y})`)),this.addTippy(new rp(e),{placement:"bottom"})}}}(ap||(ap={}));var lp=Qd.PrototypeInstance;class cp{cached(){const e=this;return new class extends cp{constructor(){super(...arguments),this.lookup_table={loc:[],npc:[]}}applyInstance(t){return e.applyInstance(t)}applyPrototype(t){return null==this.lookup_table[t.id[0]][t.id[1]]?this.lookup_table[t.id[0]][t.id[1]]=e.applyPrototype(t):this.lookup_table[t.id[0]][t.id[1]]}}}}!function(e){function t(t){return new class extends e{applyInstance(e){return!0}applyPrototype(e){var i,n;return!((null===(i=t.names)||void 0===i?void 0:i.length)>0&&!t.names.some((t=>e.name.toLowerCase().includes(t)))||(null===(n=t.action_names)||void 0===n?void 0:n.length)>0&&!t.action_names.some((t=>e.actions.some((e=>e[0].toLowerCase().includes(t)))))||t.type&&t.type!=e.id[0])}}}e.none=function(){return new class extends e{applyPrototype(e){return!0}applyInstance(e){return!0}}},e.forConfig=t,e.pre_filter=t({action_names:["open","use","enter","climb","crawl","scale","pass","jump","leave","teleport","descend","step","walk","cross","exit","squeeze","stand","ascend","top","bottom","descend","across","swing","slash","pray","operate","pull","dig","push","grapple","board","swim","through","past","attune","traverse","vault","slide","merge","activate","charge","chop-down"],names:[],type:void 0}).cached()}(cp||(cp={}));class up{constructor(e){this.data=e,this.created=pi(),this.removed=pi()}get(){return this.data}static fromList(e){return new up(e)}}!function(e){class t extends e{constructor(e,i){super([]),this.index=e,this.data=i.flatMap((i=>{const n=e.lookup(i.id);return n?[new t.MutableInstance(n,i,this)]:[]}))}create(e){const i=this.index.lookup(e.id);if(i){const n=new t.MutableInstance(i,e,this);this.data.push(n),this.created.trigger(n)}}remove(e){const t=this.data.indexOf(e);t>=0&&(this.data.splice(t,1),this.removed.trigger(e))}}e.Mutable=t,function(e){e.MutableInstance=class extends lp{constructor(e,t,i){super(e,t),this.source=i}deleteInstance(){this.source.remove(this)}}}(t=e.Mutable||(e.Mutable={}))}(up||(up={}));class hp extends Ci{constructor(e,t){super(),this.instance=e,this.parsing_table=t,this.zoom_sensitivity_layers=new ki([{min:-100,hidden_here:!0,value:{scale:.25}},{min:2,value:{scale:.5}},{min:5,value:{scale:1}}]),this.floor_sensitivity_layers=Ti.single(e.box.origin.level),this.setTooltip((()=>new sp(this.instance)))}async render_implementation(e){const t=this.parsing_table&&this.parsing_table.getPairing(this.instance),i=this.rendered_with_parser=!!(null==t?void 0:t.group),n=(i&&(!t.group.parser.instance_group_required||t.instance_group),this.instance.isLoc()?"cyan":"yellow"),o=i?"green":"orange",r=is(this.instance.box).setStyle({fillColor:this.parsing_table?o:n,color:this.parsing_table?o:n,stroke:!0}).addTo(this);let s;const l=F.extend(Vr.toRect(this.instance.box),.5);switch(this.instance.instance.rotation){case 0:s=[F.bottomLeft(l),F.topLeft(l)];break;case 1:s=[F.topLeft(l),F.topRight(l)];break;case 2:s=[F.topRight(l),F.bottomRight(l)];break;case 3:s=[F.bottomRight(l),F.bottomLeft(l)]}return a.polyline(s.map(j.toLatLong),{color:"red"}).addTo(this),r.getElement()}bounds(){return Vr.toRect(this.instance.box)}async contextMenu(e){return{type:"submenu",text:()=>rp.renderName(this.instance.prototype),children:[]}}checkParserRedraw(){this.rendered_props.render_at_all&&(this.parsing_table&&!!this.parsing_table.getPairing(this.instance).group)!=this.rendered_with_parser&&this.render(!0)}}class dp extends os{constructor(e){super(),this.parsing_table=e,this.filter=cp.none(),this.lookup_table={loc:[],npc:[]},this.parsing_table.version.subscribe((()=>{this.entity_quadtree.forEachVisible((e=>{e instanceof hp&&e.checkParserRedraw()}))}))}addDataSource(...e){return this.rendering.lock(),e.forEach((e=>{e.get().forEach((e=>this.create(e))),e.created.on((e=>{this.create(e)})).bindTo(this.handler_pool),e.removed.on((e=>{this.delete(e)}))})),this.rendering.unlock(),this.updateFilter(),this}entry(e){let t=this.lookup_table[e.id[0]][e.id[1]];return t||(t=this.lookup_table[e.id[0]][e.id[1]]={prototype:e,entities:[]}),t}delete(e){let t=this.entry(e.prototype);const i=t.entities.findIndex((t=>t.instance==e));i>=0&&(t.entities[i].remove(),t.entities.splice(i,1))}create(e){this.entry(e.prototype).entities.push(new hp(e,this.parsing_table).setVisible(this.filter.applyPrototype(e.prototype)&&this.filter.applyInstance(e)).addTo(this))}updateFilter(){this.lookup_table.loc.forEach((e=>{if(!e)return;const t=this.filter.applyPrototype(e.prototype);e.entities.forEach((e=>{const i=t&&this.filter.applyInstance(e.instance);e.setVisible(i)}))})),this.lookup_table.npc.forEach((e=>{if(!e)return;const t=this.filter.applyPrototype(e.prototype);e.entities.forEach((e=>{const i=t&&this.filter.applyInstance(e.instance);e.setVisible(i)}))}))}setFilter(e){return this.filter=e,this.updateFilter(),this}}var pp=Qd.PrototypeIndex,gp=Qd.PrototypeID;class mp{constructor(e,t){this.data=t,this.version=mi(t.version),this.loc_index=new pp(e.data,(()=>null)),this.data.associations.forEach((e=>{e.loc_ids.forEach((t=>{this.loc_index.set(t,e)}))})),this.instanceDataSource=new up.Mutable(e,this.data.custom_instances),this.instanceDataSource.created.on((e=>{this.data.custom_instances.push(e.instance),this.bumpVersion()})),this.instanceDataSource.removed.on((e=>{const t=this.data.custom_instances.indexOf(e.instance);t>=0&&(this.data.custom_instances.splice(t,1),this.bumpVersion())}))}setPairing(e,t){return(()=>{var i,n,o,r;let s=this.loc_index.get(e.prototype.id);if(s&&s.group_id!=(null===(i=t.group)||void 0===i?void 0:i.id)&&(s.loc_ids.splice(s.loc_ids.findIndex((t=>gp.equals(t,e.prototype.id))),1),s.loc_ids.length<0&&this.data.associations.splice(this.data.associations.indexOf(s),1),this.loc_index.set(e.protoId(),s=void 0)),!t.group)return;if(!s){const i=this.data.associations.find((e=>e.group_id==t.group.id));i?(i.loc_ids.push(e.protoId()),s=i):this.data.associations.push(s={group_id:this.data.version,loc_ids:[e.protoId()],per_group_arg:void 0,group_name:"",instance_groups:[],parser_id:""})}t.group.id=s.group_id,this.loc_index.set(e.protoId(),s),s.parser_id=t.group.parser.id,s.per_group_arg=t.group.argument,s.group_name=t.group.name;let a=null===(n=s.instance_groups)||void 0===n?void 0:n.find((t=>t.instances.some((t=>gp.equals(t.loc,e.protoId())&&W.eq(t.origin,e.box.origin)))));if(a&&a.id!=(null===(o=t.instance_group)||void 0===o?void 0:o.id)){const t=a.instances.findIndex((t=>gp.equals(t.loc,e.protoId())&&W.eq(t.origin,e.box.origin)));a.instances.splice(t,1),s.instance_groups=s.instance_groups.filter((e=>e.instances.length>0)),a=void 0}if(t.instance_group){if(!a){const i=null===(r=s.instance_groups)||void 0===r?void 0:r.find((e=>e.id==t.instance_group.id));i?(i.instances.push({loc:e.protoId(),origin:e.box.origin}),a=i):(s.instance_groups||(s.instance_groups=[]),s.instance_groups.push(a={id:this.data.version,name:"",instances:[{loc:e.protoId(),origin:e.box.origin}],per_instance_argument:void 0}))}t.instance_group.id=a.id,a.per_instance_argument=t.instance_group.argument,a.name=t.instance_group.name}})(),this.bumpVersion(),t}reset(){this.data.version=-1,this.data.associations=[],this.bumpVersion()}getGroupForLoc(e){return this.loc_index[e]}getGroup(e){return this.data.associations.find((t=>t.group_id==e))}getPairing(e){var t;const i=this.loc_index.get(e.protoId());if(!i)return{group:null,instance_group:null};const n=null===(t=null==i?void 0:i.instance_groups)||void 0===t?void 0:t.find((t=>t.instances.some((t=>gp.equals(t.loc,e.protoId())&&W.eq(t.origin,e.box.origin)))));return{group:i?{parser:Jd.find((e=>e.id==i.parser_id)),id:i.group_id,name:i.group_name,argument:i.per_group_arg}:null,instance_group:n?{id:n.id,name:n.name,argument:n.per_instance_argument}:null}}bumpVersion(){this.data.version+=1,this.version.set(this.data.version)}}var fp=di.hbox,yp=di.vbox;class vp extends ds{constructor(){super({position:"bottom-right",type:"floating"},c()),this.setContent(new Fs("Navigation").setContent(yp(fp(this.chunk_in=(new Zl).onCommit((()=>this.commitChunk())),new yl("Chunk").css("width","50px").onClick((e=>this.commitChunk()))),fp(this.coords_in=(new Zl).onCommit((e=>this.commitCoords())),new yl("Coords").css("width","50px").onClick((e=>this.commitCoords()))))))}commitChunk(){var e;const t=null!==(e=this.chunk_in.get())&&void 0!==e?e:"";if(!t)return;let i=t.split(new RegExp("[^0-9]")).map((e=>e.trim())).filter((e=>e.length>0)).map((e=>Number(e)));i.length>=2&&this.getMap().fitView(Z.lift(F.from({x:64*i[0],y:64*i[1]},{x:64*i[0]+63,y:64*i[1]+63}),0)),this.chunk_in.setValue("")}commitCoords(){var e;const t=null!==(e=this.coords_in.get())&&void 0!==e?e:"";if(!t)return;let i=t.split(new RegExp("[^0-9]")).map((e=>e.trim())).filter((e=>e.length>0)).map((e=>Number(e)));i.length>=2&&this.getMap().fitView(Z.lift(F.from({x:i[0],y:i[1]}),0)),this.coords_in.setValue("")}}var _p,xp=di.img;class wp extends si{constructor(e,t,i){var n;super(),this.loc=e,this.parsing_table=t,this.pairing=i,i||(this.pairing={group:null,instance_group:null}),this.map=(new Ss).css("width","100%").css("height","400px").appendTo(this),(new vp).addTo(this.map.main_layer),new hp(this.loc,null).addTo(this.map.main_layer),a.marker(j.toLatLong(Z.center(Vr.toRect(this.loc.box),!1)),{icon:a.divIcon({iconSize:[33,33],iconAnchor:[16,16],className:"",html:xp("./assets/icons/alignedcompass.png").css("rotate",90*(null!==(n=this.loc.instance.rotation)&&void 0!==n?n:0)+"deg").css("scale","0.9").raw()})}).addTo(this.map.main_layer),this.properties=(new $s).css2({"margin-left":"25%","margin-right":"25%"}),this.renderProps()}center_map(){this.map.map.fitView(Z.extend(Vr.toRect(this.loc.box),3),{maxZoom:20})}renderProps(){var e,t,i;this.properties.empty();const n=this.properties;if(n.header(new ma("Pair with LOC-group").setValue(!!this.pairing.group).onCommit((e=>{e?this.pairing.group={id:-1,name:"",parser:Xd.getById("ignore"),argument:void 0}:(this.pairing.group=void 0,this.pairing.instance_group=void 0),this.renderProps()}))),this.pairing.group){if(n.named("Group",new Ql({type_class:{toHTML:e=>e?0==e.group_name.length?c().text("No name").css("font-style","italic"):c().text(e.group_name):c().text("Create new group")},search_term:e=>e?e.group_name:"Create new group"},[null].concat(this.parsing_table.data.associations.filter((e=>e.group_name.length>0)))).setValue(this.parsing_table.getGroup(this.pairing.group.id)).onSelection((e=>{e?(this.pairing.group.id=e.group_id,this.pairing.group.name=e.group_name,this.pairing.group.parser=Xd.getById(e.parser_id),this.pairing.group.argument=e.per_group_arg):(this.pairing.group.id=-1,this.pairing.group.name="",this.pairing.group.parser=Xd.getById("ignore"),this.pairing.group.argument=void 0),this.renderProps()}))),n.named("Parser",new Hl({type_class:{toHTML:e=>c().text(e?e.name:"None")}},Jd.filter((e=>!e.legacy))).setValue(this.pairing.group.parser).onSelection((e=>{this.pairing.group.parser=e,this.pairing.group.argument=void 0,e.per_loc_group_parameter&&(this.pairing.group.argument=e.per_loc_group_parameter.getDefault(this.loc)),this.renderProps()}))),n.named("Group Name",(new Zl).setValue(this.pairing.group.name).onCommit((e=>{this.pairing.group.name=e}))),this.pairing.group.parser.per_loc_group_parameter&&n.header("Loc "),this.pairing.group.parser.per_loc_group_parameter){n.header("Group Parameter");const e=this.pairing.group.parser.per_loc_group_parameter.renderForm(0,this.loc,this.map).set(this.pairing.group.argument).onChange((e=>this.pairing.group.argument=e));n.row(e.control),n.row(e.additional)}if(this.pairing.group.parser.per_instance_parameter&&(n.header(new ma("Pair with Instance Group").setValue(!!this.pairing.instance_group).onCommit((e=>{var t;this.pairing.instance_group=e?{id:-1,name:"",argument:null===(t=this.pairing.group.parser.per_instance_parameter)||void 0===t?void 0:t.getDefault(this.loc)}:void 0,this.renderProps()}))),this.pairing.instance_group)){const o=this.parsing_table.getGroup(this.pairing.group.id);if(n.named("Group",new Ql({type_class:{toHTML:e=>e?0==e.name.length?c().text("No name").css("font-style","italic"):c().text(e.name):c().text("Create new instance group")},search_term:e=>e?e.name:"Create new group"},[null].concat((null!==(e=null==o?void 0:o.instance_groups)&&void 0!==e?e:[]).filter((e=>e.name)))).setValue(null!==(i=null===(t=null==o?void 0:o.instance_groups)||void 0===t?void 0:t.find((e=>e.id==this.pairing.instance_group.id)))&&void 0!==i?i:null).onSelection((e=>{var t;e?(this.pairing.instance_group.id=e.id,this.pairing.instance_group.name=e.name,this.pairing.instance_group.argument=e.per_instance_argument):(this.pairing.instance_group.id=-1,this.pairing.instance_group.name="",this.pairing.instance_group.argument=null===(t=this.pairing.group.parser.per_instance_parameter)||void 0===t?void 0:t.getDefault(this.loc)),this.renderProps()}))),n.named("IGroup Name",(new Zl).setValue(this.pairing.instance_group.name).onCommit((e=>{this.pairing.instance_group.name=e}))),this.pairing.group.parser.per_instance_parameter){const e=this.pairing.group.parser.per_instance_parameter.renderForm(0,this.loc,this.map).set(this.pairing.instance_group.argument).onChange((e=>this.pairing.instance_group.argument=e));n.row(e.control),n.row(e.additional)}}}n.appendTo(this)}get(){return this.pairing}}class bp extends Il{constructor(e,t,i){super({size:"large",fixed:!0,disable_close_button:!0}),this.loc=e,this.parsing_table=t,this.existing_pairing=i,this.title.set("Edit Parser Pairing"),this.shown.on((()=>{this.edit.center_map()}))}async show(){return super.show()}render(){super.render(),this.edit=new wp(this.loc,this.parsing_table,this.existing_pairing).appendTo(this.body)}getButtons(){return[new Dl("Cancel","neutral").onClick((()=>this.confirm({type:"cancelled"}))),new Dl("Save","confirm").onClick((()=>this.confirm({type:"saved",pairing:this.edit.get()})))]}getValueForCancel(){return{type:"cancelled",pairing:this.edit.get()}}}class kp extends pa{constructor(){super(),this.storage=new e.Variable("devutility/locfilter",(()=>({}))),this.setValue(this.storage.get()),this.onCommit((e=>this.storage.set(e)))}update(e){const t=o.cloneDeep(this.get());e(t),this.commit(t)}render(){this.empty();const e=this.get(),t=new $s;t.named("Name",(new Zl).setValue(e.names?e.names.join(";"):"").onCommit((e=>{const t=e.split(";").map((e=>e.trim().toLowerCase())).filter((e=>e.length>0));this.update((e=>e.names=t))}))),t.named("Action",(new Zl).setValue(e.action_names?e.action_names.join(";"):"").onCommit((e=>{const t=e.split(";").map((e=>e.trim().toLowerCase())).filter((e=>e.length>0));this.update((e=>e.action_names=t))}))),this.append(t)}}!function(e){var t=Qd.PrototypeIndex,i=Qd.PrototypeID;e.applyParsing=async function(e,n,o,r){var s,a,l;let c=[];const u=new t(n,(()=>[]));[o,r.instanceDataSource].forEach((e=>e.get().forEach((e=>u.get(e.protoId()).push(e)))));for(const t of r.data.associations){const n=e.find((e=>e.id==t.parser_id));if(!n)return void console.error(`Parser ${t.parser_id} is not defined!`);for(const e of t.loc_ids){const o=null!==(s=u.get(e))&&void 0!==s?s:[];0==o.length&&console.error(`Zero instances returned for loc ${e}!`);for(const r of o){const o=n.per_instance_parameter?null===(l=null===(a=t.instance_groups)||void 0===a?void 0:a.find((t=>t.instances.some((t=>i.equals(t.loc,e)&&W.eq(t.origin,r.box.origin))))))||void 0===l?void 0:l.per_instance_argument:void 0;if(!n.instance_group_required||void 0!==o)try{const e=await n.apply(r,{per_loc:t.per_group_arg,per_instance:o});c.push(...e)}catch(e){console.error(`Parser ${t.parser_id} has thrown an exception!`),console.log(e)}}}}return c}}(_p||(_p={}));var Tp=B.cleanedJSON,Sp=Qd.PrototypeIndex,Cp=Qd.PrototypeInstance,Ep=Qd.Prototype,Ap=cp.pre_filter;class zp{constructor(t){this.table=t,this.last_used_groups=new e.Variable("devutility/locparsing/recentgroups",(()=>[]))}use(e){this.last_used_groups.set([e].concat(this.last_used_groups.get().filter((t=>t!=e))).slice(0,5))}get(){return this.last_used_groups.get().map((e=>this.table.getGroup(e))).filter((e=>!!e&&e.group_name.length>0))}}class Lp extends Us{constructor(e){super({preview_render:t=>new hp(new Cp(e,t),null).setInteractive(!1)}),this.prototype=e,this.rotation=0,this.last_hover=null}get(e){return Ep.isLoc(this.prototype),{id:this.prototype.id,position:e,rotation:this.rotation}}eventKeyDown(e){e.onPre((()=>{if("r"==e.original.key.toLowerCase()){const t=e.original.shiftKey?-1:1;this.rotation=(this.rotation+4+t)%4,this.preview(this.get(this.last_hover))}}))}eventHover(e){e.onPre((()=>{this.last_hover=e.tile(),this.preview(this.get(e.tile()))}))}eventClick(e){e.onPre((()=>{this.commit(this.get(e.tile()))}))}}class Pp extends os{constructor(){super(),this.guard=(new ms).setDefaultLayer(this),this.local_store=Xc.instance().variable("devutility/locparsing/parserassociations"),new ds({type:"floating",position:"top-right"},this.filter_control=(new kp).onCommit((e=>this.loc_layer.setFilter(cp.forConfig(e))))).addTo(this),new ds({type:"floating",position:"left-top"},new Fs("Prototype Explorer").setContent(this.prototype_explorer=new ap([],cp.none(),(e=>[{type:"basic",handler:()=>{this.guard.set(new Lp(e).onCommit((e=>{this.parsing_table.instanceDataSource.create(e)})))},text:"Place on map"}])))).addTo(this),new ds({type:"gapless",position:"bottom-center"},c()).setContent((new Ll).buttons(new yl("Export").onClick((()=>{new mc(Tp(this.parsing_table.data)).show()})),new yl("Delete local table").onClick((async()=>{await new ac({body:"Do you really want to delete local parsing associations?",options:[{value:!1,kind:"neutral",text:"Cancel"},{value:!0,kind:"cancel",text:"Delete"}]}).do()&&this.parsing_table.reset()})),new yl("Apply parsers").onClick((async()=>{const e=await _p.applyParsing(Jd,(await this.prototypes).data,this.instance_datasource_cache,this.parsing_table);e.push({type:"entity",entity:{name:"Fallen palm tree",kind:"static"},clickable_area:{topleft:{x:3338.5,y:3242.5},botright:{x:3339.5,y:3241.5},level:0},actions:[{cursor:"agility",name:"Run across",movement:[{offset:{x:6,y:0,level:0},orientation:"bymovement",time:5}]}]},{type:"entity",entity:{name:"Rope",kind:"static"},clickable_area:{topleft:{x:2446.5,y:3171.5},botright:{x:2447.5,y:3170.5},level:0},actions:[{name:"Climb",cursor:"agility",movement:[{fixed_target:{target:{origin:{x:2443,y:3164,level:0}}},orientation:"toentitybefore",time:3}]}]},{type:"entity",entity:{name:"Mysterious entrance",kind:"static"},clickable_area:{topleft:{x:3810.5,y:3529.5},botright:{x:3812.5,y:3527.5},level:0},actions:[{name:"Enter",cursor:"enter",movement:[{fixed_target:{target:{origin:{x:2292,y:5971,level:0}}},orientation:"toentitybefore",time:5}]}]},{type:"entity",entity:{name:"Strange bloodied stones",kind:"static"},clickable_area:{topleft:{x:3559.5,y:9782.5},botright:{x:3562.5,y:9779.5},level:0},actions:[{cursor:"generic",name:"Enter",movement:[{time:1,fixed_target:{target:{origin:{x:2467,y:4889,level:1}}}}]}]},{type:"entity",entity:{name:"Tunnel",kind:"static"},clickable_area:{topleft:{x:2467.5,y:4209.5},botright:{x:2469.5,y:4208.5},level:0},actions:[{cursor:"generic",name:"Climb-into",movement:[{time:3,fixed_target:{target:{origin:{x:2472,y:3027,level:0}}}}]}]},{type:"entity",entity:{name:"Bridge",kind:"static"},clickable_area:{topleft:{x:3751.5,y:2927.5},botright:{x:3753.5,y:2925.5},level:0},actions:[{cursor:"agility",name:"Walk-across",movement:[{valid_from:{origin:{x:3754,y:2926,level:0},size:{x:1,y:2}},offset:{x:-3,y:0,level:0},orientation:"bymovement",time:4},{valid_from:{origin:{x:3751,y:2926,level:0},size:{x:1,y:2}},offset:{x:3,y:0,level:0},orientation:"bymovement",time:4}]}]},{type:"entity",entity:{name:"Bridge",kind:"static"},clickable_area:{topleft:{x:3738.5,y:2939.5},botright:{x:3740.5,y:2937.5},level:0},actions:[{cursor:"agility",name:"Walk-across",movement:[{valid_from:{origin:{x:3739,y:2940,level:0},size:{x:2,y:1}},offset:{x:0,y:-3,level:0},orientation:"bymovement",time:4},{valid_from:{origin:{x:3739,y:2937,level:0},size:{x:2,y:1}},offset:{x:0,y:3,level:0},orientation:"bymovement",time:4}]}]}),new mc(Tp(e),`Parsed ${e.length} transports.`).show()})))).addTo(this),this.init()}async init(){var e,t,i;this.prototypes=fetch("rscache/prototypes.json").then((async e=>Sp.simple(await e.json()))),this.prototypes.then((e=>this.prototype_explorer.setPrototypes(e.data)));const n=fetch("rscache/prototype_instances.json").then((async e=>await e.json()));let o=await this.local_store.get(),r=await(await fetch("map/parsing_associations.json")).json().catch((()=>{}));this.repo_version_number=null!==(e=null==r?void 0:r.version)&&void 0!==e?e:-1;let s={version:0,custom_instances:[],associations:[]};(null!==(t=null==o?void 0:o.version)&&void 0!==t?t:-1)>s.version&&(s=o),(null!==(i=null==r?void 0:r.version)&&void 0!==i?i:-1)>s.version&&(s=r),this.parsing_table=new mp(await this.prototypes,s),this.loc_layer=new dp(this.parsing_table).setFilter(cp.forConfig(this.filter_control.get())).addTo(this);const a=await this.prototypes;this.loc_layer.addDataSource(this.instance_datasource_cache=up.fromList((await n).map((e=>a.resolve(e))).filter((e=>Ap.applyPrototype(e.prototype))))),this.recents=new zp(this.parsing_table),this.parsing_table.version.subscribe((async()=>{await this.local_store.set(this.parsing_table.data)})),this.loc_layer.addDataSource(this.parsing_table.instanceDataSource)}commitPairing(e,t){const i=this.parsing_table.setPairing(e,t);i.group&&""!=i.group.name&&this.recents.use(i.group.id)}eventContextMenu(e){e.onPre((()=>{if(e.active_entity instanceof hp){const t=e.active_entity.instance,i=this.parsing_table.getPairing(t),n=this.recents.get();e.addForEntity({type:"basic",text:"Edit pairing",handler:async()=>{let e=await new bp(t,this.parsing_table,i).do();"saved"==e.type&&this.commitPairing(t,e.pairing)}}),this.parsing_table.getPairing(t).group?e.addForEntity({type:"basic",text:"Remove pairing",handler:()=>this.commitPairing(t,{group:null,instance_group:null})}):n.forEach((i=>{e.addForEntity({type:"basic",text:`Pair with '${i.group_name}'`,handler:async()=>{const e={group:{parser:Xd.getById(i.parser_id),id:i.group_id,name:i.group_name,argument:i.per_group_arg},instance_group:void 0};if(e.group.parser.instance_group_required){let i=await new bp(t,this.parsing_table,e).do();"saved"==i.type&&this.commitPairing(t,i.pairing)}else this.commitPairing(t,e)}})}))}if(e.active_entity instanceof hp){const t=e.active_entity.instance;t instanceof up.Mutable.MutableInstance&&e.addForEntity({type:"basic",text:"Delete Instance",handler:async()=>{t.deleteInstance()}})}}))}}var Mp,Ip=di.vbox,Op=di.hbox,Dp=di.spacer,Rp=B.cleanedJSON,Bp=uc.notification;class Np extends te{constructor(){super({intervals:[{min_zoom:-1/0,interval:64}],lineStyle:{stroke:!0,weight:2,color:"white",fill:!1}})}onRemove(e){return super.onRemove(e),this.clearLayers(),this}constructLines(e,t){super.constructLines(e,t);let i={x:Math.max(0,Math.floor(e.getWest()/t)),y:Math.max(0,Math.floor(e.getSouth()/t))},n=Math.min(99,Math.ceil(e.getEast()/t)),o=Math.min(199,Math.ceil(e.getNorth()/t));for(let e=i.x;e<=n;e++)for(let t=i.y;t<=o;t++)a.marker([64*t+31.5,64*e+31.5],{icon:a.divIcon({iconSize:[100,40],html:`${e}|${t}`,className:"ctr-map-utility-chunk-index"})}).addTo(this)}}class jp extends ds{constructor(){super({type:"gapless",position:"top-left"},c().css("padding","2px"))}eventHover(e){e.onPre((()=>{this.content.text(W.toString(e.tile()))}))}}class Fp extends ds{constructor(t){super({type:"floating",position:"top-right"},c()),this.layers=t,this.view_storage=new e.Variable("devutility/activelayers",(()=>[])),this.view_storage.get(),this.data=new Array(t.length),this.data=t.map(((e,t)=>({persistence_id:e.persistence_id,layer:null,checkbox:new ma(e.name).onCommit((i=>{var n;const o=this.data[t];if(null===(n=o.layer)||void 0===n||n.remove(),o.layer=null,e.persistence_id)if(i){let t=this.view_storage.get();t.includes(e.persistence_id)||t.push(e.persistence_id),this.view_storage.set(t)}else this.view_storage.set(this.view_storage.get().filter((t=>t!=e.persistence_id)));i&&(o.layer=e.constructor().addTo(this))}))}))),this.setContent(Ip(...this.data.map((e=>e.checkbox))))}loadPersistence(){const e=this.view_storage.get();return this.data.forEach((t=>{t.persistence_id&&t.checkbox.setValue(e.includes(t.persistence_id))})),this}}class qp extends os{constructor(e){super(),this.guard=e;let t=new Fs("Utility");t.body.append(Ip(new Da([new Da.ActionBarButton("assets/icons/cursor_generic.png",(()=>{this.startSelectTile()})),new Da.ActionBarButton("assets/icons/cursor_use.png",(()=>{this.startSelectArea()})),new Da.ActionBarButton("assets/icons/cursor_talk.png",(()=>{this.guard.set(new fd("")).onCommit((e=>{this.setLayer(is(e.area)),this.setValue({range:e.area})}))})),new Da.ActionBarButton("assets/icons/cursor_pray.png",(()=>{this.guard.set(new Cc([],!0)).onCommit((e=>{this.setValue(Vr.fromTiles(e))}))}))]),Op(this.output=c().css2({"max-width":"250px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}),Dp(),new yl("Copy").onClick((()=>{this.value&&(navigator.clipboard.writeText(this.value),Bp("Copied").show())}))))),this.add(new ds({type:"gapless",position:"bottom-center"},t))}startSelectTile(){let e=new Ma;e.add(new qs({name:"Select tile",cancel_handler:()=>e.cancel()}).setText("Click a tile")),this.guard.set(e.onCommit((e=>{this.setLayer(Qr(e)),this.setValue(e)})))}startSelectArea(){this.guard.set(new fd("")).onCommit((e=>{this.setLayer(is(e.area)),this.setValue(Vr.toRect(e.area))}))}eventKeyDown(e){e.onPost((()=>{"t"==e.original.key.toLowerCase()?this.startSelectTile():"a"==e.original.key.toLowerCase()&&this.startSelectArea()}))}setLayer(e){this.preview&&(this.preview.remove(),this.preview=null),this.preview=e.addTo(this)}setValue(e){this.value=Rp(e),this.value&&navigator.clipboard.writeText(this.value),this.output.text(this.value)}}class Up extends os{constructor(){super(),this.view_storage=new e.Variable("devutility/viewstore",(()=>{})),this.add(new jp),this.guard=(new ms).setDefaultLayer(this),new Fp([{persistence_id:"chunks",name:"Chunks",constructor:()=>new Np},{persistence_id:"geometry",name:"Geometry",constructor:()=>new qp(this.guard)},{persistence_id:"navigation",name:"Navigation",constructor:()=>new vp},{persistence_id:"locparsing",name:"Loc Parsing",constructor:()=>new Pp}]).addTo(this).loadPersistence()}onAdd(e){super.onAdd(e);const t=this.view_storage.get();return(null==t?void 0:t.center)&&this.map.setView(t.center,t.zoom),null!=(null==t?void 0:t.floor)&&this.map.floor.set(t.floor),this}eventViewChanged(e){super.eventViewChanged(e),e.onPre((()=>{this.view_storage.set({floor:this.map.floor.value(),center:this.map.getCenter(),zoom:this.map.getZoom()})}))}}class Hp extends Ls{constructor(e){super(),this.app=e,this.layer=null}begin(){this.layer=new Up,this.app.map.addGameLayer(this.layer)}end(){this.layer.remove(),this.layer.clearLayers()}}class Vp{constructor(e){this.collapsed_event=pi(),this.expanded_event=pi(),this.collapsed=mi(e)}isCollapsed(){return this.collapsed.value()}isExpanded(){return!this.collapsed.value()}bindToClickable(e){return e.on("click",(e=>{e.stopPropagation(),this.toggle()})),this}toggle(){return this.collapsed.value()?this.expand():this.collapse(),this}expand(){return this.collapsed.value()?(this.expanded_event.trigger(void 0),this.collapsed.set(!1),this):this}collapse(){return this.collapsed.value()||(this.collapsed_event.trigger(void 0),this.collapsed.set(!0)),this}onCollapse(e){return this.collapsed_event.on(e),this}setCollapsed(e){return this.isCollapsed()?e||this.expand():e&&this.collapse(),this}onExpansion(e){return this.expanded_event.on(e),this}state(){return this.collapsed}onChange(e,t=!1){return this.state().subscribe(e,t),this}}!function(e){function t(t){let i=new e(!!t.starts_collapsed).onCollapse((()=>t.onCollapse(t.target))).onExpansion((()=>t.onExpand(t.target)));return t.collapse_button&&i.bindToClickable(t.collapse_button),t.target&&t.starts_collapsed&&t.target.container.css({display:"none"}),i}e.create=t,e.horizontal=function(e){return t({target:e.target,starts_collapsed:e.starts_collapsed,onExpand:t=>t.container.animate({width:"show"},e.duration||300),onCollapse:t=>t.container.animate({width:"hide"},e.duration||300)})},e.vertical=function(e){return t({target:e.target,starts_collapsed:e.starts_collapsed,onExpand:t=>t.container.animate({height:"show"},e.duration||300),onCollapse:t=>t.container.animate({height:"hide"},e.duration||300)})}}(Vp||(Vp={}));class $p{constructor(e,t,i={}){this.default_options=i,this.index=e.map((e=>({value:e,prepared:Xl.prepare(t(e))})))}do(e,t={}){return Xl.go(e,this.index,{...this.default_options,...t,key:"prepared"}).map((e=>({...e,obj:e.obj.value})))}search(e,t={}){return this.do(e,t).map((e=>e.obj))}setDefaultOptions(e){return this.default_options=e,this}items(){return this.index.map((e=>e.value))}}!function(e){function t(e,t=1,i=!1,n=void 0){return a.icon({iconUrl:Zs.meta(e).icon_url,iconSize:[28*t,31*t],iconAnchor:i?[14*t,16*t]:[3*t,0],className:n})}e.interactionIcon=t,e.interactionMarker=function(e,i,n=1,o=!1,r=void 0){let s=t(i,n,o,r);return a.marker(j.toLatLong(e),{icon:s,interactive:!0})}}(Mp||(Mp={}));var Wp,Zp=di.hbox,Gp=di.span,Kp=di.hboxl,Yp=B.index;class Jp{constructor(){this.data=Xc.instance().variable("preferences/pathsectionmemory"),this.data.get()||this.data.set({})}hash(e){return e.pack.local_id+e.method.id}async get(e){var t;return null===(t=await this.data.get())||void 0===t?void 0:t[this.hash(e)]}async store(e,t){var i;const n=null!==(i=await this.data.get())&&void 0!==i?i:{};n[this.hash(e)]=t,await this.data.set(n)}static instance(){return Jp._instance.get()}}Jp._instance=nu((()=>new Jp));class Xp extends si{constructor(e,t,i,n){super(),this.sections=e,this.current_section_id=t,this.step_graphics=i,this.template_resolver=n,this.section_selected=pi(),this.selected_section=void 0,this.render()}render(){if(this.empty(),this.sections&&this.current_section_id){let e=zs.getPath(this.sections,this.current_section_id);e.forEach(((t,i)=>{if(0==i||"inner"!=(null==t?void 0:t.type))return;let n=e[i-1];if(ra("inner"==n.type),n.children.length<=1)return;let r=n.children.indexOf(t);"inner"==t.type&&Zp(r>0?Uu.arrow("left").withClick((()=>{let e=o.clone(this.current_section_id);e[i-1]-=1,this.setCurrentSection(e)})):void 0,Gp(t.value.name).css("flex-grow","1").css("text-align","center"),r<n.children.length-1?Uu.arrow("right").withClick((()=>{let e=o.clone(this.current_section_id);e[i-1]+=1,this.setCurrentSection(e)})):void 0).appendTo(this)})),this.selected_section=(()=>{let t=Yp(e,-2);return ra("inner"==t.type),t.children.map((e=>(ra("leaf"==e.type),e.value)))})(),"show"==Is().app.settings.settings.solving.info_panel.path_step_list&&this.selected_section.forEach(((e,t)=>{let i=o.clone(this.current_section_id);i[i.length-1]=t;let n=zs.index(this.step_graphics,i);ra("leaf"==n.type),"cosmetic"!=n.value.step.type&&new Xp.StepRow(i,e,this.template_resolver).setAssociatedGraphics(n.value).appendTo(this)}))}}setCurrentSection(e){this.current_section_id=zs.fixIndex(this.sections,e),this.render(),this.section_selected.trigger(this.selected_section)}onSelection(e){return this.section_selected.on(e),this}}!function(e){e.StepRow=class extends si{constructor(e,t,i){super(),this.section_index=e,this.step=t,this.template_resolver=i,this.highlighted=mi(!1),this.associated_graphics=null,this.highlighted.subscribe((e=>{this.toggleClass("ctr-neosolving-path-legend-highlighted",e)}));const n=B.index(this.section_index,-1);let o=c().text(`${n+1}.`);const{icon:r,content:s}=ta.renderTextAndIconSeparately(t);Kp(o,r,s).addClass("ctr-neosolving-path-legend").on("mouseover",(()=>this.setHighlight(!0))).on("mouseleave",(()=>this.setHighlight(!1))).appendTo(this)}setAssociatedGraphics(e){return this.associated_graphics=e,e&&this.associated_graphics.highlighted.subscribe((e=>{this.setHighlight(e)})),this}setHighlight(e){this.highlighted.set(e)}}}(Xp||(Xp={}));class Qp extends Ls{constructor(e){super(),this.parent=e,this.section_memory=Jp.instance(),this.method=null,this.sectioned_path=null,this.path_layer=new os,this.step_graphics=null,this.widget=null,this.section_selected=pi()}begin(){this.path_layer.addTo(this.parent.layer)}end(){this.path_layer.remove()}setPath(e){this.set(null,Rs.Section.split_into_sections(e))}setSections(e,t=null){this.set(null,e,t)}setMethod(e){let t=zs.init({name:"root"});e.method.pre_path&&e.method.pre_path.length>0&&zs.add(t,Rs.Section.split_into_sections(e.method.pre_path,"Pre Path")),zs.add(t,Rs.Section.split_into_sections(e.method.main_path,"Main Path")),e.method.post_path&&e.method.post_path.length>0&&zs.add(t,Rs.Section.split_into_sections(e.method.post_path,"Post Path")),1==t.children.length&&(t=t.children[0]),this.set(e,t)}async set(e,t,i=null){this.sectioned_path=t,this.method=e,e&&!i&&(i=await this.section_memory.get(e));const n=zs.fixIndex(this.sectioned_path,i||[]);this.path_layer.clearLayers(),this.step_graphics=zs.map(this.sectioned_path,(e=>new da(e).setInteractive().addTo(this.path_layer))),this.renderWidget(n)}reset(){var e;return this.sectioned_path=null,this.method=null,null===(e=this.widget)||void 0===e||e.remove(),this.widget=null,this.path_layer.clearLayers(),this}renderWidget(e){var t;null===(t=this.widget)||void 0===t||t.remove(),this.widget=null;let i=c();if(this.method&&new qh(this.parent,this.method.method.for).addClass("ctr-neosolving-solution-row").appendTo(i),this.sectioned_path){const t=new Xp(this.sectioned_path,e,this.step_graphics,this.parent.app.template_resolver).onSelection((e=>{this.method&&this.section_memory.store(this.method,t.current_section_id),this.section_selected.trigger(e)})).addClass("ctr-neosolving-solution-row");t.container.is(":empty")||t.appendTo(i),this.section_selected.trigger(t.selected_section)}i.container.is(":empty")||(this.widget=i.appendTo(this.parent.layer.path_container))}}function eg(e,t,i,n,o){var r,s,a,l,c,u;for(a=0,l=0,c=0,r=t;r<t+n;r++)for(s=i;s<i+o;s++)u=4*e.width*s+4*r,a+=e.data[u],l+=e.data[u+1],c+=e.data[u+2];return[a/=n*o,l/=n*o,c/=n*o]}function tg(e,t,i,n,o){var r,s,a,l,c;for(c=4*e.width,a=0,r=t;r<t+n;r++)for(s=i;s<i+o;s++)l=c*s+4*r,a+=Math.abs(e.data[l]-e.data[l+4]),a+=Math.abs(e.data[l]-e.data[l+c]),a+=Math.abs(e.data[l+1]-e.data[l+1+4]),a+=Math.abs(e.data[l+1]-e.data[l+1+c]),a+=Math.abs(e.data[l+2]-e.data[l+2+4]),a+=Math.abs(e.data[l+2]-e.data[l+2+c]);return a}function ig(e,t,i){var n,o,r,s,a,l;return"object"==typeof e&&(i=e[2],t=e[1],e=e[0]),e/=256,t/=256,i/=256,a=r=(n=Math.max(e,t,i))-(o=Math.min(e,t,i)),l=.5*(n+o),s=0,0!=r&&(n==e&&(s=(6+(t-i)/r)%6),n==t&&(s=(i-e)/r+2),n==i&&(s=(e-t)/r+4)),[Math.round(s/6*255),Math.round(255*a),Math.round(255*l)]}!function(e){let t=null;e.getAnchorImages=async function(){return t||(t={slide:await U("alt1anchors/slide.png"),slidelegacy:await U("alt1anchors/slidelegacy.png"),legacyx:await U("alt1anchors/legacyx.png"),eocx:await U("alt1anchors/eocx.png"),scanleveltext:await U("alt1anchors/differentlevel.png"),scanfartext:await U("alt1anchors/youaretofaraway.png"),scanfartext_pt:await U("alt1anchors/youaretofaraway_pt.png"),compassnorth:await U("alt1anchors/compassnorth.png"),slider_inverted_checkmark:await U("alt1anchors/slider_inverted_checkmark.png")}),t}}(Wp||(Wp={}));var ng={printcharscores:!1,trackread:!1},og={};function rg(e,t,i,n,o,r,s){var a=Math.min(50,s/(1-s)),l=e+(e-n)*a,c=t+(t-o)*a,u=i+(i-r)*a;return Math.max(0,-l,-c,-u,l-255,c-255,u-255)}function sg(e,t,i,n,o,r,s){if(n<0)return null;if(o-t.basey<0)return null;if(n+r+t.width>e.width)return null;if(o+s-t.basey+t.height>e.height)return null;for(var a=1e3,l=null,c=n;c<n+r;c++)for(var u=o;u<o+s;u++){var h=dg(e,t,i,c,u,!1,!1);null!=h&&h.sizescore<a&&(a=h.sizescore,l=h)}return l}function ag(e,t,i,n,o,r=-1,s=-1){-1==r&&(r=t.width+t.spacewidth,n-=Math.ceil(r/2)),-1==s&&(s=7,o-=1);var a=null;if(i.length>1)for(var l=lg(e,new V(n,o-t.basey,r,s),i),c=0;c<2&&c<l.length&&null==a;c++)a=sg(e,t,l[c].col,n,o,r,s);else a=sg(e,t,i[0],n,o,r,s);return null==a?{debugArea:{x:n,y:o,w:r,h:s},text:"",fragments:[]}:ug(e,t,i,a.x,a.y,!0,!0)}function lg(e,t,i){var n=i.map((e=>({col:e,score:0})));if(t.x<0||t.y<0||t.x+t.width>e.width||t.y+t.height>e.height)return n;var o=e.data;for(var r of n){for(var s=0,a=r.col,l=t.y;l<t.y+t.height;l++)for(var c=t.x;c<t.x+t.width;c++){var u=4*c+4*l*e.width,h=Math.abs(o[u]-a[0])+Math.abs(o[u+1]-a[1])+Math.abs(o[u+2]-a[2]);h<50&&(s+=50-h)}r.score=s}return n.sort(((e,t)=>t.score-e.score))}function cg(e,t,i,n,o,r){var s=Math.sqrt(e*e+t*t+i*i),a=Math.sqrt(n*n+o*o+r*r),l=(e*n+t*o+i*r)/a,c=Math.sqrt(Math.max(0,s*s-l*l)),u=Math.max(0,4*(63.75-c)),h=l/a*255;return h>255&&(u=Math.max(0,u-h+255),h=255),[u,h]}function ug(e,t,i,n,o,r,s=!1){"number"!=typeof i[0]&&1==i.length&&(i=i[0]);var a="number"!=typeof i[0],l=a?i:[i],c=function(i,n,o){var r=Math.floor(1.5*t.width);return o&&(i-=r),n-=t.basey,function(e,t,i){var n=-1,o=null,r=0,s=e.data;for(let d of i){for(var a=0,l=t.y;l<t.y+t.height;l++)for(var c=t.x;c<t.x+t.width;c++){if(c<0||c+1>=e.width)continue;if(l<0||l+1>=e.width)continue;let t=e.pixelOffset(c,l),i=e.pixelOffset(c+1,l+1);var u=cg(s[t+0],s[t+1],s[t+2],d[0],d[1],d[2]),h=cg(s[i+0],s[i+1],s[i+2],d[0],d[1],d[2]);a+=u[0]/255*u[1]/255*(h[0]/255*(255-h[1])/255)}a>n?(r=n,n=a,o=d):a>r&&(r=a)}return o}(e,{x:i,y:n,width:r,height:t.height},l)},u=[],h=n,d=n,p="number"==typeof t.maxspaces?t.maxspaces:1;let g="",m=!1;var f=null;let y=e=>{if(!g)return;let t={text:g,color:f,index:0,xstart:n+(e?x:w),xend:n+(e?w:x)};e?u.push(t):u.unshift(t),g="",x=_,m=!1};for(var v of[!0,!1])if((!v||r)&&(v||s)){for(var _=0,x=_,w=_,b=0,k=!1,T=a?null:i;;){var S=(T=T||c(n+_,o,!v))?dg(e,t,T,n+_,o,!v,!0):null;if(null==T||null==S){if(b<p){_+=(v?1:-1)*t.spacewidth,b++;continue}if(a&&!k&&m){_-=(v?1:-1)*b*t.spacewidth,b=0,T=null,k=!0;continue}v?d=n+_-t.spacewidth:h=n+_+t.spacewidth;break}!f||T[0]==f[0]&&T[1]==f[1]&&T[2]==f[2]||y(v);for(var C="",E=0;E<b;E++)C+=" ";v?g+=C+S.chr:g=S.chr+C+g,S.basechar.secondary||(m=!0),b=0,k=!1,_+=(v?1:-1)*S.basechar.width,w=_,f=T}f&&m&&y(v)}return u.forEach(((e,t)=>e.index=t)),{debugArea:{x:h,y:o-9,w:d-h,h:10},text:u.map((e=>e.text)).join(""),fragments:u}}function hg(e,t,i,n,o,r=-1,s=-1){-1==r&&(r=t.width+t.spacewidth,n-=Math.ceil(r/2)),-1==s&&(s=7,o-=1);for(var a=null,l=1==i.length?[{col:i[0],score:1}]:lg(e,new V(n,o-t.basey,r,s),i),c=0;c<2&&c<l.length&&null==a;c++)for(var u=n+r-1;u>=n;u--){for(var h=1e3,d=null,p=o;p<o+s;p++){var g=dg(e,t,l[c].col,u,p,!0,!1);null!=g&&g.sizescore<h&&(h=g.sizescore,d=g)}if(d){a=d;break}}return null==a?{text:"",debugArea:{x:n,y:o,w:r,h:s}}:ug(e,t,i,a.x,a.y,!1,!0)}function dg(e,t,i,n,o,r,s){o-=t.basey;var a=t.basey,l=t.shadow,c=null,u=null;if(ng.trackread){var h=n+";"+o+" "+JSON.stringify(i);og[h]||(og[h]=[]),c=og[h]}if(o<0||o+t.height>=e.height)return null;if(r){if(n-t.width<0||n>e.width)return null}else if(n<0||n+t.width>e.width)return null;for(var d=[],p=0;p<t.chars.length;p++){var g=t.chars[p];if(!g.secondary||s){d[p]={score:0,sizescore:0,chr:g};var m=r?n-g.width:n;ng.trackread&&(u=new _(t.width,t.height));for(var f=0;f<g.pixels.length;){var y=4*(m+g.pixels[f])+(o+g.pixels[f+1])*e.width*4,v=0;if(l){var x=g.pixels[f+3]/255;v=rg(e.data[y],e.data[y+1],e.data[y+2],i[0]*x,i[1]*x,i[2]*x,g.pixels[f+2]/255),f+=4}else v=rg(e.data[y],e.data[y+1],e.data[y+2],i[0],i[1],i[2],g.pixels[f+2]/255),f+=3;d[p].score+=Math.max(0,v),u&&u.setPixel(g.pixels[f],g.pixels[f+1],[v,v,v,255])}d[p].sizescore=d[p].score-g.bonus,c&&c.push({chr:g.chr,score:d[p].sizescore,rawscore:d[p].score,img:u})}}d.sort(((e,t)=>e.sizescore-t.sizescore)),ng.printcharscores&&d.slice(0,5).forEach((e=>console.log(e.chr.chr,e.score.toFixed(3),e.sizescore.toFixed(3))));var w=d[0];return!w||w.score>400?null:{chr:w.chr.chr,basechar:w.chr,x:n+0,y:o+a,score:w.score,sizescore:w.sizescore}}const pg={chars:[{width:4,bonus:40,chr:"!",pixels:[1,0,238,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,9,238],secondary:!0},{width:4,bonus:10,chr:"'",pixels:[2,0,221,2,1,187],secondary:!0},{width:4,bonus:20,chr:",",pixels:[1,9,187,1,10,170,2,8,255,2,9,153],secondary:!0},{width:6,bonus:20,chr:"-",pixels:[1,6,255,2,6,255,3,6,255,4,6,170],secondary:!0},{width:4,bonus:5,chr:".",pixels:[1,9,255],secondary:!0},{width:9,bonus:110,chr:"0",pixels:[1,2,187,1,3,238,1,4,255,1,5,255,1,6,238,1,7,187,2,1,255,2,8,255,3,0,238,3,9,238,4,0,255,4,9,255,5,0,238,5,9,238,6,1,255,6,8,255,7,2,187,7,3,238,7,4,255,7,5,255,7,6,238,7,7,187],secondary:!1},{width:7,bonus:80,chr:"1",pixels:[1,2,204,1,9,255,2,1,238,2,9,255,3,0,255,3,1,255,3,2,255,3,3,255,3,4,255,3,5,255,3,6,255,3,7,255,3,8,255,3,9,255,4,9,255,5,9,255],secondary:!1},{width:8,bonus:110,chr:"2",pixels:[2,1,255,2,7,204,2,8,255,2,9,255,3,0,204,3,6,221,3,7,170,3,9,255,4,0,255,4,5,204,4,6,170,4,9,255,5,0,221,5,1,153,5,4,187,5,5,204,5,9,255,6,1,221,6,2,255,6,3,255,6,4,170,6,9,255],secondary:!1},{width:8,bonus:120,chr:"3",pixels:[1,8,170,2,0,255,2,8,187,2,9,170,3,0,255,3,4,255,3,9,255,4,0,255,4,2,170,4,3,221,4,4,238,4,9,255,5,0,255,5,1,238,5,2,187,5,4,170,5,5,187,5,8,187,5,9,170,6,0,255,6,5,187,6,6,255,6,7,255,6,8,187],secondary:!1},{width:9,bonus:115,chr:"4",pixels:[1,5,187,1,6,255,2,4,221,2,5,153,2,6,255,3,3,238,3,6,255,4,2,238,4,6,255,5,0,170,5,1,255,5,6,255,6,0,255,6,1,255,6,2,255,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,7,6,255],secondary:!1},{width:8,bonus:120,chr:"5",pixels:[1,8,153,2,0,255,2,1,255,2,2,255,2,3,221,2,4,255,2,8,153,2,9,187,3,0,255,3,4,255,3,9,255,4,0,255,4,4,255,4,9,255,5,0,255,5,4,187,5,5,187,5,8,187,5,9,170,6,0,170,6,5,187,6,6,255,6,7,255,6,8,187],secondary:!1},{width:9,bonus:150,chr:"6",pixels:[1,3,187,1,4,238,1,5,255,1,6,255,1,7,187,2,1,153,2,2,255,2,3,170,2,4,204,2,5,204,2,7,170,2,8,255,3,1,238,3,4,238,3,9,221,4,0,238,4,4,255,4,9,255,5,0,255,5,4,255,5,9,255,6,0,255,6,4,170,6,5,204,6,8,221,6,9,153,7,5,170,7,6,255,7,7,255,7,8,153],secondary:!1},{width:9,bonus:95,chr:"7",pixels:[1,0,255,2,0,255,2,7,153,2,8,255,2,9,204,3,0,255,3,5,153,3,6,255,3,7,187,4,0,255,4,3,153,4,4,255,4,5,187,5,0,255,5,1,187,5,2,255,5,3,187,6,0,255,6,1,170],secondary:!1},{width:9,bonus:170,chr:"8",pixels:[1,1,204,1,2,255,1,3,204,1,5,153,1,6,255,1,7,255,1,8,153,2,0,187,2,1,187,2,3,187,2,4,255,2,5,204,2,8,221,2,9,153,3,0,255,3,4,255,3,9,255,4,0,255,4,4,170,4,9,255,5,0,204,5,1,153,5,4,204,5,5,204,5,9,238,6,1,238,6,2,255,6,3,255,6,4,170,6,5,255,6,8,221,7,6,238,7,7,255,7,8,153],secondary:!1},{width:9,bonus:140,chr:"9",pixels:[1,2,238,1,3,255,1,4,238,2,1,238,2,5,238,2,9,255,3,0,255,3,6,238,3,9,255,4,0,255,4,6,255,4,9,238,5,0,204,5,1,153,5,6,204,5,8,204,5,9,153,6,1,238,6,2,187,6,5,238,6,6,187,6,7,221,6,8,204,7,2,153,7,3,221,7,4,255,7,5,255,7,6,221],secondary:!1},{width:3,bonus:10,chr:":",pixels:[1,2,255,1,8,255],secondary:!0},{width:6,bonus:55,chr:"?",pixels:[1,0,204,2,0,255,2,5,187,2,6,255,2,9,255,3,0,238,3,4,238,3,5,153,4,1,238,4,2,255,4,3,255],secondary:!0},{width:10,bonus:140,chr:"A",pixels:[1,8,153,1,9,238,2,6,221,2,7,255,2,8,204,3,3,204,3,4,255,3,5,204,3,6,255,4,0,187,4,1,255,4,2,204,4,6,255,5,0,238,5,1,255,5,2,187,5,6,255,6,2,153,6,3,238,6,4,255,6,5,187,6,6,255,7,5,153,7,6,255,7,7,255,7,8,170,8,8,187,8,9,255],secondary:!1},{width:9,bonus:160,chr:"B",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,0,255,2,5,255,2,9,255,3,0,255,3,5,255,3,9,255,4,0,255,4,5,255,4,9,255,5,0,221,5,1,153,5,4,170,5,5,255,5,8,153,5,9,204,6,1,238,6,2,255,6,3,255,6,4,204,6,6,238,6,7,255,6,8,238],secondary:!1},{width:10,bonus:105,chr:"C",pixels:[1,2,153,1,3,255,1,4,255,1,5,255,1,6,238,2,1,204,2,2,204,2,7,204,2,8,204,3,1,187,3,8,204,4,0,221,4,9,221,5,0,255,5,9,255,6,0,238,6,9,238,7,0,187,7,9,187,8,1,221,8,8,255],secondary:!1},{width:10,bonus:160,chr:"D",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,0,255,2,9,255,3,0,255,3,9,255,4,0,255,4,9,255,5,0,238,5,9,238,6,0,153,6,1,204,6,8,204,6,9,153,7,1,221,7,2,204,7,7,204,7,8,221,8,2,170,8,3,255,8,4,255,8,5,255,8,6,255,8,7,170],secondary:!1},{width:8,bonus:105,chr:"E",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,0,255,2,5,255,2,9,255,3,0,255,3,5,255,3,9,255,4,0,255,4,5,255,4,9,255,5,0,255,5,9,255],secondary:!1},{width:7,bonus:85,chr:"F",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,0,255,2,5,255,3,0,255,3,5,255,4,0,255,4,5,255,5,0,255],secondary:!1},{width:10,bonus:145,chr:"G",pixels:[1,2,153,1,3,255,1,4,255,1,5,255,1,6,255,1,7,153,2,1,204,2,2,187,2,7,204,2,8,221,3,0,153,3,1,187,3,8,187,3,9,170,4,0,255,4,9,255,5,0,255,5,9,255,6,0,238,6,5,170,6,9,204,7,1,204,7,5,255,7,8,238,8,5,255,8,6,255,8,7,255,8,8,255,8,9,255],secondary:!1},{width:9,bonus:125,chr:"H",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,5,255,3,5,255,4,5,255,5,5,255,6,5,255,7,0,255,7,1,255,7,2,255,7,3,255,7,4,255,7,5,255,7,6,255,7,7,255,7,8,255,7,9,255],secondary:!1},{width:5,bonus:70,chr:"I",pixels:[1,0,255,1,9,255,2,0,255,2,1,255,2,2,255,2,3,255,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,3,0,255,3,9,255],secondary:!1},{width:8,bonus:100,chr:"J",pixels:[1,7,255,1,8,187,2,8,187,2,9,187,3,0,221,3,9,255,4,0,255,4,9,255,5,0,255,5,8,187,5,9,187,6,0,255,6,1,255,6,2,255,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,187],secondary:!1},{width:9,bonus:120,chr:"K",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,5,255,3,5,255,4,3,187,4,4,255,4,5,170,4,6,255,5,1,187,5,2,255,5,7,221,5,8,204,6,0,255,6,1,153,6,8,153,6,9,255],secondary:!1},{width:8,bonus:75,chr:"L",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,9,255,3,9,255,4,9,255,5,9,255,6,9,170],secondary:!1},{width:11,bonus:180,chr:"M",pixels:[1,2,170,1,3,170,1,4,204,1,5,221,1,6,238,1,7,255,1,8,255,1,9,255,2,0,255,2,1,255,2,2,255,2,3,170,3,2,204,3,3,255,3,4,170,4,4,153,4,5,255,4,6,221,5,6,221,5,7,255,6,4,187,6,5,255,6,6,187,7,2,221,7,3,238,8,0,255,8,1,255,8,2,255,8,3,187,8,4,153,9,4,170,9,5,187,9,6,204,9,7,221,9,8,238,9,9,255],secondary:!1},{width:10,bonus:145,chr:"N",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,1,238,2,2,221,3,2,170,3,3,255,4,4,221,4,5,204,5,6,255,6,7,204,6,8,221,7,0,255,7,1,255,7,2,255,7,3,255,7,4,255,7,5,255,7,6,255,7,7,255,7,8,255,7,9,255],secondary:!1},{width:11,bonus:130,chr:"O",pixels:[1,3,255,1,4,255,1,5,255,1,6,238,2,1,204,2,2,204,2,7,204,2,8,204,3,1,187,3,8,187,4,0,221,4,9,221,5,0,255,5,9,255,6,0,221,6,9,221,7,1,204,7,8,221,8,1,187,8,2,221,8,7,221,8,8,170,9,3,221,9,4,255,9,5,255,9,6,204],secondary:!1},{width:9,bonus:125,chr:"P",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,0,255,2,6,255,3,0,255,3,6,255,4,0,255,4,6,255,5,0,187,5,1,187,5,5,187,5,6,187,6,1,187,6,2,255,6,3,255,6,4,255,6,5,187],secondary:!1},{width:11,bonus:140,chr:"Q",pixels:[1,3,255,1,4,255,1,5,255,1,6,238,2,1,204,2,2,204,2,7,204,2,8,204,3,1,187,3,8,187,4,0,238,4,9,238,5,0,255,5,9,255,6,0,221,6,9,221,7,1,204,7,7,238,7,8,221,8,1,187,8,2,221,8,7,238,8,8,255,9,3,221,9,4,255,9,5,255,9,6,204,9,9,187],secondary:!1},{width:9,bonus:140,chr:"R",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,0,255,2,5,255,3,0,255,3,5,255,4,0,255,4,5,255,5,0,204,5,1,153,5,4,153,5,5,221,5,6,238,5,7,238,6,1,221,6,2,255,6,3,255,6,4,221,6,8,238,6,9,221],secondary:!1},{width:7,bonus:95,chr:"S",pixels:[1,1,221,1,2,255,1,3,255,1,8,238,2,0,204,2,1,153,2,4,255,2,9,238,3,0,255,3,4,187,3,5,153,3,9,255,4,0,238,4,5,255,4,9,221,5,1,170,5,6,255,5,7,255,5,8,238],secondary:!1},{width:10,bonus:80,chr:"T",pixels:[1,0,255,2,0,255,3,0,255,4,0,255,4,1,255,4,2,255,4,3,255,4,4,255,4,5,255,4,6,255,4,7,255,4,8,255,4,9,255,5,0,255,6,0,255,7,0,255],secondary:!1},{width:10,bonus:110,chr:"U",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,238,2,8,238,3,9,204,4,9,255,5,9,255,6,9,204,7,8,238,8,0,255,8,1,255,8,2,255,8,3,255,8,4,255,8,5,255,8,6,255,8,7,221],secondary:!1},{width:10,bonus:110,chr:"V",pixels:[1,0,238,1,1,153,2,1,187,2,2,255,2,3,221,3,4,187,3,5,255,3,6,204,4,7,204,4,8,255,4,9,204,5,7,204,5,8,255,5,9,204,6,4,187,6,5,255,6,6,204,7,1,187,7,2,255,7,3,221,8,0,238,8,1,153],secondary:!1},{width:13,bonus:195,chr:"W",pixels:[1,0,255,1,1,187,2,2,187,2,3,255,2,4,255,2,5,204,3,6,170,3,7,221,3,8,255,3,9,221,4,6,170,4,7,238,4,8,255,4,9,187,5,2,187,5,3,255,5,4,255,5,5,187,6,0,255,6,1,255,6,2,255,7,2,170,7,3,238,7,4,255,7,5,204,8,6,153,8,7,221,8,8,255,8,9,204,9,6,187,9,7,255,9,8,255,9,9,204,10,2,204,10,3,255,10,4,255,10,5,187,11,0,255,11,1,187],secondary:!1},{width:9,bonus:125,chr:"X",pixels:[1,0,221,1,9,255,2,0,153,2,1,255,2,2,187,2,7,238,2,8,221,3,2,170,3,3,255,3,4,153,3,5,204,3,6,238,4,3,187,4,4,255,4,5,255,5,2,238,5,3,221,5,6,255,5,7,170,6,0,221,6,1,238,6,7,187,6,8,255,7,0,153,7,9,221],secondary:!1},{width:9,bonus:80,chr:"Y",pixels:[1,0,238,2,1,238,2,2,204,3,3,255,3,4,187,4,4,255,4,5,255,4,6,255,4,7,255,4,8,255,4,9,255,5,3,238,5,4,204,6,1,221,6,2,238,7,0,255],secondary:!1},{width:9,bonus:115,chr:"Z",pixels:[1,9,170,2,0,255,2,7,153,2,8,255,2,9,255,3,0,255,3,6,238,3,7,221,3,9,255,4,0,255,4,4,187,4,5,255,4,9,255,5,0,255,5,3,255,5,4,187,5,9,255,6,0,255,6,1,204,6,2,221,6,9,255,7,0,255,7,9,255],secondary:!1},{width:8,bonus:110,chr:"a",pixels:[1,7,221,1,8,255,2,3,187,2,6,170,2,7,153,2,9,221,3,3,255,3,6,221,3,9,255,4,3,255,4,6,255,4,9,238,5,3,204,5,4,170,5,6,255,5,8,204,6,4,204,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255],secondary:!1},{width:8,bonus:135,chr:"b",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,3,153,2,4,221,2,8,221,2,9,153,3,3,238,3,9,238,4,3,255,4,9,255,5,3,187,5,4,187,5,8,187,5,9,170,6,4,187,6,5,255,6,6,255,6,7,255,6,8,170],secondary:!1},{width:8,bonus:60,chr:"c",pixels:[1,5,255,1,6,255,1,7,255,2,4,221,2,8,221,3,3,238,3,9,238,4,3,255,4,9,255,5,3,221,5,9,221,6,8,204],secondary:!1},{width:8,bonus:135,chr:"d",pixels:[1,4,170,1,5,255,1,6,255,1,7,255,1,8,187,2,3,170,2,4,187,2,8,187,2,9,170,3,3,255,3,9,255,4,3,238,4,9,238,5,3,153,5,4,221,5,8,221,5,9,153,6,0,255,6,1,255,6,2,255,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255],secondary:!1},{width:8,bonus:100,chr:"e",pixels:[1,5,255,1,6,255,1,7,255,1,8,153,2,4,204,2,6,255,2,8,204,3,3,255,3,6,255,3,9,238,4,3,255,4,6,255,4,9,255,5,3,170,5,4,187,5,6,255,5,9,221,6,4,153,6,5,238,6,6,255],secondary:!1},{width:6,bonus:70,chr:"f",pixels:[1,3,221,2,1,221,2,2,255,2,3,255,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,3,0,221,3,3,255,4,0,255,4,3,221],secondary:!1},{width:8,bonus:135,chr:"g",pixels:[1,4,187,1,5,255,1,6,255,1,7,255,1,8,187,2,3,204,2,4,170,2,8,170,2,9,221,2,12,238,3,3,255,3,9,255,3,12,255,4,3,187,4,4,153,4,9,204,4,11,170,4,12,187,5,3,255,5,4,255,5,5,255,5,6,255,5,7,255,5,8,255,5,9,255,5,10,255,5,11,204],secondary:!1},{width:9,bonus:100,chr:"h",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,4,238,3,3,204,4,3,255,5,3,238,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255],secondary:!1},{width:4,bonus:40,chr:"i",pixels:[1,0,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255],secondary:!1},{width:5,bonus:60,chr:"j",pixels:[0,12,221,1,12,238,2,0,255,2,3,255,2,4,255,2,5,255,2,6,255,2,7,255,2,8,255,2,9,255,2,10,255,2,11,255],secondary:!1},{width:7,bonus:100,chr:"k",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,6,255,3,5,187,3,6,255,3,7,170,4,4,255,4,5,170,4,7,187,4,8,221,5,3,255,5,9,255],secondary:!1},{width:5,bonus:50,chr:"l",pixels:[1,0,255,1,1,255,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,2,9,255],secondary:!1},{width:12,bonus:130,chr:"m",pixels:[1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,4,238,3,3,204,4,3,255,5,3,221,6,4,238,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,7,4,204,8,3,255,9,3,255,10,4,255,10,5,255,10,6,255,10,7,255,10,8,255,10,9,255],secondary:!1},{width:8,bonus:85,chr:"n",pixels:[1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,4,238,3,3,204,4,3,255,5,3,238,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255],secondary:!1},{width:9,bonus:80,chr:"o",pixels:[1,5,255,1,6,255,1,7,255,2,4,221,2,8,221,3,3,221,3,9,221,4,3,255,4,9,255,5,3,221,5,9,221,6,4,238,6,8,238,7,5,221,7,6,255,7,7,221],secondary:!1},{width:8,bonus:130,chr:"p",pixels:[1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,1,10,255,1,11,255,2,3,153,2,4,204,2,8,221,2,9,153,3,3,238,3,9,238,4,3,255,4,9,255,5,3,187,5,4,187,5,8,187,5,9,170,6,4,187,6,5,255,6,6,255,6,7,255,6,8,170],secondary:!1},{width:8,bonus:130,chr:"q",pixels:[1,4,170,1,5,255,1,6,255,1,7,255,1,8,187,2,3,170,2,4,187,2,8,187,2,9,187,3,3,255,3,9,255,4,3,238,4,9,238,5,3,153,5,4,204,5,8,221,5,9,153,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255,6,10,255,6,11,255],secondary:!1},{width:6,bonus:45,chr:"r",pixels:[1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,255,1,9,255,2,4,238,3,3,238],secondary:!1},{width:6,bonus:65,chr:"s",pixels:[1,4,255,1,5,255,1,8,153,1,9,170,2,3,255,2,6,221,2,9,255,3,3,255,3,6,238,3,9,255,4,3,153,4,7,255,4,8,255],secondary:!1},{width:5,bonus:65,chr:"t",pixels:[0,3,255,1,1,238,1,2,255,1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,221,2,3,255,2,9,221,3,3,221,3,9,255],secondary:!1},{width:9,bonus:85,chr:"u",pixels:[1,3,255,1,4,255,1,5,255,1,6,255,1,7,255,1,8,238,2,9,221,3,9,255,4,9,221,5,8,221,6,3,255,6,4,255,6,5,255,6,6,255,6,7,255,6,8,255,6,9,255],secondary:!1},{width:8,bonus:75,chr:"v",pixels:[1,3,238,2,4,187,2,5,255,2,6,204,3,7,221,3,8,255,3,9,170,4,7,153,4,8,255,4,9,238,5,5,221,5,6,255,5,7,170,6,3,255,6,4,204],secondary:!1},{width:12,bonus:135,chr:"w",pixels:[1,3,238,1,4,153,2,4,170,2,5,255,2,6,238,2,7,153,3,7,153,3,8,255,3,9,255,4,7,204,4,8,255,4,9,170,5,4,187,5,5,255,5,6,187,6,4,255,6,5,221,7,6,187,7,7,255,7,8,187,8,8,255,8,9,255,9,5,187,9,6,255,9,7,221,10,3,255,10,4,204],secondary:!1},{width:8,bonus:90,chr:"x",pixels:[1,3,153,1,9,221,2,3,204,2,4,238,2,8,255,2,9,153,3,5,238,3,6,238,3,7,221,4,5,238,4,6,238,4,7,221,5,3,204,5,4,238,5,8,255,5,9,153,6,3,153,6,9,221],secondary:!1},{width:9,bonus:100,chr:"y",pixels:[1,3,238,1,12,204,2,4,221,2,5,255,2,6,170,2,12,255,3,6,153,3,7,238,3,8,238,3,11,238,3,12,153,4,8,255,4,9,255,4,10,187,5,5,170,5,6,255,5,7,221,6,3,238,6,4,255,6,5,170],secondary:!1},{width:8,bonus:95,chr:"z",pixels:[1,3,255,1,9,255,2,3,255,2,7,187,2,8,255,2,9,255,3,3,255,3,6,221,3,7,187,3,9,255,4,3,255,4,5,238,4,6,153,4,9,255,5,3,255,5,4,255,5,9,255,6,3,238,6,9,255],secondary:!1}],width:13,spacewidth:3,shadow:!1,height:13,basey:9};var gg,mg,fg,yg;!function(e){var t=B.rgbSimilarity;function i(e,t,i,n,o){let r=0,s=0,a=0;for(let l=t;l<t+n;l++)for(let t=i;t<i+o;t++){const i=4*e.width*t+4*l;r+=e.data[i],s+=e.data[i+1],a+=e.data[i+2]}return r/=n*o,s/=n*o,a/=n*o,[r,s,a]}function n(e,t,i){e/=256,t/=256,i/=256;const n=Math.max(e,t,i),o=Math.min(e,t,i),r=n-o,s=r,a=.5*(n+o);let l=0;return 0!=r&&(n==e&&(l=(6+(t-i)/r)%6),n==t&&(l=(i-e)/r+2),n==i&&(l=(e-t)/r+4)),[Math.round(l/6*255),Math.round(255*s),Math.round(255*a)]}e.TypeHSL=0,e.TypeRGB=1,e.averageColor=i;e.get=function(t,o,r,s,a=e.TypeHSL){switch(a){case e.TypeHSL:{const e=Math.floor(r.x/s.x),l=Math.floor(r.y/s.y),c=new Array(e*l*3);for(let r=0;r<e;r++){const a=o.x+r*s.x;for(let u=0;u<l;u++){const l=o.y+u*s.y,h=3*(r+u*e);let[d,p,g]=n(...i(t,a,l,s.x,s.y));c[h+0]=d,c[h+1]=p,c[h+2]=g}}return{type:a,data:c}}case e.TypeRGB:const l=Math.floor(r.x/s.x),c=Math.floor(r.y/s.y),u=new Array(l*c*3);for(let e=0;e<l;e++){const n=o.x+e*s.x;for(let r=0;r<c;r++){const a=o.y+r*s.y,c=3*(e+r*l);let[h,d,p]=i(t,n,a,s.x,s.y);u[c+0]=h,u[c+1]=d,u[c+2]=p}}return{type:a,data:u}}},e.similarity=function(i,n){if(i.type!=n.type||i.data.length!=n.data.length)return 0;switch(i.type){case e.TypeHSL:{function o(e,t){let i=Math.abs(e-t);return i>128&&(i=255-i),i/128}let r=0;for(let s=0;s<i.data.length;s+=3)r+=1-o(i.data[s+0],n.data[s+0])*(1-Math.abs(i.data[s+1]-n.data[s+1])/255)*(1-Math.abs(i.data[s+2]-n.data[s+2])/255);return Math.pow(r/(i.data.length/3),3)}case e.TypeRGB:{let a=0;for(let l=0;l<i.data.length;l+=3)a+=t(i.data.slice(l,l+3),n.data.slice(l,l+3));return a/(i.data.length/3)}}}}(gg||(gg={})),function(e){var t=B.findBestMatch,i=ru.log;e.DETECTION_THRESHOLD_SCORE=.9;e.SLIDER_SIZE=5;const n=7,r=49;function s(e,t){return gg.get(e,t,{x:r,y:r},{x:n,y:n})}function a(t,i=0,n=void 0){const o=[];for(let a=0;a<e.SLIDER_SIZE;a++)for(let l=0;l<e.SLIDER_SIZE;l++)o.push({theme:n,position:a*e.SLIDER_SIZE+l,signature:s(t,{x:l*(r+i),y:a*(r+i)})});return{tiles:o,theme:n}}let l;async function c(){if(null==l){const e=["adventurer","araxxor","archers","black_dragon","bridge","castle","clan_citadel","corporeal_beast","drakan_bloodveld","elves","general_graardor","gregorovic","helwyr","ice_strykewyrm","menaphos_pharaoh","nomad","nymora","sword_of_edicts","tree","troll","tuska","v","vanstrom_klause","werewolf","wizard","wyvern"];l=Object.fromEntries(await Promise.all(e.map((async e=>[e,a(await U(d(e)),0,e)]))))}return l}e.parseTile=s,e.parseSliderImage=a,e.getReferenceSliders=c;const u=ou((async()=>{const e=await U("alt1anchors/sliders/blanktiles.png"),t=e.width/r,i=[];for(let n=0;n<t;n++)i.push(s(e,{x:n*r,y:0}));return i}));async function h(){return u.get()}function d(e){return`alt1anchors/sliders/${e}.png`}async function p(n,r=void 0){var s;const l=a(n,7);let u=[];const d=await h(),p=r?[(await c())[r]]:Object.values(await c());for(let y of l.tiles){const v=t(d,(e=>gg.similarity(y.signature,e)));for(let _ of p)for(let x of _.tiles)u.push({tile:y,reference_tile:x,score:24==x.position?v.score:gg.similarity(y.signature,x.signature)})}const g=o.groupBy(u,(e=>e.reference_tile.theme)),m=await Promise.all(Object.entries(g).map((async([e,t])=>{const i=o.sortBy(t,(e=>-e.score)),n=new Array(25).fill(null),r=new Array(25).fill(!1);for(let e of i)n[e.tile.position]||r[e.reference_tile.position]||(n[e.tile.position]=e,r[e.reference_tile.position]=!0);return{theme:e,all_match_pairs:t,preliminary_best_matching:{score:o.sumBy(n,(e=>e.score))/n.length,match:n}}}))),f=o.maxBy(m,(e=>e.preliminary_best_matching.score));if(Is().app.settings.settings.solving.puzzles.sliders.improve_slider_matches_backtracking&&f.preliminary_best_matching.score>e.DETECTION_THRESHOLD_SCORE){let w=f.preliminary_best_matching.match,b=25*f.preliminary_best_matching.score;const k=new Array(25).fill(null),T=new Array(25).fill(0).map(((e,t)=>Math.max(...f.all_match_pairs.slice(25*t,25*(t+1)).map((e=>e.score)))));for(let A=23;A>=0;A--)T[A]+=T[A+1];const S=new Array(25).fill(!1);let C=0;function E(t,n){if(C++,!(C>1e4))if(t>=25)n>b&&(i().log(`Backtracking found a better match from ${b} to ${n}`,"Slide Reader"),w=[...k],b=n);else for(let i=0;i<25;i++){const o=f.all_match_pairs[25*t+i];S[o.reference_tile.position]||o.score<e.DETECTION_THRESHOLD_SCORE||n+o.score+T[t+1]<=b||(k[t]=o,S[o.reference_tile.position]=!0,E(t+1,n+o.score),S[o.reference_tile.position]=!1)}}return T[0]>b&&E(0,0),{tiles:w.map((e=>e.reference_tile)),theme:f.theme,match_score:b/25}}return{tiles:null===(s=f.preliminary_best_matching)||void 0===s?void 0:s.match.map((e=>e.reference_tile)),theme:f.theme,match_score:f.preliminary_best_matching.score}}e.getBlankTileReferences=h,e.getThemeImageUrl=d,e.SlideReader=class{constructor(e){this.ui=e,this._puzzle=null}async getPuzzle(e=void 0){return this._puzzle||(this._puzzle=await p(this.ui.body.getData(),e)),this._puzzle}},e.identify=p}(mg||(mg={})),function(e){let t;function i(t,i){const n=j.normalize(j.sub(i,t)),o=e.ANGLE_REFERENCE_VECTOR,r=n,s=Math.atan2(j.det(o,r),j.dot(o,r));return s<0?s+2*Math.PI:s}!function(t){t.construct=function(t,i){const n=j.sub(t.size,{x:.975,y:.975}),o=j.transform(e.ANGLE_REFERENCE_VECTOR,N.rotationRadians(i)),r=ee(n,i)/2,s=r/Math.tan(Dg.EPSILON),a=j.sub(t.center(!1),j.scale(.5*ee(n,i+Math.PI/2),o));return{position:t,angle_radians:i,direction:o,origin:a,modified_origin:j.sub(a,j.scale(s,o)),origin_uncertainty:r}}}(t=e.TriangulationPoint||(e.TriangulationPoint={})),e.ANGLE_REFERENCE_VECTOR={x:1,y:0},e.getExpectedAngle=i,e.isPossible=function(e,t){return e.every((e=>{const n=i(e.modified_origin,t);return j.max_axis(e.position.size)<=5&&j.max_axis(j.sub(t,j.add(e.position.origin,j.scale(.5,e.position.size))))<20?e.position.getTiles().some((n=>Q(i(n,t),e.angle_radians)<=Dg.EPSILON)):!(Q(n,e.angle_radians)>=Dg.EPSILON)&&Q(n,i(e.origin,t))<Math.PI/2}))}}(fg||(fg={})),function(e){function t(e,t,i=null){return{origin:j.add(e.origin,t),size:null!=i?i:e.size}}e.move=t,e.subRect=function(e,i){return t(e,i.origin,i.size)},e.relativeTo=function(e,t){return{origin:j.sub(t.origin,e.origin),size:t.size}},e.fromRectangle=function(e){return{origin:F.screenOrigin(e),size:{x:F.width(e)+1,y:F.height(e)+1}}},e.toRectangle=function(e){return F.fromOriginAndSize(e.origin,e.size)},e.extend=function(e,t){return{origin:j.sub(e.origin,t),size:j.add(e.size,t,t)}},e.contains=function(e,t){const i=j.sub(t,e.origin);return i.x>=0&&i.x<e.size.x&&i.y>=0&&i.y<e.size.y},e.center=function(e){return j.snap(j.add(e.origin,j.scale(.5,e.size)))}}(yg||(yg={}));var vg=B.todo,_g=B.uuid;class xg{constructor(){this.is_frozen=!1,this.group_name=null,this.alive_time=1e4,this.geometry=[]}withTime(e){return this.alive_time=e,this}rect(e,t=xg.StrokeOptions.DEFAULT){return this.geometry.push({type:"rect",rect:e,options:t}),this}rect2(e,t=xg.StrokeOptions.DEFAULT){return this.geometry.push({type:"rect",rect:yg.toRectangle(e),options:t}),this}line(e,t,i=xg.StrokeOptions.DEFAULT){return this.geometry.push({type:"line",from:e,to:t,options:i}),this}polyline(e,t=!1,i=xg.StrokeOptions.DEFAULT){var n,o;for(let r=0;r<e.length;r++){const s=(r+1)%e.length;if(0==s&&!t)break;let a=e[r],l=e[s];const c=j.normalize(j.sub(l,a));a=j.add(a,j.scale(-(null!==(n=i.width)&&void 0!==n?n:2)/3,c)),l=j.add(l,j.scale((null!==(o=i.width)&&void 0!==o?o:2)/3,c)),this.line(a,l,i)}return this}progressbar(e,t,i,n=5,r=2,s=D(0,255,0),a=D(255,0,0)){const l=j.add(e,{x:-Math.floor(t/2),y:0}),c=j.add(l,{x:t,y:0}),u=j.snap(j.add(l,{x:o.clamp(i,0,1)*t,y:0}));this.line(j.add(l,{x:-r,y:0}),j.add(c,{x:r,y:0}),{color:D(1,1,1),width:n+2*r}),this.line(l,u,{color:s,width:n}),this.line(u,c,{color:a,width:n})}text(e,t,i=xg.TextOptions.DEFAULT){return this.geometry.push({type:"text",text:e,position:t,options:i}),this}add(...e){return e.forEach((e=>{this.geometry.push(...e.geometry)})),this}transform(e){return vg(),this}push_draw_calls(){var e,t,i,n,o;alt1.overLaySetGroup(this.group_name);for(let r of this.geometry)switch(r.type){case"rect":const s=F.screenOrigin(r.rect);alt1.overLayRect(r.options.color,Math.round(s.x),Math.round(s.y),Math.round(F.width(r.rect)),Math.round(F.height(r.rect)),this.alive_time,null!==(e=r.options.width)&&void 0!==e?e:3);break;case"line":alt1.overLayLine(r.options.color,r.options.width,Math.round(r.from.x),Math.round(r.from.y),Math.round(r.to.x),Math.round(r.to.y),null!==(t=this.alive_time)&&void 0!==t?t:2);break;case"text":alt1.overLayTextEx(r.text,r.options.color,null!==(i=r.options.width)&&void 0!==i?i:20,Math.round(r.position.x),Math.round(r.position.y),this.alive_time,void 0,null===(n=r.options.centered)||void 0===n||n,null===(o=r.options.shadow)||void 0===o||o)}return alt1.overLaySetGroup(""),this}render(){return this.group_name||(this.group_name=_g()),this.freeze(),alt1.overLayClearGroup(this.group_name),this.push_draw_calls(),alt1.overLayRefreshGroup(this.group_name),this}clear(){return this.geometry=[],this}hide(){return this.group_name&&(alt1.overLayClearGroup(this.group_name),alt1.overLayRefreshGroup(this.group_name)),this}freeze(){this.group_name&&(alt1.overLayFreezeGroup(this.group_name),this.is_frozen=!0)}unfreeze(){this.is_frozen&&(alt1.overLayContinueGroup(this.group_name),this.is_frozen=!1)}}!function(e){let t,i,n;!function(e){e.transform=function(e,t){if("rect"===e.type)return{type:"rect",rect:F.transform(e.rect,t),options:e.options}}}(t=e.Geometry||(e.Geometry={})),function(e){e.DEFAULT={width:2,color:D(255,0,0)}}(i=e.StrokeOptions||(e.StrokeOptions={})),function(e){e.DEFAULT={width:20,color:D(255,0,0),centered:!0,shadow:!0}}(n=e.TextOptions||(e.TextOptions={})),e.over=function(){return new e}}(xg||(xg={}));var wg=B.rgbSimilarity,bg=B.sampleImage;class kg{constructor(e){this.body=e,this._is_arc_lines=nu((()=>{const e=this.arc_line.getData(),t=[51,25,0];let i=0;for(let n=0;n<e.width;n++)wg(t,bg(e,{x:n,y:0}))>.9&&i++;return i>5})),e.setName("compass"),this.arc_line=e.getSubSection({origin:{x:34,y:235},size:{x:112,y:1}}).setName("arc line"),this.compass_area=e.getSubSection(kg.ARROW_RECT_FROM_BODY).setName("compass body")}recapture(){return new kg(this.body.recapture())}isArcCompass(){return this._is_arc_lines.get()}static async find(e){const t=e.find(await kg.anchor.get())[0];if(t){const i=e.getSubSection(yg.move(t.relativeRectangle(),kg.origin_offset_from_anchor,kg.UI_SIZE));return new kg(i)}return null}}!function(e){e.anchor=ou((async()=>await U("alt1anchors/compassnorth.png"))),e.origin_offset_from_anchor={x:-78,y:-20},e.UI_SIZE={x:172,y:259},e.ARROW_CENTER_OFFSET_FROM_BODY_TL={x:88,y:137},e.INNER_COMPASS_RADIUS=75,e.TOTAL_COMPASS_RADIUS=80,e.ARROW_RECT_FROM_BODY={origin:j.sub(e.ARROW_CENTER_OFFSET_FROM_BODY_TL,{x:e.TOTAL_COMPASS_RADIUS,y:e.TOTAL_COMPASS_RADIUS}),size:{x:2*e.TOTAL_COMPASS_RADIUS+1,y:2*e.TOTAL_COMPASS_RADIUS+1}}}(kg||(kg={}));var Tg=B.delay;class Sg{constructor(){this.finished_event=pi(),this.is_running=!1,this.should_stop=!1,this.finished=!1,this.interrupt_settings={interrupt:{interval:50,length:1}},this.timeout=Number.MAX_SAFE_INTEGER,this.interrupt_ewent=pi()}asInterval(e){return this.interrupt_settings={interval:e},this}withInterrupt(e,t){return this.interrupt_settings={interrupt:{interval:e,length:t}},this}withTimeout(e){return this.timeout=e,this}async run(){if(this.is_running||this.finished)return null;this.is_running=!0,this.should_stop=!1,this.start_time=Date.now(),this.end_time=this.start_time+this.timeout,this.last_interrupt_time=this.start_time;const e=await this.implementation();return this.is_running=!1,this.should_stop=!1,this.finished=!0,e}isFinished(){return this.finished}onInterrupt(e){return this.interrupt_ewent.on(e),this}async interrupt(e){this.interrupt_ewent.trigger(null),await Tg(e)}stop(){this.is_running&&(this.should_stop=!0)}await(){return new Promise((e=>{this.finished?e(this):this.finished_event.on(e)}))}async checkTime(){const e=Date.now();this.interrupt_settings.interval?await this.interrupt(Math.max(this.interrupt_settings.interval/2,this.last_interrupt_time+this.interrupt_settings.interval-e)):e>=this.end_time?this.stop():e>=this.last_interrupt_time+this.interrupt_settings.interrupt.interval&&(this.last_interrupt_time=e,await this.interrupt(this.interrupt_settings.interrupt.length))}onFinished(e){return this.finished_event.on(e),this}}var Cg=B.A1Color;class Eg{constructor(e,t=null,i=null){this.capture=e,this.screen_rectangle=t,this.parent=i,this._name=void 0,this._data=void 0,this._fullCapturedRectangle={origin:{x:e.img_ref.x,y:e.img_ref.y},size:{x:e.img_ref.width,y:e.img_ref.height}},this.screen_rectangle||(this.screen_rectangle=this._fullCapturedRectangle),i&&(this._relativeRectangle={origin:j.sub(this.screen_rectangle.origin,this.parent.screen_rectangle.origin),size:t.size}),this.size=this.screen_rectangle.size}setName(e){return this._name=e,this}name(){return this._name}raw(){return this.capture.img_ref}screenRectangle(){return this.screen_rectangle}relativeRectangle(){return this._relativeRectangle}find(e){return this.capture.img_ref.findSubimage(e).map((t=>this.getSubSection({origin:t,size:{x:e.width,y:e.height}})))}root(){return this.parent?this.parent:this}getSubSection(e){return new Eg(this.capture,{origin:j.add(this.screen_rectangle.origin,e.origin),size:e.size},this)}getData(){return this._data||(this._data=this.capture.img_ref.toData(this.screen_rectangle.origin.x,this.screen_rectangle.origin.y,this.screen_rectangle.size.x,this.screen_rectangle.size.y)),this._data}recapture(){return Eg.capture(this.screenRectangle())}static capture(e=null){try{const t=Date.now(),i=e?I(e.origin.x,e.origin.y,e.size.x,e.size.y):I(0,0,alt1.rsWidth,alt1.rsHeight);return new Eg({img_ref:i,timestamp:t})}catch(e){return console.error(`Capture failed: ${e.message}`),console.error(e.stack),null}}debugOverlay(e=new xg){return e.rect2(this.screenRectangle()),this._name&&e.text(this._name,this.screen_rectangle.origin,{width:10,centered:!1,color:Cg.fromHex("#FFFFFF")}),e}}var Ag,zg,Lg,Pg,Mg=fg.ANGLE_REFERENCE_VECTOR,Ig=ru.log;class Og{constructor(e,t=(()=>0)){this.keyframes=e,this.base_f=t,this.keyframes=o.sortBy(e,(e=>e.angle))}withBaseline(e){return this.base_f=e,this}getSampleTable(){const e=[];for(let t=0;t<=5e3;t++)e.push(this.sample(t*(2*Math.PI/5e3)));return e}getCSV(){return this.keyframes.map((e=>{var t,i;return[e.angle,e.value,this.base_f(e.angle),e.value+this.base_f(e.angle)].map(Y).join(",")+`,${null===(t=e.original)||void 0===t?void 0:t.x}|${null===(i=e.original)||void 0===i?void 0:i.y}`})).join("\n")}sample(e){if(0==this.keyframes.length)return 0;if(1==this.keyframes.length)return this.keyframes[0].value;let t=o.findLastIndex(this.keyframes,(t=>t.angle<e));t<0&&(t=this.keyframes.length-1);const i=(t+1)%this.keyframes.length,n=this.keyframes[t],r=this.keyframes[i],s=Q(e,n.angle)/Q(r.angle,n.angle);return(1-s)*n.value+s*r.value+this.base_f(e)}static fromCalibrationSamples(e,t=null){const i=e.filter((e=>null!=e.is_angle_degrees)).map((({position:e,is_angle_degrees:t})=>{const i=j.angle(Mg,{x:-e.x,y:-e.y}),n=J(t);let o=i-n;return o<-Math.PI&&(o+=2*Math.PI),{original:e,angle:n,value:o}})),n=(()=>{switch(t){case null:return()=>0;case"cosine":const t=4,n=Math.max(...i.map((e=>e.value))),r=Math.min(...i.map((e=>e.value))),s=(n+r)/2,a=(n-r)/2,l=(e=i.filter((e=>Math.abs(n-e.value)<a/10)).map((e=>e.angle%(2*Math.PI/t))),Math.atan2(o.sum(e.map(Math.sin)),o.sum(e.map(Math.cos))));return e=>a*Math.cos(t*(e-l))+s}var e})(),r=i.map((e=>({...e,value:e.value-n(e.angle)})));return new Og(r,n).withBaseline(n)}}class Dg{constructor(e,t=!1){this.capture=e,this.disable_calibration=t,this._angle=nu((()=>{const e=kg.TOTAL_COMPASS_RADIUS,t=kg.TOTAL_COMPASS_RADIUS,i=this.capture.compass_area.getData(),n={x:i.width/2,y:i.height/2};function r(e,t){const[n,o,r,s]=i.getPixel(e,t);return n<5&&o<5&&r<5}if(Dg.DEBUG_COMPASS_READER&&(Dg.debug_overlay.clear(),this.capture.compass_area.debugOverlay(Dg.debug_overlay)),[{x:-15,y:-15},{x:-14,y:-14},{x:-13,y:-13},{x:-12,y:-12},{x:12,y:12},{x:11,y:11},{x:10,y:10},{x:9,y:9},{x:13,y:-16},{x:12,y:-15},{x:11,y:-14},{x:10,y:-13},{x:-15,y:10},{x:-14,y:9},{x:-13,y:8},{x:-12,y:7}].every((n=>{const o=function(n,o){const r=4*((t+o)*i.width+n+e);return i.data[r]}(n.x,n.y);return o>=75&&o<=110})))return{type:"likely_solved"};const s=[];let a=!1;for(let e=0;e<i.height;e++)for(let t=0;t<i.width;t++)r(t,e)?s.push({x:t,y:e}):!a&&j.max_axis(j.sub({x:t,y:e},n))<=40&&i.getPixel(t,e)[0]<40&&(a=!0);if(a){if(s.length<400)return{type:"likely_closed",details:`Not enough pixels (${s.length}) sampled for the rectangle sample. [MSAA]`};if(s.length<1700)return{type:"likely_concealed",details:`Not enough pixels (${s.length}) sampled for the rectangle sample. [MSAA]`};if(s.length>2250)return{type:"likely_concealed",details:`Too many pixels (${s.length}) sampled for the rectangle sample. [MSAA]`}}else{if(s.length<400)return{type:"likely_closed",details:`Not enough pixels (${s.length}) sampled for the rectangle sample.`};if(s.length<1900)return{type:"likely_concealed",details:`Not enough pixels (${s.length}) sampled for the rectangle sample.`};if(s.length>2300)return{type:"likely_concealed",details:`Too many pixels (${s.length}) sampled for the rectangle sample.`}}const l={x:o.sumBy(s,(e=>e.x))/s.length,y:o.sumBy(s,(e=>e.y))/s.length},c=F.center(F.from(...s),!1),u=e=>j.angle(Mg,j.normalize({x:e.x,y:-e.y})),h=u(j.sub(l,c)),d=s.flatMap((e=>{const t=j.sub(e,c);let i=u(t);return Number.isNaN(i)?[]:(Q(i,h)>Math.PI/2&&(i=X(i-Math.PI)),{angle:i,weight:j.lengthSquared(t)})})),p=X(Math.atan2(o.sum(d.map((e=>e.weight*Math.sin(e.angle)))),o.sum(d.map((e=>e.weight*Math.cos(e.angle)))))),g=this.disable_calibration||Dg.DISABLE_CALIBRATION?null:a?"msaa":"off",m=g?X(p+Dg.calibration_tables[g].sample(p)):p;return Dg.DEBUG_COMPASS_READER&&(Ig().log(`Angle: ${Y(h).toFixed(3)} (CoM), ${Y(p).toFixed(3)} (rect), ${Y(m).toFixed(3)} (final)`,"Compass Reader"),Dg.debug_overlay.render()),{type:"success",angle:m,antialiasing:a}}))}getAngle(){return this._angle.get()}}!function(e){var t=B.greatestCommonDivisor,i=B.cleanedJSON,n=ru.log,r=fg.getExpectedAngle;e.DEBUG_COMPASS_READER=!1,e.DISABLE_CALIBRATION=!1,e.RESOLUTION_INACCURACY_DEGREES=.2,e.CALIBRATION_INACCURACY_DEGREES=.1,e.EPSILON=J(e.RESOLUTION_INACCURACY_DEGREES+e.CALIBRATION_INACCURACY_DEGREES),e.CIRCLE_SAMPLE_CONCEALED_THRESHOLD=J(3),e.debug_overlay=new xg,e.calibration_tables={off:Og.fromCalibrationSamples([{position:{x:-1,y:0},is_angle_degrees:358.97548361371},{position:{x:-10,y:-1},is_angle_degrees:3.0915850765454644},{position:{x:-9,y:-1},is_angle_degrees:3.6243978639386847},{position:{x:-8,y:-1},is_angle_degrees:4.2740649320954125},{position:{x:-7,y:-1},is_angle_degrees:4.943912355929411},{position:{x:-6,y:-1},is_angle_degrees:5.9502482933470295},{position:{x:-5,y:-1},is_angle_degrees:7.5132324018603756},{position:{x:-9,y:-2},is_angle_degrees:8.424254191266932},{position:{x:-4,y:-1},is_angle_degrees:9.533531319479852},{position:{x:-7,y:-2},is_angle_degrees:11.25501316445402},{position:{x:-10,y:-3},is_angle_degrees:11.799394482103063},{position:{x:-3,y:-1},is_angle_degrees:13.542012421869865},{position:{x:-8,y:-3},is_angle_degrees:15.628595494232096},{position:{x:-5,y:-2},is_angle_degrees:16.697241942175143},{position:{x:-7,y:-3},is_angle_degrees:18.109935497202898},{position:{x:-9,y:-4},is_angle_degrees:18.774155031273363},{position:{x:-2,y:-1},is_angle_degrees:21.561442482587285},{position:{x:-9,y:-5},is_angle_degrees:24.191451389629563},{position:{x:-7,y:-4},is_angle_degrees:24.79365104945731},{position:{x:-5,y:-3},is_angle_degrees:25.976762815159063},{position:{x:-8,y:-5},is_angle_degrees:27.197789443178184},{position:{x:-3,y:-2},is_angle_degrees:28.864414114670076},{position:{x:-10,y:-7},is_angle_degrees:30.50935413319901},{position:{x:-7,y:-5},is_angle_degrees:31.143675854268547},{position:{x:-4,y:-3},is_angle_degrees:32.686018586961616},{position:{x:-9,y:-7},is_angle_degrees:33.8521592566474},{position:{x:-5,y:-4},is_angle_degrees:34.785374033080494},{position:{x:-6,y:-5},is_angle_degrees:36.15311641904172},{position:{x:-7,y:-6},is_angle_degrees:37.251947329520604},{position:{x:-8,y:-7},is_angle_degrees:38.14663407012484},{position:{x:-9,y:-8},is_angle_degrees:38.67345995185955},{position:{x:-10,y:-9},is_angle_degrees:39.21630511981937},{position:{y:-1,x:-1},is_angle_degrees:43.61960030459728},{position:{x:-9,y:-10},is_angle_degrees:47.90406441239121},{position:{x:-8,y:-9},is_angle_degrees:48.26401621257827},{position:{x:-7,y:-8},is_angle_degrees:49.01093035602379},{position:{x:-6,y:-7},is_angle_degrees:49.74368797148861},{position:{x:-5,y:-6},is_angle_degrees:50.76736678868917},{position:{x:-4,y:-5},is_angle_degrees:52.24306240574763},{position:{x:-7,y:-9},is_angle_degrees:53.354777279488026},{position:{x:-3,y:-4},is_angle_degrees:54.482207281985765},{position:{x:-5,y:-7},is_angle_degrees:55.986496449727134},{position:{x:-7,y:-10},is_angle_degrees:56.55164864969998},{position:{x:-2,y:-3},is_angle_degrees:58.21159214357648},{position:{x:-5,y:-8},is_angle_degrees:59.996464967912566},{position:{x:-3,y:-5},is_angle_degrees:60.941347237890895},{position:{x:-4,y:-7},is_angle_degrees:62.30115088364926},{position:{x:-5,y:-9},is_angle_degrees:63.05030110535739},{position:{x:-1,y:-2},is_angle_degrees:65.3972229459928},{position:{x:-4,y:-9},is_angle_degrees:67.9381924609354},{position:{x:-3,y:-7},is_angle_degrees:68.63531796270765},{position:{x:-2,y:-5},is_angle_degrees:69.93855280359594},{position:{x:-3,y:-8},is_angle_degrees:71.30162959036313},{position:{x:-1,y:-3},is_angle_degrees:73.34657713754882},{position:{x:-3,y:-10},is_angle_degrees:74.99221499403964},{position:{x:-2,y:-7},is_angle_degrees:75.65052612412218},{position:{x:-1,y:-4},is_angle_degrees:77.4976879484156},{position:{x:-2,y:-9},is_angle_degrees:78.9091931688932},{position:{x:-1,y:-5},is_angle_degrees:79.87351008276288},{position:{x:-1,y:-6},is_angle_degrees:81.57231676838403},{position:{x:-1,y:-7},is_angle_degrees:82.71948916286081},{position:{x:-1,y:-8},is_angle_degrees:83.65512262278655},{position:{x:-1,y:-9},is_angle_degrees:84.15716308021892},{position:{x:-1,y:-10},is_angle_degrees:84.72127405207037},{position:{x:0,y:-1},is_angle_degrees:88.81969121931886},{position:{x:1,y:-10},is_angle_degrees:93.44415500445876},{position:{x:1,y:-9},is_angle_degrees:93.82836112012463},{position:{x:1,y:-8},is_angle_degrees:94.29809632316037},{position:{x:1,y:-7},is_angle_degrees:95.06947700454371},{position:{x:1,y:-6},is_angle_degrees:96.16780558595977},{position:{x:1,y:-5},is_angle_degrees:97.58977886721772},{position:{x:2,y:-9},is_angle_degrees:98.46634764544287},{position:{x:1,y:-4},is_angle_degrees:99.5840229047626},{position:{x:2,y:-7},is_angle_degrees:101.37254723330575},{position:{x:3,y:-10},is_angle_degrees:102.0417318219204},{position:{x:1,y:-3},is_angle_degrees:103.73657745745831},{position:{x:3,y:-8},is_angle_degrees:105.62859549423209},{position:{x:2,y:-5},is_angle_degrees:106.84382873101586},{position:{x:3,y:-7},is_angle_degrees:108.24790833191284},{position:{x:4,y:-9},is_angle_degrees:109.03305369040385},{position:{x:1,y:-2},is_angle_degrees:111.56144248258734},{position:{x:5,y:-9},is_angle_degrees:114.17025803688227},{position:{x:4,y:-7},is_angle_degrees:114.90794888539249},{position:{x:3,y:-5},is_angle_degrees:116.13918305040671},{position:{x:5,y:-8},is_angle_degrees:117.19778944317821},{position:{x:2,y:-3},is_angle_degrees:119.1425984804859},{position:{x:7,y:-10},is_angle_degrees:120.63452506540716},{position:{x:5,y:-7},is_angle_degrees:121.14367585426854},{position:{x:3,y:-4},is_angle_degrees:122.68601858696164},{position:{x:7,y:-9},is_angle_degrees:123.8521592566474},{position:{x:4,y:-5},is_angle_degrees:124.96838479956568},{position:{x:5,y:-6},is_angle_degrees:126.44628903768498},{position:{x:6,y:-7},is_angle_degrees:127.60227097408769},{position:{x:7,y:-8},is_angle_degrees:128.1466340701248},{position:{x:8,y:-9},is_angle_degrees:128.82196032664805},{position:{x:9,y:-10},is_angle_degrees:129.3660359438609},{position:{x:1,y:-1},is_angle_degrees:133.61960030459727},{position:{x:10,y:-9},is_angle_degrees:138.17144963663821},{position:{x:9,y:-8},is_angle_degrees:138.67713160080982},{position:{x:8,y:-7},is_angle_degrees:139.0109303560238},{position:{x:7,y:-6},is_angle_degrees:139.92487782495525},{position:{x:6,y:-5},is_angle_degrees:140.96074988145998},{position:{x:5,y:-4},is_angle_degrees:142.47975023747753},{position:{x:9,y:-7},is_angle_degrees:143.35477727948808},{position:{x:4,y:-3},is_angle_degrees:144.48220728198572},{position:{x:7,y:-5},is_angle_degrees:145.98649644972713},{position:{x:10,y:-7},is_angle_degrees:146.83852648423527},{position:{x:3,y:-2},is_angle_degrees:148.41189959121326},{position:{x:8,y:-5},is_angle_degrees:149.99646496791254},{position:{x:5,y:-3},is_angle_degrees:151.23110249069535},{position:{x:7,y:-4},is_angle_degrees:152.36472837101428},{position:{x:9,y:-5},is_angle_degrees:153.1069843794491},{position:{x:2,y:-1},is_angle_degrees:155.3972229459928},{position:{x:9,y:-4},is_angle_degrees:158.11428899635948},{position:{x:7,y:-3},is_angle_degrees:158.82739948470518},{position:{x:5,y:-2},is_angle_degrees:160.062970095961},{position:{x:8,y:-3},is_angle_degrees:161.3016295903631},{position:{x:3,y:-1},is_angle_degrees:163.5033282727502},{position:{x:10,y:-3},is_angle_degrees:165.2612094402138},{position:{x:7,y:-2},is_angle_degrees:165.82765228852304},{position:{x:4,y:-1},is_angle_degrees:167.48803697142048},{position:{x:9,y:-2},is_angle_degrees:168.88465955024463},{position:{x:5,y:-1},is_angle_degrees:170.03444123017778},{position:{x:6,y:-1},is_angle_degrees:171.70537931037876},{position:{x:7,y:-1},is_angle_degrees:172.85534104418582},{position:{x:8,y:-1},is_angle_degrees:173.6391145845945},{position:{x:9,y:-1},is_angle_degrees:174.29046341543932},{position:{x:10,y:-1},is_angle_degrees:174.89986177694306},{position:{x:1,y:0},is_angle_degrees:178.9454106464548},{position:{x:10,y:1},is_angle_degrees:183.46500054547502},{position:{x:9,y:1},is_angle_degrees:183.8451728388274},{position:{x:8,y:1},is_angle_degrees:184.3402314808313},{position:{x:7,y:1},is_angle_degrees:185.09664795446173},{position:{x:6,y:1},is_angle_degrees:186.2222018600384},{position:{x:5,y:1},is_angle_degrees:187.6006155768384},{position:{x:9,y:2},is_angle_degrees:188.5063293429787},{position:{x:4,y:1},is_angle_degrees:189.63145560451437},{position:{x:7,y:2},is_angle_degrees:191.2988014247723},{position:{x:10,y:3},is_angle_degrees:192.04173182192037},{position:{x:3,y:1},is_angle_degrees:193.7365774574583},{position:{x:8,y:3},is_angle_degrees:195.62859549423206},{position:{x:5,y:2},is_angle_degrees:196.84382873101583},{position:{x:7,y:3},is_angle_degrees:198.2479083319128},{position:{x:9,y:4},is_angle_degrees:199.03305369040382},{position:{x:2,y:1},is_angle_degrees:201.5614424825873},{position:{x:9,y:5},is_angle_degrees:204.1914513896296},{position:{x:7,y:4},is_angle_degrees:204.7936510494573},{position:{x:5,y:3},is_angle_degrees:206.1391830504067},{position:{x:8,y:5},is_angle_degrees:207.19778944317824},{position:{x:3,y:2},is_angle_degrees:209.14259848048587},{position:{x:10,y:7},is_angle_degrees:210.50935413319908},{position:{x:7,y:5},is_angle_degrees:211.14367585426857},{position:{x:4,y:3},is_angle_degrees:212.68601858696158},{position:{x:9,y:7},is_angle_degrees:213.8521592566474},{position:{x:5,y:4},is_angle_degrees:214.9683847995657},{position:{x:6,y:5},is_angle_degrees:216.1531164190416},{position:{x:7,y:6},is_angle_degrees:217.60227097408762},{position:{x:8,y:7},is_angle_degrees:218.14663407012475},{position:{x:9,y:8},is_angle_degrees:218.82196032664802},{position:{x:10,y:9},is_angle_degrees:219.36603594386088},{position:{y:1,x:1},is_angle_degrees:223.61960030459727},{position:{x:9,y:10},is_angle_degrees:228.17144963663827},{position:{x:8,y:9},is_angle_degrees:228.6771316008098},{position:{x:7,y:8},is_angle_degrees:229.01093035602378},{position:{x:6,y:7},is_angle_degrees:229.92487782495525},{position:{x:5,y:6},is_angle_degrees:230.96074988145992},{position:{x:4,y:5},is_angle_degrees:232.24306240574765},{position:{x:7,y:9},is_angle_degrees:233.35477727948802},{position:{x:3,y:4},is_angle_degrees:234.48220728198575},{position:{x:5,y:7},is_angle_degrees:235.98649644972707},{position:{x:7,y:10},is_angle_degrees:236.83852648423527},{position:{x:2,y:3},is_angle_degrees:238.21159214357647},{position:{x:5,y:8},is_angle_degrees:239.99646496791257},{position:{x:3,y:5},is_angle_degrees:240.94134723789088},{position:{x:4,y:7},is_angle_degrees:242.36472837101428},{position:{x:5,y:9},is_angle_degrees:243.10698437944907},{position:{x:1,y:2},is_angle_degrees:245.39722294599275},{position:{x:4,y:9},is_angle_degrees:247.93819246093537},{position:{x:3,y:7},is_angle_degrees:248.63531796270763},{position:{x:2,y:5},is_angle_degrees:250.062970095961},{position:{x:3,y:8},is_angle_degrees:251.30162959036312},{position:{x:1,y:3},is_angle_degrees:253.50332827275014},{position:{x:3,y:10},is_angle_degrees:254.99221499403959},{position:{x:2,y:7},is_angle_degrees:255.82765228852304},{position:{x:1,y:4},is_angle_degrees:257.48803697142046},{position:{x:2,y:9},is_angle_degrees:258.88465955024463},{position:{x:1,y:5},is_angle_degrees:260.0344412301777},{position:{x:1,y:6},is_angle_degrees:261.5414743063807},{position:{x:1,y:7},is_angle_degrees:262.70418106028814},{position:{x:1,y:8},is_angle_degrees:263.6438870226672},{position:{x:1,y:9},is_angle_degrees:264.2950487518362},{position:{x:1,y:10},is_angle_degrees:264.71882322839576},{position:{x:0,y:1},is_angle_degrees:268.9574622056212},{position:{x:-1,y:10},is_angle_degrees:273.4535523780269},{position:{x:-1,y:9},is_angle_degrees:273.6585928958727},{position:{x:-1,y:8},is_angle_degrees:274.3202088854179},{position:{x:-1,y:7},is_angle_degrees:275.09664795446173},{position:{x:-1,y:6},is_angle_degrees:276.1960778097401},{position:{x:-1,y:5},is_angle_degrees:277.5738361587578},{position:{x:-2,y:9},is_angle_degrees:278.5063293429787},{position:{x:-1,y:4},is_angle_degrees:279.6314556045144},{position:{x:-2,y:7},is_angle_degrees:281.2988014247723},{position:{x:-3,y:10},is_angle_degrees:282.0417318219204},{position:{x:-1,y:3},is_angle_degrees:283.54201242186986},{position:{x:-3,y:8},is_angle_degrees:285.62859549423206},{position:{x:-2,y:5},is_angle_degrees:286.6972419421751},{position:{x:-3,y:7},is_angle_degrees:288.24790833191287},{position:{x:-4,y:9},is_angle_degrees:289.03305369040385},{position:{x:-1,y:2},is_angle_degrees:291.56144248258727},{position:{x:-5,y:9},is_angle_degrees:294.1914513896296},{position:{x:-4,y:7},is_angle_degrees:294.7936510494573},{position:{x:-3,y:5},is_angle_degrees:296.1391830504067},{position:{x:-5,y:8},is_angle_degrees:297.19778944317824},{position:{x:-2,y:3},is_angle_degrees:299.1425984804859},{position:{x:-7,y:10},is_angle_degrees:300.5093541331991},{position:{x:-5,y:7},is_angle_degrees:301.14367585426857},{position:{x:-3,y:4},is_angle_degrees:302.6860185869616},{position:{x:-7,y:9},is_angle_degrees:303.85215925664744},{position:{x:-4,y:5},is_angle_degrees:304.96838479956574},{position:{x:-5,y:6},is_angle_degrees:306.1531164190416},{position:{x:-6,y:7},is_angle_degrees:307.2519473295205},{position:{x:-7,y:8},is_angle_degrees:308.1466340701247},{position:{x:-8,y:9},is_angle_degrees:308.67345995185957},{position:{x:-9,y:10},is_angle_degrees:309.2163051198193},{position:{x:-1,y:1},is_angle_degrees:313.6196003045972},{position:{x:-10,y:9},is_angle_degrees:317.90406441239116},{position:{x:-9,y:8},is_angle_degrees:318.2640162125783},{position:{x:-8,y:7},is_angle_degrees:319.01093035602383},{position:{x:-7,y:6},is_angle_degrees:319.7436879714886},{position:{x:-6,y:5},is_angle_degrees:320.96074988145995},{position:{x:-5,y:4},is_angle_degrees:322.24306240574754},{position:{x:-9,y:7},is_angle_degrees:323.354777279488},{position:{x:-4,y:3},is_angle_degrees:324.48220728198584},{position:{x:-7,y:5},is_angle_degrees:325.9864964497272},{position:{x:-10,y:7},is_angle_degrees:326.8385264842353},{position:{x:-3,y:2},is_angle_degrees:328.21159214357647},{position:{x:-8,y:5},is_angle_degrees:329.9964649679126},{position:{x:-5,y:3},is_angle_degrees:330.94134723789085},{position:{x:-7,y:4},is_angle_degrees:332.3647283710143},{position:{x:-9,y:5},is_angle_degrees:333.10698437944905},{position:{x:-2,y:1},is_angle_degrees:335.3972229459928},{position:{x:-9,y:4},is_angle_degrees:337.93819246093534},{position:{x:-7,y:3},is_angle_degrees:338.6353179627076},{position:{x:-5,y:2},is_angle_degrees:339.93855280359594},{position:{x:-8,y:3},is_angle_degrees:341.3016295903631},{position:{x:-3,y:1},is_angle_degrees:343.3465771375488},{position:{x:-10,y:3},is_angle_degrees:344.9954729437606},{position:{x:-7,y:2},is_angle_degrees:345.8364433506414},{position:{x:-4,y:1},is_angle_degrees:347.50804883835036},{position:{x:-9,y:2},is_angle_degrees:348.930281257497},{position:{x:-5,y:1},is_angle_degrees:350.08925994058677},{position:{x:-6,y:1},is_angle_degrees:351.605980234129},{position:{x:-7,y:1},is_angle_degrees:352.7440875549545},{position:{x:-8,y:1},is_angle_degrees:353.66974667281113},{position:{x:-9,y:1},is_angle_degrees:354.17074283320943},{position:{x:-10,y:1},is_angle_degrees:354.74060261085043}],"cosine"),msaa:Og.fromCalibrationSamples([{position:{x:-1,y:0},is_angle_degrees:358.9062404843492},{position:{x:-10,y:-1},is_angle_degrees:3.015824227135354},{position:{x:-9,y:-1},is_angle_degrees:3.4063907032698832},{position:{x:-8,y:-1},is_angle_degrees:4.150534306491888},{position:{x:-7,y:-1},is_angle_degrees:4.873816202645667},{position:{x:-6,y:-1},is_angle_degrees:5.744130607255902},{position:{x:-5,y:-1},is_angle_degrees:7.309591296822936},{position:{x:-9,y:-2},is_angle_degrees:8.257751757183227},{position:{x:-4,y:-1},is_angle_degrees:9.547210309382997},{position:{x:-7,y:-2},is_angle_degrees:11.269958340678484},{position:{x:-10,y:-3},is_angle_degrees:11.763352100044244},{position:{x:-3,y:-1},is_angle_degrees:13.519196308111681},{position:{x:-8,y:-3},is_angle_degrees:15.57015809489564},{position:{x:-5,y:-2},is_angle_degrees:16.688472405851865},{position:{x:-7,y:-3},is_angle_degrees:17.90575643760454},{position:{x:-9,y:-4},is_angle_degrees:18.74998936088447},{position:{x:-2,y:-1},is_angle_degrees:21.618285125982755},{position:{x:-9,y:-5},is_angle_degrees:24.047216250388274},{position:{x:-7,y:-4},is_angle_degrees:24.78168335956703},{position:{x:-5,y:-3},is_angle_degrees:25.841972128937723},{position:{x:-8,y:-5},is_angle_degrees:27.08020133177423},{position:{x:-3,y:-2},is_angle_degrees:28.87600384213773},{position:{x:-10,y:-7},is_angle_degrees:30.434166824264857},{position:{x:-7,y:-5},is_angle_degrees:31.108609946620774},{position:{x:-4,y:-3},is_angle_degrees:32.609970338749285},{position:{x:-9,y:-7},is_angle_degrees:33.906090472833256},{position:{x:-5,y:-4},is_angle_degrees:34.681766233120584},{position:{x:-6,y:-5},is_angle_degrees:36.296355869293514},{position:{x:-7,y:-6},is_angle_degrees:37.29676915898529},{position:{x:-8,y:-7},is_angle_degrees:38.022337873723416},{position:{x:-9,y:-8},is_angle_degrees:38.672754953141485},{position:{x:-10,y:-9},is_angle_degrees:39.08997114699732},{position:{y:-1,x:-1},is_angle_degrees:43.58144568725352},{position:{x:-9,y:-10},is_angle_degrees:47.84445639103594},{position:{x:-8,y:-9},is_angle_degrees:48.341366631916294},{position:{x:-7,y:-8},is_angle_degrees:49.17711633077582},{position:{x:-6,y:-7},is_angle_degrees:49.6844862515901},{position:{x:-5,y:-6},is_angle_degrees:50.76829785745487},{position:{x:-4,y:-5},is_angle_degrees:52.32160818440021},{position:{x:-7,y:-9},is_angle_degrees:53.374509182143406},{position:{x:-3,y:-4},is_angle_degrees:54.62827230045663},{position:{x:-5,y:-7},is_angle_degrees:55.97053707956072},{position:{x:-7,y:-10},is_angle_degrees:56.5987246121811},{position:{x:-2,y:-3},is_angle_degrees:58.07037986169753},{position:{x:-5,y:-8},is_angle_degrees:60.01488725059763},{position:{x:-3,y:-5},is_angle_degrees:61.03513199258265},{position:{x:-4,y:-7},is_angle_degrees:62.328258510155},{position:{x:-5,y:-9},is_angle_degrees:62.88426080498041},{position:{x:-1,y:-2},is_angle_degrees:65.59300770955178},{position:{x:-4,y:-9},is_angle_degrees:67.93741623972126},{position:{x:-3,y:-7},is_angle_degrees:68.51132980210602},{position:{x:-2,y:-5},is_angle_degrees:69.83170410057323},{position:{x:-3,y:-8},is_angle_degrees:71.27333083970323},{position:{x:-1,y:-3},is_angle_degrees:73.19941067962753},{position:{x:-3,y:-10},is_angle_degrees:75.00764684394484},{position:{x:-2,y:-7},is_angle_degrees:75.63081972103929},{position:{x:-1,y:-4},is_angle_degrees:77.54688376909357},{position:{x:-2,y:-9},is_angle_degrees:78.76986032195386},{position:{x:-1,y:-5},is_angle_degrees:79.78753018792194},{position:{x:-1,y:-6},is_angle_degrees:81.53998824464456},{position:{x:-1,y:-7},is_angle_degrees:82.70102255937597},{position:{x:-1,y:-8},is_angle_degrees:83.57217920592066},{position:{x:-1,y:-9},is_angle_degrees:84.11478590387199},{position:{x:-1,y:-10},is_angle_degrees:84.62081287565084},{position:{x:0,y:-1},is_angle_degrees:88.75059834389745},{position:{x:1,y:-10},is_angle_degrees:93.22996828015556},{position:{x:1,y:-9},is_angle_degrees:93.6014367507076},{position:{x:1,y:-8},is_angle_degrees:94.17501817246028},{position:{x:1,y:-7},is_angle_degrees:94.99039577943437},{position:{x:1,y:-6},is_angle_degrees:95.95728406075649},{position:{x:1,y:-5},is_angle_degrees:97.5239791753578},{position:{x:2,y:-9},is_angle_degrees:98.31670747228206},{position:{x:1,y:-4},is_angle_degrees:99.59805178089688},{position:{x:2,y:-7},is_angle_degrees:101.42636280812371},{position:{x:3,y:-10},is_angle_degrees:102.0398244093453},{position:{x:1,y:-3},is_angle_degrees:103.6483432977611},{position:{x:3,y:-8},is_angle_degrees:105.57015809489563},{position:{x:2,y:-5},is_angle_degrees:106.86376624548261},{position:{x:3,y:-7},is_angle_degrees:108.1464651205289},{position:{x:4,y:-9},is_angle_degrees:108.96485127495743},{position:{x:1,y:-2},is_angle_degrees:111.61828512598277},{position:{x:5,y:-9},is_angle_degrees:114.2214754602621},{position:{x:4,y:-7},is_angle_degrees:114.94717175735904},{position:{x:3,y:-5},is_angle_degrees:116.0249793273514},{position:{x:5,y:-8},is_angle_degrees:117.08020133177425},{position:{x:2,y:-3},is_angle_degrees:119.05417812006047},{position:{x:7,y:-10},is_angle_degrees:120.61595904264577},{position:{x:5,y:-7},is_angle_degrees:121.10860994662077},{position:{x:3,y:-4},is_angle_degrees:122.60997033874926},{position:{x:7,y:-9},is_angle_degrees:123.90609047283323},{position:{x:4,y:-5},is_angle_degrees:124.80989374618962},{position:{x:5,y:-6},is_angle_degrees:126.46501357523641},{position:{x:6,y:-7},is_angle_degrees:127.49736615816256},{position:{x:7,y:-8},is_angle_degrees:128.02233787372342},{position:{x:8,y:-9},is_angle_degrees:128.82865816003024},{position:{x:9,y:-10},is_angle_degrees:129.2455032837375},{position:{x:1,y:-1},is_angle_degrees:133.5814456872535},{position:{x:10,y:-9},is_angle_degrees:138.01373371960534},{position:{x:9,y:-8},is_angle_degrees:138.48429205891387},{position:{x:8,y:-7},is_angle_degrees:139.1771163307758},{position:{x:7,y:-6},is_angle_degrees:140.04817548781395},{position:{x:6,y:-5},is_angle_degrees:140.97614431680358},{position:{x:5,y:-4},is_angle_degrees:142.42968193418042},{position:{x:9,y:-7},is_angle_degrees:143.37450918214338},{position:{x:4,y:-3},is_angle_degrees:144.62827230045662},{position:{x:7,y:-5},is_angle_degrees:145.97053707956073},{position:{x:10,y:-7},is_angle_degrees:146.71217806281234},{position:{x:3,y:-2},is_angle_degrees:148.3480817813216},{position:{x:8,y:-5},is_angle_degrees:150.01488725059764},{position:{x:5,y:-3},is_angle_degrees:151.11942009130226},{position:{x:7,y:-4},is_angle_degrees:152.48882478832707},{position:{x:9,y:-5},is_angle_degrees:153.03818150572462},{position:{x:2,y:-1},is_angle_degrees:155.59300770955178},{position:{x:9,y:-4},is_angle_degrees:158.1120814237667},{position:{x:7,y:-3},is_angle_degrees:158.69019268359077},{position:{x:5,y:-2},is_angle_degrees:159.95731219968815},{position:{x:8,y:-3},is_angle_degrees:161.27333083970322},{position:{x:3,y:-1},is_angle_degrees:163.38350382859878},{position:{x:10,y:-3},is_angle_degrees:165.13760046767635},{position:{x:7,y:-2},is_angle_degrees:165.77390924845312},{position:{x:4,y:-1},is_angle_degrees:167.55014528069785},{position:{x:9,y:-2},is_angle_degrees:168.76986032195387},{position:{x:5,y:-1},is_angle_degrees:169.8956044687564},{position:{x:6,y:-1},is_angle_degrees:171.7043010947753},{position:{x:7,y:-1},is_angle_degrees:172.95213437442902},{position:{x:8,y:-1},is_angle_degrees:173.53133623729605},{position:{x:9,y:-1},is_angle_degrees:174.27058718929518},{position:{x:10,y:-1},is_angle_degrees:174.74450865179196},{position:{x:1,y:0},is_angle_degrees:178.87193028119924},{position:{x:10,y:1},is_angle_degrees:183.22996828015556},{position:{x:9,y:1},is_angle_degrees:183.62316853267237},{position:{x:8,y:1},is_angle_degrees:184.1982922640779},{position:{x:7,y:1},is_angle_degrees:185.0206411031291},{position:{x:6,y:1},is_angle_degrees:185.95728406075645},{position:{x:5,y:1},is_angle_degrees:187.3539122007621},{position:{x:9,y:2},is_angle_degrees:188.31670747228205},{position:{x:4,y:1},is_angle_degrees:189.59805178089687},{position:{x:7,y:2},is_angle_degrees:191.26995834067847},{position:{x:10,y:3},is_angle_degrees:192.03982440934527},{position:{x:3,y:1},is_angle_degrees:193.64834329776107},{position:{x:8,y:3},is_angle_degrees:195.57015809489562},{position:{x:5,y:2},is_angle_degrees:196.86376624548254},{position:{x:7,y:3},is_angle_degrees:198.14646512052886},{position:{x:9,y:4},is_angle_degrees:198.96485127495743},{position:{x:2,y:1},is_angle_degrees:201.61828512598277},{position:{x:9,y:5},is_angle_degrees:204.04721625038826},{position:{x:7,y:4},is_angle_degrees:204.781683359567},{position:{x:5,y:3},is_angle_degrees:206.02497932735136},{position:{x:8,y:5},is_angle_degrees:207.08020133177425},{position:{x:3,y:2},is_angle_degrees:209.05417812006047},{position:{x:10,y:7},is_angle_degrees:210.43416682426485},{position:{x:7,y:5},is_angle_degrees:211.10860994662073},{position:{x:4,y:3},is_angle_degrees:212.60997033874935},{position:{x:9,y:7},is_angle_degrees:213.9060904728331},{position:{x:5,y:4},is_angle_degrees:214.8098937461895},{position:{x:6,y:5},is_angle_degrees:216.29635586929354},{position:{x:7,y:6},is_angle_degrees:217.49736615816246},{position:{x:8,y:7},is_angle_degrees:218.02233787372333},{position:{x:9,y:8},is_angle_degrees:218.82865816003016},{position:{x:10,y:9},is_angle_degrees:219.24550328373743},{position:{y:1,x:1},is_angle_degrees:223.58144568725348},{position:{x:9,y:10},is_angle_degrees:228.0137337196053},{position:{x:8,y:9},is_angle_degrees:228.4842920589138},{position:{x:7,y:8},is_angle_degrees:229.17711633077585},{position:{x:6,y:7},is_angle_degrees:230.04817548781398},{position:{x:5,y:6},is_angle_degrees:230.97614431680344},{position:{x:4,y:5},is_angle_degrees:232.32160818440016},{position:{x:7,y:9},is_angle_degrees:233.37450918214327},{position:{x:3,y:4},is_angle_degrees:234.62827230045656},{position:{x:5,y:7},is_angle_degrees:235.97053707956078},{position:{x:7,y:10},is_angle_degrees:236.7121780628123},{position:{x:2,y:3},is_angle_degrees:238.07037986169746},{position:{x:5,y:8},is_angle_degrees:240.01488725059764},{position:{x:3,y:5},is_angle_degrees:241.0351319925826},{position:{x:4,y:7},is_angle_degrees:242.48882478832692},{position:{x:5,y:9},is_angle_degrees:243.03818150572462},{position:{x:1,y:2},is_angle_degrees:245.59300770955178},{position:{x:4,y:9},is_angle_degrees:247.9374162397213},{position:{x:3,y:7},is_angle_degrees:248.51132980210596},{position:{x:2,y:5},is_angle_degrees:249.95731219968818},{position:{x:3,y:8},is_angle_degrees:251.27333083970322},{position:{x:1,y:3},is_angle_degrees:253.38350382859878},{position:{x:3,y:10},is_angle_degrees:255.01187448977316},{position:{x:2,y:7},is_angle_degrees:255.7739092484531},{position:{x:1,y:4},is_angle_degrees:257.5468837690936},{position:{x:2,y:9},is_angle_degrees:258.76986032195384},{position:{x:1,y:5},is_angle_degrees:259.8956044687564},{position:{x:1,y:6},is_angle_degrees:261.5399882446446},{position:{x:1,y:7},is_angle_degrees:262.6713286659715},{position:{x:1,y:8},is_angle_degrees:263.531336237296},{position:{x:1,y:9},is_angle_degrees:264.27058718929516},{position:{x:1,y:10},is_angle_degrees:264.5930379316402},{position:{x:0,y:1},is_angle_degrees:268.8853991059313},{position:{x:-1,y:10},is_angle_degrees:273.22996828015556},{position:{x:-1,y:9},is_angle_degrees:273.44906766582966},{position:{x:-1,y:8},is_angle_degrees:274.1982922640779},{position:{x:-1,y:7},is_angle_degrees:275.0206411031291},{position:{x:-1,y:6},is_angle_degrees:275.9572840607565},{position:{x:-1,y:5},is_angle_degrees:277.3539122007621},{position:{x:-2,y:9},is_angle_degrees:278.30713187597485},{position:{x:-1,y:4},is_angle_degrees:279.59805178089687},{position:{x:-2,y:7},is_angle_degrees:281.26995834067844},{position:{x:-3,y:10},is_angle_degrees:282.03982440934533},{position:{x:-1,y:3},is_angle_degrees:283.51919630811165},{position:{x:-3,y:8},is_angle_degrees:285.57015809489565},{position:{x:-2,y:5},is_angle_degrees:286.6884724058518},{position:{x:-3,y:7},is_angle_degrees:288.1464651205289},{position:{x:-4,y:9},is_angle_degrees:288.96485127495737},{position:{x:-1,y:2},is_angle_degrees:291.6182851259827},{position:{x:-5,y:9},is_angle_degrees:294.04721625038826},{position:{x:-4,y:7},is_angle_degrees:294.781683359567},{position:{x:-3,y:5},is_angle_degrees:296.02497932735133},{position:{x:-5,y:8},is_angle_degrees:297.0802013317742},{position:{x:-2,y:3},is_angle_degrees:299.05417812006044},{position:{x:-7,y:10},is_angle_degrees:300.4341668242649},{position:{x:-5,y:7},is_angle_degrees:301.10860994662073},{position:{x:-3,y:4},is_angle_degrees:302.6099703387494},{position:{x:-7,y:9},is_angle_degrees:303.9060904728331},{position:{x:-4,y:5},is_angle_degrees:304.8098937461895},{position:{x:-5,y:6},is_angle_degrees:306.2963558692935},{position:{x:-6,y:7},is_angle_degrees:307.29676915898517},{position:{x:-7,y:8},is_angle_degrees:308.0223378737234},{position:{x:-8,y:9},is_angle_degrees:308.67275495314135},{position:{x:-9,y:10},is_angle_degrees:309.0899711469973},{position:{x:-1,y:1},is_angle_degrees:313.5814456872535},{position:{x:-10,y:9},is_angle_degrees:317.84445639103586},{position:{x:-9,y:8},is_angle_degrees:318.34136663191634},{position:{x:-8,y:7},is_angle_degrees:319.17711633077585},{position:{x:-7,y:6},is_angle_degrees:319.6844862515901},{position:{x:-6,y:5},is_angle_degrees:320.9761443168036},{position:{x:-5,y:4},is_angle_degrees:322.32160818440013},{position:{x:-9,y:7},is_angle_degrees:323.3745091821434},{position:{x:-4,y:3},is_angle_degrees:324.6282723004566},{position:{x:-7,y:5},is_angle_degrees:325.9705370795608},{position:{x:-10,y:7},is_angle_degrees:326.7121780628124},{position:{x:-3,y:2},is_angle_degrees:328.0703798616976},{position:{x:-8,y:5},is_angle_degrees:330.0148872505976},{position:{x:-5,y:3},is_angle_degrees:331.03513199258265},{position:{x:-7,y:4},is_angle_degrees:332.488824788327},{position:{x:-9,y:5},is_angle_degrees:333.0381815057246},{position:{x:-2,y:1},is_angle_degrees:335.5930077095517},{position:{x:-9,y:4},is_angle_degrees:337.9374162397213},{position:{x:-7,y:3},is_angle_degrees:338.511329802106},{position:{x:-5,y:2},is_angle_degrees:339.83170410057323},{position:{x:-8,y:3},is_angle_degrees:341.27333083970325},{position:{x:-3,y:1},is_angle_degrees:343.19941067962753},{position:{x:-10,y:3},is_angle_degrees:345.0162001165841},{position:{x:-7,y:2},is_angle_degrees:345.78173034615276},{position:{x:-4,y:1},is_angle_degrees:347.5468837690936},{position:{x:-9,y:2},is_angle_degrees:348.7854454385997},{position:{x:-5,y:1},is_angle_degrees:349.9166763043462},{position:{x:-6,y:1},is_angle_degrees:351.57457222457924},{position:{x:-7,y:1},is_angle_degrees:352.7424032196642},{position:{x:-8,y:1},is_angle_degrees:353.60953047306907},{position:{x:-9,y:1},is_angle_degrees:354.15608220452185},{position:{x:-10,y:1},is_angle_degrees:354.6625599088827}],"cosine")};class s extends Sg{constructor(e,t,i=!1,n=!1){super(),this.matched_ui=e,this.show_overlay=t,this.disable_calibration=i,this.refind_after_close=n,this.committed_state=mi(null).equality(((e,t)=>(null==e?void 0:e.angle)==(null==t?void 0:t.angle)&&(null==e?void 0:e.state)==(null==t?void 0:t.state))),this.last_read=null,this.overlay=new xg,this.tick_counter=0,this.last_ticks={success:-2,likely_closed:-2,likely_solved:-2,likely_concealed:-2},this.previous_state=null,this.buffered_state=null,this.last_stationary_tick=-1,this.asInterval(100)}closed(){this.committed_state.set({angle:null,state:"closed"}),this.refind_after_close&&(this.matched_ui=null)}async tick(){var t,i,r;const s=this.tick_counter++;if(this.refind_after_close&&!this.matched_ui&&(this.matched_ui=await kg.find(Eg.capture())),!this.matched_ui)return;const a=new e(this.matched_ui.recapture(),this.disable_calibration);this.overlay.clear();{const e=this.last_read=a.getAngle(),i=Date.now();o.isEqual(null===(t=this.buffered_state)||void 0===t?void 0:t.state,e)?this.buffered_state.last_confirmed=i:(this.previous_state=this.buffered_state,this.buffered_state={since:i,last_confirmed:i,state:e})}const l=this.buffered_state.state,c=this.buffered_state.last_confirmed-this.buffered_state.since;"likely_concealed"!=l.type&&"likely_closed"!=l.type||n().log(`${l.type}: ${l.details}`,"Compass Reader");const u=this.last_ticks.likely_solved>=0;if("likely_closed"==l.type&&(c>200||u)||"likely_concealed"==l.type&&(c>5e3||u)?this.closed():"likely_concealed"==l.type||"likely_closed"==l.type?this.overlay.text("Concealed",j.add(yg.center(a.capture.body.screenRectangle()),{x:5,y:100}),{shadow:!0,centered:!0,width:12,color:D(128,128,128)}):"likely_solved"==l.type?(this.overlay.rect2(yg.move(a.capture.body.screenRectangle(),{x:59,y:172},{x:55,y:52}),{width:2,color:D(0,255,0)}),this.overlay.text("Solved",j.add(yg.center(a.capture.body.screenRectangle()),{x:5,y:100}),{shadow:!0,centered:!0,width:12,color:D(0,255,0)}),this.committed_state.set({angle:null,state:"solved"})):"success"==l.type&&(c>.1?(this.last_stationary_tick=s,c>("spinning"==(null===(i=this.committed_state.value())||void 0===i?void 0:i.state)?200:100)&&this.committed_state.set({angle:l.angle,state:"normal"})):"success"==(null===(r=this.previous_state)||void 0===r?void 0:r.state.type)&&s-this.last_stationary_tick>2&&this.committed_state.set({angle:null,state:"spinning"})),this.last_ticks[l.type]=s,this.committed_state.value()){let e=null;const t=this.committed_state.value();"spinning"==t.state?e="Spinning":null!=t.angle&&(e=`${Y(t.angle).toFixed(this.disable_calibration?3:1)}`),e&&this.overlay.text(e,j.add(yg.center(a.capture.body.screenRectangle()),{x:5,y:8}),{shadow:!0,centered:!0,width:15,color:D(255,255,255)})}this.show_overlay&&this.overlay.render()}async implementation(){for(var e,t;!this.should_stop;){try{await this.tick()}catch(e){}await this.checkTime()}null===(t=null===(e=this.overlay)||void 0===e?void 0:e.clear())||void 0===t||t.render()}onChange(e,t){return this.committed_state.subscribe(e,!1,t),this}state(){return this.committed_state.value()}}e.Service=s;class l extends Ml{constructor(e=[]){super({size:"fullscreen",fixed:!0,disable_close_button:!1}),this.samples=[],this.samples=o.cloneDeep(e),this.handler=Is().app.main_hotkey.subscribe(0,(e=>{this.commit()})),this.hidden.on((()=>{this.reader.stop(),this.handler.remove()})),this.reader=new s(null,!0,!0,!0),this.reader.run()}delete(){const e=this.samples.findIndex((e=>j.eq(e.position,this.layer.offset)));this.samples.splice(e,1),this.layer.updateTileOverlays()}commit(){const e=this.reader.state();if("normal"==e.state){const t=this.samples.find((e=>j.eq(e.position,this.layer.offset)));t?t.is_angle_degrees=Y(e.angle):(this.samples.push({position:this.layer.offset,is_angle_degrees:Y(e.angle)}),o.sortBy(this.samples,(e=>r(e.position,{x:0,y:0})))),this.autoNextSpot()}}autoNextSpot(){const e=e=>!(t(e.x,e.y)>1)&&(!this.samples.find((t=>j.eq(t.position,e)))&&(this.layer.setOffset(e),!0));if(!(e({x:1,y:0})||e({x:0,y:1})||e({x:-1,y:0})||e({x:0,y:-1})))for(let i=3;i<=15;i++){const n=Math.pow(2,i),o=Math.sqrt(n);for(let r=1;r<n;r++){const s=r*(2*Math.PI)/n;function a(e,t){if(t>1){const i=a(e,1/t);return{x:i.y,y:i.x}}let i={y:0,x:1},n={y:1,x:1};for(;;){let o=j.add(i,n);if(o.x>e||o.y>e)return t-i.y/i.x<n.y/n.x-t?i:n;o.y/o.x<t?i=o:n=o}}const l=a(o,Math.abs(Math.sin(s))/Math.abs(Math.cos(s)));if(s>Math.PI/2&&s<3*Math.PI/2&&(l.x*=-1),s>Math.PI&&(l.y*=-1),e(l))return void console.log(`D: ${i}`)}}}render(){super.render(),this.body.css("display","flex").css("flex-direction","column");const e=(new Ss).css2({width:"100%",height:"500px"}).appendTo(this.body);setTimeout((()=>e.map.invalidateSize()),1e3),this.expected=c().appendTo(this.body),(new Ll).buttons(new yl("Auto").onClick((()=>this.autoNextSpot())),new yl("Commit").onClick((()=>this.commit())),new yl("Delete").onClick((()=>this.delete()))).appendTo(this.body),(new Ll).buttons(new yl("Import").onClick((async()=>{this.samples=(await new yc((e=>JSON.parse(e))).do()).imported,this.autoNextSpot()})),new yl("Export JSON").onClick((()=>{new mc("[\n"+o.sortBy(this.samples,(e=>j.angle(Mg,{x:-e.position.x,y:-e.position.y}))).map((e=>i(e,void 0))).join(",\n")+"\n]").show()})),new yl("Export CSV").onClick((()=>{new mc(Og.fromCalibrationSamples(this.samples,"cosine").getCSV()).show()}))).appendTo(this.body),e.map.addGameLayer(this.layer=new l.Layer(this)),this.autoNextSpot()}}e.CalibrationTool=l,function(e){var i=Wc.gielinor_compass;class n extends Ci{constructor(e){super(),this.spot=e,this.active=!1,this.setInteractive()}setActive(e){return e!=this.active&&(this.active=e,this.requestRendering()),this}bounds(){return F.from(this.spot)}async render_implementation(e){const t=this.active?1:.5,i=(this.active?1:.5)*(e.highlight?1.5:1);return a.marker(j.toLatLong(this.spot),{icon:bs(this.spot.level,i),opacity:t,interactive:!0,bubblingMouseEvents:!0}).addTo(this).getElement()}}e.KnownMarker=n,e.Layer=class extends os{constructor(e){super(),this.tool=e,this.offset={x:-1,y:1},this.existing_sample=null,this.overlay=null,this.markers=i.spots.map((e=>new n(e).addTo(this))),this.setReference(i.spots[0])}eventClick(e){e.onPost((()=>{if(e.active_entity instanceof n)this.setReference(e.active_entity.spot);else{const i=j.sub(e.tile(),this.reference);if(0==i.x&&0==i.y)return;const n=t(Math.abs(i.x),Math.abs(i.y));this.setOffset(j.scale(1/n,i))}}))}setOffset(e){this.offset=e,this.existing_sample=this.tool.samples.find((t=>j.eq(t.position,e))),this.existing_sample?this.tool.expected.text(`Selected: ${e.x}|${e.y} Expected: ${Y(X(Math.atan2(-e.y,-e.x))).toFixed(3)}, Sample: ${this.existing_sample.is_angle_degrees.toFixed(3)}`):this.tool.expected.text(`Selected: ${e.x}|${e.y} Expected: ${Y(X(Math.atan2(-e.y,-e.x))).toFixed(3)}`),this.updateTileOverlays()}setReference(e){this.reference=e,this.markers.forEach((t=>{t.setActive(W.equals(t.spot,e))})),this.updateTileOverlays()}updateTileOverlays(){this.overlay&&(this.overlay.remove(),this.overlay=null),this.overlay=a.featureGroup().addTo(this),this.tool.samples.forEach(((e,t)=>{Qr(j.add(this.reference,e.position)).setStyle({color:"#06ffea",fillOpacity:.4,stroke:!1}).addTo(this.overlay)})),a.polygon(this.tool.samples.map((e=>j.toLatLong(j.add(this.reference,e.position))))).setStyle({color:"blue"}).addTo(this.overlay);for(let e=1;e<=100;e++){const t=Qr(j.add(this.reference,j.scale(e,this.offset))).addTo(this.overlay);this.existing_sample&&t.setStyle({color:"orange"})}this.overlay.addTo(this)}}}(l=e.CalibrationTool||(e.CalibrationTool={}))}(Dg||(Dg={})),function(e){let t,i,n,r,s;function a(e){var n;const s=function e(n,o,s){if(n>=o.shape.locks.length)return r.isSolved(o),[{end_state:o,moves:s.map(((e,t)=>null!=e?e:{snake_index:t,offset:0}))}];function a(t,i){s[t.snake_index]=t;const a=e(n+(i?1:0),r.doMove(o,t),s);return s[t.snake_index]=null,a}const l=o.shape.locks[n];if(null==s[l.first.snake]&&null==s[l.second.snake]){const e=o.snakes[l.first.snake];return e.map(((t,n)=>({snake_index:l.first.snake,offset:i.optimizeMove(e,n)}))).flatMap((e=>a(e,!1)))}if(null==s[l.first.snake]||null==s[l.second.snake]){const[e,n]=s[l.first.snake]?[l.first,l.second]:[l.second,l.first],r=o.snakes[e.snake][e.tile],c=o.snakes[n.snake];return c.flatMap(((e,o)=>t.maybeEqual(e,r)?a({snake_index:n.snake,offset:i.optimizeMove(c,n.tile-o)},!0):[]))}return r.lockMaybeSolved(o,l)?e(n+1,o,s):[]}(0,e,e.snakes.map((()=>null))),a=[],l=[];s.forEach((e=>{e.end_state.shape.locks.every((t=>"isnot"!=e.end_state.snakes[t.first.snake][t.first.tile].type&&"isnot"!=e.end_state.snakes[t.second.snake][t.second.tile].type))?a.push(e):l.push(e)}));const c=null!==(n=o.minBy(a,(e=>e.moves.map((e=>Math.abs(e.offset))))))&&void 0!==n?n:1==l.length?l[0]:void 0;return{real:a,maybe:l,preferred:c}}!function(e){e.maybeEqual=function(e,t){return"is"==e.type&&"is"==t.type?e.value==t.value:"is"==e.type&&"isnot"==t.type||"isnot"==e.type&&"is"==t.type?e.value!=t.value:"isnot"==e.type&&"isnot"==t.type||void 0},e.toString=function(e){switch(e.type){case"is":return e.value.toString();case"isnot":return`!${e.value}`}}}(t=e.Element||(e.Element={})),function(e){e.rotate=function(e,t){return e.map(((i,n)=>e[(n-t+e.length)%e.length]))},e.index=function(e,t){return e[(t+e.length)%e.length]},e.optimizeMove=function(e,t){const i=(t+e.length)%e.length;return i>Math.floor(e.length/2)?i-e.length:i},e.toString=function(e){return e.map(t.toString).join(", ")}}(i=e.Snake||(e.Snake={})),function(e){var t=B.Order.natural_order;e.isEqual=function(e,t){return o.isEqual(e.snake_lengths,t.snake_lengths)&&e.locks.length==t.locks.length},e.hash=function(e){return[...e.snake_lengths,...e.locks.map((e=>{const[t,i]=e.first.snake<e.second.snake?[e.first,e.second]:[e.second,e.first];return 1e4*(100*t.snake+t.tile)+(100*i.snake+i.tile)})).sort(t)]}}(n=e.PuzzleShape||(e.PuzzleShape={})),function(e){function n(e,t){return e.snakes[t.snake][t.tile]}function r(e,i){const o=n(e,i.first),r=n(e,i.second);return t.maybeEqual(o,r)}e.generate=function(e){const t={shape:e,snakes:e.snake_lengths.map((e=>new Array(e).fill(0).map((()=>({value:o.random(20),type:"is"})))))};return e.locks.forEach((({first:e,second:i})=>{t.snakes[i.snake][i.tile]=t.snakes[e.snake][e.tile]})),t},e.shuffle=function(e){return{shape:e.shape,snakes:e.snakes.map((e=>{const t=o.random(e.length);return i.rotate(e,t)}))}},e.get=n,e.isSolved=function(e){return e.shape.locks.every((t=>r(e,t)))},e.doMove=function(e,...t){return{snakes:e.snakes.map(((e,n)=>{const o=t.find((e=>e.snake_index==n));return o?i.rotate(e,o.offset):e})),shape:e.shape}},e.lockMaybeSolved=r,e.equal=function(e,t){return o.isEqual(e,t)}}(r=e.PuzzleState||(e.PuzzleState={})),e.construct=function(e,t){return{shape:e,snakes:t.map((e=>e.map((e=>({type:"is",value:e})))))}},function(e){e.equals=function(e,t){return o.isEqual(e,t)},e.toString=function(e){return e.moves.map((e=>`${e.snake_index}:${e.offset}`)).join(",")}}(s=e.Solution||(e.Solution={})),e.unify=function(e,t){if(!e||!t)return null;if(!n.isEqual(e.shape,t.shape))return null;function o(e,t){return"is"==e.type&&"is"==t.type&&e.value==t.value||"is"==e.type&&"isnot"==t.type&&e.value!=t.value?e:"isnot"==e.type&&"is"==t.type&&e.value!=t.value||"isnot"==e.type&&"isnot"==t.type?t:null}function r(e,t){const i=[];for(let n=0;n<e.length;n++){const r=o(e[n],t[n]);if(!r)return null;i.push(r)}return i}function s(e,t){for(let n=0;n<e.length;n++){const o=r(e,i.rotate(t,n));if(o)return o}return null}const a=[];for(let i=0;i<e.snakes.length;i++){const n=s(e.snakes[i],t.snakes[i]);if(!n)return null;a.push(n)}return{shape:e.shape,snakes:a}},e.solveAll=a,e.solve=function(e){return a(e).preferred}}(Ag||(Ag={})),function(e){var t=B.rgbSimilarity,i=B.count;const n={x:24,y:24},r={x:-11,y:9},s={x:12,y:12},a={x:3,y:3},l=[{hash:[16,16,16,30113,40214,60110,70211,1050203,1070207,1090209,1110213],buttons:[{clockwise:{x:0,y:1},counterclockwise:{x:0,y:3}},{clockwise:{x:12,y:5},counterclockwise:{x:12,y:3}},{clockwise:{x:4,y:9},counterclockwise:{x:6,y:9}}]},{hash:[16,16,16,10115,20214,60210,70109,1010215,1070209],buttons:[{clockwise:{x:-1,y:3},counterclockwise:{x:-1,y:5}},{clockwise:{x:5,y:9},counterclockwise:{x:7,y:9}},{clockwise:{x:13,y:5},counterclockwise:{x:13,y:3}}]},{hash:[10,16,18,10,30201,40103,60216,80101,1020217,1040203,1060205,1070208,1090210,1100303,1110214,1120309,2120304,2150301],buttons:[{clockwise:{x:12,y:3},counterclockwise:{x:12,y:1}},{clockwise:{x:5,y:0},counterclockwise:{x:2,y:3}},{clockwise:{x:5,y:10},counterclockwise:{x:7,y:10}},{clockwise:{x:1,y:6},counterclockwise:{x:1,y:8}}]},{hash:[28,14,14,10113,30101,80201,100203,150206,170208,220108,240110],buttons:[{clockwise:{x:10,y:0},counterclockwise:{x:2,y:0}},{clockwise:{x:0,y:4},counterclockwise:{x:0,y:6}},{clockwise:{x:12,y:6},counterclockwise:{x:12,y:4}}]},{hash:[16,16,16,10115,20214,30103,40204,90207,100106,110211,120112,1010215,1070209],buttons:[{clockwise:{x:6,y:9},counterclockwise:{x:8,y:9}},{clockwise:{x:0,y:5},counterclockwise:{x:0,y:7}},{clockwise:{x:12,y:3},counterclockwise:{x:12,y:1}}]},{hash:[16,16,16,20115,40103,90104,110114,1060204,1070211,1110213,1120202],buttons:[{clockwise:{x:12,y:7},counterclockwise:{x:12,y:5}},{clockwise:{x:11,y:2},counterclockwise:{x:9,y:0}},{clockwise:{x:0,y:3},counterclockwise:{x:0,y:5}}]},{hash:[12,12,12,12,10111,30109,50201,70211,1050301,1070311,2030309,2050307],buttons:[{clockwise:{x:3,y:0},counterclockwise:{x:1,y:2}},{clockwise:{x:11,y:2},counterclockwise:{x:9,y:0}},{clockwise:{x:1,y:8},counterclockwise:{x:3,y:10}},{clockwise:{x:9,y:10},counterclockwise:{x:11,y:8}}]},{hash:[16,24,20,20105,50203,110217,140101,1020219,1040201,1110204,1140209,1160211,1190216],buttons:[{clockwise:{x:8,y:0},counterclockwise:{x:4,y:0}},{clockwise:{x:12,y:6},counterclockwise:{x:12,y:2}},{clockwise:{x:0,y:6},counterclockwise:{x:0,y:8}}]},{hash:[16,16,16,10115,20214,40204,50105,90107,100206,120212,130113,1010215,1030203,1090207,1110211],buttons:[{clockwise:{x:11,y:7},counterclockwise:{x:11,y:5}},{clockwise:{x:5,y:9},counterclockwise:{x:7,y:9}},{clockwise:{x:1,y:5},counterclockwise:{x:1,y:7}}]}];function c(e){var t;const i=Ag.PuzzleShape.hash(e);return null===(t=l.find((e=>o.isEqual(e.hash,i))))||void 0===t?void 0:t.buttons}function u(e){return o.max([[159,145,86],[177,161,95],[144,131,79]].map((i=>t(i,e))))>.9}let h;async function d(){if(null==h){const e=await U("alt1anchors/knot_runes/atlas.png"),t=[];for(let i=0;i<Math.floor(e.width/12);i++)t.push(gg.get(e,{x:12*i,y:0},s,a,gg.TypeRGB));h=t}return h}e.getButtons=c,e.getRuneReferences=d;let p=(new xg).withTime(2e3);const g=[{offset:{x:-1,y:-1},background_sample_position:{x:0,y:0}},{offset:{x:1,y:-1},background_sample_position:{x:23,y:0}},{offset:{x:1,y:1},background_sample_position:{x:24,y:24}},{offset:{x:-1,y:1},background_sample_position:{x:0,y:24}}],m=[{x:11,y:-3},{x:12,y:-3},{x:-5,y:12},{x:-5,y:13},{x:29,y:12},{x:29,y:13},{x:11,y:28},{x:12,y:28}],f=[{x:12,y:-1},{x:-1,y:12},{x:24,y:12},{x:12,y:24}],y={match:[[99,178,74],[86,155,64],[108,195,81],[130,235,98]],nomatch:[[60,0,0],[86,0,0],[92,0,0],[106,0,0]]},v={x:70,y:13};e.KnotReader=class{constructor(e){this.ui=e,this.isBroken=!1,this.brokenReason="",this._buttons=ou((async()=>{var e;const t=null===(e=await this.getPuzzle())||void 0===e?void 0:e.shape;return t?c(t):null})),this.relevant_body=e.body.getSubSection({origin:v,size:{x:e.body.size.x-2*v.x,y:e.body.size.y-2*v.y}}),this.img_data=this.relevant_body.getData()}async identifyRune(e){const t=(await d()).map(((t,i)=>({id:i,certainty:gg.similarity(e,t)}))),i=o.maxBy(t,(e=>e.certainty));return i&&i.certainty>.9?i.id:null}findOrigin(){if(this.anchor_grid_origin)return;const e=(()=>{let e=5,t=!0;for(;e<200;){const i={x:107,y:e};this.sample(i);const n=u(this.sample(i));if(!n&&t&&!u(this.sample({x:i.x,y:i.y+24})))return i;t=n,e++}return null})();if(!e)return this.isBroken=!0,void(this.brokenReason="Not intercepted");for(;e.y>0;)if(u(this.sample(j.add(e,{x:-1,y:-1})))){if(u(this.sample(j.add(e,{x:1,y:-1}))))break;e.x++,e.y--}else e.x--,e.y--;this.interception_point=e,u(this.sample(j.add(e,{x:-1,y:0})))||e.x--,this.border_anchor=e;const t=j.add(this.border_anchor,r),i={x:Math.floor(t.x/n.x),y:Math.floor(t.y/n.y)};this.anchor_grid_origin=j.sub(t,j.mul(n,i)),this.runes_on_odd_tiles=(i.x+i.y)%2==1,this.grid_size={x:Math.floor((this.relevant_body.size.x-this.anchor_grid_origin.x)/n.x),y:Math.floor((this.relevant_body.size.y-this.anchor_grid_origin.y)/n.y)}}tileOrigin(e,t=!1){return t?j.add(this.anchor_grid_origin,j.mul(e,n),this.relevant_body.screenRectangle().origin):j.add(this.anchor_grid_origin,j.mul(e,n))}sample(e){return this.img_data.getPixel(e.x,e.y)}async readGrid(){if(!this.grid&&(this.findOrigin(),!this.isBroken)){this.grid=new Array(this.grid_size.y);for(let e=0;e<this.grid_size.y;e++){this.grid[e]=new Array(this.grid_size.x);for(let t=0;t<this.grid_size.x;t++)(t+e)%2==1==this.runes_on_odd_tiles&&(this.grid[e][t]=await this.readTile({x:t,y:e}))}i(this.grid.flat(),(e=>!!e.rune))<20&&(this.brokenReason="Not enough valid tiles",this.isBroken=!0)}}async readTile(e){var n;const r=this.tileOrigin(e),l=g.map((e=>u(this.sample(j.add(r,e.background_sample_position))))),c=i(l,o.identity);if(c>2)return{pos:e,rune:null};const h=c<2,d=function(e){const i=o.maxBy([{track_id:0,colors:[[46,46,77],[45,45,75],[28,28,47],[28,28,47],[35,25,58],[50,50,85]]},{track_id:1,colors:[[137,60,43],[67,29,21],[97,43,30],[62,27,17]]},{track_id:2,colors:[[12,12,18],[11,11,16],[18,18,27]]},{track_id:3,colors:[[43,30,0],[159,112,0],[205,146,0],[104,74,0],[137,97,0]]},{track_id:4,colors:[[95,89,76],[123,116,98],[30,28,24]]}].map((i=>({lane_id:i.track_id,certainty:o.sum(e.map((e=>o.max(i.colors.map((i=>t(i,e)))))))/e.length}))),(e=>e.certainty));return i.certainty>.8?i:null}(m.map((e=>this.sample(j.add(r,e)))));let p=!1;var v;h&&(v=f.map((e=>this.sample(j.add(r,e)))),p=o.sum(v.map((e=>o.max(y.match.map((i=>t(i,e)))))))>o.sum(v.map((e=>o.max(y.nomatch.map((i=>t(i,e))))))));const _=gg.get(this.img_data,j.add(r,{x:7,y:7}),s,a,gg.TypeRGB);return null==await this.identifyRune(_)?{pos:e,rune:null}:{pos:e,rune:{id:await this.identifyRune(_),strip_color:null!==(n=null==d?void 0:d.lane_id)&&void 0!==n?n:5,neighbours_exist:l.map((e=>!e)),intersection:h?{matches:p}:null}}}async findLanes(){if(!this.lanes&&(await this.readGrid(),this.lanes=[],!this.isBroken)){for(;;){const e=this.grid.flat().find((e=>e.rune&&!e.rune.intersection&&!this.lanes.some((t=>t.color==e.rune.strip_color))));if(!e)break;const t={color:e.rune.strip_color,tiles:[]};let i=2,n=e;for(;;){t.tiles.push(n);const o=j.add(n.pos,g[i].offset);if(n=this.grid[o.y][o.x],!(null==n?void 0:n.rune)||n==e||t.tiles.length>40)break;n.rune.intersection||n.rune.neighbours_exist[i]||(i=[0,1,2,3].find((e=>e!=(i+2)%4&&n.rune.neighbours_exist[e])))}if(!(t.tiles.length>=10)){this.brokenReason=`Lane too short: ${t.tiles.length}`,this.isBroken=!0;break}this.lanes.push(t)}this.lanes.length<3&&(this.brokenReason=`Not enough lanes: ${this.lanes.length}`,this.isBroken=!0)}}async getPuzzle(){if(this.puzzle)return this.puzzle;if(await this.findLanes(),this.isBroken)return null;const e=[],t=[];for(let i=0;i<this.lanes.length;i++){const n=this.lanes[i];for(let o=0;o<n.tiles.length;o++){const r=n.tiles[o];if(r.rune.intersection&&r.rune.strip_color!=n.color){const n=this.lanes.findIndex((e=>e.color==r.rune.strip_color));if(n<0){this.isBroken=!0,this.brokenReason=`Could not find intersecting lane for color ${r.rune.strip_color}`;continue}const s=this.lanes[n].tiles.findIndex((e=>e==r));if(s<0){this.isBroken=!0,this.brokenReason=`Could not find tile in intersecting lane for ${i}:${o} with other line ${s}`;continue}e.push({first:{snake:i,tile:o},second:{snake:n,tile:s}}),t.push(r.pos)}}}return this.puzzle={shape:{snake_lengths:this.lanes.map((e=>e.tiles.length)),locks:e},snakes:this.lanes.map((e=>e.tiles.map((t=>t.rune.intersection&&!t.rune.intersection.matches&&t.rune.strip_color!=e.color?{value:t.rune.id,type:"isnot"}:{value:t.rune.id,type:"is"}))))}}async getButtons(){return this._buttons.get()}async showDebugOverlay(e=!1,t="runeid"){var r;await this.getPuzzle();const s=[D(0,0,255),D(255,0,0),D(23,23,100),D(235,167,0),D(255,255,255)];null==p||p.clear(),this.interception_point&&p.rect(F.centeredOn(j.add(this.relevant_body.screenRectangle().origin,this.interception_point),5),{color:D(255,255,255),width:2});for(let e=0;e<this.lanes.length;e++){const t=this.lanes[e];t.tiles.length>1?p.polyline(t.tiles.map((e=>j.add(this.relevant_body.screenRectangle().origin,this.tileOrigin(e.pos),{x:12,y:12}))),!0,{color:s[t.color],width:2}):1==t.tiles.length&&(null===(r=t.tiles[0])||void 0===r?void 0:r.pos)&&p.rect(F.centeredOn(j.add(this.relevant_body.screenRectangle().origin,this.tileOrigin(t.tiles[0].pos),{x:12,y:12}),5),{color:s[t.color],width:2})}if(this.grid_size)for(let r=0;r<this.grid_size.x;r++)for(let a=0;a<this.grid_size.y;a++){const l=j.add(this.relevant_body.screenRectangle().origin,this.tileOrigin({x:r,y:a})),c=this.grid[a][r];if(c&&(e&&p.rect(F.fromOriginAndSize(l,n),{color:D(255,0,0),width:1}),c.rune)){const e=(()=>{switch(t){case"neighbour_array":return`${c.rune.neighbours_exist[0]?"t":" "}   ${c.rune.neighbours_exist[1]?"t":" "}\n${c.rune.neighbours_exist[3]?"t":" "}   ${c.rune.neighbours_exist[2]?"t":" "}`;case"neighbour_count":return i(c.rune.neighbours_exist,o.identity).toString();case"runeid":return c.rune.id.toString()}})();p.text(e,j.add(l,j.scale(.5,n)),{width:12,shadow:!0,color:"runeid"==t?s[c.rune.strip_color]:D(255,255,255),centered:!0})}}p.render()}}}(zg||(zg={})),function(e){let t,i,n,r,s;!function(e){e.getState=function(e){return e.tiles.map((e=>e.position))}}(t=e.SliderPuzzle||(e.SliderPuzzle={})),function(e){function t(t){return t.indexOf(e.BLANK_TILE)}function i(e){const t=new Array(e.length).fill(!1);let i=0;for(;;){const n=t.indexOf(!1);if(n<0)break;let o=0,r=e[n];for(;!t[r];)t[r]=!0,r=e[r],o++;o%2==0&&i++}return i%2}function n(e){return i(e.filter((e=>24!=e)))%2==0}e.BLANK_TILE=24,e.SOLVED=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],e.equals=function(e,t){for(let i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0},e.withMove=function(e,...t){const i=[...e];return t.forEach((e=>{const t=r.split(e);let n=i.indexOf(24);for(let e of t)i[n]=i[n+e],n+=e;i[n]=24})),i},e.blank=t,e.findMove=function(i,n){const o=t(i),s=t(n)-o;return r.isValid(s)&&e.equals(n,e.withMove(i,s))?s:null},e.neighbours=function(i,n=!0){const o=t(i),s=o%5,a=Math.floor(o/5);let l=[];for(let e=0;e<5;e++)e!=s&&l.push(e-s);for(let e=0;e<5;e++)e!=a&&l.push(5*(e-a));return n||(l=l.filter(r.isSmallStep)),l.map((t=>e.withMove(i,t)))},e.sumManhattenDistance=function(e){return o.sumBy(e.map(((e,t)=>24==e?0:Math.abs(e%5-t%5)+Math.abs(Math.floor(e/5)-Math.floor(t/5)))))},e.permutation_parity=i,e.isSolveable=n,e.createRandom=function(){let t=null;do{t=[...o.shuffle(e.SOLVED.slice(0,24)),24]}while(!n(t));return t},e.toString=function(e){return[0,1,2,3,4].map((t=>e.slice(5*t,5*(t+1)).map((e=>("  "+e.toString()).slice(-2))).join(", "))).join("\n")}}(i=e.SliderState||(e.SliderState={})),function(e){e.fromState=function(e){return{tiles:e,blank:i.blank(e)}},e.doMove=function(e,t){const n=e.blank+t;e.tiles[e.blank]=e.tiles[n],e.tiles[n]=i.BLANK_TILE},e.copy=function(e){return o.cloneDeep(e)}}(n=e.SlideStateWithBlank||(e.SlideStateWithBlank={})),function(e){e.all=[-20,-15,-10,-5,-4,-3,-2,-1,1,2,3,4,5,10,15,20],e.singletile_moves=[-5,-1,1,5],e.multitile_moves=e.all,e.horizontal_mtm=[-4,-3,-2,-1,1,2,3,4],e.vertical_mtm=[-20,-15,-10,-5,5,10,15,20],e.split=function(e){const t=Math.sign(e)*(Math.abs(e)>=5?5:1);return new Array(e/t).fill(t)},e.isSmallStep=function(e){return[1,-1,5,-5].includes(e)},e.isValid=function(e){return[1,2,3,4,5,10,15,20].includes(Math.abs(e))},e.isVertical=function(e){return e%5==0}}(r=e.Move||(e.Move={})),function(t){var n=B.index,o=e.Move.isVertical;t.combine=function(t,i,o){for(;i.length>0&&t.length>0&&(o?e.Move.isVertical(i[0])==e.Move.isVertical(n(t,-1)):i[0]==-n(t,-1));)i[0]+=n(t,-1),t.splice(t.length-1),0==i[0]&&i.splice(0,1);return[...t,...i]},t.annotate=function(e,t,n=!0){const o=[];for(let r of t)e=i.withMove(e,r),o.push({pre_states:i.neighbours(e,n),post_state:e,move:r,clicked_tile:i.blank(e)});return o},t.compress=function(e){let t=0;const i=[];for(;t<e.length;){let n=e[t];for(t++;t<e.length&&o(e[t])==o(n);)n+=e[t],t++;0!=n&&i.push(n)}return i},t.expand=function(e){return e.flatMap(r.split)},t.fromTileList=function(e,t){const i=[];for(let n of e)i.push(n-t),t=n;return i}}(s=e.MoveList||(e.MoveList={})),e.Solver=class{},e.SolvingProcess=class extends Sg{constructor(e){super(),this.start_state=e,this.update_event=pi(),this.better_solution_found=pi(),this.best_solution=null,this.compress_moves=!1,this.native_compression=!1,this.withInterrupt(50,1).onInterrupt((()=>this.updateProgress()))}setCombineStraights(e=!0){return this.compress_moves=e,this}registerSolution(e){return this.native_compression!=this.compress_moves&&(e=this.compress_moves?s.compress(e):s.expand(e)),(!this.best_solution||e.length<this.best_solution.length)&&(this.best_solution=e,this.better_solution_found.trigger(e)),this}updateProgress(){this.progress=(Date.now()-this.start_time)/(this.end_time-this.start_time),this.update_event.trigger(this)}async implementation(){return await this.solve_implementation(),this.getBest()}onUpdate(e){return this.update_event.on(e),this}onFound(e){return this.better_solution_found.on(e),this}getProgress(){return this.progress}getBest(){return this.best_solution}}}(Lg||(Lg={})),function(e){var t=B.findBestMatch,i=B.count;e.TILE_SIZE={x:30,y:30};const n={x:8,y:8},o=j.add(e.TILE_SIZE,n),r={x:5,y:5},s=gg.TypeRGB,a=new iu((async()=>[{value:0,reference_fingerprint:gg.get(await U("alt1anchors/lockbox_tiles/melee.png"),{x:0,y:0},e.TILE_SIZE,r,s)},{value:1,reference_fingerprint:gg.get(await U("alt1anchors/lockbox_tiles/range.png"),{x:0,y:0},e.TILE_SIZE,r,s)},{value:2,reference_fingerprint:gg.get(await U("alt1anchors/lockbox_tiles/mage.png"),{x:0,y:0},e.TILE_SIZE,r,s)},{value:0,reference_fingerprint:gg.get(await U("alt1anchors/lockbox_tiles/melee_active.png"),{x:0,y:0},e.TILE_SIZE,r,s)},{value:1,reference_fingerprint:gg.get(await U("alt1anchors/lockbox_tiles/range_active.png"),{x:0,y:0},e.TILE_SIZE,r,s)},{value:2,reference_fingerprint:gg.get(await U("alt1anchors/lockbox_tiles/mage_active.png"),{x:0,y:0},e.TILE_SIZE,r,s)}])),l={x:42,y:17};e.LockBoxReader=class{constructor(t){this.modal=t,this.puzzle_computed=!1,this.puzzle=null,this.isBroken=!1,this.brokenReason="",this.tile_area=t.body.getSubSection({origin:l,size:j.add(j.scale(5,e.TILE_SIZE),j.scale(4,n))}),this.tiles=new Array(5).fill(null).map((()=>new Array(5).fill(null)))}tileOrigin(e,t=!1){return t?j.add(j.mul(o,e),this.tile_area.screenRectangle().origin):j.add(j.mul(o,e))}async getTile(i){if(!this.tiles[i.y][i.x]){const n=this.tileOrigin(i),o=gg.get(this.tile_area.getData(),n,e.TILE_SIZE,r,s),l=t(await a.get(),(e=>gg.similarity(e.reference_fingerprint,o)));this.tiles[i.y][i.x]={image:o,value:l.score<.8?null:l.value.value}}return this.tiles[i.y][i.x]}async readGrid(){for(let e=0;e<5;e++)for(let t=0;t<5;t++)await this.getTile({x:e,y:t});return this.tiles}async getState(){const e=await this.readGrid(),t=i(e.flat(),(e=>null==e.value));return console.log(`Broken ${t}`),t>15?"likelyclosed":t>0?"likelyconcealed":"okay"}async getPuzzle(){if(!this.puzzle_computed){const e=await this.readGrid(),t=e.some((e=>e.some((e=>null==e.value))));this.puzzle=t?null:{tile_rows:e.map((e=>e.map((e=>e.value))))},this.puzzle_computed=!0}return this.puzzle}showDebugOverlay(){this.debug_overlay||(this.debug_overlay=new xg),this.debug_overlay.clear(),this.debug_overlay.render()}}}(Pg||(Pg={}));class Rg{constructor(e,t){this.body=e,this.isLegacy=t,this._title=null}title(){if(!this._title&&this.body.parent)if(this.isLegacy){const e={x:0,y:-24},t={x:500,y:20},i=this.body.parent.getSubSection(yg.move(this.body.relativeRectangle(),e,t)).getData();this._title=hg(i,Rg.title_font,[[255,152,31]],0,13,i.width,1).text}else{const e={x:0,y:-24},t={x:150,y:20},i=this.body.parent.getSubSection(yg.move(this.body.relativeRectangle(),e,t)).getData();this._title=hg(i,Rg.title_font,[[255,203,5]],0,13,i.width,1).text}return this._title.toString()}static assumeBody(e){return new Rg(e,!1)}static async findIn(e){for(let t of await Rg.anchors.get()){const i=e.find(t.close_x)[0];if(!i)continue;const n=e.find(t.top_left)[0];if(!n)return null;const o=e.find(t.bot_left)[0];if(!o)return null;const r=j.add(n.relativeRectangle().origin,t.BODY_TL_OFFSET_FROM_TL),s=j.add(o.relativeRectangle().origin,t.BODY_BL_OFFSET_FROM_BL),a=j.add(i.relativeRectangle().origin,t.BODY_TR_OFFSET_FROM_X),l=s.y-r.y+1,c={x:a.x-r.x+1,y:l},u=e.getSubSection(yg.move(n.relativeRectangle(),t.BODY_TL_OFFSET_FROM_TL,c));return new Rg(u,t.isLegacy)}return null}}!function(e){e.title_font=i(4758),e.anchors=new iu((async()=>[{isLegacy:!1,close_x:await U("alt1anchors/eocx.png"),top_left:await U("alt1anchors/eoctopleft.png"),bot_left:await U("alt1anchors/eocbotleft.png"),BODY_TL_OFFSET_FROM_TL:{x:4,y:29},BODY_BL_OFFSET_FROM_BL:{x:3,y:7},BODY_TR_OFFSET_FROM_X:{x:10,y:24}},{isLegacy:!0,close_x:await U("alt1anchors/legacyx.png"),top_left:await U("alt1anchors/legacytopleft.png"),bot_left:await U("alt1anchors/legacybotleft.png"),BODY_TL_OFFSET_FROM_TL:{x:4,y:29},BODY_BL_OFFSET_FROM_BL:{x:6,y:-2},BODY_TR_OFFSET_FROM_X:{x:19,y:20}}]))}(Rg||(Rg={}));var Bg,Ng,jg=B.rgbSimilarity;class Fg{constructor(e,t,i){this.image=e,this.image_includes_checkbox=t,this.isLegacy=i,this.body=t?e.getSubSection({origin:{x:-Fg.INVERTED_CHECKBOX_OFFSET_FROM_TL.x,y:0},size:{...Fg.PUZZLE_SIZE}}):e}isInvertedArrowKeyCheckboxEnabled(){if(!this.image_includes_checkbox)return!1;const e=this.image.getSubSection({origin:{x:0,y:Fg.INVERTED_CHECKBOX_OFFSET_FROM_TL.y},size:{x:1,y:1}}).getData();return jg(Fg.CHECKMARK_COLOR,e.getPixel(0,0))>.8}recapture(e){if(e==this.image_includes_checkbox)return new Fg(Eg.capture(this.image.screenRectangle()),this.image_includes_checkbox,this.isLegacy);if(e){const e=o.cloneDeep(this.body.screenRectangle());return e.origin.x+=Fg.INVERTED_CHECKBOX_OFFSET_FROM_TL.x,e.size.x+=-Fg.INVERTED_CHECKBOX_OFFSET_FROM_TL.x,new Fg(Eg.capture(e),!0,this.isLegacy)}return new Fg(Eg.capture(this.body.screenRectangle()),!1,this.isLegacy)}static async findIn(e,t){const i=[{isLegacy:!1,anchor:(await Fg.anchors.get()).eoc_x},{isLegacy:!0,anchor:(await Fg.anchors.get()).legacy_x}];for(const n of i){const i=e.find(n.anchor);if(i.length>0){const e={origin:j.add(i[0].relativeRectangle().origin,Fg.TL_TILE_FROM_X_OFFSET),size:{...Fg.PUZZLE_SIZE}};return t&&(e.origin.x+=Fg.INVERTED_CHECKBOX_OFFSET_FROM_TL.x,e.size.x+=-Fg.INVERTED_CHECKBOX_OFFSET_FROM_TL.x),new Fg(i[0].parent.getSubSection(e),t,n.isLegacy)}}return null}}!function(e){e.TL_TILE_FROM_X_OFFSET={x:-297,y:15},e.INVERTED_CHECKBOX_OFFSET_FROM_TL={x:-169,y:222},e.PUZZLE_SIZE={x:273,y:273},e.CHECKMARK_COLOR=[239,175,63],e.anchors=new iu((async()=>({eoc_x:await U("alt1anchors/slide.png"),legacy_x:await U("alt1anchors/slidelegacy.png")})))}(Fg||(Fg={})),function(e){let t,i,n,r,s,a;e.towers=[1,2,3,4,5],function(e){let t=null;function i(e){let t=0,i=0;for(let n=0;n<e.length;n++)e[n]>i&&(t++,i=e[n]);return t}function n(e){return e.slice().reverse()}e.empty=function(){return[null,null,null,null,null]},e.all=function(){return t||(t=function e(t){return 0==t.length?[[]]:t.flatMap(((i,n)=>e(t.filter(((e,t)=>t!=n))).map((e=>[i,...e]))))}([1,2,3,4,5])),t},e.reverse=n,e.label=function(e){return[i(e),i(n(e))]}}(t=e.Street||(e.Street={})),function(e){let i=null;e.all=function(){return i||(i=t.all().map((e=>({street:e,label:t.label(e)})))),i}}(i=e.LabelledStreet||(e.LabelledStreet={})),function(t){t.equals=function(e,t){return e[0]==t[0]&&e[1]==t[1]};let n=null;function o(){return e.towers.map((n=>e.towers.map((e=>i.all().filter((i=>t.equals([n,e],i.label))).map((e=>e.street))))))}t.candidateMap=o,t.getCandidates=function(e){return n||(n=o()),n[e[0]-1][e[1]-1]}}(n=e.LabelPair||(e.LabelPair={})),function(e){e.empty=function(){return{top:[null,null,null,null,null],bottom:[null,null,null,null,null],left:[null,null,null,null,null],right:[null,null,null,null,null]}}}(r=e.Hints||(e.Hints={})),function(e){e.empty=function(){return{rows:[t.empty(),t.empty(),t.empty(),t.empty(),t.empty()]}},e.combine=function(e,t){return{rows:e.rows.map(((e,i)=>e.map(((e,n)=>null!=e?e:t.rows[i][n]))))}}}(s=e.Blocks||(e.Blocks={})),function(e){e.solve=function(e){return function i(o,r){if(!function(e,i){const o=e.length;for(let t=0;t<5;t++)for(let i=0;i<o-1;i++)if(e[i][t]==e[o-1][t])return!1;return!(5==e.length&&![0,1,2,3,4].every((o=>n.equals(t.label(function(e,t){return e.map((e=>e[t]))}(e,o)),i[o]))))}(r,e.columns))return null;if(0==o.length)return{rows:r};for(const e of n.getCandidates(o[0])){const t=i(o.slice(1),[...r,e]);if(t)return t}return null}(e.rows,[])}}(a=e.Puzzle||(e.Puzzle={})),e.solve=function(e){const t={columns:o.zip(e.top,e.bottom).map((([e,t])=>[e,t])),rows:o.zip(e.left,e.right).map((([e,t])=>[e,t]))};return a.solve(t)?{hints:e,blocks:a.solve(t)}:null}}(Bg||(Bg={})),function(e){const t=new tu((()=>U("alt1anchors/contextborder.png")));var n=B.count;const o=i(4891),r={...o,chars:o.chars.filter((e=>!isNaN(+e.chr)))};e.TILE_SIZE={x:42,y:42};const s={x:2,y:2},a=j.add(e.TILE_SIZE,s),l={x:41,y:38};e.TowersReader=class{constructor(t){this.modal=t,this.puzzle_computed=!1,this.puzzle=null,this.broken_hint_count=0,this._hint_cache=null,this._tile_cache=null,this.tile_area=t.body.getSubSection({origin:l,size:j.add(j.scale(5,e.TILE_SIZE),j.scale(4,s))}),this.puzzle_area=t.body.getSubSection({origin:{x:10,y:5},size:{x:284,y:284}})}tileOrigin(e,t=!1){return t?j.add(j.mul(a,e),this.tile_area.screenRectangle().origin):j.add(j.mul(a,e))}readCharacter(e,t=!0){const i=t?[[255,255,255]]:[[255,205,10],[102,102,102]],n=[-3,-2,-1,-4,0];for(let t of i)for(const i of n){const n=dg(this.modal.body.getData(),r,t,e.x+i,e.y,!1,!0);if(n){const e=Number(n.chr);return Number.isNaN(e)||e<1||e>5?null:e}}return null}getHints(){if(!this._hint_cache){const e=Bg.Hints.empty(),t={top:{x:60,y:25},bottom:{x:60,y:275},left:{x:23,y:62},right:{x:274,y:62}};for(let i=0;i<5;i++)e.top[i]=this.readCharacter(j.add(t.top,j.mul({x:i,y:0},a)),!1),e.bottom[i]=this.readCharacter(j.add(t.bottom,j.mul({x:i,y:0},a)),!1),e.left[i]=this.readCharacter(j.add(t.left,j.mul({x:0,y:i},a)),!1),e.right[i]=this.readCharacter(j.add(t.right,j.mul({x:0,y:i},a)),!1);this.broken_hint_count=n([...e.top,...e.bottom,...e.left,...e.right],(e=>null==e)),this._hint_cache=e}return this._hint_cache}getBlocks(){const e={x:60,y:62};if(!this._tile_cache){const t=Bg.Blocks.empty();for(let i=0;i<5;i++)for(let n=0;n<5;n++)t.rows[i][n]=this.readCharacter(j.add(e,j.mul({x:n,y:i},a)),!0);this._tile_cache=t}return this._tile_cache}async findContextMenu(){const e=this.modal.body.root().find(await t.get());return e.length>0?yg.move(e[0].screenRectangle(),{x:-4,y:-2},{x:113,y:149}):null}async getState(){return this.getHints(),20==this.broken_hint_count?"likelyclosed":this.broken_hint_count>0?"likelyconcealed":"okay"}async getPuzzle(){if(!this.puzzle_computed){const e=this.getHints(),t=this.getBlocks();this.broken_hint_count>0?this.puzzle=null:this.puzzle={hints:e,blocks:t},this.puzzle_computed=!0}return this.puzzle}}}(Ng||(Ng={}));var qg=B.stringSimilarity,Ug=(uc.notification,B.findBestMatch),Hg=Lg.SliderState,Vg=ru.log,$g=B.cleanedJSON;class Wg{constructor(e){this.tetracompass_only=e,this.initialized=this.init()}async init(){this.anchors=await Wp.getAnchorImages()}async read(e){if(await this.initialized,!this.tetracompass_only){{const t=await Rg.findIn(e);if(t){const e=(()=>{const e=t.title().toLowerCase(),i=Ug([{type:"textclue",possible_titles:["mysterious clue","mysterious clue scroll","sandy clue scro","sandy clue scroll"]},{type:"towers",possible_titles:["towers"]},{type:"lockbox",possible_titles:["lockbox"]},{type:"knot",possible_titles:["celtic knot"]},{type:"map",possible_titles:["treasure map"]}].map((t=>({value:t,score:Ug(t.possible_titles,(t=>qg(e,t))).score}))),(e=>e.score)).value;return i.score<.7?null:i.value.type})();if(e)switch(e){case"textclue":const e=Wg.readTextClueModalText(t);if(e.length>=10){const i=Ug(Wc.all.flatMap((e=>e.text.map(((t,i)=>({step:e,text_index:i}))))),(({step:t,text_index:i})=>{let n=t.text[i];return"skilling"==t.type&&"master"==t.tier&&(n=`Complete the action to solve the clue: ${n}`),qg(e,n)}));return i.score<.7?null:{type:"textclue",modal:t,step:i.value}}return null;case"map":const i=function(e,t,i,n,o,r,s){let a=ig(eg(e,90,25,300,240)),l=[a[0],a[1],a[2]];for(let n=0;(n+1)*t<=300;n++){let o=90+n*t;for(let r=0;(r+1)*i<=240;r++){let s=25+r*i,c=5*n+r*Math.floor(15)*5+3,u=ig(eg(e,o,s,t,i));l[c+0]=u[0],l[c+0]>128&&(l[c+1]-=256),l[c+0]<-128&&(l[c+1]+=256),l[c+1]=u[1],l[c+2]=a[2]-u[2],l[c+3]=Math.floor(tg(e,o+1,s+1,18,18)/t/i),l[c+4]=Math.floor(tg(e,o,s,t,i)/t/i)}}return l}(t.body.getData(),20,20),n=Ug(Wc.map,(e=>function(e,t){let i=0,n=Math.abs(e[0]-t[0]);i+=Math.max(0,5*(n>128?255-n:n)-100),i+=Math.max(0,5*Math.abs(e[1]-t[1])-100);for(let o=3;o<e.length;o+=5){let r=0;n=Math.abs(e[o]-t[o]),r+=(n>128?255-n:n)*Math.max(e[o],t[o])/255,r+=Math.abs(e[o+1]-t[o+1]),r+=100*Math.max(0,e[o+3]-t[o+4]),r+=100*Math.max(0,t[o+3]-e[o+4]),i+=r}return i}(e.ocr_data,i)),void 0,!0);return{type:"textclue",modal:t,step:{step:n.value,text_index:0}};case"knot":{const e=new zg.KnotReader(t),i=await e.getPuzzle(),n=await e.getButtons();if(!i)return Vg().log("Knot found, but not parsed properly","Clue Reader"),Vg().log(`Broken: ${e.isBroken}, Reason: ${e.brokenReason}`,"Clue Reader"),null;if(!n)return Vg().log(`Could not identity knot shape: ${$g(i.shape)}`,"Clue Reader"),Vg().log(`Hash: ${$g(Ag.PuzzleShape.hash(i.shape))}`,"Clue Reader"),null;const o=Ag.solveAll(i);return 0==o.real.length&&0==o.maybe.length?(Vg().log("Read a not with no possible solution. Rejecting.","Clue Reader",i),null):{type:"puzzle",puzzle:{type:"knot",reader:e}}}case"lockbox":{const e=new Pg.LockBoxReader(t);return await e.getPuzzle()?{type:"puzzle",puzzle:{type:"lockbox",reader:e}}:(console.error("Lockbox found, but not parsed properly. Maybe it's concealed by something."),null)}case"towers":return{type:"puzzle",puzzle:{type:"tower",reader:new Ng.TowersReader(t)}}}return null}}{const t=await Fg.findIn(e,!1);if(t){const e=new mg.SlideReader(t),i=await e.getPuzzle();if(i.match_score>=mg.DETECTION_THRESHOLD_SCORE){const t=i.tiles.map((e=>e.position));return Hg.isSolveable(t)||ru.log().log(`Read impossible slider puzzle: ${t.join(",")}`),{type:"puzzle",puzzle:{type:"slider",reader:e,puzzle:i}}}return null}}}{const t=await kg.find(e);if(t){const e=t.isArcCompass(),i=new Dg(t),n=i.getAngle();return"likely_solved"==(null==n?void 0:n.type)?null:"likely_closed"==(null==n?void 0:n.type)||"likely_concealed"==(null==n?void 0:n.type)?(console.error("Compass found, but not parsed properly"),console.error(`Broken: ${n.type}, Reason: ${n.details}`),null):{type:"compass",step:e?Wc.arc_compass:this.tetracompass_only?Wc.tetracompass:Wc.gielinor_compass,reader:i}}}if(!this.tetracompass_only){const t=await(async()=>{const t=[{type:"scan",anchors:[{img:this.anchors.scanfartext,origin_offset:{x:20,y:43}},{img:this.anchors.scanfartext_pt,origin_offset:{x:20,y:43}},{img:this.anchors.scanleveltext,origin_offset:{x:20,y:65}}]}];for(let i of t)for(let t of i.anchors){let n=e.find(t.img);if(n.length>0&&"scan"===i.type)return{type:"scan",image:e.raw(),rect:F.fromOriginAndSize(j.sub(n[0].screenRectangle().origin,t.origin_offset),{x:180,y:190})}}})();if(t&&"scan"===t.type){const i=Wg.readScanPanelText(e.raw(),F.screenOrigin(t.rect)).split("\n")[0];let n=0,o=null;for(let e of Wc.scan){let t=qg(i,e.scantext);t>n&&(o=e,n=t)}return{type:"scan",step:o}}}}async readScreen(){return this.read(Eg.capture())}}!function(e){e.readTextClueModalText=function(e){let t=e.body.getData(),i=[],n=0;for(let e=60;e<290;e++){let a=0,l=null;for(let i=220;i<320;i++){let n=4*i+4*t.width*e;o=t.data[n],r=t.data[n+1],s=t.data[n+2],Math.abs(o-84)+Math.abs(r-72)+Math.abs(s-56)<80&&a++}if(a>=3)0==n&&(n=e);else if(0!=n&&(l=Math.abs(n-e),n=0,l>=6&&l<=18)){let n=ag(t,pg,[[84,72,56]],255,e-4)||ag(t,pg,[[84,72,56]],265,e-4);n&&i.push(n.text)}}var o,r,s;return i.join(" ")},e.readScanPanelText=function(e,t){const n=i(2999);let o=e.toData(t.x,t.y,180,190),r=[];for(let e=0;e<13;e++){const t=ag(o,n,[[255,255,255]],70,12*e,40,1);r.push(t.text)}let s="",a=!1;for(let e of r)e&&(a?s+="\n":s&&(s+=" "),s+=e),a=!e&&!!s;return s}}(Wg||(Wg={}));var Zg=di.span,Gg=di.hboxl,Kg=di.inlineimg;class Yg extends Ql{constructor(){const e=Ds.getTeleportGroup("fairyring");super({type_class:{toHTML:e=>e?c(`<span><span style="font-weight: bold">${e.code}</span> - </span>`).append(Zg(e.name)):Zg("None").css("font-style","italic")},search_term:e=>e?`${e.code} - ${e.name}`:"None"},[null].concat(e.spots.filter((e=>e.code&&e.code.length>0))))}set(e){return e?this.setValue(this.items.find((t=>t&&t.id==e))):this.setValue(null),this}}class Jg extends Ql{constructor(){const e=Ds.teleports.flatMap((e=>e.access.filter((e=>"item"==e.type&&e.can_be_in_pota)).flatMap((t=>({group:e,access:t}))))).sort(((e,t)=>e.access.name.name.localeCompare(t.access.name.name)));e.sort(),super({type_class:{toHTML:e=>{var t,i,n;return e?Gg(Kg(`assets/icons/teleports/${null!==(i=null===(t=e.access.img)||void 0===t?void 0:t.url)&&void 0!==i?i:null===(n=e.group.img)||void 0===n?void 0:n.url}`),e.access.name.name):c().text("Empty").css("font-style","italic")}},search_term:e=>e?e.access.name.name:""},[null].concat(e))}set(e){return e?this.setValue(this.items.find((t=>t&&t.access.id==e.access_id&&t.group.id==e.group_id))):this.setValue(null),this}}var Xg,Qg=Lg.SliderPuzzle,em=ru.log;class tm{constructor(t,i){this.parent=t,this.server_url=i,this.last_slider_state=new e.Variable("crowdsourcing/last_slider_state",(()=>null))}endpoint(e){return`${this.server_url}/api/crowdsourcing/${e}`}async pushSlider(e){if(this.parent.settings.settings.crowdsourcing.slider_states){const t=this.last_slider_state.get(),i=Date.now();if(t&&(t.theme==e.theme||t.timestamp>=i-4500))return;const n=Qg.getState(e);if(24!=n[24])return;this.last_slider_state.set({timestamp:i,theme:e.theme,state:n});const o=JSON.stringify({tiles:n,theme:e.theme});em().log(`Adding slider ${o}`,"Crowdsourcing"),fetch(this.endpoint("initial_slider_state"),{method:"POST",body:o,headers:{"Content-type":"application/json; charset=UTF-8"}})}}}!function(e){let t;!function(e){e.DEFAULT={slider_states:!1},e.normalize=function(t){return t?([!0,!1].includes(t.slider_states)||(t.slider_states=e.DEFAULT.slider_states),t):o.cloneDeep(e.DEFAULT)}}(t=e.Settings||(e.Settings={}))}(tm||(tm={})),function(e){let t,i;e.normalize=function(e){return e||(e={teleport_customization:void 0,solving:void 0,crowdsourcing:void 0}),e.teleport_customization=t.normalize(e.teleport_customization),e.solving=Gf.Settings.normalize(e.solving),e.crowdsourcing=tm.Settings.normalize(e.crowdsourcing),e},function(e){function t(){return{potas:[],presets:[{id:0,fixed:!0,name:"Default",fairy_ring_favourites:new Array(10).fill(null),active_potas:["red","green","yellow","purple"]}],active_preset:0,preset_bindings:{easy:null,elite:null,hard:null,master:null,medium:null,tetracompass:null,sandy:null},preset_bindings_active:!1}}e.empty=t,e.clueChasersRecommendations=function(){return{potas:[{color:"green",slots:[{group_id:"skillsnecklace",access_id:"ring"},{group_id:"amuletofglory",access_id:"necklace"},{group_id:"combatbracelet",access_id:"ring"},{group_id:"digsitependant",access_id:"ring"},{group_id:"ringofslaying",access_id:"ring"},{group_id:"travellersnecklace",access_id:"ring"}]},{color:"red",slots:[{group_id:"enlightenedamulet",access_id:"ring"},{group_id:"ringofrespawn",access_id:"ring"},{group_id:"ringofduelling",access_id:"ring"},{group_id:"gamesnecklace",access_id:"necklace"},{group_id:"ringofwealth",access_id:"ring"},null]}],presets:[{id:0,fixed:!0,name:"Default",fairy_ring_favourites:[null,null,null,null,null,null,null,null,null,null],active_potas:["red","green","yellow","purple"]},{id:-1,name:"Easy Recommendation",active_potas:["red","green"],fairy_ring_favourites:["AIQ","DIS","DJR",null,null,null,null,null,null,null]},{id:-2,name:"Medium Recommendation",active_potas:["red","green"],fairy_ring_favourites:["AIQ","AJR","AKS","ALS","BKR","CIP","CKS","CLS","DJP","DKP"]},{id:-3,name:"Hard Recommendation",active_potas:["red","green"],fairy_ring_favourites:["ALQ","DKS","DJP","CKS","CKR","CJS","BKR","AKQ","ALP",null]},{id:-4,name:"Elite Recommendation",active_potas:["red","green"],fairy_ring_favourites:["AJR","AKQ","AKS","ALQ","BKR","CJR","CJS","CKQ","CKR","DLQ"]},{id:-5,name:"Master Recommendation",active_potas:["green"],fairy_ring_favourites:[null,null,null,null,null,null,null,null,null,null]}],active_preset:0,preset_bindings:{easy:-1,medium:-2,hard:-3,elite:-4,master:-5,tetracompass:null,sandy:null},preset_bindings_active:!0}},e.normalize=function(e){var i;return e||(e=t()),e.potas||(e.potas=[]),Array.isArray(e.presets)&&0!=e.presets.length||(e.presets=t().presets),e.presets.some((t=>t.id==e.active_preset))||(e.active_preset=e.presets[0].id),e.preset_bindings={easy:null,medium:null,hard:null,elite:null,master:null,tetracompass:null,sandy:null,...null!==(i=e.preset_bindings)&&void 0!==i?i:{}},e},e.inferActiveCustomization=function(e){var t,i,n;const o=e.presets.find((t=>t.id==e.active_preset));return{fairy_ring_favourites:null!==(t=null==o?void 0:o.fairy_ring_favourites)&&void 0!==t?t:[],pota_slots:null!==(n=null===(i=null==o?void 0:o.active_potas)||void 0===i?void 0:i.flatMap((t=>{const i=e.potas.find((e=>e.color==t));return i?i.slots.map(((e,i)=>({jewellry:e,pota:{color:t,slot:i+1}}))).filter((e=>e.jewellry)):[]})))&&void 0!==n?n:[]}}}(t=e.TeleportSettings||(e.TeleportSettings={})),function(e){e.values=["red","green","yellow","purple"],e.iconUrl=function(e){return`assets/icons/teleports/pota_${e}.png`}}(i=e.PotaColor||(e.PotaColor={}))}(Xg||(Xg={}));var im=di.hbox,nm=di.inlineimg;class om extends Ml{constructor(e){super({size:"medium",fixed:!0}),this.parent=e}setStatus(e){return this.status_row.empty().append(e),this}render(){super.render(),this.body.empty().append(this.image_container=c().css2({"max-width":"100%","text-align":"center"}),this.status_row=c(),im(this.button_row=new Ll({align:"center"}).css("flex-grow",1),nm("assets/icons/settings.png").addClass("ctr-clickable").on("click",(async()=>{(await new Of(this.parent.settings_id).do()).saved&&this.parent.process&&this.parent.resetProcess(!0)}))).css2({"max-width":"250px","margin-left":"auto","margin-right":"auto"})),this.update()}update(){this.parent.process?this.button_row.buttons(new Dl("Reset","neutral").onClick((()=>{this.parent.resetProcess(!0)})),new Dl("Stop","cancel").onClick((()=>{this.parent.resetProcess(!1)}))):this.button_row.buttons(new Dl("Start","confirm").onClick((()=>{this.parent.resetProcess(!0)})))}setImage(e){this.image_container.empty().append(si.wrap(e.toImage()).css("max-width","100%"))}}class rm extends Gh{constructor(e,t,i,n,o){super(e,"clue"),this.puzzle=t,this.autostart=i,this.modal_title=n,this.settings_id=o}async resetProcess(e){this.process&&(this.process.stop(),this.process=null),e&&(this.process=await this.constructProcess(),this.process.puzzle_closed.on((()=>this.endClue("Puzzle Process reported a closed puzzle"))),this.process.run()),this.modal.update()}begin(){this.modal=new om(this),this.modal.title.set(this.modal_title),this.modal.hidden.on((()=>this.endClue("Puzzle Modal hidden"))),this.modal.show(),this.autostart&&this.resetProcess(!0)}end(){this.resetProcess(!1),this.modal.remove()}}class sm extends Sg{constructor(){super(),this.puzzle_closed=pi(),this.solution_overlay=new xg,this.debug_overlay=new xg,this.asInterval(20)}puzzleClosed(){this.stop(),this.puzzle_closed.trigger(this)}async implementation(){for(var e,t,i,n;!this.should_stop;){try{await this.tick()}catch(e){console.error(e.toString())}await this.checkTime()}null===(t=null===(e=this.solution_overlay)||void 0===e?void 0:e.clear())||void 0===t||t.render(),null===(n=null===(i=this.debug_overlay)||void 0===i?void 0:i.clear())||void 0===n||n.render()}}var am=B.factorial;const lm=(()=>{function e(e,t){return t>e?0:am(e,e-t)/am(t)}const t=new Array(26).fill(null).map((e=>new Array(26).fill(null)));for(let i=0;i<=25;i++)for(let n=0;n<=25;n++)t[i][n]=e(i,n);return t})(),cm=new Array(12).fill(null).map(((e,t)=>am(t)));var um,hm;!function(e){e.insert=function e(t,i){return t.size++,null==t.value?(t.value=i,t.left={size:0},t.right={size:0},0):i<t.value?(t.size++,t.right.size+1+e(t.left,i)):e(t.right,i)}}(um||(um={})),function(e){e.empty=function(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},e.reflect=function(e){return dm.tile_reflection_table.map((t=>e[t]))},e.equals=function(e,t){return o.isEqual(e,t)};var t=B.count,i=B.factorial,n=Lg.SliderState;let r;e.Indexing=class{constructor(e){this.region=e,this.solves_puzzle=e.every(((e,t)=>e!=r.FREE||[23,19].includes(t))),this.current=t(e,(e=>e==r.CURRENT))+(this.solves_puzzle?0:1),this.freedom=t(e,(e=>e!=r.FIXED)),this.permutation_array=new Array(this.current).fill(null),this.number_of_permutations=i(this.current),this.size=i(this.freedom,Math.max(2,this.freedom-this.current)),this.combination_relevant_indices=o.sortBy(e.map(((e,t)=>[e,t])).filter((e=>e[0]!=r.FIXED)),(e=>-e[0])).map((e=>e[1])),this.relevant_tile_numbers=e.map(((e,t)=>e==r.CURRENT||t==n.BLANK_TILE)),this.solution_relevant_indices=e.flatMap(((e,t)=>e==r.CURRENT||e==r.FIXED?[t]:[]))}stateIndex(e){let t=0;{let i=1;for(let n=0;n<this.combination_relevant_indices.length&&i<=this.current;n++){const o=e[this.combination_relevant_indices[n]];this.relevant_tile_numbers[o]&&(this.permutation_array[i-1]=o,t+=lm[n][i],i+=1)}}return t*this.number_of_permutations+function(e){let t=0;for(let i=1;i<e.length;i++){const n=cm[i];for(let o=0;o<i;o++)e[o]>e[i]&&(t+=n)}return t}(this.permutation_array)}satisfied(e){return this.solution_relevant_indices.every((t=>e[t]==t))}},function(e){e.FREE=0,e.CURRENT=1,e.FIXED=2}(r=e.Tile||(e.Tile={})),e.isFirst=function(e){return e.every((e=>e!=r.FIXED))},e.isChild=function(e,t){return t.every(((t,i)=>{const n=e[i];switch(t){case r.FREE:case r.CURRENT:return n==r.FREE;case r.FIXED:return n==r.FIXED||n==r.CURRENT}}))},e.child=function(e){return e.map((e=>e==r.FREE?r.FREE:r.FIXED))},e.solvesPuzzle=function(e){return e.every((e=>e!=r.FREE))},e.lookupTableSize=function(e){const i=t(e,(e=>e==r.CURRENT)),n=i+t(e,(e=>e==r.FREE));let o=1;for(let e=0;e<=i;e++)o*=n-e;return o},e.check=function(e){return[]}}(hm||(hm={}));var dm,pm=Lg.Move;class gm{constructor(e,t,i=!1){this.region=e,this.multitile=t,this.allow_undoing_moves=i,this.move_table=new Array(41);for(let e of[0,...pm.all]){const t=this.move_table[e+20]=new Array(25),n=i?this.multitile?pm.multitile_moves:pm.singletile_moves:this.multitile?0==e?pm.multitile_moves:pm.isVertical(e)?pm.horizontal_mtm:pm.vertical_mtm:pm.singletile_moves.filter((t=>t!=-e));for(let e=0;e<25;e++){const i=e%5,o=~~(e/5);t[e]=n.filter((e=>{const t=i+e%5,n=o+~~(e/5);return t>=0&&t<5&&n>=0&&n<5})).filter((t=>this.region[e+t]!=hm.Tile.FIXED))}}}get(e){return this.move_table[e[dm.LASTMOVE_INDEX]][e[dm.BLANK_INDEX]]}}!function(e){var t=Lg.SliderState,i=B.chooseRandom;e.SIZE=27,e.tile_reflection_table=[0,5,10,15,20,1,6,11,16,21,2,7,12,17,22,3,8,13,18,23,4,9,14,19,24],e.reflection_pairs=[[1,5],[2,10],[3,15],[4,20],[7,11],[8,16],[9,21],[13,17],[14,22],[19,23]],e.copy=function(e){return new Uint8Array(e)},e.BLANK_INDEX=25,e.LASTMOVE_INDEX=26,e.SOLVED=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,24,20]);const n=[[0,-5,-10,-15,-20],[],[],[],[],[0,-5,-10,-15],[],[],[],[],[0,-5,-10],[],[],[],[],[0,-5],[0,-1,-2,-3,-4],[0,-1,-2,-3],[0,-1,-2],[0,-1],[],[0,1],[0,1,2],[0,1,2,3],[0,1,2,3,4],[0,5],[],[],[],[],[0,5,10],[],[],[],[],[0,5,10,15],[],[],[],[],[0,5,10,15,20]];function o(t,i){const o=n[i+20];let r=t[e.BLANK_INDEX];for(let e=0;e<o.length-1;++e)t[r+o[e]]=t[r+o[e+1]];t[e.LASTMOVE_INDEX]=i+20,t[t[e.BLANK_INDEX]=r+i]=24}function r(n,r=100,s=e.fromState(t.SOLVED)){for(let e=0;e<r;e++)o(s,i(n.get(s)));return s}e.doMove=o,e.fromState=function(e){const i=t.blank(e);return new Uint8Array([...e,i,20])},e.reflect=function(t){for(const[i,n]of e.reflection_pairs){const e=t[i];t[i]=t[n],t[n]=e}for(let i=0;i<25;i++)t[i]=e.tile_reflection_table[t[i]];t[e.BLANK_INDEX]=e.tile_reflection_table[t[e.BLANK_INDEX]],t[e.LASTMOVE_INDEX]=e.move_translation_reflect[t[e.LASTMOVE_INDEX]]+20},e.asState=function(e){return[...e.slice(0,25)]},e.ramenShuffle=function(i=100,n=e.fromState(t.SOLVED)){return r(new gm(hm.empty(),!1,!0),i,n)},e.shuffle=r,e.move_translation_reflect=[-4,void 0,void 0,void 0,void 0,-3,void 0,void 0,void 0,void 0,-2,void 0,void 0,void 0,void 0,-1,-20,-15,-10,-5,0,5,10,15,20,1,void 0,void 0,void 0,void 0,2,void 0,void 0,void 0,void 0,3,void 0,void 0,void 0,void 0,4]}(dm||(dm={}));const mm=[-20,void 0,void 0,void 0,void 0,-15,void 0,void 0,void 0,void 0,-10,void 0,void 0,void 0,void 0,-5,-4,-3,-2,-1,0,1,2,3,4,5,void 0,void 0,void 0,void 0,10,void 0,void 0,void 0,void 0,15,void 0,void 0,void 0,void 0,20];class fm extends Lg.SolvingProcess{constructor(e,t){super(e),this.chain=t,this.completed_slackness=-1,this.native_compression=t.getEntryPoints()[0].table.description.multitile}async solve_implementation(){let e,t,i=0;const n=async(o,r,s)=>{const a=r.reflected?dm.move_translation_reflect:mm,l=async(o,s)=>{if(i++,i%1e3==0&&await this.checkTime(),this.should_stop)return;const c=e[dm.LASTMOVE_INDEX];if(this.best_solution&&t.length>this.best_solution.length)return;let u=!1;const h=r.table.move_table.get(e);for(const i of h){dm.doMove(e,i);const n=r.table.indexing.stateIndex(e),h=r.table.getDistanceByIndex(n);if((h+1)%4==o?(u=!0,t.push(a[i+20]),await l(h,s),t.pop()):s>=1&&(h==o?(t.push(a[i+20]),await l(h,s-1),t.pop()):s>=2&&(t.push(a[i+20]),await l(h,s-2),t.pop())),dm.doMove(e,-i),e[dm.LASTMOVE_INDEX]=c,u&&r.table.indexing.solves_puzzle)break}if(!u){if(0!=o||!r.table.indexing.satisfied(e))return;if(0==r.children.length)(t.length>0||r.table.indexing.solves_puzzle)&&this.registerSolution([...t]);else for(const e of r.children)await n(r.reflected,e,s)}};if(r.reflected!=o&&dm.reflect(e),!(r.table.indexing.solves_puzzle&&s>0)||r.table.indexing.satisfied(e)){const t=r.table.indexing.stateIndex(e);await l(r.table.getDistanceByIndex(t),s)}r.reflected!=o&&dm.reflect(e)};let o=this.completed_slackness+1;for(;!this.should_stop;){for(const i of this.chain.getEntryPoints())e=dm.fromState(this.start_state),t=[],await n(!1,i,o),await this.checkTime();this.should_stop||(this.completed_slackness=o),o++}}}class ym extends Lg.Solver{constructor(e){super(),this.chain=e}instantiate(e){return new fm(e,this.chain)}}class vm{constructor(e,t){this.underlying_data=e,this.data_offset=t,this.description=vm.Description.deserialize(e,t),this.indexing=new hm.Indexing(this.description.region),this.move_table=new gm(this.description.region,this.description.multitile),this.byte_size=vm.Description.SERIALIZED_SIZE+this.indexing.size/4,this.real_data_offset=t+vm.Description.SERIALIZED_SIZE}getDistance(e){return this.getDistanceByIndex(this.indexing.stateIndex(e))}getDistanceByIndex(e){return this.underlying_data[this.real_data_offset+~~(e/4)]>>e%4*2&3}}!function(e){var t=B.numberWithCommas;let i;!function(t){t.SERIALIZED_SIZE=26,t.serialize=function(e){return new Uint8Array([e.multitile?1:0,...e.region])},t.deserialize=function(e,t){return{multitile:1==e[t],region:[...e.slice(t+1,t+26)]}},t.byteSize=function(t){return e.Description.SERIALIZED_SIZE+t.size/4}}(i=e.Description||(e.Description={})),e.RegionGraph=class{constructor(e,t){this.databases=e;const i=[];e.forEach(((e,n)=>{if(i.push({effective_region:e.description.region,table:e,reflected:!1,children:[],name:n.toString()}),t){const t=hm.reflect(e.description.region);i.some((e=>hm.equals(e.effective_region,t)))||i.push({effective_region:t,table:e,reflected:!0,children:[],name:n.toString()+"R"})}})),this.nodes=i,i.forEach((e=>i.forEach((t=>{e!=t&&hm.isChild(e.effective_region,t.effective_region)&&e.children.push(t)})))),this.entry_nodes=this.nodes.filter((e=>hm.isFirst(e.effective_region)))}getEntryPoints(){return this.entry_nodes}};class n{constructor(e){this.size=e,this.length=0,this.buffer=new ArrayBuffer(e*dm.SIZE),this.view=new Uint8Array(this.buffer),this.next_free=0,this.next_element=0}enqueue(e){this.view.set(e,this.next_free),this.next_free=(this.next_free+dm.SIZE)%this.view.length,this.length++}poll(){const e=new Uint8Array(this.buffer,this.next_element,dm.SIZE);return this.next_element=(this.next_element+dm.SIZE)%this.view.length,this.length--,e}isEmpty(){return this.next_free==this.next_element}}e.Generator=class extends Sg{constructor(e){super(),this.description=e,this.visited_nodes=0,this.current_depth=0,this.region=new hm.Indexing(this.description.region),this.progress=mi({region:this.region,nodes:0,depth:0}),this.withInterrupt(100,10),this.onInterrupt((()=>{this.progress.set({region:this.region,nodes:this.visited_nodes,depth:this.current_depth})}))}async implementation(){const o=this.region,r=new gm(this.description.region,this.description.multitile),s=new Uint8Array(Math.ceil(o.size/8)).fill(0),a=new Uint8Array(i.SERIALIZED_SIZE+o.size/4).fill(0);let l=0;const c=new n(75e6),u=(e,t)=>{const n=o.stateIndex(e),r=~~(n/8),l=n%8;s[r]>>l&1||(s[r]|=1<<l,a[i.SERIALIZED_SIZE+~~(n/4)]|=t%4<<n%4*2,this.visited_nodes++,c.enqueue(e))};if(o.solves_puzzle)u(dm.SOLVED,0);else for(let e=0;e<25;e++)if(this.description.region[e]==hm.Tile.FREE){const t=dm.copy(dm.SOLVED);t[24]=e,t[e]=24,t[dm.BLANK_INDEX]=e,u(t,0)}let h=0;for(;!c.isEmpty();){const e=this.visited_nodes-h;console.log(`Depth ${l}, total ${t(this.visited_nodes)}/${t(o.size)}, queue: ${t(e)}/${t(c.length)}`),h=this.visited_nodes,this.current_depth=l++;for(let t=0;t<e;t++){const e=c.poll();if(this.visited_nodes%1e5==0&&await this.checkTime(),this.should_stop)return null;for(const t of r.get(e)){const i=dm.copy(e);dm.doMove(i,t),u(i,l)}}}return console.log(`Depth ${l}, total ${this.visited_nodes}/${o.size}`),a.set(i.serialize(this.description),0),this.progress.set({region:this.region,nodes:this.visited_nodes,depth:this.current_depth}),new e(a,0)}onProgress(e){return this.progress.subscribe(e),this}}}(vm||(vm={}));class _m{constructor(e){this.data=e;let t=0;const i=[];for(;t<e.length;){const n=new vm(e,t);i.push(n),t+=n.byte_size}this.tables=i}}!function(e){let t;!function(e){e.bytesize=function(e){return o.sumBy(e.regions,(e=>vm.Description.byteSize(new hm.Indexing(e))))}}(t=e.Description||(e.Description={})),e.Generator=class extends Sg{constructor(e){super(),this.description=e,this.active_generator=null,this.solved_nodes=0,this.progress=mi({generator:this,visited_nodes:0,active_region:0,sub_progress:this.description.regions.map((e=>({region:new hm.Indexing(e),depth:0,nodes:0})))}),this.subgenerators=this.description.regions.map(((e,t)=>new vm.Generator({multitile:this.description.multitile,region:e}).onProgress((e=>{this.progress.update2((i=>{i.visited_nodes=this.solved_nodes+i.visited_nodes,i.active_region=t,i.sub_progress[t]=e}))})))),this.withInterrupt(100,1)}stop(){var e;super.stop(),null===(e=this.active_generator)||void 0===e||e.stop()}async implementation(){const t=[];for(let e=0;e<this.description.regions.length;e++){if(this.should_stop)return null;const i=this.active_generator=this.subgenerators[e];t.push(await i.run()),console.log(`Generator ${e} ended`),this.solved_nodes+=i.region.size}const i=o.sumBy(t,(e=>e.byte_size)),n=new Uint8Array(i);let r=0;for(let e of t)n.set(e.underlying_data,r),r+=e.byte_size;const s=new e(n);return this.progress.update2((e=>{e.final_result=s})),s}onProgress(e){return this.progress.subscribe(e),this}}}(_m||(_m={}));var xm=[5,5];class wm{constructor(e){if(this.tiles=[],this.inverted=[],this.moves=[],25!=e.length)throw"invalid import";for(var t=0;t<e.length;t++){var i={f:!1,p:!1,cx:t%5,cy:Math.floor(t/5),x:e[t]%5,y:Math.floor(e[t]/5)};this.tiles[i.cx+5*i.cy]=i,this.inverted[i.x+5*i.y]=i}this.empty=this.inverted[this.inverted.length-1]}clog(){!function(e){for(let t=0;t<5;t++){let i="";for(let n=0;n<5;n++){i+=" ";let o=e.inverted[n+5*t];i+=o.p?"x":"_",i+=o.f?"x":"_",i+=""+o.cx+o.cy}console.log(i)}}(this)}getMinMoves(){for(var e=0,t=0;t<this.inverted.length;t++){var i=this.inverted[t];i!=this.empty&&(e+=Math.abs(i.cx-i.x)+Math.abs(i.cy-i.y))}return e}clone(){for(var e=new wm(this.toList()),t=0;t<this.inverted.length;t++)e.inverted[t].f=this.inverted[t].f,e.inverted[t].p=this.inverted[t].p;return e}getv(e){return this.tiles[e[0]+5*e[1]]}get(e,t){return this.tiles[e+5*t]}getinv(e,t){return this.inverted[e+5*t]}getinvv(e){return this.inverted[e[0]+5*e[1]]}movetile(e,t,i,n=[]){for(;e.cx!=t||e.cy!=i;){var o=[];t<e.cx&&o.push({x:e.cx-1,y:e.cy}),i<e.cy&&o.push({x:e.cx,y:e.cy-1}),t>e.cx&&o.push({x:e.cx+1,y:e.cy}),i>e.cy&&o.push({x:e.cx,y:e.cy+1});var r=n.concat({x:e.cx,y:e.cy});this.moveempty(o,r),this.swaptiles(e,this.empty)}}moveempty(e,t){for(var i=1/0,n=null,o=0;o<e.length;o++){var r=this.moveemptyrecur(t,[{x:this.empty.cx,y:this.empty.cy}],{x:e[o].x,y:e[o].y},0,10);r&&r.score<i&&(i=r.score,n=r.locs)}if(!n)throw new Error("Can't pathfind to required spot");for(o=1;o<n.length;o++)this.swaptiles(this.empty,n[o].x,n[o].y)}moveemptyrecur(e,t,i,n,o){if(0==o)return null;var r=t[t.length-1];for(let e=0;e<t.length-1;e++)if(t[e].x==r.x&&t[e].y==r.y)return null;if(this.get(r.x,r.y).f)return null;for(let t in e)if(r.x==e[t].x&&r.y==e[t].y)return null;var s=.7;if(r.x==i.x&&r.y==i.y)return{score:n,locs:t};var a,l=1/0,c=null;return 0!=r.x&&(a=this.moveemptyrecur(e,t.concat({x:r.x-1,y:r.y}),i,n+1+s*(this.get(r.x-1,r.y).cx-this.get(r.x-1,r.y).x),o-1))&&a.score<l&&(l=a.score,c=a),0!=r.y&&(a=this.moveemptyrecur(e,t.concat({x:r.x,y:r.y-1}),i,n+1+s*(this.get(r.x,r.y-1).cy-this.get(r.x,r.y-1).y),o-1))&&a.score<l&&(l=a.score,c=a),4!=r.x&&(a=this.moveemptyrecur(e,t.concat({x:r.x+1,y:r.y}),i,n+1-s*(this.get(r.x+1,r.y).cx-this.get(r.x+1,r.y).x),o-1))&&a.score<l&&(l=a.score,c=a),4!=r.y&&(a=this.moveemptyrecur(e,t.concat({x:r.x,y:r.y+1}),i,n+1-s*(this.get(r.x,r.y+1).cy-this.get(r.x,r.y+1).y),o-1))&&a.score<l&&(l=a.score,c=a),c}swaptiles(){var e,t,i,n,o=0;if("object"==typeof arguments[o]?(e=arguments[o].cx,t=arguments[o].cy,o+=1):(e=arguments[o],t=arguments[o+1],o+=2),"object"==typeof arguments[o]?(i=arguments[o].cx,n=arguments[o].cy,o+=1):(i=arguments[o],n=arguments[o+1],o+=2),this.get(i,n)==this.empty){let o=e,r=t;e=i,t=n,i=o,n=r}var r=this.get(e,t),s=this.get(i,n),a=this.tiles.indexOf(r),l=this.tiles.indexOf(s);this.tiles[a]=s,this.tiles[l]=r,r.cx=i,r.cy=n,s.cx=e,s.cy=t,e!=i||t!=n?(Math.abs(e-i)+Math.abs(t-n)!=1&&console.warn("Non adjecent swapped"),this.moves.push({x1:e,y1:t,x2:i,y2:n})):console.warn("Same tile swapped")}clearpath(e,t,i){for(i&&(this.get(e,t).f=!1,this.get(e,t).p=!1,this.get(e+1,t).f=!1,this.get(e+1,t).p=!1,this.get(e,t+1).f=!1,this.get(e,t+1).p=!1,this.get(e+1,t+1).f=!1,this.get(e+1,t+1).p=!1);e<3||t<3;){var n=null,o=0;if(e<3){var r=0;this.get(e+2,t).f||r++,this.get(e+2,t+1).f||r++,r>=o&&(o=r,n=[1,0])}t<3&&(r=0,this.get(e,t+2).f||r++,this.get(e+1,t+2).f||r++,r>=o&&(o=r,n=[0,1])),e+=n[0],t+=n[1],this.get(e,t).f=!1,this.get(e,t).p=!1,this.get(e+1,t).f=!1,this.get(e+1,t).p=!1,this.get(e,t+1).f=!1,this.get(e,t+1).p=!1,this.get(e+1,t+1).f=!1,this.get(e+1,t+1).p=!1}}tiledist(e,t){return t||(t=[e.x,e.y]),Math.abs(e.cx-t[0])+Math.abs(e.cy-t[1])}toList(){for(var e=[],t=0;t<this.tiles.length;t++)e.push(this.tiles[t].x+5*this.tiles[t].y);return e}}function bm(e){for(var t=[[1,0,0,1],[0,1,1,0]],i=[[1,0,0,1],[-1,0,0,1]],n=[],o=0;o<5;o++)for(var r=0;r<5;r++)(g=e.get(r,o)).f=!1,g.p=!1;for(o=0;o<5;o++)for(r=0;r<5;r++)0!=r&&!e.get(r-1,o).f||0!=o&&!e.get(r,o-1).f||((g=e.get(r,o)).cx==g.x&&g.cy==g.y?g.f=!0:g.p=!0);for(o=0;o<5;o++)for(r=4;r>=0;r--)4!=r&&!e.get(r+1,o).f||0!=o&&!e.get(r,o-1).f||((g=e.get(r,o)).cx==g.x&&g.cy==g.y?g.f=!0:g.p=!0);for(o=4;o>=0;o--)for(r=0;r<5;r++)0!=r&&!e.get(r-1,o).f||4!=o&&!e.get(r,o+1).f||((g=e.get(r,o)).cx==g.x&&g.cy==g.y?g.f=!0:g.p=!0);e.get(4,4).p=!1;for(var s=0;s<t.length;s++)for(var a=t[s],l=km(xm,a),c=0;c<l[1]-2;c++){for(var u=0,h=0,d=0;d<l[0];d++){var p=km([d,c],a);e.getv(p).f||(u=d,h++)}if(0!=h){if(2==h&&u--,h>=3)break;u==l[0]-1&&u--;var g,m=c+1;(g=e.getv(km([u,m-1],a))).f=!1,g.p=!1,(g=e.getv(km([u+1,m-1],a))).f=!1,g.p=!1;var f=km([u+.5,m-1],a),y=km([u,m],a);e.clearpath(y[0],y[1],!0),e.get(3,3).f=!1,e.get(3,3).p=!1,e.get(3,4).f=!1,e.get(3,4).p=!1,e.get(4,3).f=!1,e.get(4,3).p=!1,e.get(4,4).f=!1,e.get(4,4).p=!1;for(var v=0;v<i.length;v++){var _=i[v],x=[Tm(f,km(km([-.5,0],_),a)),Tm(f,km(km([.5,0],_),a)),Tm(f,km(km([-.5,1],_),a)),Tm(f,km(km([.5,1],_),a)),Tm(f,km(km([-.5,2],_),a)),Tm(f,km(km([.5,2],_),a))];if(e.getv(x[0])==e.getinvv(x[0]))e.getv(x[1])==e.empty&&e.getv(x[3])==e.getinvv(x[1])?n.push({score:20,n:"0X,-1,-- "+x[0],f:function(e,t){t.movetile(t.getv(e[3]),e[1][0],e[1][1],[{x:e[0][0],y:e[0][1]}])}.bind(null,x)}):e.getv(x[2])==e.getinvv(x[1])||e.getv(x[3])==e.getinvv(x[1])?n.push({score:5-.3*e.tiledist(e.getv(x[1])),n:"0-,1-,-- || 0-,-1,-- "+x[0],f:function(e,t){t.movetile(t.getinvv(e[1]),e[5][0],e[5][1],[{x:e[0][0],y:e[0][1]}]),t.movetile(t.getinvv(e[0]),e[1][0],e[1][1],[{x:e[5][0],y:e[5][1]}]),t.movetile(t.getinvv(e[1]),e[3][0],e[3][1],[{x:e[1][0],y:e[1][1]}]),t.movetile(t.getinvv(e[1]),e[1][0],e[1][1])}.bind(null,x)}):n.push({score:5-.3*e.tiledist(e.getv(x[1])),n:"0-,--,-- "+x[0],f:function(e,t){t.movetile(t.getinvv(e[0]),e[1][0],e[1][1]),t.movetile(t.getinvv(e[1]),e[3][0],e[3][1],[{x:e[1][0],y:e[1][1]}]),t.movetile(t.getinvv(e[1]),e[1][0],e[1][1])}.bind(null,x)});else if(e.getv(x[0])==e.getinvv(x[1]))e.getv(x[1])==e.getinvv(x[0])?n.push({score:5-.4*e.tiledist(e.empty,x[2]),n:"10,--,-- "+x[0],f:function(e,t){t.movetile(t.getinvv(e[0]),e[0][0],e[0][1]),t.movetile(t.getinvv(e[1]),e[4][0],e[4][1],[{x:e[0][0],y:e[0][1]}]),t.movetile(t.getinvv(e[0]),e[1][0],e[1][1],[{x:e[4][0],y:e[4][1]}]),t.movetile(t.getinvv(e[1]),e[3][0],e[3][1],[{x:e[1][0],y:e[1][1]}]),t.movetile(t.getinvv(e[1]),e[1][0],e[1][1])}.bind(null,x)}):e.getv(x[1])==e.empty&&e.getv(x[3])==e.getinvv(x[0])?n.push({score:10,n:"1X,-0,-- "+x[0],f:function(e,t){t.movetile(t.getinvv(e[1]),e[1][0],e[1][1],[{x:e[3][0],y:e[3][1]}]),t.movetile(t.getinvv(e[0]),e[5][0],e[5][1],[{x:e[1][0],y:e[1][1]}]),t.movetile(t.getinvv(e[1]),e[0][0],e[0][1],[{x:e[5][0],y:e[5][1]}]),t.movetile(t.getinvv(e[0]),e[2][0],e[2][1],[{x:e[0][0],y:e[0][1]}]),t.movetile(t.getinvv(e[0]),e[0][0],e[0][1])}.bind(null,x)}):n.push({score:5-.3*e.tiledist(e.getinvv(x[0])),n:"1-,--,-- "+x[0],f:function(e,t){t.movetile(t.getinvv(e[0]),e[2][0],e[2][1],[{x:e[0][0],y:e[0][1]}]),t.movetile(t.getinvv(e[0]),e[0][0],e[0][1])}.bind(null,x)});else if(e.getv(x[0])==e.empty&&e.getv(x[2])==e.getinvv(x[0])&&e.getv(x[3])==e.getinvv(x[1]))n.push({score:19,n:"X-,01,-- "+x[0],f:function(e,t){t.movetile(t.getinvv(e[0]),e[0][0],e[0][1],[{x:e[3][0],y:e[3][1]}]),t.movetile(t.getinvv(e[1]),e[5][0],e[5][1],[{x:e[0][0],y:e[0][1]}]),t.movetile(t.getinvv(e[0]),e[1][0],e[1][1],[{x:e[5][0],y:e[5][1]}]),t.movetile(t.getinvv(e[1]),e[3][0],e[3][1],[{x:e[1][0],y:e[1][1]}]),t.movetile(t.getinvv(e[1]),e[1][0],e[1][1])}.bind(null,x)});else{var w=5;w-=.3*e.tiledist(e.getinvv(x[1]),x[0])+.3*e.tiledist(e.getinvv(x[0]),x[2]),w-=.1*e.tiledist(e.getinvv(x[1]),[e.empty.cx,e.empty.cy]),w+=e.tiledist(e.getinvv(x[1]),x[0])<=e.tiledist(e.getinvv(x[0]),x[0])?0:-10,n.push({score:w,n:"--,--,-- "+x[0],f:function(e,t){t.movetile(t.getinvv(e[1]),e[0][0],e[0][1])}.bind(null,x)})}}break}}for(r=0;r<5;r++)for(o=0;o<5;o++)e.get(r,o).p&&(w=4,w+=0,w-=.3*e.tiledist(e.getinv(r,o)),w-=.1*e.tiledist(e.getinv(r,o),[0,0]),w-=.1*e.tiledist(e.empty,[r,o]),w+=r>=3&&o>=3?-100:0,n.push({score:w,n:r+","+o,f:function(e,t,i){i.movetile(i.getinv(e,t),e,t)}.bind(null,r,o)}),0!=r&&!e.get(r-1,o).f||0!=o&&!e.get(r,o-1).f?0!=r&&!e.get(r-1,o).f||4!=o&&!e.get(r,o+1).f?4!=r&&!e.get(r+1,o).f||0!=o&&!e.get(r,o-1).f||e.clearpath(r-1,o,!1):e.clearpath(r,o-1,!1):e.clearpath(r,o,!1));return n}function km(e,t){for(var i=[],n=e.length,o=0;o<n;o++){i[o]=0;for(var r=0;r*n<t.length;r++)i[o]+=e[r]*t[o+r*n]}return i}function Tm(e,t){var i=[];for(var n in e)i[n]=e[n]+t[n];return i}var Sm=ru.log;function Cm(e){return 5*(e.y2-e.y1)+(e.x2-e.x1)}const Em=new class extends Lg.Solver{instantiate(e){return new class extends Lg.SolvingProcess{constructor(){super(...arguments),this.firstrun=!0,this.native_compression=!1}step(){const e=this.firstrun;this.firstrun=!1;let t=0,i=new wm(this.start_state);for(;;){let n=bm(i);if(0==n.length)break;n.sort((function(e,t){return t.score-e.score}));let o=n[e?0:Math.floor(n.length*Math.random())];try{o.f(i)}catch(e){break}if(t++>50)return Sm().log("failed to solve puzzle, over 50 actions attempted","Random Solver"),null}0==i.getMinMoves()&&this.registerSolution(function(e){if(0==e.length)return e;for(var t=["0321","1230","1230","1230","0321","1230","1230","1230"],i=[[-1,0],[0,-1],[1,0],[0,1]],n=function(e){for(var t="",i=0;i<e.length;i++)e[i].x1>e[i].x2&&(t+="0"),e[i].y1>e[i].y2&&(t+="1"),e[i].x1<e[i].x2&&(t+="2"),e[i].y1<e[i].y2&&(t+="3");return t}(e);;){for(var o=n.length,r=0;r<t.length;r++)n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\d/g,(function(e){return t[r][e]}))).replace(/02/g,"")).replace(/0123012/g,"10321")).replace(/2123003212/g,"321123")).replace(/1230032121/g,"032112")).replace(/123003212/g,"0321123")).replace(/3300122123000/g,"2303001")).replace(/123030122/g,"3012123");if(n.length==o)break}var s=[e[0].x1,e[0].y1],a=[];for(r=0;r<n.length;r++)a[r]={x1:s[0],y1:s[1],x2:s[0]+i[n[r]][0],y2:s[1]+i[n[r]][1]},s=[a[r].x2,a[r].y2];return a}(i.moves).map(Cm))}async solve_implementation(){for(;!this.should_stop;)this.step(),await this.checkTime()}}(e)}};var Am=di.cls;class zm extends si{constructor(){super(),this.addClass("ctr-progress-bar"),this.append(this.fill=Am("ctr-progress-bar-fill")),this.append(this.text_widget=Am("ctr-progress-bar-text"))}setProgress(e){return this.fill.css("width",`${(100*e).toFixed(0)}%`),this}setText(e){return this.text_widget.text(e),this}}var Lm,Pm,Mm=xg.over,Im=Lg.SliderState,Om=Lg.SliderPuzzle,Dm=Lg.MoveList,Rm=Lg.Move,Bm=B.profileAsync,Nm=ru.log,jm=B.index;class Fm extends sm{constructor(e,t){super(),this.parent=e,this.solver=t,this.settings=Is().app.settings.settings.solving.puzzles.sliders,this.guiding_start_time=-1,this.solved_time=-1,this.active_solving_process=null,this.error_recovery_solution=null,this.solution=null,this.progress_overlay=null,this.solving_overlay=null,this.move_overlay=null,this.last_overlay_render=-1,this.current_mainline_index=null,this.last_frame_state=null,this.arrow_keys_inverted=!1,this.puzzle=e.puzzle.puzzle}posToScreen(e){return j.add(this.parent.puzzle.reader.ui.body.screenRectangle().origin,{x:25,y:25},{x:e%5*56,y:56*Math.floor(e/5)})}setSolver(e){this.solver=e,this.active_solving_process&&(this.active_solving_process.solver.stop(),this.active_solving_process=null)}async read(){const e=this.parent.puzzle.reader.ui.recapture(!0),t=await new mg.SlideReader(e).getPuzzle(this.puzzle.theme);t.match_score>=mg.DETECTION_THRESHOLD_SCORE&&this.parent.modal.setImage(e.body.getData());const i=e.isInvertedArrowKeyCheckboxEnabled();return{result:t,state:Om.getState(t),inverted_checkmark:i}}updateProgressOverlay(){var e,t,i,n,o;this.progress_overlay||(this.progress_overlay=Mm()),this.progress_overlay.clear();const r=null!==(t=null===(e=this.solution)||void 0===e?void 0:e.length)&&void 0!==t?t:null===(o=null===(n=null===(i=this.active_solving_process)||void 0===i?void 0:i.solver)||void 0===n?void 0:n.getBest())||void 0===o?void 0:o.length,s=j.add(this.parent.puzzle.reader.ui.body.screenRectangle().origin,{x:137,y:-9});if(this.solution&&this.current_mainline_index>=r){const e=(this.solved_time-this.start_time)/1e3,t=(this.solved_time-this.guiding_start_time)/1e3,i=this.solution.length/t,n=this.settings.estimate_slider_speed;if(this.progress_overlay.text(`Done! ${e.toFixed(1)}s, ${i.toFixed(1)} moves/s`,s,{color:D(255,255,255),centered:!0,shadow:!0,width:12}),n){const e=this.solution.map((e=>e.move)),i=Dm.compress(e),n=e.flatMap(Rm.split),o=n.length-i.length,r=(t-.5)/(.5*o+(n.length-o));this.progress_overlay.text(`Slider Speed ${r.toFixed(3)}`,j.add(s,{x:0,y:20}),{color:D(255,255,255),centered:!0,shadow:!0,width:12})}}else{const e=Math.min(2*(null!=r?r:120),250),t=this.solution?this.current_mainline_index/this.solution.length:0;if(this.progress_overlay.progressbar(s,e,t,5),r){this.progress_overlay.text(r.toString(),j.add(s,{x:e/2+20,y:0}),{color:D(255,255,255),width:12,shadow:!0,centered:!0});const t=Date.now(),i=(t-this.start_time)/1e3;if(this.progress_overlay.text(`${i.toFixed(1)}s`,j.add(s,{x:-(e/2+25),y:0}),{color:D(255,255,255),width:12,shadow:!0,centered:!0}),this.solution&&this.current_mainline_index>=0){const e=(t-this.guiding_start_time)/1e3,i=this.current_mainline_index/e;this.progress_overlay.text(`${i.toFixed(1)}/s`,s,{color:D(255,255,255),width:12,shadow:!0,centered:!0})}}}this.progress_overlay.render()}updateMoveOverlay(){var e,t,i,n;if(this.move_overlay||(this.move_overlay=Mm().withTime(2e4)),this.move_overlay.clear(),!this.solution||!this.last_frame_state)return;if(null==this.current_mainline_index)return;const o=this.settings.max_lookahead;let r=[];(null===(e=this.error_recovery_solution)||void 0===e?void 0:e.sequence)&&r.push(...this.error_recovery_solution.sequence),r.push(...this.solution.slice(this.current_mainline_index,this.current_mainline_index+o));const s=Mm();let a=Im.blank(this.last_frame_state),l=0;const c=null!==(n=null===(i=null===(t=this.error_recovery_solution)||void 0===t?void 0:t.sequence)||void 0===i?void 0:i.length)&&void 0!==n?n:0,u=new Array(25).fill(!1);u[a]=!0;const h=[];for(let e=0;e<r.length;++e){const t=r[e],i=t.clicked_tile-a;if(this.settings.prevent_overlap){if(u[t.clicked_tile])break;let e=a;for(let t of Rm.split(i))e+=t,u[e]=!0}const n=e<c,s=("keyboard"==this.settings.mode||"hybrid"==this.settings.mode)&&Rm.isSmallStep(i),d=n?10:20*(1-1/o*(e-c)),p=this.posToScreen(t.clicked_tile),g=3,m=2,f=D(1,1,1);if(s){const e=(()=>{switch(this.arrow_keys_inverted?-i:i){case 1:return 2;case-5:return 1;case-1:return 0;case 5:return 3}})(),t=d/3,o=[{x:-d,y:-t},{x:0,y:-t},{x:0,y:-d},{x:d,y:0},{x:0,y:d},{x:0,y:t},{x:-d,y:t}].map((t=>j.transform_point(t,N.chain(N.translation(p),N.rotation(e)))));h.push(Mm().polyline(o,!0,{width:g+2*m,color:f}).polyline(o,!0,{width:g,color:n?this.settings.color_recovery_move:this.settings.color_mainline_move}))}else h.push(Mm().rect(F.centeredOn(this.posToScreen(t.clicked_tile),d+m),{width:g+2*m,color:D(1,1,1)}).rect(F.centeredOn(this.posToScreen(t.clicked_tile),d),{width:g,color:n?this.settings.color_recovery_move:this.settings.color_mainline_move}));const y=t.clicked_tile,v=this.posToScreen(a),_=this.posToScreen(y);v.x!=_.x&&v.y!=_.y&&Nm().log(`Invalid Move detected on overlay! From ${a} to ${y}. Full sequence: ${r.map((e=>e.clicked_tile)).join(",")}`,"Slider Solving");const x=j.normalize(j.sub(_,v));this.move_overlay.line(j.add(v,j.scale(l,x)),j.add(_,j.scale(-d,x)),{width:4,color:f}),this.move_overlay.line(j.add(v,j.scale(l,x)),j.add(_,j.scale(-d,x)),{width:2,color:n?this.settings.color_recovery_line:this.settings.color_mainline_line}),a=y,l=d}s.add(...h.reverse()),this.move_overlay.add(s),this.move_overlay.render(),this.last_overlay_render=Date.now(),this.updateProgressOverlay()}updateSolvingOverlay(){const e={x:143,y:133};this.solving_overlay||(this.solving_overlay=Mm()),this.solving_overlay.clear(),!this.solution&&this.active_solving_process?(this.solving_overlay.text("Solving",j.add(this.parent.puzzle.reader.ui.body.screenRectangle().origin,e),{color:D(255,255,255),width:20,centered:!0,shadow:!0}),this.solving_overlay.progressbar(j.add(this.parent.puzzle.reader.ui.body.screenRectangle().origin,{x:143,y:153}),100,this.active_solving_process.solver.getProgress(),5)):this.solution||this.solving_overlay.text("No solution found",j.add(this.parent.puzzle.reader.ui.body.screenRectangle().origin,e),{color:D(255,0,0),width:20,centered:!0,shadow:!0}),this.solving_overlay.render()}async tick(){var e;const t=await this.read();if(t.result.match_score<mg.DETECTION_THRESHOLD_SCORE)return void this.puzzleClosed();const i=t.state;if(!this.active_solving_process&&!this.solution){this.initial_state=i,this.active_solving_process={solver:this.instantiateSolver(i).onUpdate((e=>{this.updateSolvingOverlay(),this.updateProgressOverlay()})).withTimeout(this.settings.solve_time_ms),solving_from:0};const e=await this.active_solving_process.solver.run();return this.active_solving_process=null,this.current_mainline_index=0,this.error_recovery_solution={sequence:[],recovering_to_mainline_index:0,last_known_state:null},this.guiding_start_time=Date.now(),this.updateSolvingOverlay(),e?this.solution=Lg.MoveList.annotate(i,e,"keyboard"!=this.settings.mode):this.stop(),void this.updateSolvingOverlay()}if(await this.checkTime(),!this.solution)return;const n=this.settings.max_lookahead+7;if(this.settings.continue_solving_after_initial_solve&&(this.active_solving_process&&this.current_mainline_index+this.settings.max_lookahead+2>=this.active_solving_process.solving_from&&(this.active_solving_process.solver.stop(),this.active_solving_process=null),!this.active_solving_process&&this.current_mainline_index+n<this.solution.length)){const e=this.current_mainline_index+n,t=this.solution[e-1].post_state,i=this.instantiateSolver(t).registerSolution(this.solution.slice(e).map((e=>e.move))).withInterrupt(20,10).onFound((t=>{var n,o,r;if(i==(null===(n=this.active_solving_process)||void 0===n?void 0:n.solver)&&e==(null===(o=this.active_solving_process)||void 0===o?void 0:o.solving_from)&&this.current_mainline_index<e){const i=Lg.MoveList.combine(this.solution.slice(0,e).map((e=>e.move)),t,"keyboard"!=this.settings.mode),n=this.solution;this.solution=Dm.annotate(this.initial_state,i,"keyboard"!=this.settings.mode),24!=jm(this.solution,-1).clicked_tile&&(Nm().log("Bug detected after updating solution!"),Nm().log("Continuous solving found better solution, combining results","Slider Solving",{better:t,attached_to:this.solution.slice(0,e).map((e=>e.move)),combined:i}),Nm().log("Updated annotated move lists","Slider Solving",{old:n,new:this.solution}))}i.stop(),i==(null===(r=this.active_solving_process)||void 0===r?void 0:r.solver)&&(this.active_solving_process=null)}));this.active_solving_process={solver:i,solving_from:e},this.active_solving_process.solver.run()}const r=t.inverted_checkmark!=this.arrow_keys_inverted;if(this.arrow_keys_inverted=t.inverted_checkmark,(r||Date.now()-this.last_overlay_render>1e4)&&this.updateMoveOverlay(),this.last_frame_state&&Im.equals(this.last_frame_state,i))return void this.updateProgressOverlay();let s=(0,o.findLastIndex)(this.solution,(e=>e.pre_states.some((e=>Im.equals(e,i)))));if(s==this.solution.length-2&&Im.equals(i,Im.SOLVED)&&(s=this.solution.length,this.solved_time=Date.now()),s>=0)this.current_mainline_index=s,this.error_recovery_solution={sequence:[],recovering_to_mainline_index:s,last_known_state:i};else{let t=this.error_recovery_solution.sequence.findIndex((e=>e.pre_states.some((e=>Im.equals(e,i)))));if(t>=0)this.error_recovery_solution.sequence=this.error_recovery_solution.sequence.slice(t),this.error_recovery_solution.last_known_state=i,this.current_mainline_index=this.error_recovery_solution.recovering_to_mainline_index;else{let t=null;const n=(null===(e=this.error_recovery_solution)||void 0===e?void 0:e.last_known_state)?[this.error_recovery_solution.last_known_state]:this.solution[this.current_mainline_index].pre_states;for(let e of n)if(t=Im.findMove(i,e),t)break;if(null!=t){let e=[t,...Dm.fromTileList(this.error_recovery_solution.sequence.map((e=>e.clicked_tile)),Im.blank(i)+t)];e="keyboard"!=this.settings.mode?Dm.compress(e):Dm.expand(e),this.error_recovery_solution.sequence=Dm.annotate(i,e,"keyboard"!=this.settings.mode),this.error_recovery_solution.last_known_state=i,this.current_mainline_index=this.error_recovery_solution.recovering_to_mainline_index}else this.current_mainline_index=null}}this.last_frame_state=i,this.updateMoveOverlay()}instantiateSolver(e){return this.solver.instantiate(e).setCombineStraights("mouse"==this.settings.mode||"hybrid"==this.settings.mode)}async implementation(){var e,t,i,n,o;await super.implementation(),null===(e=this.move_overlay)||void 0===e||e.hide(),null===(t=this.solving_overlay)||void 0===t||t.hide(),null===(i=this.progress_overlay)||void 0===i||i.hide(),null===(o=null===(n=this.active_solving_process)||void 0===n?void 0:n.solver)||void 0===o||o.stop()}getLastKnownMove(){var e,t,i;return null!==(i=null===(t=null===(e=this.error_recovery_solution)||void 0===e?void 0:e.sequence)||void 0===t?void 0:t[0])&&void 0!==i?i:this.solution[this.current_mainline_index]}isDone(){return this.solution&&this.current_mainline_index&&this.current_mainline_index>=this.solution.length}}class qm{constructor(){this.pdbs=ou((async()=>(await fetch("data/sliderpdb/pdbs.json")).json())),this.cache=null,this.downloader={},this.db=new Xc("slider-pdbs")}clearCache(){return this.db.clear()}download(e){if(this.downloader[e.id])return this.downloader[e.id];const t=this.downloader[e.id]=mi({is_done:!1,progress:0});return(async()=>{const i=new Uint8Array(_m.Description.bytesize(e.description));let n=0,r=0;for(let s=0;s<e.file_count;s++){const a=await fetch(`data/sliderpdb/${e.id}/v${e.version}chunk${o.padStart(s.toString(),2,"0")}`,{});if(!a.ok)return null;const l=new Uint8Array(await new Response(new ReadableStream({async start(e){const n=a.body.getReader();for(;;){const{done:o,value:s}=await n.read();if(o)break;r+=s.byteLength,t.update2((e=>{e.progress=r/i.length})),e.enqueue(s)}e.close()}})).arrayBuffer());i.set(l,n),n+=l.length,t.update2((e=>{e.progress=n/i.length}))}this.cache={description:e,table:new _m(i)},await this.db.set(e.id,{description:e,data:i.buffer}),t.update2((e=>{e.is_done=!0,e.data=this.cache.table})),this.downloader[e.id]=null})(),t}async find(e=void 0,t=void 0){return(await this.pdbs.get()).find((i=>!(null!=e&&i.description.multitile!=e||null!=t&&i.id!=t)))}async findBest(e){var t;const i=await this.pdbs.get();return null!==(t=i.find((t=>t.description.multitile==e&&t.is_default)))&&void 0!==t?t:i.find((t=>t.description.multitile==e))}async getSimple(e){const t=await this.get(e);return t.table?t.table:new Promise((e=>{t.download.subscribe((t=>{t.is_done&&e(t.data)}))}))}async get(e){var t,i,n,o;if((null===(i=null===(t=this.cache)||void 0===t?void 0:t.description)||void 0===i?void 0:i.id)!=e.id||(null===(o=null===(n=this.cache)||void 0===n?void 0:n.description)||void 0===o?void 0:o.version)!=e.version){const t=await Bm((async()=>await this.db.get(e.id)),"retrieve");if(!t||t.description.version!=e.version)return{table:null,download:this.download(e)};this.cache={description:e,table:new _m(new Uint8Array(t.data))}}return{table:this.cache.table}}}qm.instance=nu((()=>new qm));class Um extends rm{constructor(e,t){super(e,t,Is().app.settings.settings.solving.puzzles.sliders.autostart,"Slider Puzzle","sliders"),this.puzzle=t}async constructProcess(){const e=await qm.instance.get(),t=await e.get(await e.findBest("keyboard"!=Is().app.settings.settings.solving.puzzles.sliders.mode)),i=t.table?new ym(new vm.RegionGraph(t.table.tables,!0)):Em,n=new Fm(this,i);if(t.download){const e=(new zm).setText("Downloading Database");this.modal.setStatus(e),t.download.subscribe((t=>{e.setProgress(t.progress),t.is_done&&(n.setSolver(new ym(new vm.RegionGraph(t.data.tables,!0))),e.setText("Download finished"),e.setProgress(1))}),!0)}return n}begin(){super.begin(),this.modal.setImage(this.puzzle.reader.ui.body.getData())}pausesClueReader(){return this.process&&!this.process.isDone()}}!function(e){let t;!function(e){var t=B.A1Color;e.DEFAULT={mode:"mouse",autostart:!0,max_lookahead:5,prevent_overlap:!0,display_recovery:!0,color_mainline_move:t.fromHex("#5ca000"),color_mainline_line:t.fromHex("#41740e"),color_recovery_move:t.fromHex("#FF0000"),color_recovery_line:t.fromHex("#ff6600"),solve_time_ms:1e3,estimate_slider_speed:!1,improve_slider_matches_backtracking:!0,continue_solving_after_initial_solve:!0},e.normalize=function(t){return t?(["keyboard","mouse","hybrid"].includes(t.mode)||(t.mode=e.DEFAULT.mode),[!0,!1].includes(t.autostart)||(t.autostart=e.DEFAULT.autostart),"number"!=typeof t.max_lookahead&&(t.max_lookahead=e.DEFAULT.max_lookahead),[!0,!1].includes(t.prevent_overlap)||(t.prevent_overlap=e.DEFAULT.prevent_overlap),[!0,!1].includes(t.display_recovery)||(t.display_recovery=e.DEFAULT.display_recovery),[!0,!1].includes(t.display_recovery)||(t.display_recovery=e.DEFAULT.display_recovery),"number"!=typeof t.color_mainline_move&&(t.color_mainline_move=e.DEFAULT.color_mainline_move),"number"!=typeof t.color_mainline_line&&(t.color_mainline_line=e.DEFAULT.color_mainline_line),"number"!=typeof t.color_recovery_move&&(t.color_recovery_move=e.DEFAULT.color_recovery_move),"number"!=typeof t.color_recovery_line&&(t.color_recovery_line=e.DEFAULT.color_recovery_line),"number"!=typeof t.solve_time_ms&&(t.solve_time_ms=e.DEFAULT.solve_time_ms),[!0,!1].includes(t.estimate_slider_speed)||(t.estimate_slider_speed=e.DEFAULT.estimate_slider_speed),[!0,!1].includes(t.improve_slider_matches_backtracking)||(t.improve_slider_matches_backtracking=e.DEFAULT.improve_slider_matches_backtracking),[!0,!1].includes(t.continue_solving_after_initial_solve)||(t.continue_solving_after_initial_solve=e.DEFAULT.continue_solving_after_initial_solve),t.solve_time_ms=o.clamp(t.solve_time_ms,500,5e3),t):o.cloneDeep(e.DEFAULT)}}(t=e.Settings||(e.Settings={}))}(Lm||(Lm={})),function(e){var t=Mp.interactionMarker,i=Vr.activate,n=di.npc,o=di.staticentity,r=zc.digSpotRect,s=di.item,l=di.hbox;class u extends Ci{constructor(e,t){super(),this.name=e,this.range=t,this.floor_sensitivity_layers=Ti.none,this.floor_sensitivity_layers=Ti.special(t.origin.level)}bounds(){return Vr.toRect(this.range)}async render_implementation(e){const n=this.floor_sensitivity_layers.get(e.floor_group_index);return e.highlight&&is(this.range).setStyle({color:n.value.correct_level?"yellow":"gray",interactive:!1,opacity:.5,fillOpacity:.1}).addTo(this),t(i(this.range).center(),"talk",e.highlight?1.5:1,!0,n.value.correct_level?void 0:"ctr-entity-wrong-level").addTo(this).getElement()}}e.NpcEntity=u;class h extends Ci{constructor(e,t,i){super(),this.name=e,this.box=t,this.cursor=i,this.floor_sensitivity_layers=Ti.none,this.floor_sensitivity_layers=Ti.special(t.level)}bounds(){return this.box}async render_implementation(e){const i=this.floor_sensitivity_layers.get(e.floor_group_index);return ts(this.box).setStyle({color:"cyan",interactive:!1,opacity:.5,fillOpacity:.1}).addTo(this),t(Z.center(this.box),this.cursor,e.highlight?1.5:1,!0,i.value.correct_level?void 0:"ctr-entity-wrong-level").addTo(this).getElement()}}e.ObjectEntity=h,e.TalkSolutionNpcEntity=class extends u{constructor(e,t){super(e,t.range),this.name=e,this.spot=t,this.setTooltip((()=>{const i=new $s;return i.header(l("Talk to",di.space(),n(e),di.space(),"to solve the clue")),t.note&&i.named("Note",t.note),i}))}},e.SearchSolutionEntity=class extends h{constructor(e){super(e.entity,e.spot,"search"),this.sol=e,this.setTooltip((()=>{const t=new $s;return t.header(l("Search",di.space(),o(e.entity),di.space(),"to solve the clue")),e.key&&(t.named("Key","If you do not have 'way of the footshaped key' unlocked, you will need to get a key."),t.named("Instructions",e.key.instructions),t.named("Solution",e.key.answer)),t}))}};class d extends Ci{constructor(e){super(),this.sol=e,this.floor_sensitivity_layers=Ti.none,this.floor_sensitivity_layers=Ti.special(e.spot.level),this.setTooltip((()=>{const t=new $s;return e.description?t.header(`Dig ${e.description} to solve the clue`):t.header(`Dig at ${W.toString(this.sol.spot)} to solve the clue`),t}))}bounds(){return F.from(this.sol.spot)}async render_implementation(e){const i=this.floor_sensitivity_layers.get(e.floor_group_index);return d.areaGraphics(this.sol.spot).addTo(this),t(this.sol.spot,"shovel",e.highlight?1.5:1,!0,i.value.correct_level?void 0:"ctr-entity-wrong-level").addTo(this).getElement()}}e.DigSolutionEntity=d,function(e){e.areaGraphics=function(e){return ts(r(e)).setStyle({color:"gray",interactive:!1,opacity:.5,fillOpacity:.1})}}(d=e.DigSolutionEntity||(e.DigSolutionEntity={})),e.EmoteAreaEntity=class extends Ci{constructor(e){super(),this.clue=e,this.floor_sensitivity_layers=Ti.none,this.floor_sensitivity_layers=Ti.special(e.area.origin.level),this.setTooltip((()=>{const t=new $s;t.header("Emote area"),e.double_agent?t.paragraph(`Perform the ${e.emotes.length>1?"emotes":"emote"} here. Kill the double agent to summon and talk to Uri.`):t.paragraph(`Perform the ${e.emotes.length>1?"emotes":"emote"} here summon and talk to Uri.`);{let i=c();for(let t=0;t<e.items.length;t++){const n=e.items[t];t>0&&(t==e.items.length-1?i.append(", and "):i.append(", ")),i.append(s(n))}t.named("Items",i)}{let i=c();for(let t=0;t<e.emotes.length;t++){const n=e.emotes[t];t>0&&(t==e.emotes.length-1?i.append(", then "):i.append(", ")),i.append(n)}t.named(1!=e.emotes.length?"Emotes":"Emote",i)}return e.double_agent&&t.header("Spawns double agent","left",1),t}))}bounds(){return Vr.toRect(this.clue.area)}async render_implementation(e){const t=this.floor_sensitivity_layers.get(e.floor_group_index),i=(is(this.clue.area).setStyle({color:"green",interactive:!1}).addTo(this),e.highlight?1.5:1);return a.marker(j.toLatLong(F.center(Vr.toRect(this.clue.area))),{icon:a.icon({iconUrl:"assets/icons/emotes.png",iconSize:[24*i,30*i],iconAnchor:[12*i,15*i],className:t.value.correct_level?"":"ctr-entity-wrong-level"})}).addTo(this).getElement()}},e.HideyHoleEntity=class extends h{constructor(e){super(e.hidey_hole.name,e.hidey_hole.location,"generic"),this.clue=e,this.setTooltip((()=>{const e=new $s;return e.header(o(this.clue.hidey_hole.name)),e.paragraph("Hidey holes are used to store the items needed for an emote clue."),e}))}}}(Pm||(Pm={}));var Hm=di.span,Vm=di.cls,$m=As.TeleportGroup,Wm=B.findBestMatch,Zm=B.stringSimilarity,Gm=di.italic,Km=Vr.activate,Ym=uc.notification,Jm=Pm.DigSolutionEntity,Xm=di.inlineimg,Qm=B.count,ef=zc.digSpotArea,tf=di.vbox,nf=ru.log;class of extends os{constructor(e){super(),this.solving=e,this.lines=[],this.solving.spots.forEach((e=>e.marker=new rf(e).setInteractive(!0).addTo(this)))}async updateOverlay(){this.lines.forEach((e=>{e.line.remove()})),this.lines=[];const e=this.solving.entries.filter((e=>e.information)).map((e=>e.information));this.lines=e.map((e=>{const t=e.origin,i=j.transform(j.scale(2e3,fg.ANGLE_REFERENCE_VECTOR),N.rotationRadians(e.angle_radians)),n=j.add(t,i),o=j.transform(e.direction,N.rotationRadians(Math.PI/2)),r=j.add(t,j.scale(e.origin_uncertainty,o)),s=j.add(t,j.scale(-e.origin_uncertainty,o)),l=j.add(r,j.transform(i,N.rotationRadians(Dg.EPSILON))),c=j.add(s,j.transform(i,N.rotationRadians(-Dg.EPSILON)));return{line:a.featureGroup([a.polyline([j.toLatLong(t),j.toLatLong(n)],{color:this.solving.settings.beam_color}),a.polygon([j.toLatLong(r),j.toLatLong(s),j.toLatLong(c),j.toLatLong(l)]).setStyle({stroke:!1,fillOpacity:.2,color:this.solving.settings.beam_color})]).addTo(this)}}))}eventClick(e){e.onPost((()=>{e.active_entity instanceof la?this.solving.registerSpot(e.active_entity.teleport,!1):e.active_entity instanceof rf?this.solving.entries.some((e=>e.information))?this.solving.setSelectedSpot(e.active_entity.spot,!0):this.solving.registerSpot(Km(ef(e.active_entity.spot.spot)),!0):this.solving.registerSpot(Km(Vr.fromRect(Z.lift(F.centeredOn(e.tile(),this.solving.settings.manual_tile_inaccuracy),e.tile().level))),!1)}))}}class rf extends Ci{constructor(e){super(),this.spot=e,this.possible=!0,this.number=null,this.active=!1,this.setTooltip((()=>{const e=new $s;return e.header(`Compass spot ${this.spot.spot_id+1}`),e}))}setPossible(e,t){return this.number==t&&e==this.possible||(this.number=t,this.possible=e,this.requestRendering()),this}setActive(e){return e!=this.active&&(this.active=e,this.requestRendering()),this}bounds(){return F.from(this.spot.spot)}async render_implementation(e){const t=this.possible?1:.5,i=(this.active?1:.5)*(e.highlight?1.5:1),n=a.marker(j.toLatLong(this.spot.spot),{icon:bs(this.spot.spot.level,i),opacity:t,interactive:!0,bubblingMouseEvents:!0}).addTo(this);return null!=this.number&&n.bindTooltip(a.tooltip({content:this.number.toString(),className:"spot-number-on-map",offset:[0,10],permanent:!0,direction:"center",opacity:t})),this.active&&Jm.areaGraphics(this.spot.spot).addTo(this),n.getElement()}}class sf extends si{constructor(e){super(Vm("ctr-compass-solving-entry")),this.entry=e,this.selection_requested=pi(),this.position_discard_requested=pi(),this.discard_requested=pi(),this.commit_requested=pi(),this._preview_angle=null,this.angle_container=null,this.tooltip("Select").on("click",(()=>{this.selection_requested.trigger(this)})),this.render()}setSelected(e){return this.toggleClass("selected",e),this}setPreviewAngle(e){var t,i;return this._preview_angle=e,null==this.entry.angle&&(null!=e?null===(t=this.angle_container)||void 0===t||t.text(`${Y(e).toFixed(1)}`):null===(i=this.angle_container)||void 0===i||i.text("???")),this}render(){this.empty();const e=this;Vm("ctr-neosolving-compass-entry-button").setInnerHtml("&times;").tooltip("Discard").appendTo(e).on("click",(()=>{this.position_discard_requested.trigger(this)}));{const t=Vm("ctr-neosolving-compass-entry-position").appendTo(e);this.entry.position?this.entry.position instanceof $m.Spot?t.append(Ks.Teleport.asSpan(this.entry.position),Hm(this.entry.position.spot.name)):t.append(Hm(j.toString(this.entry.position.center()))):t.append(Gm("No location selected"))}if(this.entry.position){const t=null!=this.entry.angle;this.angle_container=Vm("ctr-compass-solving-angle").toggleClass("committed",t).text(t?`${Y(this.entry.angle).toFixed(1)}`:null!=this._preview_angle?`${Y(this._preview_angle).toFixed(1)}`:"???").appendTo(e),Vm("ctr-neosolving-compass-entry-button").appendTo(e).text(t?"":"").tooltip(t?"Click to discard":"Click to commit (Alt + 1)").on("click",(e=>{e.stopPropagation(),t?this.discard_requested.trigger(this):this.commit_requested.trigger(this)}))}}}class af extends Gh{constructor(e,t,i){super(e,"clue"),this.clue=t,this.reader=i,this.entry_selection_index=0,this.entries=[],this.selected_spot=mi(null),this.settings=Is().app.settings.settings.solving.compass,this.spots=t.spots.map(((e,t)=>({spot:e,isPossible:!0,spot_id:t}))),this.selected_spot.subscribe(((e,t)=>{var i,n;null===(i=null==e?void 0:e.marker)||void 0===i||i.setActive(!0),null===(n=null==t?void 0:t.marker)||void 0===n||n.setActive(!1),this.updateMethodPreviews()})),i&&(this.process=new Dg.Service(this.reader.capture,this.settings.enable_status_overlay),this.process.onChange(((e,t)=>{"closed"==(null==e?void 0:e.state)?this.endClue("Compass Reader reported a closed compass"):(t&&this.settings.auto_commit_on_angle_change&&"normal"==e.state&&("spinning"==t.state||Q(e.angle,t.angle)>af.ANGLE_CHANGE_COMMIT_THRESHOLD)&&this.commit(),e&&this.entries.forEach((t=>t.widget.setPreviewAngle("normal"==(null==e?void 0:e.state)?e.angle:null))))}),(e=>e.bindTo(this.handler_pool))))}pausesClueReader(){var e;return this.process&&"success"==(null===(e=this.process.last_read)||void 0===e?void 0:e.type)}renderWidget(){this.parent.layer.compass_container.empty();const e=tf().appendTo(this.parent.layer.compass_container);Vm("ctr-neosolving-compass-solving-header").append(Xm("assets/icons/arrow.png").tooltip("Compass Solver"),"Compass Solver",di.spacer(),Xm("assets/icons/reset_nis.png").addClass("ctr-clickable").on("click",(async()=>{this.reset(!0)})).tooltip("Reset compass solver."),Xm("assets/icons/settings.png").addClass("ctr-clickable").on("click",(async()=>{const e=await new Of("compass").do();e.saved&&(this.settings=e.value.solving.compass)}))).appendTo(e),this.entry_container=c().css("flex-basis","100%").appendTo(e)}setSelection(e){e=o.clamp(e,0,this.entries.length-1),this.entry_selection_index=e,this.entries.forEach(((e,t)=>{e.widget.setSelected(this.entry_selection_index==t)}))}deleteEntry(e){var t;const i=this.entries.indexOf(e);i>=0&&(ru.log().log(`Deleting triangulation spot ${i}.`,"Compass Solving"),this.entries.splice(i,1),null===(t=e.widget)||void 0===t||t.remove(),this.entries.length>0&&this.entry_selection_index>i?this.setSelection(this.entry_selection_index-1):i==this.entry_selection_index&&this.setSelection(this.entry_selection_index))}async discardPosition(e){var t;const i=this.entries.indexOf(e);i>=0&&(e.is_solution_of_previous_clue?this.deleteEntry(e):e.position?(e.angle=null,e.information=null,e.position=null,e.preconfigured=null,this.setSelection(i),null===(t=null==e?void 0:e.widget)||void 0===t||t.render()):Qm(this.entries,(e=>!e.information))>1?this.deleteEntry(e):this.setSelection(i),Qm(this.entries,(e=>!e.position))>1&&this.deleteEntry(e),await this.updatePossibilities(!1),!this.entries.some((e=>!e.information))&&Qm(this.spots,(e=>e.isPossible))>1&&this.createEntry({position:null,angle:null,information:null,preconfigured:null}))}async discardAngle(e){const t=this.entries.indexOf(e);if(ru.log().log(`Discarding angle of triangulation spot ${t}`,"Compass Solving"),t>=0){const i=this.process.state();e.angle=null,e.information=null,e.widget.render(),e.widget.setPreviewAngle("normal"==i.state?i.angle:void 0),await this.updatePossibilities(!1),this.setSelection(t)}}async commit(e=void 0,t=!1){if(!(e=null!=e?e:this.entries[this.entry_selection_index])||!this.entries.some((t=>t==e)))return;if(!(null==e?void 0:e.position))return;if(null!=e.angle)return;let i;if(e.is_solution_of_previous_clue){const e=this.reader.getAngle();ra("success"==e.type),i=e.angle}else{const e=this.process.state();if("normal"!=e.state)return;i=e.angle}const n=fg.TriangulationPoint.construct(af.Spot.coords(e.position),i);if(!this.spots.some((e=>fg.isPossible([n],e.spot))))return t&&Ym("Refusing to lock in impossible angle.","error").show(),void nf().log(`Cowardly refusing to lock in impossible angle ${Y(n.angle_radians)} from ${n.modified_origin.x} | ${n.modified_origin.y}`,"Compass Solving");if(nf().log(`Committing ${Y(n.angle_radians)} to entry ${this.entries.indexOf(e)} (${n.modified_origin.x} | ${n.modified_origin.y})`,"Compass Solving"),e.angle=i,e.information=n,e.widget.render(),await this.updatePossibilities(!0),!this.entries.some((e=>!e.information))&&Qm(this.spots,(e=>e.isPossible))>1)this.createEntry({position:null,angle:null,information:null,preconfigured:null});else{let t=this.entries.indexOf(e)+1;for(;!(t+1>=this.entries.length);){const e=this.entries[t];if(!e.information){if(!e.position||!this.settings.skip_triangulation_point_if_colinear)break;const i=af.Spot.coords(e.position),n=this.entries.findIndex((e=>{if(!e.information)return!1;const t=fg.getExpectedAngle(e.information.origin,i.center());return Math.min(Q(t,e.information.angle_radians),Q(X(t+Math.PI),e.information.angle_radians))<5*Dg.EPSILON}));if(!(n>=0))break;ru.log().log(`Skipping triangulation entry ${t} because it's colinear to ${n}`,"Compass Solving")}t++}ru.log().log(`Advancing selection to ${t} from ${this.entry_selection_index}`,"Compass Solving"),this.setSelection(t)}}async updateMethodPreviews(){var e;if(this.settings.show_method_preview_of_secondary_solutions){const t=this.selected_spot.value(),i=Qm(this.spots,(e=>e.isPossible))<=5;for(let n of this.spots)if(i&&n.isPossible&&!n.path&&n!=t){const t=await this.parent.getAutomaticMethod({clue:this.clue.id,spot:n.spot});if("general_path"!=(null===(e=null==t?void 0:t.method)||void 0===e?void 0:e.type))continue;n.path=da.renderPath(t.method.main_path).eachEntity((e=>e.setOpacity(.5))).addTo(this.layer)}else i&&n.isPossible&&n!=t||!n.path||(n.path.remove(),n.path=null)}}setSelectedSpot(e,t){this.selected_spot.set(e),t&&t&&this.registerSolution(ef(e.spot))}async updatePossibilities(e){this.layer.rendering.lock();const t=this.entries.filter((e=>e.information)).map((e=>e.information));this.spots.forEach((e=>{var i;const n=fg.isPossible(t,e.spot);e.isPossible=n,n||null===(i=e.marker)||void 0===i||i.setPossible(!1,null)}));const i=o.sortBy(this.spots.filter((e=>e.isPossible)),(e=>Math.max(...t.map((t=>Q(fg.getExpectedAngle(t.modified_origin,e.spot),t.angle_radians)))))),n=i.length<=5;if(i.forEach(((e,t)=>{var i;null===(i=e.marker)||void 0===i||i.setPossible(!0,n?t+1:null)})),1==i.length){const e=this.selected_spot.value();i.some((t=>W.equals(null==e?void 0:e.spot,t.spot)))||this.setSelectedSpot(i[0],!1)}else this.setSelectedSpot(null,!1);if(i.length>0&&i.length<=5){const e=Z.extend(Z.from(...i.map((e=>e.spot))),1);this.registerSolution(Vr.fromRect(e))}if(await this.updateMethodPreviews(),e&&i.length>0&&(t.length>0||i.length<50)&&this.layer.getMap().fitView(Z.from(...i.map((e=>e.spot))),{maxZoom:2}),!(i.length>1))for(;;){const e=this.entries.find((e=>!e.information));if(!e)break;this.deleteEntry(e)}await this.layer.updateOverlay(),this.layer.rendering.unlock()}createEntry(e){const t=this.process.state();return e.widget=new sf(e).setPreviewAngle(t&&"normal"==t.state?t.angle:null).appendTo(this.entry_container),e.widget.position_discard_requested.on((e=>{this.discardPosition(e.entry)})),e.widget.commit_requested.on((e=>{this.commit(e.entry,!0)})),e.widget.discard_requested.on((e=>{this.discardAngle(e.entry)})),e.widget.selection_requested.on((e=>{const t=this.entries.indexOf(e.entry);t<0||this.setSelection(t)})),this.entries.push(e),this.setSelection(this.entries.length-1),e}async registerSpot(e,t){const i=this.entry_selection_index,n=this.entries[i];if(!n)return;const o=n.information;n.position=e,n.angle=null,n.information=null,n.preconfigured=null,t||(n.is_solution_of_previous_clue=void 0),n.widget.render();const r=this.process.state();n.widget.setPreviewAngle("normal"!=(null==r?void 0:r.state)?null:r.angle),o&&(n.is_solution_of_previous_clue&&t?await this.commit(n):await this.updatePossibilities(!1))}async reset(e=!1){var t,i;this.settings=Is().app.settings.settings.solving.compass,this.entries.forEach((e=>{var t;return null===(t=e.widget)||void 0===t?void 0:t.remove()}));const n=this.entries.some((e=>e.is_solution_of_previous_clue));this.entries=[],!this.settings.use_previous_solution_as_start||!n&&e||(()=>{const e=this.parent.getAssumedPlayerPositionByLastClueSolution();if(!e)return;const t=Km(e).size;j.max_axis(t)>192?ru.log().log(`Not using previous solution because solution area is too large (${t.x} x ${t.y})`,"Compass Solving"):F.containsRect(this.clue.valid_area,Vr.toRect(e))?(ru.log().log("Loaded previous solution as first triangulation spot","Compass Solving"),this.createEntry({position:Vr.activate(e),angle:null,information:null,is_solution_of_previous_clue:!0})):ru.log().log("Not using previous solution because it is outside of the viable area","Compass Solving")})();const o=!!(null===(t=this.entries[0])||void 0===t?void 0:t.is_solution_of_previous_clue),r=null===(i=this.settings.active_triangulation_presets.find((e=>e.compass_id==this.clue.id)))||void 0===i?void 0:i.preset_id,s=[...af.TriangulationPreset.builtin,...this.settings.custom_triangulation_presets].find((e=>e.id==r));s&&(o&&this.settings.invert_preset_sequence_if_previous_solution_was_used?[...s.sequence].reverse():s.sequence).forEach((e=>{const t=e.teleport?Ds.resolveTeleport(e.teleport):Km(Vr.init(e.tile));this.createEntry({position:t,angle:null,information:null,preconfigured:e})})),0==this.entries.length&&this.createEntry({position:null,angle:null,information:null,preconfigured:null}),o?await this.commit(this.entries[0]):(this.setSelection(this.entries.findIndex((e=>!e.information))),this.updatePossibilities(!0))}async begin(){this.layer=new of(this),this.parent.layer.add(this.layer),this.process.run(),this.parent.app.main_hotkey.subscribe(0,(e=>{if(e.text){const t=Wm(af.teleport_hovers,(t=>Zm(e.text,t.expected)),.9);if(t){const e=Ds.resolveTeleport(t.value.teleport_id);if(!e)return;this.registerSpot(e,!1)}}else this.commit(void 0,!0)})).bindTo(this.handler_pool),this.renderWidget(),await this.reset()}end(){this.layer.remove(),this.process&&this.process.stop()}}!function(e){let t,i,n;!function(e){var t=Vr.activate;e.coords=function(e){return e instanceof $m.Spot?t(e.targetArea()):e}}(t=e.Spot||(e.Spot={})),e.teleport_hovers=[{expected:"Cast South Feldip Hills Teleport",teleport_id:{group:"normalspellbook",spot:"southfeldiphills"}},{expected:"Cast Taverley Teleport",teleport_id:{group:"normalspellbook",spot:"taverley"}},{expected:"Cast Varrock Teleport",teleport_id:{group:"normalspellbook",spot:"varrock"}},{expected:"Cast Lumbridge Teleport",teleport_id:{group:"normalspellbook",spot:"lumbridge"}},{expected:"Cast Falador Teleport",teleport_id:{group:"normalspellbook",spot:"falador"}},{expected:"Cast Camelot Teleport",teleport_id:{group:"normalspellbook",spot:"camelot"}},{expected:"Cast Ardougne Teleport",teleport_id:{group:"normalspellbook",spot:"ardougne"}},{expected:"Cast Watchtower Teleport",teleport_id:{group:"normalspellbook",spot:"watchtower-yanille"}},{expected:"Cast Trollheim Teleport",teleport_id:{group:"normalspellbook",spot:"trollheim"}},{expected:"Cast God Wars Dungeon Teleport",teleport_id:{group:"normalspellbook",spot:"godwars"}},{expected:"Cast Paddewwa Teleport",teleport_id:{group:"ancientspellook",spot:"paddewwa"}},{expected:"Cast Senntisten Teleport",teleport_id:{group:"ancientspellook",spot:"senntisten"}},{expected:"Cast Kharyll Teleport",teleport_id:{group:"ancientspellook",spot:"kharyll"}},{expected:"Cast Lassar Teleport",teleport_id:{group:"ancientspellook",spot:"lassar"}},{expected:"Cast Dareeyak Teleport",teleport_id:{group:"ancientspellook",spot:"dareeyak"}},{expected:"Cast Carrallanger Teleport",teleport_id:{group:"ancientspellook",spot:"carallaner"}},{expected:"Cast Annakarl Teleport",teleport_id:{group:"ancientspellook",spot:"annakarl"}},{expected:"Cast Ghorrock Teleport",teleport_id:{group:"ancientspellook",spot:"ghorrock"}},{expected:"Cast Kandarin monastery Teleport",teleport_id:{group:"greenteleport",spot:"monastery"}},{expected:"Cast Manor farm Teleport",teleport_id:{group:"greenteleport",spot:"manorfarm"}},{expected:"Cast Skeletal horror Teleport",teleport_id:{group:"greenteleport",spot:"skelettalhorror"}},{expected:"Cast Moonclan Teleport",teleport_id:{group:"lunarspellbook",spot:"moonclan"}},{expected:"Cast Ourania Teleport",teleport_id:{group:"lunarspellbook",spot:"ourania"}},{expected:"Cast South Falador Teleport",teleport_id:{group:"lunarspellbook",spot:"southfalador"}},{expected:"Cast Waterbirth Teleport",teleport_id:{group:"lunarspellbook",spot:"waterbirth"}},{expected:"Cast Barbarian Teleport",teleport_id:{group:"lunarspellbook",spot:"barbarian"}},{expected:"Cast North Ardougne Teleport",teleport_id:{group:"lunarspellbook",spot:"northardougne"}},{expected:"Cast Khazard Teleport",teleport_id:{group:"lunarspellbook",spot:"khazard"}},{expected:"Cast Fishing Guild Teleport",teleport_id:{group:"lunarspellbook",spot:"fishing"}},{expected:"Cast Catherby Teleport",teleport_id:{group:"lunarspellbook",spot:"catherby"}},{expected:"Cast Ice Plateau Teleport",teleport_id:{group:"lunarspellbook",spot:"iceplateu"}},{expected:"Cast Trollheim Farm Teleport",teleport_id:{group:"lunarspellbook",spot:"trollheim"}},{expected:"Quick teleport Al Kharid Lodestone",teleport_id:{group:"home",spot:"alkharid"}},{expected:"Teleport Al Kharid Lodestone",teleport_id:{group:"home",spot:"alkharid"}},{expected:"Quick teleport Anachronia Lodestone",teleport_id:{group:"home",spot:"anachronia"}},{expected:"Teleport Anachronia Lodestone",teleport_id:{group:"home",spot:"anachronia"}},{expected:"Quick teleport Ardougne Lodestone",teleport_id:{group:"home",spot:"ardougne"}},{expected:"Teleport Ardougne Lodestone",teleport_id:{group:"home",spot:"ardougne"}},{expected:"Quick teleport Ashdale Lodestone",teleport_id:{group:"home",spot:"ashdale"}},{expected:"Teleport Ashdale Lodestone",teleport_id:{group:"home",spot:"ashdale"}},{expected:"Quick teleport Bandit Camp Lodestone",teleport_id:{group:"home",spot:"banditcamp"}},{expected:"Teleport Bandit Camp Lodestone",teleport_id:{group:"home",spot:"banditcamp"}},{expected:"Quick teleport Burthorpe Lodestone",teleport_id:{group:"home",spot:"burthorpe"}},{expected:"Teleport Burthorpe Lodestone",teleport_id:{group:"home",spot:"burthorpe"}},{expected:"Quick teleport Canifis Lodestone",teleport_id:{group:"home",spot:"canifis"}},{expected:"Teleport Canifis Lodestone",teleport_id:{group:"home",spot:"canifis"}},{expected:"Quick teleport Catherby Lodestone",teleport_id:{group:"home",spot:"catherby"}},{expected:"Teleport Catherby Lodestone",teleport_id:{group:"home",spot:"catherby"}},{expected:"Quick teleport Draynor Lodestone",teleport_id:{group:"home",spot:"draynor"}},{expected:"Teleport Draynor Lodestone",teleport_id:{group:"home",spot:"draynor"}},{expected:"Quick teleport Eagles` Peak Lodestone",teleport_id:{group:"home",spot:"eaglespeak"}},{expected:"Teleport Eagles` Peak Lodestone",teleport_id:{group:"home",spot:"eaglespeak"}},{expected:"Quick teleport Edgeville Lodestone",teleport_id:{group:"home",spot:"edgeville"}},{expected:"Teleport Edgeville Lodestone",teleport_id:{group:"home",spot:"edgeville"}},{expected:"Quick teleport Falador Lodestone",teleport_id:{group:"home",spot:"falador"}},{expected:"Teleport Falador Lodestone",teleport_id:{group:"home",spot:"falador"}},{expected:"Quick teleport Fremennik Lodestone",teleport_id:{group:"home",spot:"fremmenik"}},{expected:"Teleport Fremennik Lodestone",teleport_id:{group:"home",spot:"fremmenik"}},{expected:"Quick teleport Karamja Lodestone",teleport_id:{group:"home",spot:"karamja"}},{expected:"Teleport Karamja Lodestone",teleport_id:{group:"home",spot:"karamja"}},{expected:"Quick teleport Lumbridge Lodestone",teleport_id:{group:"home",spot:"lumbridge"}},{expected:"Teleport Lumbridge Lodestone",teleport_id:{group:"home",spot:"lumbridge"}},{expected:"Quick teleport Lunar Isle Lodestone",teleport_id:{group:"home",spot:"lunarisle"}},{expected:"Teleport Lunar Isle Lodestone",teleport_id:{group:"home",spot:"lunarisle"}},{expected:"Quick teleport Ooglog Lodestone",teleport_id:{group:"home",spot:"ooglog"}},{expected:"Teleport Ooglog Lodestone",teleport_id:{group:"home",spot:"ooglog"}},{expected:"Quick teleport Port Sarim Lodestone",teleport_id:{group:"home",spot:"portsarim"}},{expected:"Teleport Port Sarim Lodestone",teleport_id:{group:"home",spot:"portsarim"}},{expected:"Quick teleport Prifddinas Lodestone",teleport_id:{group:"home",spot:"prifddinas"}},{expected:"Teleport Prifddinas Lodestone",teleport_id:{group:"home",spot:"prifddinas"}},{expected:"Quick teleport Seers Village Lodestone",teleport_id:{group:"home",spot:"seersvillage"}},{expected:"Teleport Seers Village Lodestone",teleport_id:{group:"home",spot:"seersvillage"}},{expected:"Quick teleport Taverley Lodestone",teleport_id:{group:"home",spot:"taverley"}},{expected:"Teleport Taverley Lodestone",teleport_id:{group:"home",spot:"taverley"}},{expected:"Quick teleport Tirannwn Lodestone",teleport_id:{group:"home",spot:"tirannwn"}},{expected:"Teleport Tirannwn Lodestone",teleport_id:{group:"home",spot:"tirannwn"}},{expected:"Quick teleport Varrock Lodestone",teleport_id:{group:"home",spot:"varrock"}},{expected:"Teleport Varrock Lodestone",teleport_id:{group:"home",spot:"varrock"}},{expected:"Quick teleport Wilderness Lodestone",teleport_id:{group:"home",spot:"wilderness"}},{expected:"Teleport Wilderness Lodestone",teleport_id:{group:"home",spot:"wilderness"}},{expected:"Quick teleport Yanille Lodestone",teleport_id:{group:"home",spot:"yanille"}},{expected:"Teleport Yanille Lodestone",teleport_id:{group:"home",spot:"yanille"}},{expected:"Quick teleport Menaphos Lodestone",teleport_id:{group:"home",spot:"menaphos"}},{expected:"Teleport Menaphos Lodestone",teleport_id:{group:"home",spot:"menaphos"}},{expected:"Quick teleport Fort Forinthry Lodestone",teleport_id:{group:"home",spot:"fortforinthry"}},{expected:"Teleport Fort Forinthry Lodestone",teleport_id:{group:"home",spot:"fortforinthry"}},{expected:"Quick teleport City of Um Lodestone",teleport_id:{group:"home",spot:"cityofum"}},{expected:"Teleport City of Um Lodestone",teleport_id:{group:"home",spot:"cityofum"}},{expected:"Al Kharid lodestone",teleport_id:{group:"home",spot:"alkharid"}},{expected:"Anachronia lodestone",teleport_id:{group:"home",spot:"anachronia"}},{expected:"Ardougne lodestone",teleport_id:{group:"home",spot:"ardougne"}},{expected:"Ashdale lodestone",teleport_id:{group:"home",spot:"ashdale"}},{expected:"Bandit Camp lodestone",teleport_id:{group:"home",spot:"banditcamp"}},{expected:"Burthorpe lodestone",teleport_id:{group:"home",spot:"burthorpe"}},{expected:"Canifis lodestone",teleport_id:{group:"home",spot:"canifis"}},{expected:"Catherby lodestone",teleport_id:{group:"home",spot:"catherby"}},{expected:"Draynor lodestone",teleport_id:{group:"home",spot:"draynor"}},{expected:"Eagles` Peak lodestone",teleport_id:{group:"home",spot:"eaglespeak"}},{expected:"Edgeville lodestone",teleport_id:{group:"home",spot:"edgeville"}},{expected:"Falador lodestone",teleport_id:{group:"home",spot:"falador"}},{expected:"Fremennik Province lodestone",teleport_id:{group:"home",spot:"fremmenik"}},{expected:"Karamja lodestone",teleport_id:{group:"home",spot:"karamja"}},{expected:"Lumbridge lodestone",teleport_id:{group:"home",spot:"lumbridge"}},{expected:"Lunar Isle lodestone",teleport_id:{group:"home",spot:"lunarisle"}},{expected:"Ooglog lodestone",teleport_id:{group:"home",spot:"ooglog"}},{expected:"Port Sarim lodestone",teleport_id:{group:"home",spot:"portsarim"}},{expected:"Prifddinas lodestone",teleport_id:{group:"home",spot:"prifddinas"}},{expected:"Seers Village lodestone",teleport_id:{group:"home",spot:"seersvillage"}},{expected:"Taverley lodestone",teleport_id:{group:"home",spot:"taverley"}},{expected:"Tirannwn lodestone",teleport_id:{group:"home",spot:"tirannwn"}},{expected:"Varrock lodestone",teleport_id:{group:"home",spot:"varrock"}},{expected:"Wilderness lodestone",teleport_id:{group:"home",spot:"wilderness"}},{expected:"Yanille lodestone",teleport_id:{group:"home",spot:"yanille"}},{expected:"Menaphos lodestone",teleport_id:{group:"home",spot:"menaphos"}},{expected:"Fort Forinthry lodestone",teleport_id:{group:"home",spot:"fortforinthry"}},{expected:"City of Um lodestone",teleport_id:{group:"home",spot:"cityofum"}},{expected:"Grand Exchange Luck of the Dwarves",teleport_id:{group:"ringofwealth",spot:"grandexchange"}},{expected:"Dwarven Outpost Luck of the Dwarves",teleport_id:{group:"luckofthedwarves",spot:"outpost"}}],e.ANGLE_CHANGE_COMMIT_THRESHOLD=J(4),function(e){e.elite_moonclan_southfeldiphills={compass_id:[Wc.gielinor_compass.id,Wc.tetracompass.id],id:-1,name:"{{teleport lunarspellbook moonclan}} Moonclan - {{teleport normalspellbook southfeldiphills}} South Feldip Hills",sequence:[{teleport:{group:"lunarspellbook",spot:"moonclan"}},{teleport:{group:"normalspellbook",spot:"southfeldiphills"}}]},e.elite_moonclan_iceplateu={compass_id:[Wc.gielinor_compass.id,Wc.tetracompass.id],id:-2,name:"{{teleport lunarspellbook moonclan}} Moonclan - {{teleport lunarspellbook iceplateu}} Ice Plateau",sequence:[{teleport:{group:"lunarspellbook",spot:"moonclan"}},{teleport:{group:"lunarspellbook",spot:"iceplateu"}}]},e.master_turtle_island={compass_id:Wc.arc_compass.id,id:-3,name:"{{teleport arctabs turtleislands}} Turtle Island",sequence:[{teleport:{group:"arctabs",spot:"turtleislands"}}]},e.elite_falador={compass_id:[Wc.gielinor_compass.id,Wc.tetracompass.id],id:-4,name:"{{teleport normalspellbook falador}} Falador",sequence:[{teleport:{group:"normalspellbook",spot:"falador"}}]},e.master_turtle_island_dock={compass_id:Wc.arc_compass.id,id:-5,name:"{{teleport arcsailing turtleislands}} Ship to Turtle Island",sequence:[{teleport:{group:"arcsailing",spot:"turtleislands"}}]},e.elite_falador_dave={compass_id:[Wc.gielinor_compass.id,Wc.tetracompass.id],id:-6,name:"{{teleport davesspellbook falador}} Falador",sequence:[{teleport:{group:"davesspellbook",spot:"falador"}}]},e.master_whales_maw={compass_id:Wc.arc_compass.id,id:-6,name:"{{teleport arctabs whalesmaw}} Whale`s Maw",sequence:[{teleport:{group:"arctabs",spot:"whalesmaw"}}]},e.builtin=[e.elite_moonclan_southfeldiphills,e.elite_moonclan_iceplateu,e.master_turtle_island,e.elite_falador,e.master_turtle_island_dock,e.master_whales_maw]}(i=e.TriangulationPreset||(e.TriangulationPreset={})),function(e){e.DEFAULT={auto_commit_on_angle_change:!0,enable_status_overlay:!0,custom_triangulation_presets:[],active_triangulation_presets:[],manual_tile_inaccuracy:3,use_previous_solution_as_start:!1,show_method_preview_of_secondary_solutions:!0,invert_preset_sequence_if_previous_solution_was_used:!1,skip_triangulation_point_if_colinear:!0,beam_color:"#3388ff"},e.normalize=function(t){return t?((0,o.isArray)(t.custom_triangulation_presets)||(t.custom_triangulation_presets=[]),(0,o.isArray)(t.active_triangulation_presets)||(t.active_triangulation_presets=[]),[!0,!1].includes(t.auto_commit_on_angle_change)||(t.auto_commit_on_angle_change=e.DEFAULT.auto_commit_on_angle_change),[!0,!1].includes(t.enable_status_overlay)||(t.enable_status_overlay=e.DEFAULT.enable_status_overlay),"number"!=typeof t.manual_tile_inaccuracy&&(t.manual_tile_inaccuracy=e.DEFAULT.manual_tile_inaccuracy),[!0,!1].includes(t.use_previous_solution_as_start)||(t.use_previous_solution_as_start=e.DEFAULT.use_previous_solution_as_start),[!0,!1].includes(t.show_method_preview_of_secondary_solutions)||(t.show_method_preview_of_secondary_solutions=e.DEFAULT.show_method_preview_of_secondary_solutions),[!0,!1].includes(t.invert_preset_sequence_if_previous_solution_was_used)||(t.show_method_preview_of_secondary_solutions=e.DEFAULT.invert_preset_sequence_if_previous_solution_was_used),[!0,!1].includes(t.skip_triangulation_point_if_colinear)||(t.skip_triangulation_point_if_colinear=e.DEFAULT.skip_triangulation_point_if_colinear),"string"!=typeof t.beam_color&&(t.beam_color=e.DEFAULT.beam_color),t):e.DEFAULT}}(n=e.Settings||(e.Settings={}))}(af||(af={}));var lf=di.cls,cf=Xg.PotaColor,uf=di.hbox,hf=di.vbox,df=di.inlineimg,pf=di.hgrid,gf=di.hboxl,mf=di.centered,ff=B.A1Color,yf=di.italic,vf=di.spacer,_f=As.TeleportGroup,xf=di.span,wf=B.greatestCommonDivisor;class bf extends $s{constructor(){super()}separator(){return this.row(lf("nis-settings-edit-separator")),this}setting(e,t=void 0){return this.header(gf(e,bf.info(t)),"left",1),this}section(e,t=void 0){this.container.children().length>0&&this.separator(),this.header(uf(e,bf.info(t)))}namedSetting(e,t,i=void 0){return this.named(gf(e,bf.info(i)),t)}}!function(e){e.info=function(e){if(e)return df("assets/icons/info_nis.png").css("height","1em").addTippy(e)}}(bf||(bf={}));class kf extends si{constructor(e){super(lf("ctr-section-control")),this.sections=e,this.entry_buttons=[],this.active_entry=mi(null),this.active_entry.subscribe((e=>{this.entry_buttons.forEach((t=>{const i=e==t.original.entry.id;t.button.toggleClass("active",i),i&&(this.content.empty(),this.content.append(di.cls("ctr-section-control-content-header").css("padding-left","0").text(t.original.entry.name),t.original.entry.renderer()))}))})),this.render(),this.active_entry.set(e[0].entries[0].id)}setActiveSection(e){return e&&this.active_entry.set(e),this}render(){var e;this.empty(),this.append(this.menu_bar=lf("ctr-section-control-menu"),this.content=lf("ctr-section-control-content"));for(const t of this.sections){lf("ctr-section-control-menu-header").text(t.name).appendTo(this.menu_bar);for(const i of t.entries){const n=lf("ctr-section-control-menu-entry").on("click",(()=>{this.active_entry.set(i.id)})).text(null!==(e=i.short_name)&&void 0!==e?e:i.name).appendTo(this.menu_bar);this.entry_buttons.push({original:{section:t,entry:i},button:n})}}}}class Tf extends si{constructor(e){super(),this.value=e,this.layout=(new bf).appendTo(this),this.render()}render(){this.layout.empty(),this.layout.section("Owned Passages of the Abyss"),this.layout.paragraph("Setup your owned passages of the abyss. You also need to select them in the profile below for it to take effect.");for(let e of cf.values){const t=this.value.potas.find((t=>t.color==e));this.layout.row(new ma(gf(df(cf.iconUrl(e)),`${o.capitalize(e)} Passage of the Abyss`)).setValue(!!t).onCommit((t=>{t?this.value.potas.push({color:e,slots:[null,null,null,null,null,null]}):this.value.potas=this.value.potas.filter((t=>t.color!=e)),this.render()}))),t&&this.layout.row(new Ws(t.slots.map(((e,i)=>({name:(i+1).toString(),content:(new Jg).onSelection((e=>{t.slots[i]=e?{group_id:e.group.id,access_id:e.access.id}:null})).set(t.slots[i])}))),2))}this.layout.section("Profiles","Setup profiles to easily switch between.");const e=this.value.presets.find((e=>e.id==this.value.active_preset));this.layout.setting("Active Profile","Select the active profile to use and edit it."),this.layout.row(new Hl({type_class:{toHTML:e=>e.name}},this.value.presets).setValue(e).onSelection((e=>{this.value.active_preset=e.id,this.render()}))),this.layout.row((new Ll).buttons(new yl("New Preset").onClick((()=>{const e=Math.max(...this.value.presets.map((e=>e.id)))+1;let t=null;for(let e=1;e<100;e++){const i=`New Preset ${e}`;if(!this.value.presets.some((e=>e.name==i))){t=i;break}}t&&(this.value.presets.push({id:e,name:t,active_potas:[],fairy_ring_favourites:new Array(10).fill(null)}),this.value.active_preset=e,this.render())})),new yl("Delete").setEnabled(!e.fixed).onClick((async()=>{await ac.simple("Are you sure?","Deleting a teleport customization preset can not be undone.","Cancel","Delete").do()&&(this.value.presets=this.value.presets.filter((t=>t!=e)),this.value.active_preset=this.value.presets[0].id,this.render())})),new yl("Rename").setEnabled(!e.fixed).onClick((async()=>{const t=await(new class extends Il{constructor(){super(),this.title.set("Rename Teleport Preset"),this.shown.on((()=>{this.input.raw().focus()}))}render(){super.render(),(new $s).named("New Name",this.input=(new Zl).setValue(e.name)).appendTo(this.body)}getButtons(){return[new Dl("Cancel","neutral").onClick((()=>this.cancel())),new Dl("Save","confirm").onClick((()=>this.confirm(this.input.get())))]}}).do();t&&(e.name=t,this.render())}))));const t=cf.values.map((t=>new ma(gf(df(cf.iconUrl(t)),o.capitalize(t))).setValue(e.active_potas.includes(t)).onCommit((i=>{i?e.active_potas.push(t):e.active_potas=e.active_potas.filter((e=>e!=t))}))));if(this.layout.named("Passages",hf(pf(t[0],t[1]),pf(t[2],t[3]))),this.layout.setting("Fairy Ring Favourites","Enter your favourite fairy rings to see their hotkey instead of their code on the map."),this.layout.row(new Ws(e.fairy_ring_favourites.map(((t,i)=>({name:((i+1)%10).toString(),content:(new Yg).set(t).onSelection((t=>{e.fairy_ring_favourites[i]=t.id}))}))),2)),this.layout.divider(),this.layout.row(new ma("Automatically switch preset based on clue tier").setValue(this.value.preset_bindings_active).onCommit((e=>{this.value.preset_bindings_active=e,this.render()}))),this.value.preset_bindings_active)for(let e of Ec.values){const t=this.value.preset_bindings[e],i=null!=t?this.value.presets.find((e=>e.id==t)):null;this.layout.named(Ac.meta(e).name,new Hl({type_class:{toHTML:e=>e?e.name:"None"}},[null].concat(this.value.presets)).setValue(i).onSelection((t=>{this.value.preset_bindings[e]=t?t.id:null})))}this.layout.row(new yl(uf("Reset to ",df("assets/icons/cluechasers.png")," Clue Chasers recommendations"),"rectangle").onClick((async()=>{if(await ac.simple("Reset teleport setup","This will reset your passage of the abyss setups and replace every custom preset except the default one. This can not be undone.","Cancel","Go ahead").do()){const e=Xg.TeleportSettings.clueChasersRecommendations();this.value.potas=e.potas,this.value.presets=[...this.value.presets.filter((e=>e.id>=0)),...e.presets.filter((e=>e.id<0))],this.value.active_preset=0,this.value.preset_bindings=e.preset_bindings,this.render()}})))}}class Sf extends si{constructor(e){super(),this.value=e,this.layout=(new $s).appendTo(this),this.render()}render(){this.layout.empty(),this.layout.header("Slider Puzzles"),this.layout.header(new ma("Start solving automatically").onCommit((e=>this.value.autostart=e)).setValue(this.value.autostart),"left",1),this.layout.named("Mode",pf(...new ma.Group([{button:new ma("Mouse"),value:"mouse"},{button:new ma("Keyboard"),value:"keyboard"},{button:new ma("Hybrid"),value:"hybrid"}]).onChange((e=>this.value.mode=e)).setValue(this.value.mode).checkboxes())),this.layout.header("Lookahead","left",1),this.layout.paragraph("Determines how many moves are shown in advance."),this.layout.row(new Od(2,10,1).setValue(this.value.max_lookahead).onCommit((e=>this.value.max_lookahead=e))),this.layout.header(new ma("Prevent Overlap").onCommit((e=>this.value.prevent_overlap=e)).setValue(this.value.prevent_overlap),"left",1),this.layout.paragraph("When enabled, prevents moves that overlap with other moves from being displayed."),this.layout.header(new ma("Show Recovery Moves").onCommit((e=>this.value.display_recovery=e)).setValue(this.value.display_recovery),"left",1),this.layout.paragraph("When enabled, mistakes are automatically detected and recovery moves are displayed.");const e=(new tc).setValue(ff.toHex(this.value.color_mainline_move)).onCommit((e=>this.value.color_mainline_move=ff.fromHex(e))),t=(new tc).setValue(ff.toHex(this.value.color_recovery_move)).onCommit((e=>this.value.color_recovery_move=ff.fromHex(e))),i=(new tc).setValue(ff.toHex(this.value.color_mainline_line)).onCommit((e=>this.value.color_mainline_line=ff.fromHex(e))),n=(new tc).setValue(ff.toHex(this.value.color_recovery_line)).onCommit((e=>this.value.color_recovery_line=ff.fromHex(e)));this.layout.named("Colors",pf(mf("Main Line"),mf("Recovery"))),this.layout.named("Moves",pf(e,t)),this.layout.named("Lines",pf(i,n)),this.layout.named("",new yl("Reset to default").onClick((()=>{this.value.color_mainline_move=Lm.Settings.DEFAULT.color_mainline_move,this.value.color_mainline_line=Lm.Settings.DEFAULT.color_mainline_line,this.value.color_recovery_move=Lm.Settings.DEFAULT.color_recovery_move,this.value.color_recovery_line=Lm.Settings.DEFAULT.color_recovery_line,this.render()}))),this.layout.header("Solve Time","left",1),this.layout.paragraph("How much time the solver should spend finding an optimal solution before the guide starts."),this.layout.row(new Od(.5,5,.1).withPreviewFunction((e=>`${e.toFixed(1)}s`)).setValue(this.value.solve_time_ms/1e3).onCommit((e=>this.value.solve_time_ms=1e3*e))),this.layout.header(new ma("Estimate Slider Speed").onCommit((e=>this.value.estimate_slider_speed=e)).setValue(this.value.estimate_slider_speed),"left",1),this.layout.paragraph("Show an estimate for your equivalent slider speed in Alt1's builtin clue solver after finishing a slider. Takes the faster animation of multi-tile moves in the builtin solver into account."),this.layout.header(new ma("Improve screen reader with backtracking (Experimental)").onCommit((e=>this.value.improve_slider_matches_backtracking=e)).setValue(this.value.improve_slider_matches_backtracking),"left",1),this.layout.paragraph("Currently experimental. When activated, tries to improve the match read from screen by doing a second search with a bounded backtracking algorithm."),this.layout.header(new ma("Continuous solving (Experimental)").onCommit((e=>this.value.continue_solving_after_initial_solve=e)).setValue(this.value.continue_solving_after_initial_solve),"left",1),this.layout.paragraph("When active, the puzzle solver will continue to look for shorter solutions while completing a puzzle to reduce the number of required moves. Currently experimental, disable if you notice issues.")}}class Cf extends si{constructor(e){super(),this.value=e,this.layout=(new $s).appendTo(this),this.render()}render(){this.layout.empty(),this.layout.header("Celtic Knot Puzzles"),this.layout.header(new ma("Start solving and show overlay automatically").onCommit((e=>this.value.autostart=e)).setValue(this.value.autostart),"left",1),this.layout.paragraph("Disable this if you are simultaneously using Alt1's builtin clue solver and the knot solutions are overlapping.")}}class Ef extends si{constructor(e){super(),this.value=e,this.layout=(new $s).appendTo(this),this.render()}render(){this.layout.empty(),this.layout.header("Lockbox Puzzles"),this.layout.header(new ma("Start solving and show overlay automatically").onCommit((e=>this.value.autostart=e)).setValue(this.value.autostart),"left",1),this.layout.paragraph("Disable this if you are simultaneously using Alt1's builtin clue solver and the lockbox solutions are overlapping."),this.layout.named("Overlay Color",(new tc).setValue(ff.toHex(this.value.overlay_color)).onCommit((e=>this.value.overlay_color=ff.fromHex(e)))),this.layout.header("Optimization Mode"),this.layout.paragraph("Control how to optimize the solution. The configured value determines how much a 2-click tile is weighted compared to a 1-click tile. A value of '2' will optimize for the lowest total amount of clicks. A value of '1' will optimize for the lowest number of unique tiles that need to be clicked. Setting this to 1.3 is a good compromise for most people."),this.layout.row(new Od(1,2,.1).setValue(this.value.two_click_factor).onCommit((e=>{this.value.two_click_factor=e,t()})));const e=c(),t=()=>{if(2==this.value.two_click_factor)e.text(`A value of ${this.value.two_click_factor.toFixed(1)} will optimize for the lowest number of total clicks.`);else if(1==this.value.two_click_factor)e.text(`A value of ${this.value.two_click_factor.toFixed(1)} will optimize for the lowest number of unique clicked tiles.`);else{let t=10,i=Math.ceil(t*this.value.two_click_factor);const n=wf(t,i);t/=n,i/=n,e.text(`A value of ${this.value.two_click_factor.toFixed(1)} will treat ${t} two-click tiles the same as ${i} one-click tiles.`)}};t(),this.layout.paragraph(e)}}class Af extends si{constructor(e){super(),this.value=e,this.layout=(new $s).appendTo(this),this.render()}render(){this.layout.empty(),this.layout.header("Towers Puzzles"),this.layout.header(new ma("Start solving and show overlay automatically").onCommit((e=>this.value.autostart=e)).setValue(this.value.autostart),"left",1),this.layout.paragraph("Disable this if you are simultaneously using Alt1's builtin clue solver and the towers solutions are overlapping."),this.layout.header("Overlay Mode","left",1),this.layout.row(pf(...new ma.Group([{button:new ma("Target"),value:"target"},{button:new ma("Delta"),value:"delta"},{button:new ma("Both"),value:"both"}]).onChange((e=>this.value.solution_mode=e)).setValue(this.value.solution_mode).checkboxes())),this.layout.paragraph("'Target' will show the correct number on the overlay. 'Delta' will show the number of clicks required from the current value. 'Both' will display both."),this.layout.header(new ma("Show green border for correct tiles").onCommit((e=>this.value.show_correct=e)).setValue(this.value.show_correct),"left",1),this.layout.header(new ma("Show red border for overshot tiles").onCommit((e=>this.value.show_overshot=e)).setValue(this.value.show_overshot),"left",1)}}class zf extends si{constructor(e){super(),this.value=e,this.layout=(new bf).appendTo(this),this.render()}render(){this.layout.empty(),this.layout.section("Interface"),this.layout.paragraph("Choose what data about a clue step and its solution is displayed on the interface while solving."),this.layout.namedSetting("Clue Text",pf(...new ma.Group([{button:new ma("Full"),value:"full"},{button:new ma("Abridged"),value:"abridged"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.clue_text=e)).setValue(this.value.clue_text).checkboxes()),"The text of the clue for text clues. 'Abridged' uses a shorter version where applicable."),this.layout.namedSetting("Clue Map",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Transcript"),value:"transcript"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.map_image=e)).setValue(this.value.map_image).checkboxes()),"The image for image clues. 'Transcript' displays a text description of the image instead."),this.layout.namedSetting("Dig Target",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.dig_target=e)).setValue(this.value.dig_target).checkboxes()),"A description of where to dig or the coordinates if no description is available."),this.layout.namedSetting("Talk Target",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.talk_target=e)).setValue(this.value.talk_target).checkboxes()),"The name of the NPC you need to talk to."),this.layout.namedSetting("Search Target",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.search_target=e)).setValue(this.value.search_target).checkboxes()),"The name of the container (drawers, boxes etc.) you need to search."),this.layout.namedSetting("Search Key",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.search_key=e)).setValue(this.value.search_key).checkboxes()),"How you get the key for a container on medium clues without 'way of the footshaped key' unlocked."),this.layout.namedSetting("Hidey Hole",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.hidey_hole=e)).setValue(this.value.hidey_hole).checkboxes()),"The name of the hidey hole for emote clues."),this.layout.namedSetting("Emote Items",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.emote_items=e)).setValue(this.value.emote_items).checkboxes()),"What items you need to equip for emote clues."),this.layout.namedSetting("Emote(s)",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.emotes=e)).setValue(this.value.emotes).checkboxes()),"The name of the emote/emotes you need to perform for emote clues."),this.layout.namedSetting("Double Agent",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.double_agent=e)).setValue(this.value.double_agent).checkboxes()),"Shows if you need to fight a double agent for this emote clue."),this.layout.namedSetting("Pathing",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.path_step_list=e)).setValue(this.value.path_step_list).checkboxes()),"A list containing short descriptions for the steps that make up a path if one is active for the current clue step."),this.layout.namedSetting("Puzzles",pf(...new ma.Group([{button:new ma("Show"),value:"show"},{button:new ma("Hide"),value:"hide"},{button:new ma("Hide for Scans/Compasses"),value:"hideforscansandcompasses"}]).onChange((e=>this.value.puzzle=e)).setValue(this.value.puzzle).checkboxes()),"Shows what puzzle (if any) is given on completion of this clue step."),this.layout.namedSetting("Challenge",pf(...new ma.Group([{button:new ma("Full"),value:"full"},{button:new ma("Answer"),value:"answer_only"},{button:new ma("Hide"),value:"hide"}]).onChange((e=>this.value.challenge=e)).setValue(this.value.challenge).checkboxes()),"The solution to challenge scrolls given out by npcs."),this.layout.section("Presets"),this.layout.row(new yl("Everything").onClick((()=>{Object.assign(this.value,o.cloneDeep(Gf.Settings.InfoPanel.EVERYTHING)),this.render()}))),this.layout.row(new yl("Reduced (Recommended)").onClick((()=>{Object.assign(this.value,o.cloneDeep(Gf.Settings.InfoPanel.REDUCED)),this.render()}))),this.layout.row(new yl("Nothing").onClick((()=>{Object.assign(this.value,o.cloneDeep(Gf.Settings.InfoPanel.NOTHING)),this.render()})))}}class Lf extends si{constructor(e){super(),this.value=e,this.layout=(new $s).appendTo(this),this.render()}render(){this.layout.paragraph("Here you can configure your participation in active crowdsourcing projects. Data is recorded without any personal data and no data beyond what is described here is collected."),this.layout.header(new ma("Initial Slider States").onCommit((e=>this.value.slider_states=e)).setValue(this.value.slider_states),"left",1),this.layout.paragraph("Record the initial order of tiles for puzzle boxes. For every puzzle box encountered while auto-solving is active, the initial state will be recorded.")}}class Pf extends si{constructor(e){super(),this.value=e,this.active_preset=null,this.layout=(new bf).appendTo(this),this.render()}render(){this.layout.empty(),this.layout.section("General"),this.layout.setting(new ma("Automatically commit angle on teleport").onCommit((e=>this.value.auto_commit_on_angle_change=e)).setValue(this.value.auto_commit_on_angle_change),"When active, the next triangulation line is automatically drawn when the compass angle changes by more than 4 at once. This is the default behaviour in Alt1's built-in clue solver."),this.layout.setting(new ma("Show status overlay").onCommit((e=>this.value.enable_status_overlay=e)).setValue(this.value.enable_status_overlay),"Shows detected compass angle and other info on top of the compass interface."),this.layout.setting(new ma("Show method previews").onCommit((e=>this.value.show_method_preview_of_secondary_solutions=e)).setValue(this.value.show_method_preview_of_secondary_solutions),"When active method previews for all remaining candidates are shown after the first triangulation step."),this.layout.namedSetting("Beam Color",(new tc).setValue(this.value.beam_color).onCommit((e=>this.value.beam_color=e)),"Select the color of the triangulation beams on the map."),this.layout.setting("Manual Tile Selection Inaccuracy","Choose how accurate your manual spot selection when you click the map should be assumed to be. 1 considers your selection to be precisely the tile you stand on, higher values leave more room for error. This does not apply to tiles selected as part of a preconfigured strategy."),this.layout.row(new Od(0,10,1).setValue(this.value.manual_tile_inaccuracy).onCommit((e=>this.value.manual_tile_inaccuracy=e))),this.layout.section("Smart Triangulation","Configure advanced triangulation behaviour that reduces the need for manual input."),this.layout.setting("Active Triangulation Strategies","Triangulation presets are used to automatically load triangulation spots whenever you receive a compass clue. This skips the need to manually select your teleports repeatedly.");for(const e of Wc.compass){let t=this.value.active_triangulation_presets.find((t=>t.compass_id==e.id));t||this.value.active_triangulation_presets.push(t={compass_id:e.id,preset_id:null});const i=[...this.value.custom_triangulation_presets,...af.TriangulationPreset.builtin].filter((t=>[t.compass_id].flat().includes(e.id))),n=new Hl({type_class:{toHTML:e=>e?gf(...Is().app.template_resolver.resolve(e.name)):yf("None")}},[...i,null]).setValue(i.find((e=>e.id==t.preset_id))).onSelection((e=>{t.preset_id=e?e.id:null}));this.layout.named(gf(df(Ac.meta(e.tier).icon_url),o.capitalize(e.tier)),n)}this.layout.setting("Custom Strategies","You can create your own triangulation presets if none of the builtin presets fit your needs. Don't forget to activate your custom preset in the section above.");const e=new Hl({type_class:{toHTML:e=>"create"==e?"Create New":e?gf(...Is().app.template_resolver.resolve(e.name)):"None selected"}},[...this.value.custom_triangulation_presets,"create"]).setValue(this.active_preset).onSelection((e=>{if("create"==e){const e=0==this.value.custom_triangulation_presets.length?1:Math.max(...this.value.custom_triangulation_presets.map((e=>e.id)))+1;this.value.custom_triangulation_presets.push(this.active_preset={compass_id:Wc.gielinor_compass.id,name:`Custom Preset ${e}`,id:e,sequence:[]})}else this.active_preset=e;this.render()})).css("flex-grow","1");if(this.layout.named("Selection",uf(e,this.active_preset?Uu.delete().withClick((async()=>{await new ac({title:"Delete preset",body:`Do you want to delete the preset '${this.active_preset.name}' preset? It cannot be undone.`,options:[{kind:"neutral",text:"Cancel",value:!1,is_cancel:!0},{kind:"cancel",text:"Delete",value:!0}]}).do()&&(this.value.custom_triangulation_presets=this.value.custom_triangulation_presets.filter((e=>e!=this.active_preset)),this.active_preset=null,this.render())})):void 0)),this.active_preset){this.layout.named("Name",(new Zl).setValue(this.active_preset.name).onCommit((t=>{this.active_preset.name=t,e.renderInput()})));const t=Wc.compass.find((e=>e.id==this.active_preset.compass_id));this.layout.named("Tier",new Hl({type_class:{toHTML:e=>gf(df(Ac.meta(e.tier).icon_url),o.capitalize(e.tier))}},Wc.compass).setValue(t).onSelection((e=>{this.active_preset.compass_id=e.id,this.render()})));const i=new $s;if(this.layout.named("Sequence",i),0==this.active_preset.sequence.length)i.row("No triangulation points yet.");else for(let e=0;e<this.active_preset.sequence.length;e++){const n=this.active_preset.sequence[e];i.header(uf(vf(),`Spot ${e+1}`,vf(),Uu.delete().withClick((t=>{this.active_preset.sequence.splice(e,1),this.render()}))),"center",1);const o=new Ql({type_class:{toHTML:e=>e instanceof As.TeleportGroup.Spot?gf(uf(df(`assets/icons/teleports/${e.image().url}`)).css2({"min-width":"20px","max-width":"20px"}),xf(e.hover())).css2({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}):`${e.x} | ${e.y} | ${e.level}`},search_term:e=>e.hover()},Ds.getAllTeleportSpots()).onSelection((e=>{n.teleport=e.id()})).css("flex-grow","1");n.teleport?o.setValue(Ds.resolveTeleport(n.teleport)):n.tile&&o.setValue(n.tile),i.row(uf(o,new yl(Uu.from("assets/icons/select.png")).onClick((async()=>{const e=await(new class extends Il{constructor(){super(),this.shown.on((()=>{this.map.map.fitView(Z.extend(Z.from(...t.spots),3),{maxZoom:20})}))}render(){super.render(),this.body.append(this.map=(new Ss).css("width","100%").css("height","400px").setInteraction((new class extends Us{constructor(){super(),this.add(new gl(!0,{transport_policy:"none",teleport_policy:"target_only"}))}eventClick(e){e.onPre((()=>{e.active_entity instanceof la?this.commit(e.active_entity.teleport):this.commit(e.tile())}))}}).attachTopControl((new qs).setContent(c().text("Click a teleport spot or any tile on the map to select it as a triangulation spot."))).onCommit((e=>this.confirm(e)))))}getButtons(){return[new Dl("Cancel","neutral").onClick((()=>this.cancel()))]}getValueForCancel(){return null}}).do();e&&(e instanceof _f.Spot?n.teleport=e.id():n.tile=e,this.render())}))))}i.row(new yl("+ Add another spot").onClick((()=>{this.active_preset.sequence.push({}),this.render()})))}this.layout.setting(new ma("Use solution of previous step").onCommit((e=>this.value.use_previous_solution_as_start=e)).setValue(this.value.use_previous_solution_as_start),"When active, the solution of the previous clue step is used as the first triangulation spot and the initially read compass angle is immediately committed. Only applies to elite compasses and only uses the solution of scans if you follow the scan tree to a point where the remaining spots are in a reasonably small rectangle."),this.layout.setting(new ma("Invert preset sequence").onCommit((e=>this.value.invert_preset_sequence_if_previous_solution_was_used=e)).setValue(this.value.invert_preset_sequence_if_previous_solution_was_used),"When active, the preset triangulation sequence is inverted when the solution of the previous clue step is used to draw an initial arrow. This is useful when your triangulation strategy ends somewhere that provides access to useful teleports, such as spirit trees at South Feldip Hills."),this.layout.setting(new ma("Skip colinear triangulation spots").onCommit((e=>this.value.skip_triangulation_point_if_colinear=e)).setValue(this.value.skip_triangulation_point_if_colinear),"When active, preset triangulation spots that are too close to being in-line with a previously drawn triangulation arrow are skipped (unless they are the last one remaining).")}}class Mf extends si{constructor(){super(),this.layout=(new $s).appendTo(this),this.layout.header("Export"),this.layout.paragraph("Exported data includes all settings and preferences, as well as imported and local methods."),this.layout.row(new yl("Export","rectangle").onClick((()=>{Is().app.data_dump.dump()}))),this.layout.header("Import"),this.layout.paragraph("Importing a data dump will replace all of your local data with the data from the data dump."),this.layout.row(new yl("Import","rectangle").onClick((()=>{Is().app.data_dump.restore()})))}}class If extends si{constructor(e,t){super(),this.value=o.cloneDeep(e.settings.settings),new kf([{name:"Solving",entries:[{id:"info_panels",name:"Interface Customization",short_name:"Interface",renderer:()=>new zf(this.value.solving.info_panel)},{id:"sliders",name:"Slider Puzzle Solving",short_name:"Sliders",renderer:()=>new Sf(this.value.solving.puzzles.sliders)},{id:"knots",name:"Celtic Knot Solving",short_name:"Knots",renderer:()=>new Cf(this.value.solving.puzzles.knots)},{id:"lockboxes",name:"Lockbox Solving",short_name:"Lockboxes",renderer:()=>new Ef(this.value.solving.puzzles.lockboxes)},{id:"towers",name:"Towers Solving",short_name:"Towers",renderer:()=>new Af(this.value.solving.puzzles.towers)},{id:"compass",name:"Compass Solving",short_name:"Compass",renderer:()=>new Pf(this.value.solving.compass)}]},{name:"Map",entries:[{id:"teleports",name:"Teleport Customization",short_name:"Teleports",renderer:()=>new Tf(this.value.teleport_customization)}]},{name:"Advanced",entries:[{id:"crowdsourcing",name:"Crowdsourcing",short_name:"Crowdsourcing",renderer:()=>new Lf(this.value.crowdsourcing)},{id:"dataexport",name:"Data Export",short_name:"Data",renderer:()=>new Mf}]}]).setActiveSection(t).appendTo(this)}}class Of extends Il{constructor(e=void 0){super(),this.start_section=e,this.last_saved_value=null,this.title.set("Settings")}getValueForCancel(){return{saved:!!this.last_saved_value,value:this.last_saved_value}}save(){this.last_saved_value=o.cloneDeep(this.edit.value),Is().app.settings.set(this.last_saved_value)}render(){super.render(),this.body.css("padding","0"),this.body.append(this.edit=new If(Is().app,this.start_section))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.cancel())),new Dl("Save","confirm").onClick((()=>this.save())),new Dl("Save and Close","confirm").onClick((()=>{this.save(),this.cancel()}))]}}var Df=ru.log;const Rf={x:0,y:-150};class Bf extends sm{constructor(e){super(),this.parent=e,this.last_read_puzzle=null,this.isSolved=!1,this.bug_detected=!1,this.last_successful_read=Date.now(),this.asInterval(20)}async tick(){var e,t,i,n;const o=Eg.capture(this.parent.knot.reader.ui.body.screenRectangle());if(!o)return;const r=Rg.assumeBody(o),s=new zg.KnotReader(r),a=await s.getPuzzle(),l=Date.now();a&&(this.last_successful_read=l);const c=Ag.PuzzleState.equal(a,this.last_read_puzzle);if(this.last_read_puzzle=a,c&&a){const o=Ag.unify(a,this.puzzle),r=Ag.solve(o);if(!o)return void Df().log("Could not unify knot states! Discarding last read.","Knot Solving",{existing:null===(t=null===(e=this.puzzle)||void 0===e?void 0:e.snakes)||void 0===t?void 0:t.map((e=>Ag.Snake.toString(e))),new:null===(i=null==a?void 0:a.snakes)||void 0===i?void 0:i.map((e=>Ag.Snake.toString(e))),unified:null===(n=null==o?void 0:o.snakes)||void 0===n?void 0:n.map((e=>Ag.Snake.toString(e)))});if(!r&&this.solution)return void Df().log("Misread detected because of disappearing solution. Discarding last read.","Knot Solving");this.puzzle=o,this.solution=r;const l=await this.parent.knot.reader.getButtons();this.solution_overlay.clear(),this.isSolved=Ag.PuzzleState.isSolved(this.puzzle),this.solution?l?this.solution.moves.forEach((e=>{if(0==e.offset)return;const t=l[e.snake_index],i=e.offset<0?t.counterclockwise:t.clockwise;this.solution_overlay.text(Math.abs(e.offset).toString(),j.add(s.tileOrigin(i,!0),{x:12,y:12}),{color:D(255,255,255),centered:!0,shadow:!0,width:24})})):this.solution_overlay.text(Ag.PuzzleShape.hash(this.puzzle.shape).toString(),j.add(s.ui.body.screenRectangle().origin,Rf,j.scale(.5,s.ui.body.screenRectangle().size)),{color:D(255,255,255),width:20}):(this.solution_overlay.text("Not enough information",j.add(s.ui.body.screenRectangle().origin,Rf,j.scale(.5,s.ui.body.screenRectangle().size)),{color:D(255,255,255),width:20}),this.solution_overlay.rect2(yg.move(s.ui.body.screenRectangle(),{x:4,y:282},{x:121,y:26}),{color:D(255,255,255),width:2})),this.isSolved&&(this.solution_overlay.text("Solved",j.add(s.ui.body.screenRectangle().origin,Rf,j.scale(.5,s.ui.body.screenRectangle().size)),{color:D(0,255,0),width:20}),this.solution_overlay.rect2(yg.move(s.ui.body.screenRectangle(),{x:372,y:282},{x:121,y:26}),{color:D(0,255,0),width:2})),this.solution_overlay.render()}else this.isSolved&&this.last_successful_read+500<l&&this.puzzleClosed();this.last_successful_read+3e3<l&&this.puzzleClosed()}async implementation(){this.last_read_puzzle=this.puzzle=await this.parent.knot.reader.getPuzzle(),await super.implementation()}}class Nf extends rm{constructor(e,t){super(e,t,Is().app.settings.settings.solving.puzzles.knots.autostart,"Celtic Knot Puzzle","knots"),this.knot=t}constructProcess(){return new Bf(this)}begin(){super.begin(),this.modal.setImage(this.knot.reader.relevant_body.getData())}pausesClueReader(){return this.process&&!this.process.isSolved&&Date.now()-this.process.last_successful_read<500}}!function(e){let t;!function(e){e.DEFAULT={autostart:!0},e.normalize=function(t){return t?([!0,!1].includes(t.autostart)||(t.autostart=e.DEFAULT.autostart),t):e.DEFAULT}}(t=e.Settings||(e.Settings={}))}(Nf||(Nf={}));class jf extends si{constructor(e){super(ie("<span>")),this.text(e).addClass("nisl-click-to-copy"),this.tooltip("Click to copy"),this.on("click",(async()=>{await navigator.clipboard.writeText(e),this.css("min-width",this._raw.offsetWidth+"px"),this.toggleClass("copied-recently",!0),this.text("Copied!"),setTimeout((()=>{this.text(e),this.css("width",null),this.toggleClass("copied-recently",!1)}),3e3)}))}}var Ff,qf=di.hbox,Uf=di.inlineimg;class Hf extends Ml{constructor(e){super(),this.url_override=e,this.title.set("Alt1 Toolkit")}addToAlt1Link(){return this.url_override?`alt1://addapp/${this.url_override}/appconfig.json`:`alt1://addapp/${window.location.protocol}//${window.location.host}${window.location.pathname.slice(0,window.location.pathname.lastIndexOf("/")+1)}appconfig.json`}render(){var e;super.render();const t=(new $s).appendTo(this.body);t.paragraph("Clue trainer is a fully featured clue solver for the Alt1 Toolkit. It can automatically read clues and puzzles and show their solutions. Click below to install Clue Trainer into Alt1."),t.row(c(`<a href='${this.addToAlt1Link()}'></a>`).append(new Dl("","confirm").setContent(qf(Uf("assets/icons/Alt1.png"),"Add to Alt1 Toolkit")))),t.paragraph("Alternatively, visit ",new jf(null!==(e=this.url_override)&&void 0!==e?e:window.location.toString())," in Alt1's builtin browser to get an installation prompt."),t.header("About Alt1"),t.paragraph("The Alt1 Toolkit is an overlay tool for RuneScape 3 created by Skillbert. It offers a variety of helpful builtin tools as well as the option to install third party plugins such as Clue Trainer. You can get it at <a href='https://runeapps.org/alt1'>runeapps.org</a>.")}}!function(e){let t,i,n;function r(e){function t(e){let t=i.None;for(let o=0;o<4;o++){const r=i.None.map(((t,i)=>i==o+1?e.tile_rows[o].map((e=>(3-e)%3)):t));e=n.applyMoves(e,r),t=i.chain(t,r)}return[t,e]}const[o,r]=t(e),s=[0,2,1][r.tile_rows[4][0]],a=[0,2,1][r.tile_rows[4][1]],l=[[a,(a+s)%3,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],c=n.applyMoves(r,l),[u,h]=t(c);return i.chain(o,l,u)}e.SIZE=5,function(e){e.advance=function(e){return(e+1)%3}}(t=e.Tile||(e.Tile={})),function(t){function i(e,t){return e.map((e=>e.map((e=>e*t%3))))}function r(...e){return t.None.map(((t,i)=>t.map(((t,n)=>o.sumBy(e,(e=>e[i][n]))%3))))}function s(e){return t=>o.sum(t.flat().map((t=>e[t])))}t.None=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],t.BASIC_QUIET_PATTERNS=[[[1,0,0,0,2],[2,2,0,1,1],[1,2,0,1,2],[1,1,0,2,2],[0,2,0,1,0]],[[0,1,0,2,0],[2,2,0,1,1],[2,1,0,2,1],[1,1,0,2,2],[2,0,0,0,1]],[[0,0,1,0,1],[0,2,2,1,2],[1,2,0,1,2],[0,1,1,2,1],[1,2,2,1,1]]],t.repeat=i,t.get=function(t,i,n){return i<0||i>=e.SIZE||n<0||n>=e.SIZE?0:t[i][n]},t.chain=r,t.score=s,t.clickScore=s([0,1,2]),t.tileScore=s([0,1,1]),t.hybridScore=s([0,1,1.3]),t.isQuiet=function(e){return n.equals(n.applyMoves(n.SOLVED,e),n.SOLVED)};let a=null;function l(){if(!a){const e=[0,1,2].flatMap((e=>[0,1,2].flatMap((t=>[0,1,2].map((i=>[e,t,i]))))));a=e.map((([e,n,o])=>t.chain(i(t.BASIC_QUIET_PATTERNS[0],e),i(t.BASIC_QUIET_PATTERNS[1],n),i(t.BASIC_QUIET_PATTERNS[2],o))))}return a}t.allQuietPatterns=l,t.minimize=function(e,i=t.clickScore){return o.minBy(l().map((t=>r(e,t))),i)}}(i=e.MoveMap||(e.MoveMap={})),function(e){e.SOLVED={tile_rows:[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]]},e.isSolved=function(e){const t=e.tile_rows[0][0];return e.tile_rows.every((e=>e.every((e=>e==t))))},e.equals=function(e,t){for(let i=0;i<5;i++)for(let n=0;n<5;n++)if(e.tile_rows[n][i]!=t.tile_rows[n][i])return!1;return!0},e.applyMoves=function(e,t){return{tile_rows:e.tile_rows.map(((e,n)=>e.map(((e,o)=>(e+i.get(t,n,o)+i.get(t,n+1,o)+i.get(t,n-1,o)+i.get(t,n,o+1)+i.get(t,n,o-1))%3))))}},e.toString=function(e){return e.tile_rows.map((e=>e.join("  "))).join("\n")}}(n=e.State||(e.State={})),e.solve=function(e,t=!0,n=!0,s=i.clickScore){const a=[e];t&&a.push(...[1,2].map((t=>({tile_rows:e.tile_rows.map((e=>e.map((e=>(e+t)%3))))}))));let l=a.map(r);return n&&(l=l.map((e=>i.minimize(e,s)))),o.minBy(l,s)}}(Ff||(Ff={}));class Vf extends sm{constructor(e){super(),this.parent=e,this.settings=Is().app.settings.settings.solving.puzzles.lockboxes,this.cost_function=Ff.MoveMap.score([0,1,this.settings.two_click_factor]),this.isSolved=!1,this.last_successful_read=Date.now()}overlay(e,t){this.solution_overlay.clear();for(let i=0;i<e.length;i++){const n=e[i];for(let e=0;e<n.length;e++){const o=n[e];0!=o&&this.solution_overlay.text(o.toString(),j.add(j.scale(.5,Pg.TILE_SIZE),t.tileOrigin({x:e,y:i},!0),{x:3,y:0}),{width:24,color:this.settings.overlay_color})}}this.solution_overlay.render()}async tick(){const e=Eg.capture(this.parent.lockbox.reader.modal.body.screenRectangle());if(!e)return;const t=Rg.assumeBody(e),i=new Pg.LockBoxReader(t),n=await i.getPuzzle();if("likelyclosed"==await i.getState()&&this.puzzleClosed(),n){let e=Ff.solve(n,!0,!0,this.cost_function);this.overlay(e,i)}}async implementation(){this.puzzle=await this.parent.lockbox.reader.getPuzzle(),await super.implementation()}}class $f extends rm{constructor(e,t){super(e,t,Is().app.settings.settings.solving.puzzles.lockboxes.autostart,"Lockbox Puzzle","lockboxes"),this.lockbox=t}constructProcess(){return new Vf(this)}begin(){super.begin(),this.modal.setImage(this.lockbox.reader.tile_area.getData())}pausesClueReader(){var e;return this.process&&!(null===(e=this.process)||void 0===e?void 0:e.isSolved)}}!function(e){let t;!function(e){e.DEFAULT={autostart:!0,two_click_factor:1.3,overlay_color:D(255,255,255)},e.normalize=function(t){return t?([!0,!1].includes(t.autostart)||(t.autostart=e.DEFAULT.autostart),"number"!=typeof t.overlay_color&&(t.overlay_color=e.DEFAULT.overlay_color),"number"!=typeof t.two_click_factor&&(t.two_click_factor=e.DEFAULT.two_click_factor),t.two_click_factor=o.clamp(t.two_click_factor,1,2),t):e.DEFAULT}}(t=e.Settings||(e.Settings={}))}($f||($f={}));class Wf extends sm{constructor(e){super(),this.parent=e,this.settings=Is().app.settings.settings.solving.puzzles.towers,this.isSolved=!1,this.was_solved_data=Bg.Blocks.empty().rows.map((e=>e.map((()=>!1)))),this.last_successful_read=Date.now()}debugOverlay(e){this.solution_overlay.clear();const t=e.getHints();t.top.forEach(((t,i)=>{var n;this.solution_overlay.text(null!==(n=null==t?void 0:t.toString())&&void 0!==n?n:"N",e.tileOrigin({x:i,y:-1},!0))})),t.bottom.forEach(((t,i)=>{var n;this.solution_overlay.text(null!==(n=null==t?void 0:t.toString())&&void 0!==n?n:"N",e.tileOrigin({x:i,y:5},!0))})),t.left.forEach(((t,i)=>{var n;this.solution_overlay.text(null!==(n=null==t?void 0:t.toString())&&void 0!==n?n:"N",e.tileOrigin({x:-1,y:i},!0))})),t.right.forEach(((t,i)=>{var n;this.solution_overlay.text(null!==(n=null==t?void 0:t.toString())&&void 0!==n?n:"N",e.tileOrigin({x:5,y:i},!0))})),this.solution_overlay.render()}async showSolutionOverlay(e,t,i,n=null){var o;this.solution_overlay.clear();const r=n?yg.extend(n,{x:7,y:11}):null,s=e=>r&&yg.contains(r,e),a={x:33,y:10},l={x:12,y:10};let c=!0;for(let n=0;n<i.blocks.rows.length;n++){const r=i.blocks.rows[n];for(let u=0;u<r.length;u++){const r=i.blocks.rows[n][u],h=null!==(o=t.blocks.rows[n][u])&&void 0!==o?o:0,d=e.tileOrigin({x:u,y:n},!0),p=j.add(d,a),g=j.add(d,l),m=(6+r-h)%6,f=r==h;if(c&&(c=f),f)this.was_solved_data[n][u]=!0,this.settings.show_correct&&(s(p)||this.solution_overlay.rect2({origin:j.add(d,{x:-1,y:-1}),size:j.add(Ng.TILE_SIZE,{x:3,y:3})},{color:D(0,255,0),width:2}));else{if("target"!=this.settings.solution_mode&&"both"!=this.settings.solution_mode||s(p)||this.solution_overlay.text(r.toString(),p,{color:D(200,200,200),width:10}),"delta"==this.settings.solution_mode||"both"==this.settings.solution_mode){const e="both"==this.settings.solution_mode?g:p;s(e)||this.solution_overlay.text("+"+m.toString(),e,{color:D(200,200,200),width:10})}this.was_solved_data[n][u]&&this.settings.show_overshot&&this.solution_overlay.rect2({origin:j.add(d,{x:-1,y:-1}),size:j.add(Ng.TILE_SIZE,{x:3,y:3})},{color:D(255,0,0),width:2})}}}if(this.isSolved=c,c){this.solution_overlay.text("Solved",j.add(e.tileOrigin({x:2,y:2},!0),{x:21,y:21}),{color:D(0,255,0),width:20});const t={origin:{x:317,y:243},size:{x:150,y:25}};this.solution_overlay.rect2(yg.subRect(e.modal.body.screenRectangle(),t),{color:D(0,255,0),width:2})}this.solution_overlay.render()}async tick(){try{const e=Eg.capture(this.parent.lockbox.reader.modal.body.screenRectangle());if(!e)return;const t=Rg.assumeBody(e),i=new Ng.TowersReader(t);let n=await i.getPuzzle();const o=await i.findContextMenu();if(n&&(this.puzzle&&o&&(n.blocks=Bg.Blocks.combine(n.blocks,this.puzzle.blocks)),this.puzzle=n),this.puzzle){const e=Bg.solve(this.puzzle.hints);await this.showSolutionOverlay(i,this.puzzle,e,o)}"likelyclosed"==await i.getState()&&this.puzzleClosed()}catch(e){console.error(e.toString())}}async implementation(){this.puzzle=await this.parent.lockbox.reader.getPuzzle(),await super.implementation()}}class Zf extends rm{constructor(e,t){super(e,t,Is().app.settings.settings.solving.puzzles.towers.autostart,"Towers Puzzle","towers"),this.lockbox=t}begin(){super.begin(),this.modal.setImage(this.lockbox.reader.puzzle_area.getData())}constructProcess(){return new Wf(this)}pausesClueReader(){return this.process&&!this.process.isSolved}}!function(e){let t;!function(e){e.DEFAULT={autostart:!0,solution_mode:"delta",show_correct:!0,show_overshot:!0},e.normalize=function(t){return t?([!0,!1].includes(t.autostart)||(t.autostart=e.DEFAULT.autostart),["target","delta","both"].includes(t.solution_mode)||(t.solution_mode=e.DEFAULT.solution_mode),[!0,!1].includes(t.show_correct)||(t.show_correct=e.DEFAULT.show_correct),[!0,!1].includes(t.show_overshot)||(t.show_overshot=e.DEFAULT.show_overshot),t):e.DEFAULT}}(t=e.Settings||(e.Settings={}))}(Zf||(Zf={}));var Gf,Kf,Yf=di.span,Jf=Mp.interactionMarker,Xf=di.inlineimg,Qf=di.item,ey=di.cls,ty=di.vbox,iy=di.bold,ny=di.spacer,oy=di.space,ry=di.hboxl,sy=uc.notification,ay=Vr.activate,ly=ru.log;class cy extends os{constructor(e){super(),this.behaviour=e,new gl(!0,{transport_policy:"none",teleport_policy:"target_only"}).addTo(this),this.sidebar=new ds({position:"top-left",type:"floating",no_default_styling:!0},ey("ctr-neosolving-sidebar")).addTo(this),this.sidebar.content.append(new cy.MainControlBar(e),this.clue_container=c(),this.solution_container=c(),this.scantree_container=c(),this.compass_container=c(),this.path_container=c(),this.method_selection_container=c()),this.scan_layer=new xd([]).addTo(this),this.generic_solution_layer=(new os).addTo(this)}fit(e){if(!e)return this;let t=o.cloneDeep(e),i=null;const n=this.getMap().getSize();function r(e,t){return e*e*(t*t)}return i=r(n.x-this.sidebar.content.raw().clientWidth,n.y)>r(n.x,n.y-this.sidebar.content.raw().clientHeight)?[this.sidebar.content.raw().offsetWidth,0]:[0,this.sidebar.content.raw().offsetHeight],this.map.fitView(t,{maxZoom:o.clamp(this.getMap().getZoom(),2,4),paddingTopLeft:i}),this}reset(){this.clue_container.empty(),this.solution_container.empty(),this.compass_container.empty(),this.scan_layer.marker.setClickable(!1),this.scan_layer.marker.setFixedSpot(null),this.scan_layer.setSpots([]),this.generic_solution_layer.clearLayers()}}!function(t){var i=di.hbox,n=zc.Step;class o extends Oa{constructor(e){super(),e.icon&&this.append(c(`<img src="${e.icon}" class="ctr-neosolving-main-bar-icon">`)),e.centered&&this.css("justify-content","center"),e.text&&(this.append(c().text(e.text)),this.css("flex-grow","1")),this.addClass("ctr-neosolving-main-bar-button").addClass("ctr-neosolving-main-bar-section")}}t.MainControlBar=class extends si{constructor(t){super(),this.parent=t,this.fullscreen_preference=new e.Variable("preferences/solve/fullscreen",(()=>!1)),this.autosolve_preference=new e.Variable("preferences/solve/autosolve",(()=>Is().app.in_alt1)),this.dropdown=null,this.addClass("ctr-neosolving-main-bar"),this.prepared_search_index=new $p(Wc.all.flatMap((e=>e.text.map(((t,i)=>({step:e,text_index:i}))))),(e=>e.step.text[e.text_index]),{all:!0,threshold:-1e4}),this.append(this.parent.tetracompass_only?new o({icon:"assets/icons/tetracompass.png"}).css("cursor","default"):new o({icon:"assets/icons/glass.png"}).append(this.search_bar=(new Zl).css("flex-grow","1").css("font-weight","normal").setPlaceholder("Enter Search Term...").toggleClass("nisl-textinput",!1).addClass("ctr-neosolving-main-bar-search").setVisible(!1).onPreview((e=>{let t=this.prepared_search_index.search(e);this.dropdown.setItems(t)}))).tooltip("Search Clues").onClick((e=>{e.stopPropagation(),this.search_bar_collapsible.isExpanded()?e.preventDefault():(this.search_bar_collapsible.expand(),this.search_bar.container.focus(),this.search_bar.setValue(""))})),this.rest=i(Is().app.in_alt1?void 0:new o({icon:"assets/icons/Alt1.png",text:"Solving available in Alt1",centered:!0}).tooltip("More available in Alt1").onClick((()=>(new Hf).show())),Is().app.in_alt1?new o({icon:"assets/icons/activeclue.png",text:"Solve",centered:!0}).onClick((()=>this.parent.screen_reading.solveManuallyTriggered())).tooltip("Read a clue from screen").setEnabled(Is().app.in_alt1):void 0,Is().app.in_alt1?new o({icon:"assets/icons/lock.png",text:"Auto-Solve",centered:!0}).setToggleable(!0).tooltip("Continuously read clues from screen").setEnabled(Is().app.in_alt1).onToggle((e=>{this.parent.screen_reading.setAutoSolve(e),this.autosolve_preference.set(e)})).setToggled(this.autosolve_preference.get()):void 0,new o({icon:"assets/icons/fullscreen.png",centered:!0}).tooltip("Hide the menu bar").setToggleable(!0).onToggle((e=>{Is().app.menu_bar.setCollapsed(e),this.fullscreen_preference.set(e)})).setToggled(this.fullscreen_preference.get()),new o({icon:"assets/icons/settings.png",centered:!0}).tooltip("Open settings").onClick((()=>new Of("info_panels").do()))).css("flex-grow","1")),this.dropdown=new Ul.DropDown({dropdownClass:"ctr-neosolving-favourite-dropdown",renderItem:e=>c().text(n.shortString(e.step,e.text_index))}).onSelected((async e=>{this.parent.setClueWithAutomaticMethod(e,null)})).onClosed((()=>{this.search_bar_collapsible.collapse()})).setItems([]),this.search_bar_collapsible=Vp.horizontal({target:this.search_bar,starts_collapsed:!0,duration:100}).onChange((e=>{var t,i;e?null===(t=this.dropdown)||void 0===t||t.close():(this.dropdown.setItems(this.prepared_search_index.items()),null===(i=this.dropdown)||void 0===i||i.open(this,this.search_bar)),this.rest_collapsible.setCollapsed(!e)})),this.rest_collapsible=Vp.horizontal({target:this.rest,starts_collapsed:!1})}}}(cy||(cy={}));class uy extends Ls{constructor(e){super(),this.parent=e,this.activeInterval=null,this.reader=new Wg(this.parent.tetracompass_only)}begin(){}end(){this.setAutoSolve(!1)}async solve(e=!1){const t=await this.reader.readScreen();if(t)switch(t.type){case"textclue":this.parent.setClueWithAutomaticMethod(t.step,t);break;case"scan":case"compass":this.parent.setClueWithAutomaticMethod({step:t.step,text_index:0},t);break;case"puzzle":const i=this.parent.setPuzzle(t.puzzle);e&&"slider"==t.puzzle.type&&i&&Is().app.crowdsourcing.pushSlider(t.puzzle.puzzle)}return t}setAutoSolve(e){null!=this.activeInterval&&(clearInterval(this.activeInterval),this.activeInterval=null),this.parent.app.in_alt1&&e&&(this.activeInterval=window.setInterval((()=>{var e;(null===(e=this.parent.active_behaviour.get())||void 0===e?void 0:e.pausesClueReader())||this.solve(!0)}),300))}async solveManuallyTriggered(){await this.solve()||sy("No clue found on screen.","error").show()}}class hy extends Ls{activateSubBehaviour(e){e&&(e.setRelatedState(this.state),ly().log(`Activating subbehaviour: ${e.constructor.name}`,"Solving")),this.active_behaviour.set(e)}getAssumedPlayerPositionByLastClueSolution(){let e=Date.now()-1e4;for(let t=this.history.length-2;t>=0;t--){const i=this.history[t];if(i.end_time<e)return null;if("puzzle"!=i.step.type)return i.solution_area;e=i.start_time-1e4}return null}constructor(e,t){super(),this.app=e,this.tetracompass_only=t,this.state=null,this.history=[],this.active_method=null,this.active_behaviour=this.withSub(new Ps),this.screen_reading=this.withSub(new uy(this)),this.path_control=this.withSub(new Qp(this)),this.default_method_selector=null,this.path_control.section_selected.on((e=>{var t,i;"scantree"!=(null===(i=null===(t=this.active_method)||void 0===t?void 0:t.method)||void 0===i?void 0:i.type)&&setTimeout((()=>this.layer.fit(Rs.bounds(e))),20)}))}pushState(e){const t=Date.now();return this.state&&!this.state.end_time&&(this.state.end_time=t),this.state={step:e,start_time:t,end_time:void 0,solution_area:void 0},ly().log(`Changed state to ${Gf.ActiveState.title(this.state)}`,"Solving"),this.history.push(this.state),this.state}setPuzzle(e){var t,i;return("puzzle"!=(null===(i=null===(t=this.state)||void 0===t?void 0:t.step)||void 0===i?void 0:i.type)||this.state.step.puzzle.type!=(null==e?void 0:e.type))&&(this.reset(this.state),this.pushState({type:"puzzle",puzzle:e}),e&&this.activateSubBehaviour((()=>{switch(e.type){case"slider":return new Um(this,e);case"knot":return new Nf(this,e);case"lockbox":return new $f(this,e);case"tower":return new Zf(this,e)}})()),!0)}setClue(e,t=!0,i){var n,o,r,s;if("clue"==(null===(o=null===(n=this.state)||void 0===n?void 0:n.step)||void 0===o?void 0:o.type)&&this.state.step.clue.step.id==e.step.id&&this.state.step.clue.text_index==e.text_index)return;if("clue"==(null===(s=null===(r=this.state)||void 0===r?void 0:r.step)||void 0===s?void 0:s.type)&&"compass"==this.state.step.clue.step.type&&"compass"==e.step.type)return;this.reset(this.state),this.pushState({type:"clue",clue:e});const a=this.app.settings.settings.solving,l=e.step,u=new Dh;{let t=c();if("map"==e.step.type)"show"==a.info_panel.map_image?t.append(c(`<img src='${e.step.image_url}' style="width: 100%">`).addClass("ctr-neosolving-solution-row")):"transcript"==a.info_panel.map_image&&ey("ctr-neosolving-solution-row").text(e.step.text[0]).appendTo(t);else switch(a.info_panel.clue_text){case"full":ey("ctr-neosolving-solution-row").text(e.step.text[e.text_index]).appendTo(t);break;case"abridged":if("compass"==l.type)break;const i=zc.Step.shortString(l,e.text_index),n=ey("ctr-neosolving-solution-row").text(i).appendTo(t);l.text[e.text_index]&&n.addClass("ctr-neosolving-solution-row-shortened")}const i=zc.Step.solution(e.step);if(i)switch(null==i?void 0:i.type){case"talkto":let e=0,n=i.spots[e];"show"==a.info_panel.talk_target&&t.append(ey("ctr-neosolving-solution-row").append(Xf("assets/icons/cursor_talk.png"),Yf("Talk to "),di.npc(i.npc,!0).tooltip("Click to center").on("click",(()=>{this.layer.fit(Vr.toRect(n.range))})),n.description?Yf(" "+n.description):void 0));for(let e=0;e<i.spots.length;e++){const t=i.spots[e];new Pm.TalkSolutionNpcEntity(i.npc,t).addTo(this.layer.generic_solution_layer)}u.addArea(n.range);break;case"search":i.key&&"show"==a.info_panel.search_key&&t.append(ey("ctr-neosolving-solution-row").append(Xf("assets/icons/key.png")," ",Yf(i.key.answer).addClass("ctr-clickable").on("click",(()=>{this.layer.fit(Vr.toRect(i.key.area))})))),"show"==a.info_panel.search_target&&t.append(ey("ctr-neosolving-solution-row").append(Xf("assets/icons/cursor_search.png")," ",Yf("Search "),di.staticentity(i.entity,!0).tooltip("Click to center").on("click",(()=>{this.layer.fit(i.spot)})))),u.addRectangle(i.spot),new Pm.SearchSolutionEntity(i).addTo(this.layer.generic_solution_layer);break;case"dig":"show"==a.info_panel.dig_target&&t.append(ey("ctr-neosolving-solution-row").append(Xf("assets/icons/cursor_shovel.png")," ",Yf("Dig"),i.description?Yf(" "+i.description):Yf(` at ${W.toString(i.spot)}`))),new Pm.DigSolutionEntity(i).addTo(this.layer.generic_solution_layer),u.addTile(i.spot)}if("emote"==l.type){if(l.hidey_hole&&"show"==a.info_panel.hidey_hole&&t.append(ey("ctr-neosolving-solution-row").append(Xf("assets/icons/cursor_search.png")," ",Yf("Get items from "),di.staticentity(l.hidey_hole.name).tooltip("Click to center").addClass("ctr-clickable").on("click",(()=>{this.layer.fit(l.hidey_hole.location)})))),"show"==a.info_panel.emote_items){let e=ey("ctr-neosolving-solution-row").append(Xf("assets/icons/cursor_equip.png")," ",Yf("Equip ")).appendTo(t);for(let t=0;t<l.items.length;t++){const i=l.items[t];t>0&&(t==l.items.length-1?e.append(", and "):e.append(", ")),e.append(Qf(i))}}if("show"==a.info_panel.emotes){let e=ey("ctr-neosolving-solution-row").append(Xf("assets/icons/emotes.png")," ").appendTo(t);for(let t=0;t<l.emotes.length;t++){const i=l.emotes[t];t>0&&(t==l.emotes.length-1?e.append(", then "):e.append(", ")),e.append(i).addClass("nisl-emote")}}l.double_agent&&"show"==a.info_panel.double_agent&&t.append(ey("ctr-neosolving-solution-row").append(Xf("assets/icons/cursor_attack.png"),oy(),Yf("Kill "),di.npc("Double Agent"))),new Pm.EmoteAreaEntity(l).addTo(this.layer.generic_solution_layer),l.hidey_hole&&new Pm.HideyHoleEntity(l).addTo(this.layer.generic_solution_layer),u.addArea(l.area)}else"skilling"==l.type?(t.append(ey("ctr-neosolving-solution-row").append(Xf(Zs.meta(l.cursor).icon_url),oy(),Yf(l.answer))),u.addRectangle(Vr.toRect(l.areas[0])),Jf(ay(l.areas[0]).center(),l.cursor).addTo(this.layer.generic_solution_layer)):"scan"==l.type?(this.layer.scan_layer.marker.setClickable(!0),this.layer.scan_layer.setSpots(l.spots),this.layer.scan_layer.marker.setRadius(l.range+5,!0),u.addTile(...l.spots)):l.type;if(l.challenge&&l.challenge.length>0){const i=l.challenge.find((e=>"challengescroll"==e.type));if(i){const e=this.app.favourites.getChallengeAnswerId(l),n=i.answers[e];if("hide"!=a.info_panel.challenge){let e=null,o=null;t.append(e=ey("ctr-neosolving-solution-row").append(ry(Xf("assets/icons/activeclue.png"),ty("full"==a.info_panel.challenge?c().css("font-style","italic").text(i.question):void 0,ry(iy("Answer:"),oy(),o=Yf(n.answer.toString()),ny(),i.answers.length>1?Uu.dropdown():void 0)).css("flex-grow","1")))),i.answers.length>1&&e.on("click",(()=>{new Ul.DropDown({dropdownClass:"ctr-neosolving-favourite-dropdown",renderItem:e=>c().text(`${e.answer} (${e.note})`)}).setItems(i.answers).setHighlighted(n).open(e,void 0).onSelected((e=>{this.app.favourites.setChallengeAnswerId(l,i.answers.indexOf(e)),o.text(e.answer.toString())}))}))}}else if("show"==a.info_panel.puzzle||"hideforscansandcompasses"==a.info_panel.puzzle&&"compass"!=e.step.type&&"scan"!=e.step.type){const e=ey("ctr-neosolving-solution-row").appendTo(t);for(let t=0;t<l.challenge.length;t++)t>0&&(t==l.challenge.length-1?e.append(", or "):e.append(", ")),e.append(rh.render_challenge(l.challenge[t]).css("display","inline-block"))}}t.container.is(":empty")||this.layer.solution_container.append(t)}if(t&&this.layer.fit(u.get()),this.app.settings.settings.teleport_customization.preset_bindings_active){const e=this.app.settings.settings.teleport_customization.active_preset,t=this.app.settings.settings.teleport_customization.preset_bindings[l.tier];e!=t&&null!=t&&this.app.settings.update((e=>e.teleport_customization.active_preset=t))}if("compass"==(null==i?void 0:i.type)&&"compass"==l.type){const e=new af(this,l,i.reader);e.selected_spot.subscribe((async e=>{if(e){const t=await this.getAutomaticMethod({clue:l.id,spot:e.spot});this.setMethod(t)}else this.setMethod(null)})),this.activateSubBehaviour(e)}this.setMethod(null)}setMethod(e){var t,i,n,o,r,s,a,l,c,u,h,d;if(e?ly().log(`Setting method to ${e.method.name} (${e.method.id.substring(0,8)})`,"Solving"):ly().log("Setting method to null","Solving"),"clue"!=(null===(i=null===(t=this.state)||void 0===t?void 0:t.step)||void 0===i?void 0:i.type))return void ly().log(`Aborting set method because active state is not a clue step: '${null===(o=null===(n=this.state)||void 0===n?void 0:n.step)||void 0===o?void 0:o.type}'.`,"Solving");if(e&&e.clue.id!=(null===(l=null===(a=null===(s=null===(r=this.state)||void 0===r?void 0:r.step)||void 0===s?void 0:s.clue)||void 0===a?void 0:a.step)||void 0===l?void 0:l.id))return void ly().log("Aborting set method because method does not match clue.","Solving");if(e&&e==this.active_method)return void ly().log("Aborting set method because same method is already active.","Solving");this.path_control.reset(),null===(c=this.default_method_selector)||void 0===c||c.remove(),this.active_method=null;const p=this.active_behaviour.get();if("method"==(null==p?void 0:p.type)&&p.stop(),!e&&p instanceof id&&(ra("scan"==this.state.step.clue.step.type),this.layer.fit(Z.from(...this.state.step.clue.step.spots))),e)this.active_method=e,"scantree"==e.method.type?this.activateSubBehaviour(new id(this,e)):"general_path"==e.method.type&&this.path_control.setMethod(e);else if("compass"!=(null===(d=null===(h=null===(u=this.state.step)||void 0===u?void 0:u.clue)||void 0===h?void 0:h.step)||void 0===d?void 0:d.type)||p instanceof af&&p.selected_spot.value()){const e=p instanceof af?{clue:this.state.step.clue.step.id,spot:p.selected_spot.value().spot}:{clue:this.state.step.clue.step.id};this.default_method_selector=new qh(this,e).addClass("ctr-neosolving-solution-row").appendTo(this.layer.method_selection_container)}}async getAutomaticMethod(e){let t=await this.app.favourites.getMethod(e);if(void 0===t){let i=await pu.instance().getForClue(e);i.length>0&&(t=i[0])}return t}async setClueWithAutomaticMethod(e,t){var i,n;if("clue"==(null===(n=null===(i=this.state)||void 0===i?void 0:i.step)||void 0===n?void 0:n.type)&&this.state.step.clue.step.id==e.step.id&&this.state.step.clue.text_index==e.text_index)return;let o=await this.getAutomaticMethod({clue:e.step.id});this.setClue(e,!o,t),this.setMethod(o)}reset(e){var t;return e==this.state&&(this.layer.reset(),this.path_control.reset(),this.activateSubBehaviour(null),null===(t=this.default_method_selector)||void 0===t||t.remove(),this.state=null,this.active_method=null,ly().log("Reset state","Solving"),!0)}begin(){this.app.map.addGameLayer(this.layer=new cy(this))}end(){this.layer.remove()}}!function(e){let t,i;!function(e){e.title=function(e){switch(e.step.type){case"puzzle":switch(e.step.puzzle.type){case"slider":return`Slider (${e.step.puzzle.puzzle.theme})`;case"knot":return"Knot";case"tower":return"Tower";case"lockbox":return"Lockbox";default:return"Unknown Puzzle"}case"clue":return`${(0,o.capitalize)(e.step.clue.step.type)} (${e.step.clue.step.id})`}}}(t=e.ActiveState||(e.ActiveState={})),function(e){let t,i;!function(e){e.DEFAULT={sliders:Lm.Settings.DEFAULT,knots:Nf.Settings.DEFAULT,lockboxes:$f.Settings.DEFAULT,towers:Zf.Settings.DEFAULT},e.normalize=function(t){return t?(t.sliders=Lm.Settings.normalize(t.sliders),t.knots=Nf.Settings.normalize(t.knots),t.lockboxes=$f.Settings.normalize(t.lockboxes),t.towers=Zf.Settings.normalize(t.towers),t):o.cloneDeep(e.DEFAULT)}}(t=e.Puzzles||(e.Puzzles={})),function(e){e.EVERYTHING={clue_text:"full",map_image:"show",dig_target:"show",talk_target:"show",search_target:"show",search_key:"show",hidey_hole:"show",emote_items:"show",emotes:"show",double_agent:"show",challenge:"full",puzzle:"show",path_step_list:"show"},e.NOTHING={clue_text:"hide",map_image:"hide",dig_target:"hide",talk_target:"hide",search_target:"hide",search_key:"hide",hidey_hole:"hide",emote_items:"hide",emotes:"hide",double_agent:"hide",challenge:"hide",puzzle:"hide",path_step_list:"hide"},e.REDUCED={clue_text:"abridged",map_image:"show",dig_target:"show",talk_target:"show",search_target:"show",search_key:"hide",hidey_hole:"hide",emote_items:"hide",emotes:"hide",double_agent:"hide",challenge:"answer_only",puzzle:"hideforscansandcompasses",path_step_list:"hide"},e.DEFAULT=e.REDUCED,e.normalize=function(t){return t?(["full","hide","abridged"].includes(t.clue_text)||(t.clue_text=e.DEFAULT.clue_text),["show","hide"].includes(t.map_image)||(t.map_image=e.DEFAULT.map_image),["show","hide"].includes(t.dig_target)||(t.dig_target=e.DEFAULT.dig_target),["show","hide"].includes(t.talk_target)||(t.talk_target=e.DEFAULT.talk_target),["show","hide"].includes(t.search_target)||(t.search_target=e.DEFAULT.search_target),["show","hide"].includes(t.search_key)||(t.search_key=e.DEFAULT.search_key),["show","hide"].includes(t.hidey_hole)||(t.hidey_hole=e.DEFAULT.hidey_hole),["show","hide"].includes(t.emote_items)||(t.emote_items=e.DEFAULT.emote_items),["show","hide"].includes(t.emotes)||(t.emotes=e.DEFAULT.emotes),["show","hide"].includes(t.double_agent)||(t.double_agent=e.DEFAULT.double_agent),["show","hide"].includes(t.path_step_list)||(t.path_step_list=e.DEFAULT.path_step_list),["show","hide"].includes(t.puzzle)||(t.puzzle=e.DEFAULT.puzzle),["full","answer_only","hide"].includes(t.challenge)||(t.challenge=e.DEFAULT.challenge),t):o.cloneDeep(e.DEFAULT)}}(i=e.InfoPanel||(e.InfoPanel={})),e.DEFAULT={info_panel:i.REDUCED,puzzles:t.DEFAULT,compass:af.Settings.DEFAULT},e.normalize=function(n){return n||(n=o.cloneDeep(e.DEFAULT)),n.info_panel=i.normalize(n.info_panel),n.puzzles=t.normalize(n.puzzles),n.compass=af.Settings.normalize(n.compass),n}}(i=e.Settings||(e.Settings={}))}(Gf||(Gf={}));class dy extends si{constructor(e=!1){super(ie(e?"<ol>":"<ul>"))}item(...e){return this.append(c("<li></li>").append(...e)),this}}!function(e){e.log=o.sortBy([{version:11,date:new Date(Date.parse("2024-09-22")),title:"Bugfixes",render:e=>{e.row((new dy).item("Fixed a bug that caused certain paths to not be correctly split into sections, sometimes resulting in the 'zoom to space' symptom (for example at the Edmond medium clue).").item("Added a workaround for a rare issue where a master compass would reset and be redetected as an elite compass.").item("Added 2 missing tiles to the landing area for the turtle island teleport, which sometimes caused problems with master compasses.").item("Slightly increased the time required for a stationary compass to be counted to mitigate lag spikes."))}},{version:10,silent:!0,date:new Date(Date.parse("2024-09-20")),title:"Timing Bugfix",render:e=>{e.row((new dy).item("Fixed a rare timing bug where a completed puzzle could abort the following clue. This was noticeable for compasses following a celtic knot.").item("Reduced the size of log files.")).paragraph("This is a bit of a speculative fix, because the source of the reported issue is not 100% confirmed.")}},{version:9,date:new Date(Date.parse("2024-09-18")),title:"Bugfixes",render:e=>{e.row((new dy).item("Fixed a minor bug that caused an exception when outside of Alt 1.").item("Fixed a bug that caused teleport icons on the map to not update on changes to the settings, requiring a reload."))}},{version:8,date:new Date(Date.parse("2024-09-09")),title:"Migration and update notices",render:e=>{e.row((new dy).item("Added a data export/import feature. Data exports will include local/imported method packs, method preferences, and all of your settings.").item("Added a migration notice to remind users that are still on the old 'leridon.github.io/rs3scantrainer' URL to migrate to 'cluetrainer.app'.",(new dy).item("The legacy URL 'leridon.github.io/rs3scantrainer' will stop being available after 2024-10-31.")).item("Added an update reminder for users that are on Alt 1 1.5.6.").item("Reduced the default setting for slider solve time to 1 second down from 2 seconds.").item("Fixed a bug that caused the map to zoom very far out on certain steps.",(new dy).item("This still isn't optimal, but it's an improvement over the previous situation.")).item("Enabled the option to automatically draw the first compass arrow for back to back arc compasses."))}},{version:7,date:new Date(Date.parse("2024-08-11")),title:"Transport Fixes and Permission Checking",render:e=>{e.row((new dy).item("Fixed issues with various transports missing in the path editor and many actions being named 'Unnamed Action'.").item("Clue Trainer now checks if all required permissions are granted on startup and opens and explanation how to grant them if they are not."))}},{version:6,date:new Date(Date.parse("2024-07-14")),title:"Celtic Knot Bugfix",render:e=>{e.row((new dy).item("Fixed a bug that caused celtic knots to revert to the 'Not enough information' state mid-solve.").item("Fixed the position of Wellington for sandy clues.")),e.header("What went wrong?","left"),e.paragraph("While solving celtic knots, there's a step called 'unification' of puzzle states. This joins the previously known state of the puzzle with the new state. It continuously updates what the solver knows about the puzzle and is required when there is not enough information initially, and to make updating the overlay continuously possible. There was a rare case where unification actually caused information to be lost, which in turn caused the solver to not find a solution anymore.")}},{version:5,date:new Date(Date.parse("2024-07-12")),title:"Slider Bugfix",render:e=>{e.row((new dy).item("Fixed a bug that caused invalid moves for slider puzzles to be displayed.")),e.header("What went wrong?","left"),e.paragraph("In the new solving algorithm there is a point where the slider state needs to be reflected along the main diagonal (top left to bottom right). The datastructure that describes the slider state contains the layout of the 25 tiles and for optimization reasons also the position of the blank tile and the last performed move. The latter two were not correctly updated when reflecting the state, causing invalid solutions to be produced.")}},{version:4,date:new Date(Date.parse("2024-07-11")),title:"Better Logging",render:e=>{e.paragraph("This update improves logging to provide more useful information for debugging in the future. Logs are now json files instead of plaintext and can contain json data or images as attachments."),e.paragraph("As a reminder, you can access and save log files by pressing F6 while Clue Trainer is focussed. Saved log files can be viewed using the Log Viewer in the development menu accessible with F4."),e.row((new dy).item("Improved the log format and Log Viewer to be more useful.").item("Added more extensive logging for a current bug involving invalid slider solutions.").item("Celtic Knots now require two consecutive identical reads for the new state to be considered valid. This makes the knot solver more resilient against wrong reads."))}},{version:3,date:new Date(Date.parse("2024-07-10")),title:"New Method",render:e=>{e.row((new dy).item("Added an alternative route without HSR for the medium clue in the terrorbird pen."))}},{version:2,date:new Date(Date.parse("2024-07-09")),title:"Slider Bugfix",render:e=>{e.row((new dy).item("Fixed a bug with error recovery on sliders that caused impossible moves to be displayed."))}},{version:1,date:new Date(Date.parse("2024-07-09")),notification:"Slider Puzzles now have faster solutions",title:"New Solving Algorithm for Slider Puzzles",render:e=>{e.paragraph("This update introduces a new solving algorithm for sliding puzzles. The new algorithm is based on a precomputed database that is around 170MB large and will be downloaded when the first puzzle is encountered."),e.paragraph("Due to how the algorithm works, this has a more significant effect on multitile moves (mouse mode) than on singletile moves (keyboard mode). Benchmarks suggest a move count reduction of up 30% for multitile moves and up to 10% for singletile moves."),e.paragraph("The new algorithm has been developed in cooperation with discord user Shao, who helped out massively with the algorithmic details and the required math."),e.row((new dy).item("Added a new solving algorithm for slider puzzles.").item("Fixed a bug that caused puzzles to not be read with lava in the background.").item("Fixed a bug that caused error recovery to display invalid moves."))}},{version:0,date:new Date(Date.parse("2024-06-28")),title:"New Methods by Ngis",render:e=>{e.row((new dy).item("Added 16 missing Tetracompass spots.").item("Added a method pack for tetracompass spots.").item("The method pack for master clues is now builtin.").item("Added a new Falador scan method that starts with the amulet of nature teleport and is 3 ticks faster on average (assuming perfect execution and no loading screens as usual).").item("Method descriptions and other meta-information are now shown in a tooltip when hovering a method in the method selection dropdown."))}},{version:-1,date:new Date(Date.parse("2024-06-25")),notification:"Clue Trainer now supports Sandy Clues and Tetracompasses",title:"Sandy Clues and Tetracompasses",render:e=>{e.paragraph("This update introduces support for sandy clues and tetracompasses."),e.paragraph("Also, if you want to support Clue Trainer you can now do so on the newly created <a href='https://ko-fi.com/I2I4XY829' target=_blank>KoFi page</a>."),e.row((new dy).item("Sandy Clues can now be solved like any other clue.").item("Tetracompasses can be solved by switching to the 'Tetras' tab in the sidebar.").item("Added in-app update notifications.").item("Moved step information for filter results in the 'Methods' tab to a tooltip."))}},{version:-2,date:new Date(Date.parse("2024-06-18")),title:"Slider Bugfix",render:e=>{e.row((new dy).item("Fixed an issue with the slider reader that caused misreads for some sliders, particularly the tree motive on low graphic settings."))}},{version:-3,date:new Date(Date.parse("2024-06-16")),title:"Compass Bugfixes",render:e=>{e.row((new dy).item("Fixed a bug that caused pretty much every spot to be considered colinear to large triangulation spots, for example after a scan.").item("Fixed a rendering bug for compass beams where their visual representation didn't match the area that was considered internally.").item("Improved the calculation of location uncertainty to properly consider the angle of the beam.",(new dy).item("The previous formula overestimated this quite significantly in most cases. The new version takes the angle into account, so that for angles that aren't perpendicular to the longest diagonal of the area the uncertainty is no longer overestimated.")).item("Compass beams now start at the edge of the origin area instead of the center, so that all spots inside of it are properly considered.",(new dy).item("This is relevant for large areas, for example when using the entirety of a scan area as the origin of a compass beam.")).item("Right-Click teleport options on Luck of the Dwarves are now recognized when pressing Alt+1 on them to set a compass position.").item("Added a workaround to hopefully fix phantom clicks on map entities."))}},{version:-4,date:new Date(Date.parse("2024-06-14")),title:"Miscellanious",render:e=>{e.row((new dy).item("Updated target areas of teleports to daemonheim.").item("Added support for Right Click -> Alt + 1 for Monastery, Skeletal Horror and Manor Farm, as well as the most recently used lodestone when right clicking the home teleport button on the map.").item("Fixed an occasional bug that caused wrong angles to be committed when coming from spinning compass."))}},{version:-5,date:new Date(Date.parse("2024-06-11")),title:"Bugfixes",render:e=>{e.row((new dy).item("Switched to a custom implementation of modals (settings, puzzles, etc.). This lacks some of the fancy animations, but crucially also lacks the bugs causing the grayed overlay rendering clue trainer unusable.").item("Fixed a long standing bug with base64 exports/imports of method packs and paths."))}},{version:-6,date:new Date(Date.parse("2024-06-10")),title:"New Compass Reader and Daemonheim Dig Site",render:e=>{e.row((new dy).item("The new compass reader is here. The new algorithm is not affected by the game's rendering inconsistency and will therefore fix some of the compass issues experienced over the last week.").item("Updated the collision data with today's game update.").item("Updated a compass spot that changed with today's update.").item("Added the new teleport to the daemonheim dig site.").item("Added target areas for the remaining skilling steps in master clues.").item("Updated daemonheim compass spot paths.").item("Added HSR-less alternative routes for 3 compass spots."))}},{version:-7,date:new Date(Date.parse("2024-06-06")),title:"Compass fixes",render:e=>{e.row((new dy).item("Added internal log keeping. You can now press F6 while the app is focused to view and save the log file. It's still mirrored to the browser console, so if you're comfortable with that, you can still use it.").item("Reduced colinearity threshold to 5 down from 10.").item("Increased pixel count required for a compass to go into the concealed state.").item("Fixed a bug that caused compass lines to not be drawn after the angle was committed.").item("Fixed bug that caused the compass reader to go into the 'Spinning' state for a tick when coming from 'Concealed', which in turn caused the next read angle to be auto-committed.").item("Added error mitigation for the inconsistent position of the north-indicator on the compass interface.").item("Recalibrated the compass reader with the first fix in place to be hopefully accurate again.").item("Reduced the assumed inaccuracy again because hopefully this fix will cause it to be consistently accurate."))}},{version:-8,date:new Date(Date.parse("2024-06-05")),title:"More compass improvements and a new URL",render:e=>{e.paragraph("Clue Trainer has a new URL. You can now access it at <a href='https://cluetrainer.app'>cluetrainer.app</a>. The links in the channel description, guide page, bot command etc. have been updated and any new installations should use that URL. Existing users can switch over if they want to, but should be aware that you will need to restore your settings, as well as local and imported method packs manually. The current URL will continue to work for the time being. When it's time for it to go offline (so I can finally rename the GitHub repository) there will be plenty of notice and a way to carry over your data."),e.row((new dy).item("The previously shelved feature to use the solution of the previous clue step had a very short shelf life and is now available after some additional improvements.",(new dy).item("You can activate it in the compass settings.").item("When activated, the initially read angle of the compass will be used to draw an arrow from the position of the previous step's solution area. For now, this is limited to elite compasses.",(new dy).item("If the previous clue step was a scan, this will only work if you followed the scan tree until the remaining spots are in a reasonably small rectangle.").item("If the previous clue was also a compass and multiple spots were in the intersection of the beams, the smallest rectangle containing all spots will be used.")).item("Your selected triangulation preset will load after this initial arrow. There's an option to invert the sequence if the previous solution is used in case you rely on ending the triangulation at a certain spot (for example south feldip hills for the spirit tree).").item("There's an option to skip spots of the preset sequence if they are close to co-linear to an existing beam.")).item("The settings menu for compasses has been cleaned up. Detailed explanations of the individual settings have been moved into a tooltip of a small info-icon.").item("You can now customize the color of the triangulation beams.").item("The compass solver UI has been reverted to a horizontal header and now contains a reset button.").item("Various issues with the compass reader that caused wrong 'Concealed' readings have been resolved.").item("The compass reader now detects if you are on top of the target spot, which no longer closes the compass solver.").item("Added scan routes for the Elven Lands, Brimhaven Dungeon, Mos Le'Harmless and Fremennik Slayer Dungeon, as usual courtesy of Ngis.").item("The list containing details for the path on the map has been restored due to popular demand."))}},{version:-9,date:new Date(Date.parse("2024-06-02")),title:"Small compass improvements",render:e=>{e.row((new dy).item("Tweaked pixel-count thresholds for concealed compasses to be less strict.").item("Added some debug logging for the compass reader.").item("Actually disabled the incomplete feature that used the area of the previous clue step as the first triangulation point. It was already supposed to be disabled, but was missing the check to do so. Sorry if you found the current, broken version to be useful already, it will make a comeback in a hopefully less broken state."))}},{version:-10,date:new Date(Date.parse("2024-06-01")),title:"Improved compass solver and general improvements.",render:e=>{e.header("Compass Solver","left"),e.row((new dy).item("The UI for the compass solver has been redesigned.").item("The compass reader has been recalibrated to be even more accurate than before. It can also detect the use of MSAA and adjust accordingly.").item("The compass solver now supports showing paths from method packs.",(new dy).item("The shown path defaults to the spot closest to all the triangulation lines. Click a marker to change the selection if necessary.")).item("A full set of compass methods is included. Huge thanks to @Dongus Bungholius, @Mr Cob , @treborsmada , @Xindrjayzda for starting these back in march and @Ngis for reviewing them all and compiling them in a single set.")),e.header("General","left"),e.row((new dy).item("Optimized rendering of gridlines and teleports on the map for significant performance improvements.").item("Removed ability icons for rendered paths to reduce map clutter.").item("Added optional note-areas to dives and running-steps in the path editor. Using these to simplify existing paths is WIP.").item("Rendering for dives now uses distinct arrow shapes for far-clickable and precise dives.",(new dy).item("This relies on a change in the dataformat, so you need to migrate any existing paths you have. You can find this option by right-clicking the method pack in the Methods tab.")).item("Errors and warnings in the path editor are now shown in a minimized format to save space. Hover over them to see the details.").item("Fixed the base64 export for method packs that's apparently been broken for ages.").item("Entity-Tooltips now behave much smoother when the entity is right-clicked.").item("When drawing a run step in the path editor, the number of tiles this covers is now shown as part of the preview.").item("Teleport customization now starts out as empty instead of the Clue Chasers recommendations.").item("Updated methods for one easy and two hard clues."))}}],(e=>-e.version)),e.latest_patch=e.log[0],e.Modal=class extends Ml{constructor(){super(),this.setTitle(`Changelog (v${e.latest_patch.version})`)}render(){super.render();const t=(new $s).appendTo(this.body);Intl.DateTimeFormat("de-de",{dateStyle:"medium",timeStyle:"short"}),t.row("<div style='text-align: center'><a href='https://ko-fi.com/I2I4XY829' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi3.png?v=3' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a></div>"),t.paragraph('If you enjoy Clue Trainer, please consider supporting continuous development of Clue Trainer at <a href="https://ko-fi.com/I2I4XY829" target="_blank"><img class="ctr-clickable" height="12px" src="assets/icons/kofi.webp"> KoFi</a>.'),t.paragraph('You can also join the <a href="https://discord.gg/cluechasers" target="_blank"><img src="assets/icons/cluechasers.png" height="12px">Clue Chasers discord</a> to leave praise and criticism, report issues, request features, get support or just come by and say hi in the <a href="https://discord.com/channels/332595657363685377/1103737270114209825" target="_blank">#clue-trainer</a> channel.'),t.divider(),e.log.forEach((e=>{t.header(c().text(`${e.date.toLocaleDateString("en-gb")} - ${e.title}`)),e.render(t),t.divider()})),t.paragraph("No historic patch notes available beyond this point in time.")}}}(Kf||(Kf={}));class py extends Ml{constructor(){super(),this.title.set("About Clue Trainer")}render(){super.render();const e=(new $s).appendTo(this.body);e.header("About Clue Trainer"),e.paragraph("Clue Trainer is a new generation clue solver for Alt1 developed by Zyklop Marco in the Clue Chasers discord. Originally intended to provide an interactive way to learn optimal scan routes, the scope has gradually increased and is now a fully-featured clue solver and a test bed for new ways to solve clues in RuneScape 3."),e.paragraph("Visit Clue Trainer at"," <a href='https://github.com/Leridon/rs3scantrainer' target=_blank><img class='inline-img' src='assets/icons/github-mark-white.png'> GitHub</a>"," or the <a href='https://discord.gg/cluechasers' target=_blank><img class='inline-img' src='assets/icons/cluechasers.png'> Clue Chasers </a>discord in the <a href='https://discord.com/channels/332595657363685377/1103737270114209825'>#clue-trainer</a> channel."),Is().app.in_alt1||e.paragraph("Click",di.space(),di.text_link("here",(()=>(new Hf).show())),di.space(),"to learn how to install Clue Trainer for Alt1."),e.paragraph("Click",di.space(),di.text_link("here",(()=>(new Kf.Modal).show())),di.space(),"to view patch notes."),e.header("Support"),e.paragraph("You can support development of Clue Trainer by donating at <a href='https://ko-fi.com/I2I4XY829' target=_blank>KoFi</a>. Donations contribute to covering the costs associated with hosting Clue Trainer and are a great way to show appreciation for the time and effort that goes into development."),e.row("<div style='text-align: center'><a href='https://ko-fi.com/I2I4XY829' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi3.png?v=3' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a></div>"),e.header("Credits"),e.paragraph("Clue Trainer is a team effort that requires much more than just the programming and I want to mention a few people specifically that contributed to this journey."),e.paragraph("<strong>Skillbert</strong> for his work on <a href='https://www.runeapps.org'>runeapps.org</a> and the Alt1 toolkit, as well as always helping out with questions about RuneScape's inner workings. Clue Trainer includes code from Alt1's official clue solver with kind permission from Skillbert."),e.paragraph("<strong>Ngis</strong> for being very enthusiastic about Clue Trainer's editor tools and contributing a large majority of the builtin method packs."),e.paragraph("<strong>Fiery</strong> for creating the original scan guide spreadsheet that prompted the original creation of this tool as 'Scan Trainer' and is the basis of many of the included scan routes."),e.paragraph("<strong>Beau</strong> and the rest of the Clue Chasers team for supporting development by providing a space for open discussion around the tool and clue methods."),e.paragraph("<strong>Shao</strong> for their support with the updated slider solving algorithm."),e.paragraph("In no particular order <strong>Pup</strong>, <strong>Xindrjayzda</strong>, <strong>Mr Cob</strong>, <strong>Dongus Bungholius</strong>, <strong>treborsmada</strong>, as well as everyone else who contributed by reporting issues, expressing thoughts, sharing clue methods and generally being part of this journey."),e.header("Legal disclaimer"),e.paragraph("Icons and other assets used are owned by Jagex Ltd. and their use is intended to fall under fair dealing as a fan project.")}}var gy=di.spacer,my=di.span;class fy extends Oa{constructor(e,t){super(),this.addClass("ctr-menubar-button"),this.append(c("<div style='height: 32px'></div>").append(c(`<img src="${t}" style="width: 32px" alt="">`)),my(e))}setActive(e){return this.toggleClass("active",e),this}}class yy extends Ls{constructor(e){super(),this.app=e,this.layer=new os,this.layer.add(new jp)}begin(){this.app.map.addGameLayer(this.layer)}end(){this.layer.remove()}}class vy extends si{constructor(e){super(),this.app=e,this.active_tab=mi(null),this.addClass("ctr-menubar"),this.append(this.solve_button=new fy("Solve","assets/icons/ribbon_clue.png").onClick((()=>{this.switchToTab("solve")})).addTippy((new $s).header("Clue Solver").row(c().text("Clue solver to use while solving or for looking at methods.").css("font-style","italic")),{placement:"right",hideOnClick:!1}),this.map_button=new fy("Map","assets/icons/ribbon_map.png").onClick((()=>{this.switchToTab("map")})).addTippy((new $s).header("Map").row(c().text("A simple map view.").css("font-style","italic")),{placement:"right",hideOnClick:!1}),this.create_button=new fy("Methods","assets/icons/ribbon_notes.webp").onClick((()=>{this.switchToTab("create")})).addTippy((new $s).header("Method Management").row(c().text("View, Manage and Create methods for clue steps.").css("font-style","italic")),{placement:"right",hideOnClick:!1}),this.paths_button=new fy("Paths","assets/icons/ribbon_activitytracker.webp").onClick((()=>{this.switchToTab("pathedit")})).addTippy((new $s).header("Path Editor").row(c().text("Edit paths on the map independently of clues.").css("font-style","italic")),{placement:"right",hideOnClick:!1}),this.tetracompass_button=new fy("Tetras","assets/icons/ribbon_tetra.png").onClick((()=>{this.switchToTab("tetracompass")})).addTippy((new $s).header("Tetracompass Solver").row(c().text("The compass solver adapted to work for tetracompasses.").css("font-style","italic")),{placement:"right",hideOnClick:!1}),this.app.in_dev_mode?this.utility_button=new fy("Utility","assets/icons/ribbon_notes.webp").onClick((()=>{this.switchToTab("utility")})).addTippy((new $s).header("Development Utility").row(c().text("This tab contains some internal utilities for development. Don't try to make sense out of it.").css("font-style","italic")),{placement:"right",hideOnClick:!1}):void 0,gy(),this.app.in_alt1?void 0:new fy("Alt1","assets/icons/ribbon_alt1.png").onClick((()=>{(new Hf).show()})).setActive(!0).addTippy((new $s).header("Alt 1").row(c().text("Shows instructions how to add Clue Trainer to Alt1.").css("font-style","italic")),{placement:"right",hideOnClick:!1}),this.settings_button=new fy("Settings","assets/icons/ribbon_options.webp").onClick((()=>{(new Of).do()})).setActive(!0).addTippy((new $s).header("Settings").row(c().text("Access settings.").css("font-style","italic")),{placement:"right",hideOnClick:!1}),c("<div style=\"font-size: 8pt\" class='nisl-textlink'>About</div>").on("click",(()=>{(new py).show()})),c().append(c('<a href="https://github.com/Leridon/rs3scantrainer" target="_blank"> <img class="ctr-clickable" height="15px" style="padding: 0 2px" src="assets/icons/github-mark-white.png"></a>'),c('<a href="https://ko-fi.com/I2I4XY829" target="_blank"><img class="ctr-clickable" height="15px" src="assets/icons/kofi.webp"></a>')),c().append()),this.updateState()}switchToTab(e){if(e!=this.active_tab.value()){switch(e){case"map":this.app.main_behaviour.set(new yy(this.app));break;case"solve":this.app.main_behaviour.set(new hy(this.app,!1));break;case"tetracompass":this.app.main_behaviour.set(new hy(this.app,!0));break;case"create":this.app.main_behaviour.set(new Pd(this.app));break;case"pathedit":this.app.main_behaviour.set(new Vc((new os).addTo(this.app.map),this.app.template_resolver,{initial:[]},!0));break;case"utility":this.app.main_behaviour.set(new Hp(this.app))}this.active_tab.set(e),this.updateState()}}updateState(){var e,t,i,n,o,r;const s=this.active_tab.value();null===(e=this.solve_button)||void 0===e||e.setActive("solve"==s),null===(t=this.map_button)||void 0===t||t.setActive("map"==s),null===(i=this.create_button)||void 0===i||i.setActive("create"==s),null===(n=this.paths_button)||void 0===n||n.setActive("pathedit"==s),null===(o=this.utility_button)||void 0===o||o.setActive("utility"==s),null===(r=this.tetracompass_button)||void 0===r||r.setActive("tetracompass"==s)}setCollapsed(e){e?this.container.animate({width:"hide"},300):this.container.animate({width:"show"},300)}}var _y=B.todo,xy=zc.ClueSpot;class wy{constructor(t){this.methods=t,this.data=new e.Variable("clue_favourites",(()=>null)),this.normalize_data()}normalize_data(){this.data.value||(this.data.value={methods:[],challenge_answers:[]}),this.data.value.methods||(this.data.value.methods=[]),this.data.value.challenge_answers||(this.data.value.challenge_answers=[]),this.data.save()}getTalkId(e){_y()}setTalkId(e,t){_y()}getChallengeAnswerId(e){var t,i;return null!==(i=null===(t=this.data.value.challenge_answers.find((t=>t.clue_id==e.id)))||void 0===t?void 0:t.answer_id)&&void 0!==i?i:0}setChallengeAnswerId(e,t){const i=this.data.value.challenge_answers.find((t=>t.clue_id==e.id));i?i.answer_id=t:this.data.value.challenge_answers.push({clue_id:e.id,answer_id:t}),this.data.save()}async getMethod(e){var t;const i=this.data.value.methods.find((t=>xy.Id.equals(e,t.spot)));if(!i){const i=(await this.methods.getForClue(e)).sort(((e,t)=>e.method.expected_time-t.method.expected_time));return null!==(t=i.find((e=>"default"==e.pack.type)))&&void 0!==t?t:i[0]}return i.method?this.methods.resolve(i.method):null}setMethod(e,t){this.normalize_data();const i=this.data.value.methods.find((t=>xy.Id.equals(t.spot,e)));i?i.method=t?{local_pack_id:t.pack.local_id,method_id:t.method.id}:null:this.data.value.methods.push({spot:o.cloneDeep(e),method:t?{local_pack_id:t.pack.local_id,method_id:t.method.id}:null}),this.data.save()}}i(8538);class by{constructor(){this.handlers=[],this.trigger_count=0,R("alt1pressed",(e=>{this.clean_pass();const t=new by.Event(e),i=o.sortBy(this.handlers.filter((e=>e.isAlive())),(e=>-e.priority));for(const e of i)if(e.apply(t),t.isConsumed())break}))}clean_pass(){this.trigger_count+=1,this.trigger_count>10&&(this.handlers=this.handlers.filter((e=>e.isAlive())))}subscribe(e,t){this.clean_pass();let i=new by.Handler(e,t);return this.handlers.push(i),i}}!function(e){e.Handler=class extends ai{constructor(e,t){super(t),this.priority=e}},e.Event=class{constructor(e){this.raw=e,this.consumed=!1,this.mouse=e.mouseRs,this.mouseScreen=e.mouseAbs,this.text=e.text.length>0?e.text:null}consume(){return this.consumed=!0,this}isConsumed(){return this.consumed}}}(by||(by={}));var ky=B.sampleImage,Ty=B.rgbSimilarity;class Sy{constructor(){this.ewent=pi(),this.last_rect=null,R("menudetected",(e=>{new Sy.Event(e),this.last_rect={origin:{x:e.rectangle.x,y:e.rectangle.y},size:{x:e.rectangle.width,y:e.rectangle.height}},this.ewent.trigger(this.last_rect)}))}check(e){if(!this.last_rect)return null;const t=[28,26,18],i=j.add(this.last_rect.origin,{x:22,y:6});if(yg.contains(e.screenRectangle(),i)){const n=e.getSubSection(yg.relativeTo(e.screenRectangle(),{origin:i,size:{x:1,y:1}})),o=ky(n.getData(),{x:0,y:0});Ty(t,o)<.9&&(this.last_rect=null,this.ewent.trigger(this.last_rect))}return this.last_rect}subscribe(e){return this.ewent.on(e)}}!function(e){e.Event=class{constructor(e){this.raw=e,this.rect={origin:{x:e.rectangle.x,y:e.rectangle.y},size:{x:e.rectangle.width,y:e.rectangle.height}}}}}(Sy||(Sy={}));var Cy=Lg.SliderState,Ey=B.avg,Ay=di.hboxc,zy=di.hgrid,Ly=di.span,Py=B.count,My=di.vbox;const Iy=ou((async()=>await(await fetch("data/sliders.json")).json()));var Oy;!function(e){e.instantiate=async function(e){const t=[];for(;t.length<e.testcase_count;)switch(e.testcase_type){case"crowdsourced":const e=await Iy.get(),i=e[o.random(e.length-1)];Cy.isSolveable(i.state)&&t.push(i.state);break;case"trueshuffle":t.push(Cy.createRandom());break;case"osrsshuffle":t.push(dm.asState(dm.ramenShuffle()))}const i=await Promise.all(e.candidates.map((async e=>{switch(e.type){case"random":return{solver:Em,name:"Random"};case"pdb":const t=await qm.instance.get(),i=`PDB ${e.db}${e.reflect?" +R":""}`;return{solver:new ym(new vm.RegionGraph((await t.getSimple(await t.find(void 0,e.db))).tables,e.reflect)),name:i}}})));return{setup:e,test_cases:t,candidates:i}}}(Oy||(Oy={}));class Dy extends Sg{constructor(e){super(),this.settings=e,this.on_progress=pi()}async implementation(){const e=this.settings.candidates.map((e=>({candidate:e,done_count:0,tests:[],success_count:0,statistics:{average:0,max:0,min:0,standard_deviation:0,success_chance:0,median:0}})));this.on_progress.trigger(e);for(let i=0;i<this.settings.candidates.length;i++){const n=this.settings.candidates[i];for(let o=0;o<this.settings.test_cases.length;o++){if(this.should_stop)return e;const r=this.settings.test_cases[o],s=n.solver.instantiate(r).setCombineStraights("mtm"==this.settings.setup.metric);let a=await s.withTimeout(this.settings.setup.timeout).run();if(this.settings.setup.continuation_solving&&a){const e=2/3*(this.settings.setup.continuation_solving.lookahead/this.settings.setup.continuation_solving.assumed_moves_per_second)*1e3;for(let t=this.settings.setup.continuation_solving.lookahead;t<a.length;t+=this.settings.setup.continuation_solving.lookahead){const i=await n.solver.instantiate(Cy.withMove(r,...a.slice(0,t))).withTimeout(e).setCombineStraights("mtm"==this.settings.setup.metric).registerSolution(a.slice(t)).run();a.splice(t,a.length,...i)}}if(a){let e=Cy.withMove(r,...a);Cy.equals(e,Cy.SOLVED)||(a=null)}e[i].tests.push({start:r,moves:a}),e[i].statistics=(t=e[i].tests,{average:Ey(...t.filter((e=>e.moves)).map((e=>e.moves.length))),min:Math.min(...t.filter((e=>e.moves)).map((e=>e.moves.length))),max:Math.max(...t.filter((e=>e.moves)).map((e=>e.moves.length))),success_chance:Py(t,(e=>!!e.moves))/t.length,median:0,standard_deviation:0}),await this.on_progress.trigger(e)}}var t;return e}onProgress(e){return this.on_progress.on(e),this}}class Ry extends si{constructor(e,t){var i,n,o;super();const r=(new $s).appendTo(this);r.header("Results"),r.paragraph(`On a total of ${e.test_cases.length} configurations with ${(e.setup.timeout/1e3).toFixed(1)}s per configuration.`),r.named("",zy(Ly("Solved"),Ly("Average"),Ly("Performance")));const s=null!==(o=null===(n=null===(i=t[0])||void 0===i?void 0:i.statistics)||void 0===n?void 0:n.average)&&void 0!==o?o:0;for(let i of t)r.named(i.candidate.name,zy(c().text(`${i.tests.length}/${e.test_cases.length}, ${(100*i.statistics.success_chance).toFixed(1)}%`),c().text(i.statistics.average.toFixed(1)),c().text(`${(100*(i.statistics.average/s-1)).toFixed(2)}%`)))}}class By extends si{constructor(){super(),this.settings={timeout:1e3,testcase_count:20,metric:"mtm",testcase_type:"crowdsourced",candidates:[{type:"random"},{type:"pdb",reflect:!1,db:"mtm_huge"},{type:"pdb",reflect:!0,db:"mtm_huge"},{type:"pdb",reflect:!1,db:"mtm_large"},{type:"pdb",reflect:!0,db:"mtm_large"},{type:"pdb",reflect:!1,db:"mtm_large_builtinreflection"}]},this.render()}async render(){this.empty();const e=(new $s).appendTo(this);e.named("Timeout",new Od(100,5e3,100).setValue(this.settings.timeout).onCommit((e=>this.settings.timeout=e))),e.named("Metric",Ay(...new ma.Group([{button:new ma("MTM"),value:"mtm"},{button:new ma("STM"),value:"stm"}]).setValue(this.settings.metric).onChange((e=>this.settings.metric=e)).checkboxes())),e.header("Tests cases"),e.named("Count",new Od(1,100,1).setValue(this.settings.testcase_count).onCommit((e=>this.settings.testcase_count=e))),e.named("Type",Ay(...new ma.Group([{button:new ma("Real"),value:"crowdsourced"},{button:new ma("Shuffle"),value:"trueshuffle"},{button:new ma("Osrs"),value:"osrsshuffle"}]).setValue(this.settings.testcase_type).onChange((e=>this.settings.testcase_type=e)).checkboxes())),e.row(new ma("Continuous solving","checkbox").setValue(!!this.settings.continuation_solving).onCommit((e=>{this.settings.continuation_solving=e?{assumed_moves_per_second:5,lookahead:12}:void 0}))),e.header("Candidates");for(let t=0;t<this.settings.candidates.length;t++){const i=My(),n=this.settings.candidates[t];if(e.named(`Candidate ${t+1}`,i),new Hl({type_class:{toHTML(e){switch(e){case"random":return"Random";case"pdb":return"PDB"}return e}}},["pdb","random"]).setValue(n.type).onSelection((e=>{switch(e){case"random":this.settings.candidates[t]={type:"random"};break;case"pdb":this.settings.candidates[t]={type:"pdb",reflect:!0,db:"mtm_large"}}this.render()})).appendTo(i),"pdb"==n.type){const e=await qm.instance.get().pdbs.get();new Hl({type_class:{toHTML:e=>e}},e.map((e=>e.id))).setValue(n.db).onSelection((e=>{n.db=e})).appendTo(i),new ma("Reflect").setValue(n.reflect).onCommit((e=>n.reflect=e)).appendTo(i)}}e.row(new yl("Add Candidate","rectangle").onClick((()=>{this.settings.candidates.push({type:"random"}),this.render()}))),e.row((new Ll).buttons(new yl("Export"),new yl("Import"),new yl("Run").onClick((async()=>{const e=await Oy.instantiate(this.settings),t=new Dy(e),i=new class extends Ml{render(){super.render(),this.setTitle("Running Benchmarks");const i=(new $s).appendTo(this.body);i.row(new yl("Stop","rectangle").onClick((()=>{t.stop()})));const n=c();i.row(n),t.onProgress((t=>{n.empty(),new Ry(e,t).appendTo(n)}))}};i.hidden.on((()=>t.stop())),i.show(),t.run()}))))}}class Ny extends Ml{constructor(){super(),this.title.set("Slider Solving Benchmark")}render(){super.render(),(new By).appendTo(this.body)}}var jy,Fy=di.hbox,qy=B.numberWithCommas,Uy=di.vbox,Hy=di.hboxc,Vy=B.copyUpdate,$y=B.downloadBinaryFile,Wy=B.cleanedJSON,Zy=Es.imp,Gy=di.hgrid,Ky=di.span;class Yy extends pa{constructor(e=!1){super(),this.locked=e,e?this.css("cursor","not-allowed"):this.addClass("ctr-clickable"),this.css2({width:"30px",height:"30px",border:"1px solid gray",margin:"3px"}),e||this.on("click",(()=>{this.commit((this.get()+1)%3,!0)}))}render(){this.locked?this.css("background-color","gray"):this.css("background-color",["white","orange","blue"][this.get()])}}class Jy extends pa{constructor(){super(),this.onCommit((e=>{this.updatePreview()}))}updatePreview(){if(this.description){const e=new hm.Indexing(this.get());let t=`${qy(e.size)}`;const i=e.size/4;t+=i>1048576?`, ${(i/1024/1024).toFixed(1)}MB`:`, ${(i/1024).toFixed(1)}KB`,e.solves_puzzle&&(t+=", Final"),this.description.text(t)}}render(){super.render(),this.empty();const e=this.get(),t=c().appendTo(this);for(let i=0;i<5;i++){const n=Fy().appendTo(t);for(let t=0;t<5;t++){const o=5*i+t;new Yy([19,23].includes(o)).setValue(e[o]).onCommit((e=>{const t=[...this.get()];t[o]=e,this.commit(t)})).appendTo(n)}}this.description=c().appendTo(this),this.updatePreview()}}class Xy extends pa{constructor(){super();const e=Fy().appendTo(this);Hy(this.region_layout=(new $s).css2({"padding-left":"3px","padding-right":"3px","overflow-y":"auto"})).css("flex-grow",1).appendTo(e);const t=this.menu=(new $s).appendTo(e).css("border-left","1px solid gray").css("display","inline-block").css2({"padding-left":"3px","padding-right":"3px"});t.row(new yl("New Chain","rectangle").css("margin","2px").onClick((()=>{this.setValue([hm.empty()])}))),t.row(new yl("Import","rectangle").css("margin","2px").onClick((async()=>{const e=await new yc(Zy()).do();(null==e?void 0:e.imported)&&this.commit(e.imported,!0)}))),t.row(new yl("Export","rectangle").css("margin","2px").onClick((()=>{mc.do(Wy(this.get()))}))),t.divider(),t.row(new yl("New Region","rectangle").css("margin","2px").onClick((()=>{this.commit(Vy(this.get(),(e=>{e.push(hm.empty())})),!0)})))}render(){const e=this.get();this.region_layout.empty();for(let t=0;t<e.length;t++){const i=e[t];t>0&&this.region_layout.divider();const n=(new Jy).setValue(i);this.region_layout.header(Fy(Hy(`Region ${t}`).css("flex-grow",1),Uu.delete().on("click",(()=>{this.commit(Vy(this.get(),(e=>{e.splice(t,1)})),!0)})),Uu.from("assets/icons/copy.png").on("click",(()=>{this.commit(Vy(this.get(),(e=>{e.push(hm.child(n.get()))})),!0)})))),this.region_layout.row(n.onCommit((e=>{this.commit(Vy(this.get(),(i=>i[t]=e)))})))}}}class Qy extends si{constructor(e){super(),this.value=e,this.editor=(new Xy).setValue(e.regions).appendTo(this),this.editor.menu.divider(),this.editor.menu.row(Uy(...(this.mtm_toggle=new ma.Group([{button:new ma("STM"),value:!1},{button:new ma("MTM"),value:!0}])).setValue(e.multitile).checkboxes())),this.editor.menu.row(new yl("Create tables","rectangle").css("margin","2px").onClick((()=>{const e=new _m.Generator({regions:this.editor.get(),multitile:this.mtm_toggle.get()}),t=new class extends Ml{constructor(){super(),this.setTitle("Table Generation")}render(){super.render(),new iv(e).appendTo(this.body)}};t.show(),t.hidden.on((()=>{e.stop()})),t.shown.on((async()=>{await e.run(),console.log("Chain generator ended")}))})))}}class ev extends si{constructor(e){super(),this.value=e,this.editor=(new Xy).setValue(e.regions).appendTo(this),this.editor.menu.divider(),this.editor.menu.row(new yl("Run Benchmark","rectangle").css("margin","2px").onClick((()=>{const e=this,t=(new class extends Sg{constructor(){super(...arguments),this.progress=mi([])}async implementation(){const t=e.editor.get();for(const e of t){const t=new gm(e,!0,!1),i=await Promise.all(new Array(1e5).fill(null).map((async(e,i)=>(i%1e3==0&&await this.checkTime(),dm.shuffle(t,100))))),n=new hm.Indexing(e),o=100,r=Date.now();for(let e=0;e<o;e++)i.map((e=>n.stateIndex(e)));const s=Date.now();this.progress.update2((t=>t.push({region:e,tests:i.length*o,time:s-r}))),await this.checkTime()}}}).withInterrupt(200,5),i=new class extends Ml{constructor(){super(),this.setTitle("Table Generation"),t.progress.subscribe((e=>{this.body.empty(),this.body.append(Gy(Ky("#"),Ky("Tests"),Ky("Time"),Ky("Indexes/s")));for(let t=0;t<e.length;t++){const i=e[t];this.body.append(Gy(Ky(t.toString()),Ky(i.tests.toString()),Ky(`${(i.time/1e3).toFixed(2)}s`),Ky(`${qy(~~(i.tests/(i.time/1e3)))}/s`)))}}))}render(){super.render()}};i.show(),i.hidden.on((()=>{t.stop()})),i.shown.on((async()=>{await t.run(),console.log("Chain generator ended")}))})))}}class tv extends si{constructor(e){super();for(let t=0;t<e.sub_progress.length;t++){const i=e.sub_progress[t],n=c().css2({height:"30px",border:"1px solid gray",position:"relative","margin-bottom":"5px"}).appendTo(this);c().css2({position:"absolute",left:0,top:0,bottom:0,"z-index":0,width:`${(100*i.nodes/i.region.size).toFixed(1)}%`,"background-color":"orange"}).appendTo(n),c().css2({width:"100%",height:"100%",position:"relative","text-shadow":"-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000","text-align":"center","z-index":1}).text(`Depth ${i.depth}: ${qy(i.nodes)}/${qy(i.region.size)}`).appendTo(n)}e.final_result&&(new Dl("Download File","confirm").onClick((()=>{$y("pdb.bin",e.final_result.data)})).appendTo(this),new Dl("Download Compressed","confirm").onClick((()=>{const t=$r(e.final_result.data);$y("pdb_compressed.bin",t)})).appendTo(this))}}class iv extends si{constructor(e){super(),this.generator=e,e.onProgress((e=>{this.empty(),this.append(new tv(e))}))}}class nv extends Ml{render(){super.render(),this.setTitle("PDB Generation"),new Qy({multitile:!0,regions:[[1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,1,1,0,2,2,1,0,1]]}).appendTo(this.body)}}class ov extends Ml{render(){super.render(),this.setTitle("Index Benchmarking"),new ev({multitile:!0,regions:[[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,2,2,2,2,2,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0],[2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,1,1,0,2,2,1,0,1],[2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,0,1,1,1,0,1],[2,2,2,2,2,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0],[2,2,2,2,2,2,1,1,1,1,2,1,0,0,0,2,1,0,0,0,2,1,0,0,0]]}).appendTo(this.body)}}!function(e){class t{constructor(e,t){this.name=e,this.sub_tests=t}run(){return i(this,0)}}async function i(e,n=0){if(e instanceof t){console.log(`${" ".repeat(n)}Running '${e.name}'`);let t=!0;for(let o of e.sub_tests)t&&(t=await i(o,n+2));return console.log(`${" ".repeat(n)}Result of '${e.name}' ${t?"":"FAILURE"}`),t}{const t=await(async()=>{try{return await e(),!0}catch(e){return!1}})();return console.log(`${" ".repeat(n)}'Running ${e.name}': ${t?"":"FAILURE"}`),t}}e.TestSet=t,e.testset=function(e,...i){return new t(e,i)},e.run=i;class n extends Error{constructor(){super()}}function o(){throw new n}function r(e){e||o()}e.fail=o,e.assert=r,e.assertEquals=function(e,t,i=1e-6){r(Math.abs(e-t)<i)}}(jy||(jy={}));var rv=Lg.SliderState,sv=Lg.SliderPuzzle,av=jy.assert,lv=jy.assert;const cv=(0,jy.testset)("Slider Moves",(async function(){const e=[{existing:[-2,-10],attachment:[-5,2],expected_result:[-2,-15,2]},{existing:[1,5,1],attachment:[-1,5],expected_result:[1,10]},{existing:[5],attachment:[1],expected_result:[5,1]}];let t=!0;for(const i of e){const e=Lg.MoveList.combine(i.existing,i.attachment,!0);o.isEqual(e,i.expected_result)||(console.log(`Expected ${i.expected_result.join(",")}`),console.log(`Got ${e.join(",")}`),t=!1)}lv(t)}),(async function(){const e=[{original:[],compressed:[]},{original:[1,1],compressed:[2]},{original:[1,3],compressed:[4]},{original:[-1,3],compressed:[2]},{original:[5,-1,3,10],compressed:[5,2,10]},{original:[1,5,10,3],compressed:[1,15,3]},{original:[1,5,1,10,3],compressed:[1,5,1,10,3]}];let t=!0;for(const i of e){const e=Lg.MoveList.compress(i.original);o.isEqual(e,i.compressed)||(console.log(`Expected ${i.compressed.join(",")}`),console.log(`Got ${e.join(",")}`),t=!1)}lv(t)}),(async function(){const e=[{original:[],expanded:[]},{original:[5],expanded:[5]},{original:[-5],expanded:[-5]},{original:[-10],expanded:[-5,-5]},{original:[4,5,10],expanded:[1,1,1,1,5,5,5]}];let t=!0;for(const i of e){const e=Lg.MoveList.expand(i.original);o.isEqual(e,i.expanded)||(console.log(`Expected ${i.expanded.join(",")}`),console.log(`Got ${e.join(",")}`),t=!1)}lv(t)}));var uv=jy.fail,hv=jy.testset,dv=jy.assertEquals;const pv=hv("Math",(function(){dv(ee({x:64,y:64},0),64),dv(ee({x:64,y:64},Math.PI/2),64),dv(ee({x:64,y:64},5*Math.PI/4),64*Math.sqrt(2)),dv(ee({x:0,y:64},Math.PI),64),dv(ee({x:0,y:64},-Math.PI),64),dv(ee({x:64,y:0},Math.PI),0),dv(ee({x:64,y:0},-Math.PI),0)})),gv=(0,jy.testset)("Cluetrainer",(async function(){await mg.getReferenceSliders();const e=[{file:"test_assets/sliders/castle_scrambled.png",expected:{theme:"castle",state:[2,20,6,0,16,4,21,1,3,8,9,5,13,7,18,19,10,14,22,15,11,17,23,12,24]}},{file:"test_assets/sliders/castle_solved.png",expected:{theme:"castle",state:rv.SOLVED}},{file:"test_assets/sliders/tree_solved.png",expected:{theme:"tree",state:rv.SOLVED}},{file:"test_assets/sliders/pharaoh_solved.png",expected:{theme:"menaphos_pharaoh",state:rv.SOLVED}},{file:"test_assets/sliders/troll_solved.png",expected:{theme:"troll",state:rv.SOLVED}},{file:"test_assets/sliders/bridge_swapped.png",expected:{theme:"bridge",state:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,21,18,19,17,20,22,23,24]}},{file:"test_assets/sliders/greg_scrambled_low_graphhics.png",expected:{theme:"gregorovic",state:[5,8,13,4,1,2,20,0,14,3,16,7,10,15,6,11,12,19,21,9,18,17,23,22,24]}},{file:"test_assets/sliders/tree_scrambled.png",expected:{theme:"tree",state:[0,6,24,3,4,5,13,8,17,18,10,1,2,11,23,15,16,14,22,21,7,20,19,12,9]}},{file:"test_assets/sliders/tree_scrambled2.png",expected:{theme:"tree",state:[19,4,3,1,0,2,14,7,8,13,23,11,18,20,6,16,9,21,10,5,12,15,17,22,24]}},{file:"test_assets/sliders/tree_scrambled3.png",expected:{theme:"tree",state:[23,2,12,4,10,0,3,24,1,5,8,14,11,9,21,13,17,18,16,22,7,6,15,19,20]}},{file:"test_assets/sliders/tree_scrambled4.png",expected:{theme:"tree",state:[0,3,4,19,2,24,18,16,6,11,7,20,17,1,14,8,9,15,13,5,22,21,23,10,12]}},{file:"test_assets/sliders/rax_solved.png",expected:{theme:"araxxor",state:rv.SOLVED}},{file:"test_assets/sliders/rax_solved2.png",expected:{theme:"araxxor",state:rv.SOLVED}}];let t=0;for(let i of e){const e=await U(i.file),n=await mg.identify(e),o=sv.getState(n);n.theme==i.expected.theme&&rv.equals(o,i.expected.state)?t++:(console.log(`ERROR ${i.file}`),console.log(`Expected ${i.expected.theme}:`),console.log(rv.toString(i.expected.state)),console.log(`Got ${n.theme}:`),console.log(rv.toString(o)))}av(t==e.length)}),(async function(){const e={snake_lengths:[8,8],locks:[{first:{snake:0,tile:1},second:{snake:1,tile:7}},{first:{snake:0,tile:3},second:{snake:1,tile:5}}]},t=[{puzzle:Ag.construct(e,[[0,1,2,3,4,5,6,7],[0,3,2,1,4,5,6,7]]),expected_solution:{end_state:Ag.construct(e,[[0,1,2,3,4,5,6,7],[4,5,6,7,0,3,2,1]]),moves:[{snake_index:0,offset:0},{snake_index:1,offset:4}]}}];let i=!0;for(const e of t){const t=Ag.solve(e.puzzle);Ag.Solution.equals(t,e.expected_solution)||(console.log(`Expected ${Ag.Solution.toString(e.expected_solution)}`),console.log(`Got ${Ag.Solution.toString(t)}`),i=!1)}i||uv()}),cv,pv);var mv=B.selectFile;class fv extends Il{constructor(e=void 0,t,i,n=(()=>!0)){super(),this.acceptedFiles=e,this.data_preprocessor=t,this.data_processor=i,this.handler=n}async commit(e){var t;const i=await this.data_preprocessor(e);if(!i)return;const n=this.data_processor(i);(null===(t=await this.handler(n))||void 0===t||t)&&this.confirm({imported:n})}render(){super.render(),this.title.set("Import");const e=c().css2({position:"relative",width:"100%",height:"20em"}).appendTo(this.body);this.textarea=new Nl({placeholder:"Paste text or drop file here"}).css2({position:"relative",resize:"none",width:"100%",height:"100%","word-break":"break-all"}).on("paste",(e=>{var t;const i=e.originalEvent;e.preventDefault(),e.stopPropagation();const n=i.clipboardData;(null===(t=n.files)||void 0===t?void 0:t.length)>0?this.commit(n.files[0]):this.commit(n.getData("Text"))})).on("drop",(e=>{e.preventDefault(),e.originalEvent.dataTransfer.files.length>0&&this.commit(e.originalEvent.dataTransfer.files[0])})).appendTo(e),this.acceptedFiles&&c().css2({position:"absolute",top:"9em",left:0,right:0,"text-align":"center","z-index":1,cursor:"pointer"}).text("Click here to select file.").on("click",(async()=>{const e=await mv(this.acceptedFiles);e&&this.commit(e)})).appendTo(e),this.textarea.onChange((e=>{this.import_button.setEnabled(!!e.value)}))}getButtons(){return[new Dl("Cancel","cancel").onClick((()=>this.confirm(null))),this.import_button=new Dl("Import","confirm").setEnabled(!1).onClick((()=>{this.commit(this.textarea.get())}))]}static textFile(e,t=(()=>!0),i="text/*"){return new fv(i,fv.preprocess_to_string,e,t).show()}static json(e=o.identity,t=(()=>!0)){return new fv("application/json,.txt",(async e=>{const t=await fv.preprocess_to_string(e);return JSON.parse(t)}),e,t).show()}}!function(e){e.preprocess_to_string=async function(e){return e instanceof File?new Promise((t=>{const i=new FileReader;i.readAsText(e),i.addEventListener("load",(e=>{t(i.result)}))})):e}}(fv||(fv={}));var yv=di.cls,vv=B.formatTime,_v=B.cleanedJSON,xv=di.img,wv=B.downloadTextFile;class bv extends Ml{constructor(e){super({size:"fullscreen"}),this.buffer=e,this.setTitle("Log Viewer")}renderLog(){if(this.body.empty(),this.buffer){const e=yv("nisl-textinput").appendTo(this.body).css("height","unset").css("max-height","100%");for(const t of this.buffer)if(yv("ctr-log-viewer-message").append(c().css("width","100px").text(vv(t.timestamps[0])),c().css("min-width","100px").css("width","100px").css("text-align","center").text(t.message.category),c().text(t.message.body.toString())).appendTo(e),t.message.attachment){const i=yv("ctr-log-viewer-attachment").appendTo(e);switch(t.message.attachment.type){case"object":i.text(_v(t.message.attachment.value,4));break;case"image":i.append(xv(t.message.attachment.value))}}}}getButtons(){return[new Dl("Download file","confirm").onClick((()=>{const e=_v(this.buffer);try{wv(`cluetrainerlog-${Date.now()}.txt`,e)}catch(t){mc.do(e,"Your Alt1 version does not support downloading files. Please copy the contents below and save them to a file instead.")}}))]}render(){super.render(),this.renderLog()}static do(e){return new bv(e).show()}}Lg.SliderState;var kv=di.hbox,Tv=di.spacer,Sv=di.hgrid;class Cv extends Ml{constructor(e){super({size:"fullscreen"}),this.dataset=e,this.title.set("Slider Analysis Modal")}render(){super.render(),this.layout=(new $s).appendTo(this.body),this.run()}async run(){function e(e){const t=o.clamp(510*(1-e),0,255),i=o.clamp(510*e,0,255);return`rgb(${t.toFixed(0)}, ${i.toFixed(0)}, 0)`}this.layout.empty(),await Iy.get(),function(t,i){var n;const o=c();if(t.header(i.original.name),i.counts?t.paragraph(`Analysis based on ${i.original.states.length} initial slider states containing ${null===(n=i.counts)||void 0===n?void 0:n.length} unique states.`):t.paragraph(`Analysis based on ${i.original.states.length} initial slider states.`),t.paragraph("The outer 5 by 5 grid refers to where the respective tile belongs. The inner 5 by 5 grid shows where this tile is most likely to spawn."),i.counts&&i.counts.length!=i.original.states.length)for(let[r,s]of i.counts.filter((e=>e[1].length>1)))t.header(r.toString(),"left",1),t.row(s.map(((e,t)=>`${new Date(e.timestamp).toString()} (${e.theme}, ${e.id})`)).join(", "));t.row(kv(Tv(),o,Tv()));for(let a=0;a<5;a++){const l=Sv().appendTo(o);for(let u=0;u<5;u++){const h=5*a+u,d=i.tile_frequency[h],p=c().css2({border:"1px solid white",padding:"5px",margin:"10px"}).appendTo(l),g=d.map((e=>e/i.original.states.length)),m=Math.max(...g,1/12);for(let f=0;f<5;f++){const y=Sv().appendTo(p);for(let v=0;v<5;v++){const _=5*f+v,x=g[_];function w(e){return e<=1/24?.5*e/(1/24):.5+.5*(e-1/24)/(m-1/24)}c().css2({margin:"2px",border:_==h?"2px solid blue":"2px solid white","border-radius":"3px","max-width":"40px","max-height":"40px","min-width":"40px","min-height":"40px","line-height":"40px","text-align":"center","background-color":0==x?"none":e(w(x)),"text-shadow":"-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000","font-weight":"bold","mix-blend-mode":"difference"}).text(`${(100*x).toFixed(1)}%`).tooltip(i.tile_frequency[h][_].toString()+" samples").appendTo(y)}}}}}(this.layout,function(e){const t=new Array(25).fill(0).map((()=>new Array(25).fill(0)));for(let i of e.states)i.state.forEach(((e,i)=>{t[e][i]++}));return{original:e,tile_frequency:t,counts:void 0}}({name:"Loaded file",states:this.dataset}))}}class Ev extends Ml{constructor(){super(),this.setTitle("Super Secret Development Menu")}render(){super.render();const e=(new $s).appendTo(this.body);e.paragraph("Welcome to the super secret development menu! If you're not a developer, you probably won't find anything useful here, but feel free to take a look around. Important note: Some options may mess up your local data/settings without warning you about it before doing so!"),e.header("General"),e.row(new yl("Log Viewer","rectangle").onClick((()=>{fv.json((e=>e),(e=>{new bv(e).show()}))}))),e.header("Slider Puzzles"),e.row(new yl("Benchmark Solvers","rectangle").onClick((()=>{(new Ny).show()}))),e.row(new yl("Generate PDB","rectangle").onClick((()=>{(new nv).show()}))),e.row(new yl("Benchmark Region Indexing","rectangle").onClick((()=>{(new ov).show()}))),e.row(new yl("Delete local pdbs","rectangle").onClick((()=>{qm.instance.get().clearCache()}))),e.row(new yl("Analyze sliders","rectangle").onClick((()=>{fv.json((e=>e),(e=>{new Cv(e).show()}))}))),e.header("Compass"),e.row(new yl("Calibration Tool","rectangle").onClick((()=>{(new Dg.CalibrationTool).show()}))),e.header("Tests"),e.row(new yl("Run Tests","rectangle").onClick((()=>{gv.run()}))),e.row(new yl("Run makeshift Main","rectangle").onClick((()=>{!async function(){const e=[[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,2,2,2,2,2,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0],[2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,1,1,0,2,2,1,0,1],[2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,0,1,1,1,0,1],[2,2,2,2,2,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0],[2,2,2,2,2,2,1,1,1,1,2,1,0,0,0,2,1,0,0,0,2,1,0,0,0]];for(const t of e)console.log(new gm(t,!1,!1).move_table[25][19].join(","));new gm([2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,1,1,0,2,2,1,0,1],!1,!1)}()}))),e.header("Other"),e.row(new yl("Open Development Utility Layer","rectangle").onClick((()=>{Is().app.menu_bar.switchToTab("utility")})))}}var Av=Es.exp,zv=Es.imp;class Lv{constructor(e,t,i){this.name=e,this.version=t,this.spec=i}async dump(){const e=await Lv.dump(this.spec,this.version);mc.do(Av({type:`${this.name}dataexport`,version:0},!1,!1)(e),"Download this file or copy and paste the text below into a text file.",`${this.name}_v${e.source.version}_datadump${e.source.timestamp}.txt`)}async restore(){await fv.textFile((e=>zv({expected_type:`${this.name}dataexport`,expected_version:0})(e)),(async e=>{const t=e.source.version;await new ac({title:"Restore data dump",body:`Restoring this data dump from ${new Date(e.source.timestamp).toLocaleDateString()} ${new Date(e.source.timestamp).toLocaleTimeString()} will replace all your existing local data. Do you want to proceed?\n\nThe page will be refreshed afterwards.`+(t?"":`Note: This dump is from version ${e.source.version}, but you are currently running version ${this.version}. This can potentially cause issues.`),options:[{kind:"cancel",value:!1,is_cancel:!0,text:"Cancel"},{kind:"confirm",value:!0,is_cancel:!1,text:"Confirm"}]}).do()&&(await Lv.restore(e),window.location.reload())}))}}!function(t){t.createSpec=function(...t){return t.map((t=>t instanceof e.Variable?{type:"localstorage",key:t.key}:{type:"kvstore",store_name:t.store.name,key:t.key}))},t.dump=async function(t,i){async function n(t){switch(t.type){case"localstorage":return e.get(t.key);case"kvstore":return await Xc.get(t.store_name).get(t.key)}}return{source:{version:i,timestamp:Date.now()},components:await Promise.all(t.map((async e=>({field:e,value:await n(e)}))))}},t.restore=async function(t){await Promise.all(t.components.map((async t=>{switch(t.field.type){case"localstorage":e.set(t.field.key,t.value);break;case"kvstore":await Xc.get(t.field.store_name).set(t.field.key,t.value)}})))}}(Lv||(Lv={}));var Pv,Mv=Xg.TeleportSettings,Iv=di.inlineimg,Ov=Bh.render_digspot,Dv=Bh.render_scanregion,Rv=Ds.resolveTeleport,Bv=di.npc,Nv=di.staticentity,jv=di.entity,Fv=uc.notification,qv=ru.log,Uv=di.img;class Hv extends Ml{constructor(){super({disable_close_button:!0,fixed:!0}),this.title.set("Missing Permissions")}render(){super.render();const e=(new $s).appendTo(this.body);e.paragraph("Clue Trainer is missing permissions that are essential for it to function. Please grant the necessary permissions and then check again by clicking the button on the bottom of this modal."),e.header("How to set permissions"),e.paragraph("Open Clue Trainer settings by clicking the small wrench on the top left, next to the buttons to minimize or close the window."),e.row(Uv("media/how_to_set_permissions_1.png")),e.paragraph("Make sure all permissions are checked."),e.row(Uv("media/how_to_set_permissions_2.png")),e.paragraph("Click 'Check' below to check if permissions have correctly been set.")}getButtons(){return[new Dl("Ignore","cancel").onClick((()=>{Fv("Please be aware that Clue Trainer will not work without granting the permissions.","error").show(),this.remove()})),new Dl("Check","confirm").onClick((()=>{alt1?alt1.permissionPixel&&alt1.permissionOverlay&&alt1.permissionGameState?(Fv("Success! Permissions are fine now","information").show(),this.remove()):Fv("Clue Trainer is still missing permissions.","error").show():this.remove()}))]}}!function(e){function t(){return alt1.permissionPixel&&alt1.permissionOverlay&&alt1.permissionGameState}e.arePermissionsFine=t,e.check=function(){alt1.permissionInstalled&&!t()&&(new e).show()}}(Hv||(Hv={})),function(e){e.load_path={name:"load_path",parser:{steps:Es.imp({expected_type:"path",expected_version:0})},default:{},serializer:{},instantiate:e=>e=>{}},e.load_overview={name:"load_overview",parser:{tiers:e=>e.split(",").map((e=>"null"==e?null:e)),types:e=>e.split(",")},default:{tiers:["easy","medium","hard","elite","master",null],types:["anagram","compass","coordinates","cryptic","emote","map","scan","simple","skilling"]},serializer:{tiers:e=>e.join(","),types:e=>e.join(",")},instantiate:({tiers:e,types:t})=>e=>{}},e.load_method={name:"load_method",parser:{},default:{},serializer:{},instantiate:({method:e})=>e=>{}},e.index=[e.load_path,e.load_overview,e.load_method]}(Pv||(Pv={}));class Vv{constructor(){this.storage=new e.Variable("preferences/settings",(()=>null)),this.active_teleport_customization=mi(null).equality(o.isEqual),this.set(Xg.normalize(this.storage.get()))}set(e){this.settings=e,this.storage.set(e),this.active_teleport_customization.set(Mv.inferActiveCustomization(e.teleport_customization))}update(e){const t=o.cloneDeep(this.settings);e(t),this.set(t)}}class $v extends Il{constructor(e){super(),this.app=e}render(){super.render(),this.setTitle("You should update your Alt 1");const e=(new $s).appendTo(this.body);e.paragraph("You are currently on the outdated Alt 1 version 1.5.6. The newest version is 1.6.0. This can potentially lead to issues while using Clue Trainer and other plugins. For example, you will notice that Clue Trainer will re-download databases for slider puzzles on every session instead of caching them locally. Other possible issues include performance problems or crashes."),e.paragraph("Unfortunately, at the current time you can not automatically update from 1.5.6 to 1.6.0. To update manually, you will need to follow these steps:"),e.row(new dy(!0).item("Backup any important data. Unfortunately you will lose all of your local data and settings, as well as all installed third party plugins such as Clue Trainer. Make a backup of everything that's possible to backup. See below to export Clue Trainer data and also remember to save your custom AfkWarden presets!",new dy(!1).item("Alt 1 stores installed apps and their data in ",new jf("%localappdata%/alt1toolkit"),". Backup the ",new jf("config.json")," file and the ",new jf("chromecache")," folder to easily save all of your data.")).item("Uninstall your current Alt 1 version.").item("Download the current Alt 1 installer from <a href='https://runeapps.org/alt1'>https://runeapps.org</a>. This is the only official source of Alt 1!").item("Install the downloaded version of Alt 1. Make sure that your game is closed while you do it or the setup will fail!").item("Install any required third party plugins such as Clue Trainer and restore your data backups.")),e.divider(),e.paragraph("You can save your Clue Trainer data before you update by clicking the button below. On the new version, please visit the 'Data' page in settings to restore your data."),e.row(new Dl("Export Data","confirm").onClick((()=>this.app.data_dump.dump())))}getValueForCancel(){return null}getButtons(){return[new Dl("Remind me another time","confirm").onClick((()=>this.confirm(18144e5)))]}}!function(t){const i=new e.Variable("preferences/dontremindtoupdatealt1until",(()=>null));t.maybeRemind=async function(e){var n;if((null===(n=window.alt1)||void 0===n?void 0:n.permissionInstalled)&&"1.5.6"==alt1.version&&i.get()<Date.now()){const n=await new t(e).do();null!=n&&i.set(Date.now()+n)}}}($v||($v={}));class Wv extends Il{constructor(e){super(),this.app=e}render(){super.render(),this.setTitle("Please Migrate");const e=(new $s).appendTo(this.body);let t="";this.app.in_alt1?t+="Your installation of Clue Trainer is still using 'leridon.github.io/rs3scantrainer'. ":t+="You are currently on leridon.github.io/rs3scantrainer. ",t+="This version of Clue Trainer is hosted using GitHub pages on the Clue Trainer repository, which is currently blocking me from renaming the repository to something more fitting of the current state. When the rename happens, your current installation of Clue Trainer will stop to work.",e.paragraph(t),e.paragraph("Clue Trainer has been available on the custom domain <a href=\"https://cluetrainer.app\">cluetrainer.app</a> since June 6th. Please migrate to that URL before 2024-10-31, at which point the repository will be renamed and Clue Trainer becoming unavailable on the 'leridon.github.io/rs3scantrainer' URL without further notice. Please also take note of the option to export your current data/settings to make migration less painful."),e.paragraph(di.bold(`You have ${Wv.daysLeft()} days left to migrate.`)),this.app.in_alt1&&e.row(new Dl("Install cluetrainer.app","confirm").onClick((()=>new Hf("https://cluetrainer.app").show()))),e.divider(),e.paragraph("If you have any relevant local data or settings on this URL, you can export all of your data using the button below. On the new version, please visit the 'Data' page in settings to restore your data."),e.row(new Dl("Export Data","confirm").onClick((()=>this.app.data_dump.dump())))}getValueForCancel(){return null}getButtons(){return Wv.daysLeft()>=14?[new Dl("Remind me in a week","confirm").onClick((()=>this.confirm(5184e5)))]:[new Dl("Remind me tomorrow","confirm").onClick((()=>this.confirm(864e5)))]}}!function(e){e.deadline=new Date(2024,9,31),e.daysLeft=function(){const t=Date.now();return Math.max(0,Math.floor((e.deadline.getTime()-t)/864e5))}}(Wv||(Wv={}));class Zv extends Ls{constructor(){var t;super(),this.crowdsourcing=new tm(this,"https://api.cluetrainer.app"),this.settings=new Vv,this.in_alt1=!!(null===(t=window.alt1)||void 0===t?void 0:t.permissionInstalled)||!1,this.in_dev_mode=!1,this.main_content=null,this.main_behaviour=this.withSub(new Ps),this.main_hotkey=new by,this.context_menu=new Sy,this.template_resolver=new r({name:"surge",apply:()=>[{type:"domelement",value:Iv("assets/icons/surge.png")}]},{name:"dive",apply:()=>[{type:"domelement",value:Iv("assets/icons/dive.png")}]},{name:"surgedive",apply:()=>[{type:"domelement",value:Iv("assets/icons/surgedive.png")}]},{name:"bladeddive",apply:()=>[{type:"domelement",value:Iv("assets/icons/bladeddive.png")}]},{name:"escape",apply:()=>[{type:"domelement",value:Iv("assets/icons/escape.png")}]},{name:"barge",apply:()=>[{type:"domelement",value:Iv("assets/icons/barge.png")}]},{name:"digspot",apply:([e])=>(ra("safestring"==e.type),[{type:"domelement",value:Ov(e.value)}])},{name:"scanarea",apply:([e])=>(ra("safestring"==e.type),[{type:"domelement",value:Dv(e.value)}])},{name:"teleport",apply:([e,t])=>{ra("safestring"==e.type),ra("safestring"==t.type);let i=Rv({group:e.value,spot:t.value});return i?[{type:"domelement",value:Ks.Teleport.asSpan(i)}]:[{type:"safestring",value:"NULL"}]}},{name:"icon",apply:([e])=>(ra("safestring"==e.type),[{type:"domelement",value:Iv(`assets/icons/${e.value}.png`)}])},{name:"npc",apply:([e])=>(ra("safestring"==e.type),[{type:"domelement",value:Bv(e.value)}])},{name:"object",apply:([e])=>(ra("safestring"==e.type),[{type:"domelement",value:Nv(e.value)}])},{name:"item",apply:([e])=>(ra("safestring"==e.type),[{type:"domelement",value:jv({kind:"item",name:e.value})}])}),this.version=Kf.latest_patch.version,this.startup_settings_storage=new e.Variable("preferences/startupsettings",(()=>({}))),this.startup_settings=mi(this.startup_settings_storage.get()),this.favourites=new wy(pu.instance()),this.data_dump=new Lv("cluetrainer",this.version,Lv.createSpec(this.settings.storage,pu.instance().local_pack_store,this.favourites.data,lc.persistance,Jp.instance().data)),this.in_dev_mode&&qv().log("In development mode")}async begin(){var e;let t,i=si.wrap(ie("#main-content"));if(this.startup_settings.subscribe((e=>this.startup_settings_storage.set(e))),this.notifications=dc.instance().appendTo(ie("body")),i.append(this.menu_bar=new vy(this),this.main_content=c("<div style='display: flex; height: 100%; flex-grow: 1'></div>").append(t=c("<div style='flex-grow: 1; height: 100%'></div>"))),this.map_widget=new Ts(t.container),this.map=this.map_widget.map,this.menu_bar.switchToTab((this.in_alt1,"solve")),null!=this.startup_settings.value().last_loaded_version&&this.startup_settings.value().last_loaded_version!=Kf.latest_patch.version){const t=Kf.log.filter((e=>e.version>this.startup_settings.value().last_loaded_version));if(o.some(t,(e=>!e.silent))){const i=o.findLast(t,(e=>!e.notification));Fv(null!==(e=null==i?void 0:i.notification)&&void 0!==e?e:"There has been an update.").setDuration(3e4).addButton("View patch notes",(e=>{(new Kf.Modal).show(),e.dismiss()})).show()}}if(this.startup_settings.update((e=>e.last_loaded_version=Kf.latest_patch.version)),document.body.addEventListener("keydown",(e=>{"F6"==e.key&&(qv().log("Log exported"),bv.do(qv().get())),"F4"==e.key&&(new Ev).show()})),qv().log(`Clue Trainer v${Kf.latest_patch.version} started`),globalThis.alt1&&(qv().log(`Alt 1 version detected: ${alt1.version}`),qv().log(`Active capture mode: ${alt1.captureMethod}`),qv().log(`Permissions: Installed ${alt1.permissionInstalled}, GameState ${alt1.permissionGameState}, Pixel ${alt1.permissionPixel}, Overlay ${alt1.permissionOverlay}`),qv().log("Settings on startup","Startup",{type:"object",value:o.cloneDeep(this.settings.settings)}),Hv.check()),$v.maybeRemind(this),"leridon.github.io"==window.location.host&&window.location.pathname.startsWith("/rs3scantrainer")){const e=this.startup_settings.value().earliest_next_cluetrainer_dot_app_migration_notice;if(!e||e<Date.now()){const e=await new Wv(this).do();null!=e&&this.startup_settings.update((t=>t.earliest_next_cluetrainer_dot_app_migration_notice=Date.now()+e))}}}end(){}}document.addEventListener("DOMContentLoaded",(e=>{window.alt1&&alt1.identifyAppUrl("appconfig.json"),function(){let e=new Zv;Ms.instance().app=e,e.start()}()}))})(),n})()));