<!DOCTYPE html>
<html lang="en">
<head>
    <title>Clue Trainer</title>

    <script
            src="https://code.jquery.com/jquery-3.6.4.min.js"
            integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
            crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://runeapps.org/nis/nis.css">
    <link rel="stylesheet" type="text/css" href="https://runeapps.org/runeappslib.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
          integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
            integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
            crossorigin=""></script>
    <link rel="stylesheet" href="style.css">
</head>
<script src="./index.bundle.js"></script>
<body class="nis" style="display: flex; flex-direction: column">

<div id="main-content" style="display: flex; flex-direction:row; flex-grow: 1">
    <div class="split-screen" style="max-width: 400px;">
        <div id="cluesearchpanel">

            <div class="flex-fill" style="display: flex; flex-direction: row; margin-top: 6px">
                <div class="search-container" style="flex-grow: 1">
                    <input id="cluesearchbox" type="text" class="nisinput" spellcheck="false"
                           placeholder="Search Clues...">

                    <div id="searchresults">

                    </div>
                </div>

                <div id="menubarcontrols" style="display: flex; overflow: hidden">
                    <div class="nissmallimagebutton togglebutton menubarbutton" id="filtertoggle" title="Filters">
                        <img src="assets/icons/filter.png">
                    </div>

                    <div class="nissmallimagebutton togglebutton menubarbutton" id="lockbutton"
                         title="Automatically solve clues" style="margin-left: 6px">
                        <img src="assets/icons/lockedglass.png">
                    </div>

                    <div class="nissmallimagebutton menubarbutton" id="solvebutton" title="Solve"
                         style="margin-left: 6px">
                        <img src="assets/icons/glass.png">
                    </div>

                    <div class="nissmallimagebutton menubarbutton" id="settingsbutton" title="Setting">
                        <img src="assets/icons/settings.png">
                    </div>

                    <div class="nissmallimagebutton menubarbutton" id="infobutton" title="About">
                        <img src="assets/icons/info.png" class="inline-img">
                    </div>
                </div>
            </div>

            <div id="filters" class="panel">
                <span class="paneltitle">Filters</span>

                <div class="row">
                    <div class="col-2">
                        Tier
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-tier="easy"
                             title="Easy clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-tier="medium"
                             title="Medium clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-tier="hard"
                             title="Hard clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-tier="elite"
                             title="Elite clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-tier="master"
                             title="Master clues">
                            <img src="">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-2 ">
                        Type
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="simple"
                             title="Simple clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="cryptic"
                             title="Cryptic clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="anagram"
                             title="Anagram clues"
                        >
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="emote"
                             title="Emote clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="coordinates"
                             title="Coordinate clues">
                            <img src="">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2">

                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="image"
                             title="Map clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="scan"
                             title="Scan clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="compass"
                             title="Compass clues">
                            <img src="">
                        </div>
                    </div>
                    <div class="col-1">
                        <div class="nissmallimagebutton filterbutton togglebutton" data-type="skilling"
                             title="Skilling clues">
                            <img src="">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="solutionpanel">
            <div class="panel">
                <div style="display: flex">
                    <span class="paneltitle" id="clue-panel-title">Clue</span>
                    <span class="flex-grow-1"></span>
                    <img id="activecluetier" src="" class="icon">
                    <img id="activecluetype" src="" class="icon flex-ri">
                </div>
                <span id="cluetext"></span>
            </div>

            <div id="cluesolution" class="panel">
                <div class="paneltitle">Solution</div>
                <span id="cluesolutioncontent"></span>
            </div>

            <div id="cluemethod" class="panel">
                <div style="display: flex">
                    <span class="paneltitle">Method</span>
                    <span class="flex-grow-1"></span>
                    <span id="methodexplanation" class="img-button">
                        <img src="assets/icons/info.png" class="inline-img">
                    </span>
                </div>

                <div class="cluemethodcontent" data-methodtype="scantree">
                    <nav style="--bs-breadcrumb-divider: '>'; display: inline-block" aria-label="breadcrumb">
                        <ol class="breadcrumb" id="pathview">
                        </ol>
                    </nav>
                    <br>

                    <div class="nextstep">Next: <span id="nextscanstep"></span></div>
                    <div id="scantreeview">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="verticalsep"></div>

    <div class="split-screen">
        <div id="tabcontainer" style="display: block">
            <div class="methodtab contenttab lefttab" data-methodtype="map">Map</div>
            <div class="methodtab contenttab lefttab" data-methodtype="video">Video</div>
            <div class="methodtab contenttab lefttab" data-methodtype="text">Explain</div>
        </div>

        <div class="methodtabcontent" data-methodtype="map">
            <div id="map"></div>
        </div>

        <div class="methodtabcontent" data-methodtype="video">
            <div class="videocontainer">
                <video controls muted loop id="videoplayer">
                    <source id="videosource" src="" type="video/webm">
                </video>

                <div class="attribution" style="flex-grow: 1; min-height: 20px">
                    Clip contributed by <span id="videoclipcontributor"></span>
                </div>
            </div>
        </div>
        <div class="methodtabcontent" data-methodtype="text">
            <div id="textmethodcontent" class="panel">

            </div>
        </div>
    </div>
</div>

<div class="nisseperator" style="position: unset"></div>

<div id="footer" style="flex-grow: 0">
    Created by Zyklop Marco, Based on work from Skillbert, Knowledge powered by <a
        href="https://discord.gg/cluechasers"> <img
        src="assets/icons/cluchasers.png" style="height: 1em"></a>
</div>

<!-- Modals -->
<div class="modal fade" id="modal-scantree-method-explanation" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Scan Routes</h1>

                <div class="icon-button modal-exit exit-button" data-bs-dismiss="modal" aria-label="Close"></div>
            </div>
            <div class="modal-body">

                <h2>What do I need to do?</h2>

                <p>
                    Follow the directions on top of the method panel and tell the app what kind of pulse you observe
                    there by clicking the appropriate button.
                    It will then advance to the next stage and tell you where to go next.
                    Repeat this until you have located the spot or the app tells you which spot you need to dig at.
                </p>

                <p>
                    <span><img src="assets/icons/info.png" class="inline-img"></span> These methods assume that you have
                    a meerkats
                    familiar active to boost your scan range by 5 tiles.
                    If you don't use meerkats, <b>the method will not work and you will get angry.</b> Use meerkats.
                </p>

                <h2>What are pings/pulses and how do they work?</h2>

                <p>
                    For scan clues, at any given tile the speed of pulses around your character give you information
                    about which dig spots still need to be considered.
                    It will tell you if the spot you are looking for is within the scan range (triple pulse),
                    within two times the scan range (double pulse) or beyond two times the scan range (single pulse).
                    Different pulse types can be distinguished by look and by sound.
                    See the video below for details.
                </p>

                <video controls loop id="pingexplanationvideo">
                    <source src="assets/scanassets/pingexplanation.webm" type="video/webm">
                </video>

                <h2>How/Why do the methods work?</h2>

                <p>
                    The method shown here uses the information gained at any given step to narrow down the dig spots
                    you still need to consider.
                    The described paths are carefully crafted to allow both quickly identifying the dig spot and quickly
                    moving between spots by considering surge/dive pathing.
                    The paths are a tree datastructure and for the most part match a <a
                        href="https://en.wikipedia.org/wiki/Ternary_search_tree">ternary search tree</a>.
                </p>

                <h2> What is "Different level" about?</h2>

                <p>
                    Sometimes, a scan clue tells you to try scanning a different level.
                    This can be used to immediately rule out a large portion of dig spots without actually having to go
                    there, and is therefore incorporated into the scan routes where possible.
                    Like always, follow the directions of the method and tell the app if the clue tells you to scan a
                    different level when you get there.
                </p>

                <p>
                    For Dorgesh-Kaan and Brimhaven dungeon, this information tells you whether the dig spot is on the
                    upper or lower floor.
                    For Taverley dungeon and the Fremmenik Slayer Dungeon, for some spots the clue also says to scan a
                    different level when standing outside the dungeon and the dig spot is at a certain spot.
                    This rules out spots before even entering the scan area.
                </p>

            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="modal-about" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">About Scan Trainer</h1>

                <div class="icon-button modal-exit exit-button" data-bs-dismiss="modal" aria-label="Close"></div>
            </div>
            <div class="modal-body">
                <p>
                    Scan trainer is being developed by Leridon (RSN Zyklop Marco) over at <a
                        href="https://github.com/Leridon/rs3scantrainer">GitHub</a>.
                    Join <a href="https://discord.gg/cluechasers"><img src="assets/icons/cluchasers.png"
                                                                       class="inline-img"> Clue Chasers</a> on discord,
                    where conversation about
                    this plugin takes place in <a
                        href="https://discord.com/channels/332595657363685377/1103737270114209825">#scan-trainer</a>.
                </p>

                <p>
                    Current version: <span id="current-version"></span> <sup><a href="javascript:;" id="viewpatchnotes">View
                    patchnotes</a></sup>
                </p>

                <h2>Credits</h2>

                <p>
                    This project would not be possible without the work of Skillbert on <a
                        href="https://www.runeapps.org">runeapps.org</a> and the Alt1 toolkit.
                    This software also includes code from Alt1's official clue solver with kind permission from
                    Skillbert.
                </p>
                <p>
                    The methods included in this plugin are based on the collective knowledge of the Clue Chasers
                    discord, especially on Fiery's guide on efficient scan routes.
                </p>

                <p>
                    Icons and other assets used are owned by Jagex Ltd. and their use is intended to fall under fair
                    dealing as a fan project.
                </p>

            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="modal-public-beta" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Beta Notice</h1>

                <div class="icon-button modal-exit exit-button" data-bs-dismiss="modal" aria-label="Close"></div>
            </div>
            <div class="modal-body">
                <p>
                    <b>This is a public beta release.</b>
                    I am still experimenting with the way routes are presented and how the app is interacted with.
                    Expect bugs, unintuitive and changing behaviour.
                </p>

                <p>
                    Scan trainer is being developed by Leridon (RSN Zyklop Marco) over at <a
                        href="https://github.com/Leridon/rs3scantrainer">GitHub</a>.
                    Join <a href="https://discord.gg/cluechasers"><img src="assets/icons/cluchasers.png"
                                                                       class="inline-img"> Clue Chasers</a> on discord,
                    where conversation about
                    this plugin takes place in <a
                        href="https://discord.com/channels/332595657363685377/1103737270114209825">#scan-trainer</a>.
                </p>

            </div>

            <div class="modal-footer align-content-center">
                <div class="btn-nis" id="beta-notice-dismiss" data-bs-dismiss="modal">I understand, don't show again.
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-patchnotes" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="patch-note-title-new">New update since last visit - Patch notes</h1>
                <h1 class="modal-title fs-5" id="patch-note-title-all">Update history</h1>

                <div class="icon-button modal-exit exit-button" data-bs-dismiss="modal" aria-label="Close"></div>
            </div>
            <div class="modal-body">
                <div class="patchnotesection" data-patchnotes="b0.2">
                    <h2>Version b0.2 - 2023-05-13</h2>
                    <ul>
                        <li>
                            This is the first full public release.
                            It includes scan routes for Ardounge, Dorgesh-Kaan, Falador, Keldagrim, Lumbridge Swamp
                            Caves, Taverley Dungeon, Varrock, and Zanaris.
                        </li>
                        <li>
                            Added display option for equivalence classes<sup><a
                                href="https://github.com/Leridon/rs3scantrainer/blob/master/docs/equivalence_classes.md"
                                target="_blank">What's this?</a></sup> (browser only).
                        </li>
                        <li>Reworked zoom in for scans slightly.</li>
                        <li>Added an embedded explanation for how scan routes work.</li>
                        <li>Added an about/credits section.</li>
                    </ul>
                </div>

            </div>
        </div>
    </div>
</div>


</body>
</html>